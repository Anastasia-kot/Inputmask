{"version":3,"file":"dist/inputmask.min.js","mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;ACVA,IAAI,OAAOA,MAAM,CAACC,cAAc,KAAK,UAAU,EAAE;EAChDD,MAAM,CAACC,cAAc,GAAG,QAAO,MAAM,CAACC,SAAS,MAAK,QAAQ,GAAG,UAAUC,MAAM,EAAE;IAChF,OAAOA,MAAM,CAACD,SAAS;EACxB,CAAC,GAAG,UAAUC,MAAM,EAAE;IACrB,OAAOA,MAAM,CAACC,WAAW,CAACC,SAAS;EACpC,CAAC;AACF;;;;;;;;ACNA;AACA,IAAI,CAACC,KAAK,CAACD,SAAS,CAACE,QAAQ,EAAE;EAC9BP,MAAM,CAACQ,cAAc,CAACF,KAAK,CAACD,SAAS,EAAE,UAAU,EAAE;IAClDI,KAAK,EAAE,eAASC,aAAa,EAAEC,SAAS,EAAE;MAEzC;MACA,IAAI,IAAI,IAAI,IAAI,EAAE;QACjB,MAAM,IAAIC,SAAS,CAAC,iCAAiC,CAAC;MACvD;MAEA,IAAIC,CAAC,GAAGb,MAAM,CAAC,IAAI,CAAC;;MAEpB;MACA,IAAIc,GAAG,GAAGD,CAAC,CAACE,MAAM,KAAK,CAAC;;MAExB;MACA,IAAID,GAAG,KAAK,CAAC,EAAE;QACd,OAAO,KAAK;MACb;;MAEA;MACA;MACA,IAAIE,CAAC,GAAGL,SAAS,GAAG,CAAC;;MAErB;MACA;MACA;MACA;MACA;MACA,IAAIM,CAAC,GAAGC,IAAI,CAACC,GAAG,CAACH,CAAC,IAAI,CAAC,GAAGA,CAAC,GAAGF,GAAG,GAAGI,IAAI,CAACE,GAAG,CAACJ,CAAC,CAAC,EAAE,CAAC,CAAC;;MAEnD;MACA,OAAOC,CAAC,GAAGH,GAAG,EAAE;QACf;QACA;QACA;QACA;QACA,IAAID,CAAC,CAACI,CAAC,CAAC,KAAKP,aAAa,EAAE;UAC3B,OAAO,IAAI;QACZ;QACAO,CAAC,EAAE;MACJ;;MAEA;MACA,OAAO,KAAK;IACb;EACD,CAAC,CAAC;AACH;;;;;;;;AC/CA,IAAMI,MAAM,GAAGC,QAAQ,CAACC,IAAI,CAACC,IAAI,CAACF,QAAQ,CAACE,IAAI,EAAElB,KAAK,CAACD,SAAS,CAACgB,MAAM,CAAC;AACxE,IAAMI,YAAY,GAAGH,QAAQ,CAACC,IAAI,CAACC,IAAI,CAACF,QAAQ,CAACE,IAAI,EAAExB,MAAM,CAACK,SAAS,CAACqB,oBAAoB,CAAC;AAC7F,IAAMC,MAAM,GAAGL,QAAQ,CAACC,IAAI,CAACC,IAAI,CAACF,QAAQ,CAACE,IAAI,EAAElB,KAAK,CAACD,SAAS,CAACsB,MAAM,CAAC;AACxE,IAAMC,IAAI,GAAG5B,MAAM,CAAC4B,IAAI;AAExB,IAAI,CAAC5B,MAAM,CAAC6B,OAAO,EAAE;EACpB7B,MAAM,CAAC6B,OAAO,GAAG,SAASA,OAAO,CAACC,CAAC,EAAE;IACpC,OAAOT,MAAM,CAACO,IAAI,CAACE,CAAC,CAAC,EAAE,UAACC,CAAC,EAAEd,CAAC;MAAA,OAAKU,MAAM,CAACI,CAAC,EAAE,OAAOd,CAAC,KAAK,QAAQ,IAAIQ,YAAY,CAACK,CAAC,EAAEb,CAAC,CAAC,GAAG,CAAC,CAACA,CAAC,EAAEa,CAAC,CAACb,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;IAAA,GAAE,EAAE,CAAC;EAChH,CAAC;AACF;;;;;;;;ACTA,IAAI,CAACe,MAAM,CAAC3B,SAAS,CAACE,QAAQ,EAAE;EAC/ByB,MAAM,CAAC3B,SAAS,CAACE,QAAQ,GAAG,UAAS0B,MAAM,EAAEC,KAAK,EAAE;IACnD,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;MAC9BA,KAAK,GAAG,CAAC;IACV;IAEA,IAAIA,KAAK,GAAGD,MAAM,CAAClB,MAAM,GAAG,IAAI,CAACA,MAAM,EAAE;MACxC,OAAO,KAAK;IACb,CAAC,MAAM;MACN,OAAO,IAAI,CAACoB,OAAO,CAACF,MAAM,EAAEC,KAAK,CAAC,KAAK,CAAC,CAAC;IAC1C;EACD,CAAC;AACF;;;;;;;;ACNA;AACA;AACA;AAAoD;AARpD;AACA;AACA;AACA;AACA;AACA;;AAIA;AACAE,qBAAS,CAACC,iBAAiB,CAAC;EACxB,GAAG,EAAE;IACDC,SAAS,EAAE,gDAAsD;IACjEC,MAAM,EAAE,OAAO,CAAC;EACpB,CAAC;;EACD,GAAG,EAAE;IAAE;IACHD,SAAS,EAAE,mDAAyD;IACpEC,MAAM,EAAE;EACZ,CAAC;EACD,GAAG,EAAE;IAAE;IACHD,SAAS,EAAE,aAAa;IACxBC,MAAM,EAAE;EACZ;AACJ,CAAC,CAAC;AAEF,IAAIC,gBAAgB,GAAG,IAAIC,MAAM,CAAC,oCAAoC,CAAC;AAEvE,SAASC,WAAW,CAACC,IAAI,EAAEC,OAAO,EAAEC,GAAG,EAAEC,MAAM,EAAEC,IAAI,EAAE;EACnD,IAAIF,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,IAAID,OAAO,CAACI,MAAM,CAACH,GAAG,GAAG,CAAC,CAAC,KAAK,GAAG,EAAE;IACjDF,IAAI,GAAGC,OAAO,CAACI,MAAM,CAACH,GAAG,GAAG,CAAC,CAAC,GAAGF,IAAI;IACrC,IAAIE,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,IAAID,OAAO,CAACI,MAAM,CAACH,GAAG,GAAG,CAAC,CAAC,KAAK,GAAG,EAAE;MACjDF,IAAI,GAAGC,OAAO,CAACI,MAAM,CAACH,GAAG,GAAG,CAAC,CAAC,GAAGF,IAAI;IACzC,CAAC,MAAMA,IAAI,GAAG,GAAG,GAAGA,IAAI;EAC5B,CAAC,MAAMA,IAAI,GAAG,IAAI,GAAGA,IAAI;EACzB,OAAOH,gBAAgB,CAACS,IAAI,CAACN,IAAI,CAAC;AACtC;AAGAP,qBAAS,CAACc,aAAa,CAAC;EACpB,SAAS,EAAE;IACPC,KAAK,EAAE;EACX,CAAC;EACD,KAAK,EAAE;IAAE;IACLA,KAAK,EAAE,mBAAmB;IAC1BC,UAAU,EAAE,KAAK;IACjBC,UAAU,EAAE,KAAK;IACjBC,UAAU,EAAE;EAChB,CAAC;EACD,IAAI,EAAE;IAAE;IACJC,IAAI,EAAE,6BAA6B;IACnCC,WAAW,EAAE;MACT,GAAG,EAAE;QACDlB,SAAS,EAAEI;MACf,CAAC;MACD,GAAG,EAAE;QACDJ,SAAS,EAAEI;MACf,CAAC;MACD,GAAG,EAAE;QACDJ,SAAS,EAAEI;MACf,CAAC;MACD,GAAG,EAAE;QACDJ,SAAS,EAAEI;MACf;IACJ,CAAC;IACDe,QAAQ,EAAE,kBAAUC,WAAW,EAAEC,aAAa,EAAEZ,IAAI,EAAE;MAClD,OAAOW,WAAW;IACtB,CAAC;IACDE,SAAS,EAAE,SAAS;IACpBC,WAAW,EAAE;MAAC,GAAG,EAAE;IAAG;EAC1B,CAAC;EACD,OAAO,EAAE;IACL;IACA;IACA;IACAN,IAAI,EAAE,oBAAmC;MAAA,IAAxBO,SAAS,QAATA,SAAS;QAAEC,UAAU,QAAVA,UAAU;MAClC,IAAIC,SAAS,GAAG,2EAA2E;MAC3F,IAAIT,IAAI,GAAGS,SAAS;MACpB,IAAIF,SAAS,EAAE;QACX,KAAK,IAAIG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,UAAU,EAAEE,CAAC,EAAE,EAAE;UACjCV,IAAI,eAAQO,SAAS,SAAGE,SAAS,MAAG;QACxC;MACJ;MACA,OAAOT,IAAI;IACf,CAAC;IACDW,MAAM,EAAE,KAAK;IACb3B,MAAM,EAAE,OAAO;IACfuB,SAAS,EAAE,IAAI;IACfC,UAAU,EAAE,CAAC;IACbI,yBAAyB,EAAE,EAAE;IAC7BC,aAAa,EAAE,uBAAUC,WAAW,EAAEtB,IAAI,EAAE;MACxCsB,WAAW,GAAGA,WAAW,CAACC,WAAW,EAAE;MACvC,OAAOD,WAAW,CAACE,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC;IAC7C,CAAC;IACDf,WAAW,EAAE;MACT,GAAG,EAAE;QACDlB,SAAS,EAAE;MACf,CAAC;MACD,GAAG,EAAE;QACDA,SAAS,EAAE;MACf;IACJ,CAAC;IACDmB,QAAQ,EAAE,kBAAUC,WAAW,EAAEC,aAAa,EAAEZ,IAAI,EAAE;MAClD,OAAOW,WAAW;IACtB,CAAC;IACDE,SAAS,EAAE;EACf,CAAC;EACD,KAAK,EAAE;IACHL,IAAI,EAAE;EACV,CAAC;EACD;EACA;EACA,KAAK,EAAE;IACHA,IAAI,EAAE,WAAW;IACjBC,WAAW,EAAE;MACT,GAAG,EAAE;QACDlB,SAAS,EAAE,2BAA2B;QACtCC,MAAM,EAAE;MACZ;IACJ,CAAC;IACDiC,eAAe,EAAE,IAAI;IACrBpB,UAAU,EAAE;EAChB,CAAC;EACD;EACA;EACA,KAAK,EAAE;IACHG,IAAI,EAAE,aAAa;IACnBkB,cAAc,EAAE,wBAAUzB,MAAM,EAAEH,GAAG,EAAE6B,CAAC,EAAEC,aAAa,EAAE5B,IAAI,EAAEH,OAAO,EAAEE,MAAM,EAAE;MAC5E,IAAI8B,IAAI,GAAGC,gCAAe,CAACrD,IAAI,CAAC,IAAI,EAAE,IAAI,EAAEsD,iCAAoB,CAACtD,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC;MACxF,OAAO,4EAA4E,CAACyB,IAAI,CAAC2B,IAAI,CAACG,IAAI,CAAC,EAAE,CAAC,CAAC;IAC3G;EACJ;AACJ,CAAC,CAAC;;;;;;;;;;;;AC5HF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAoC;AAAA;AAlBpC;AACA;AACA;AACA;AACA;AACA;;AAeA,IAAMC,QAAQ,GAAGC,kBAAM,CAACD,QAAQ;EAAEE,OAAO,GAAG,iBAAiB;AAE7D,SAAS9C,SAAS,CAAC+C,KAAK,EAAEC,OAAO,EAAEC,QAAQ,EAAE;EACzC,IAAI,CAACC,qBAAS,EAAE;IACZ;EACJ;;EAEA;EACA,IAAI,EAAE,IAAI,YAAYlD,SAAS,CAAC,EAAE;IAC9B,OAAO,IAAIA,SAAS,CAAC+C,KAAK,EAAEC,OAAO,EAAEC,QAAQ,CAAC;EAClD;EAEA,IAAI,CAACE,aAAa,GAAGC,qBAAC;EACtB,IAAI,CAACC,EAAE,GAAGC,SAAS;EACnB,IAAI,CAACC,MAAM,GAAG,CAAC,CAAC;EAChB,IAAI,CAAC/C,OAAO,GAAG8C,SAAS;EAExB,IAAIL,QAAQ,KAAK,IAAI,EAAE;IACnB;IACA,IAAIrF,MAAM,CAACK,SAAS,CAACuF,QAAQ,CAACpE,IAAI,CAAC2D,KAAK,CAAC,KAAK,iBAAiB,EAAE;MAC7DC,OAAO,GAAGD,KAAK;IACnB,CAAC,MAAM;MACHC,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;MACvB,IAAID,KAAK,EAAEC,OAAO,CAACD,KAAK,GAAGA,KAAK;IACpC;IACA,IAAI,CAACpC,IAAI,GAAGyC,qBAAC,CAACK,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE,IAAI,CAACC,QAAQ,EAAEV,OAAO,CAAC;IACtD,IAAI,CAACW,YAAY,GAAGX,OAAO,IAAIA,OAAO,CAAC5B,WAAW,KAAKkC,SAAS;IAChE,IAAI,CAACM,WAAW,GAAGZ,OAAO,IAAI,CAAC,CAAC,CAAC,CAAC;IAClCa,YAAY,CAAC,IAAI,CAAClD,IAAI,CAACoC,KAAK,EAAEC,OAAO,EAAE,IAAI,CAACrC,IAAI,CAAC;EACrD;;EAEA;EACA,IAAI,CAACmD,YAAY,GAAG,KAAK,CAAC,CAAC;EAC3B,IAAI,CAACC,SAAS,GAAGT,SAAS;EAC1B,IAAI,CAACU,GAAG,GAAGV,SAAS;EACpB,IAAI,CAACW,cAAc,GAAG,KAAK,CAAC,CAAC;EAC7B,IAAI,CAACC,eAAe,GAAG,KAAK;EAC5B,IAAI,CAACC,SAAS,GAAG,KAAK;EACtB,IAAI,CAACC,SAAS;EACd,IAAI,CAACC,UAAU,GAAG,KAAK;EACvB,IAAI,CAACC,OAAO,GAAG,CAAC;EAChB,IAAI,CAACC,mBAAmB,GAAGjB,SAAS,CAAC,CAAC;EACtC,IAAI,CAACkB,WAAW,GAAG,KAAK;EAAE;EAC1B,IAAI,CAACC,aAAa,GAAG,KAAK;AAC9B;AAEAzE,SAAS,CAAC/B,SAAS,GAAG;EAClByG,aAAa,EAAE,gBAAgB;EAAE;EACjC;EACAhB,QAAQ,EAAEA,oBAAQ;EAClBtC,WAAW,EAAEA,uBAAW;EACxBuD,OAAO,EAAE,CAAC,CAAC;EAAE;EACbC,UAAU,EAAE,CAAC,CAAC;EACd,IAAIC,KAAK,GAAG;IACR,OAAO,IAAI,CAAClE,IAAI,CAACkE,KAAK,IAAI,IAAI,CAAClE,IAAI,CAACmE,YAAY;EACpD,CAAC;EACD3D,IAAI,EAAE,cAAU4D,KAAK,EAAE;IACnB,IAAIC,IAAI,GAAG,IAAI;IACf,IAAI,OAAOD,KAAK,KAAK,QAAQ,EAAE;MAC3BA,KAAK,GAAInC,QAAQ,CAACqC,cAAc,CAACF,KAAK,CAAC,IAAInC,QAAQ,CAACsC,gBAAgB,CAACH,KAAK,CAAE;IAChF;IACAA,KAAK,GAAGA,KAAK,CAACI,QAAQ,GAAG,CAACJ,KAAK,CAAC,GAAI7G,KAAK,CAACkH,OAAO,CAACL,KAAK,CAAC,GAAGA,KAAK,GAAG,EAAE,CAACM,KAAK,CAACjG,IAAI,CAAC2F,KAAK,CAAE,CAAC,CAAC;IAC1FA,KAAK,CAACO,OAAO,CAAC,UAAUjC,EAAE,EAAEkC,GAAG,EAAE;MAC7B,IAAIC,UAAU,GAAGpC,qBAAC,CAACK,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,EAAEuB,IAAI,CAACrE,IAAI,CAAC;MAC9C,IAAI8E,sBAAsB,CAACpC,EAAE,EAAEmC,UAAU,EAAEpC,qBAAC,CAACK,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,EAAEuB,IAAI,CAACpB,WAAW,CAAC,EAAEoB,IAAI,CAACN,aAAa,CAAC,EAAE;QAClG,IAAIlE,OAAO,GAAG,IAAAkF,0BAAe,EAACF,UAAU,EAAER,IAAI,CAACrB,YAAY,CAAC;QAC5D,IAAInD,OAAO,KAAK8C,SAAS,EAAE;UACvB,IAAID,EAAE,CAACsC,SAAS,KAAKrC,SAAS,EAAE;YAC5BD,EAAE,CAACsC,SAAS,CAAChF,IAAI,CAACK,UAAU,GAAG,IAAI,CAAC,CAAC;YACrCqC,EAAE,CAACsC,SAAS,CAACC,MAAM,EAAE;UACzB;UACA;UACAvC,EAAE,CAACsC,SAAS,GAAG,IAAI3F,SAAS,CAACsD,SAAS,EAAEA,SAAS,EAAE,IAAI,CAAC;UACxDD,EAAE,CAACsC,SAAS,CAAChF,IAAI,GAAG6E,UAAU;UAC9BnC,EAAE,CAACsC,SAAS,CAAChC,YAAY,GAAGqB,IAAI,CAACrB,YAAY;UAC7CN,EAAE,CAACsC,SAAS,CAAC/B,WAAW,GAAGR,qBAAC,CAACK,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,EAAEuB,IAAI,CAACpB,WAAW,CAAC;UAC/D;UACAP,EAAE,CAACsC,SAAS,CAACtC,EAAE,GAAGA,EAAE;UACpBA,EAAE,CAACsC,SAAS,CAAC3B,GAAG,GAAG,IAAAZ,qBAAC,EAACC,EAAE,CAAC;UACxBA,EAAE,CAACsC,SAAS,CAACnF,OAAO,GAAGA,OAAO;UAE9B4C,qBAAC,CAACyC,IAAI,CAACxC,EAAE,EAAEP,OAAO,EAAEkC,IAAI,CAACpB,WAAW,CAAC;UACrCzC,UAAI,CAAC/B,IAAI,CAACiE,EAAE,CAACsC,SAAS,CAAC;QAC3B;MACJ;IACJ,CAAC,CAAC;IACF,OAAOZ,KAAK,IAAIA,KAAK,CAAC,CAAC,CAAC,GAAIA,KAAK,CAAC,CAAC,CAAC,CAACY,SAAS,IAAI,IAAI,GAAI,IAAI;EAClE,CAAC;EACDG,MAAM,EAAE,gBAAU9C,OAAO,EAAE+C,QAAQ,EAAE;IAAE;IACnC,IAAI,OAAO/C,OAAO,KAAK,QAAQ,EAAE;MAC7B,OAAO,IAAI,CAACrC,IAAI,CAACqC,OAAO,CAAC;IAC7B,CAAC,MAAM,IAAI,QAAOA,OAAO,MAAK,QAAQ,EAAE;MACpCI,qBAAC,CAACK,MAAM,CAAC,IAAI,CAACG,WAAW,EAAEZ,OAAO,CAAC,CAAC,CAAC;MACrC;MACA,IAAI,IAAI,CAACK,EAAE,IAAI0C,QAAQ,KAAK,IAAI,EAAE;QAC9B,IAAI,CAAC5E,IAAI,CAAC,IAAI,CAACkC,EAAE,CAAC;MACtB;MACA,OAAO,IAAI;IACf;EACJ,CAAC;EACD2C,aAAa,EAAE,uBAAU3H,KAAK,EAAE;IAC5B,IAAI,CAACmC,OAAO,GAAG,IAAI,CAACA,OAAO,IAAI,IAAAkF,0BAAe,EAAC,IAAI,CAAC/E,IAAI,EAAE,IAAI,CAACgD,YAAY,CAAC;IAC5E,IAAI,IAAI,CAACN,EAAE,KAAKC,SAAS,IAAIjF,KAAK,KAAKiF,SAAS,EAAE;MAC9C,IAAI2C,WAAW,GAAG,CAAC,OAAO,IAAI,CAACtF,IAAI,CAACuF,YAAY,KAAK,UAAU,GAAI,IAAI,CAACvF,IAAI,CAACuF,YAAY,CAAC9G,IAAI,CAAC,IAAI,EAAEf,KAAK,EAAE,IAAI,CAACsC,IAAI,CAAC,IAAItC,KAAK,GAAIA,KAAK,EAAE8H,KAAK,CAAC,EAAE,CAAC;MACnJC,uBAAQ,CAAChH,IAAI,CAAC,IAAI,EAAEkE,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE2C,WAAW,CAAC;MACzD,IAAI,OAAO,IAAI,CAACtF,IAAI,CAAC0F,aAAa,KAAK,UAAU,EAAE,IAAI,CAAC1F,IAAI,CAAC0F,aAAa,CAACjH,IAAI,CAAC,IAAI,EAAEkE,SAAS,EAAEgD,sBAAS,CAAClH,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,IAAI,CAACuB,IAAI,CAAC;IACxI;IACA,OAAOqF,4BAAa,CAAC5G,IAAI,CAAC,IAAI,EAAE,IAAI,CAACiE,EAAE,CAAC;EAC5C,CAAC;EACDuC,MAAM,EAAE,kBAAY;IAChB,IAAI,IAAI,CAACvC,EAAE,EAAE;MACTD,qBAAC,CAACyC,IAAI,CAAC,IAAI,CAACxC,EAAE,EAAEP,OAAO,EAAE,IAAI,CAAC,CAAC,CAAC;MAChC;MACA,IAAIyD,EAAE,GAAG,IAAI,CAAC5F,IAAI,CAACK,UAAU,GAAG,IAAAgF,4BAAa,EAAC,IAAI,CAAC3C,EAAE,CAAC,GAAG,IAAI,CAACmD,SAAS,CAAC,IAAI,CAAC7F,IAAI,CAACK,UAAU,CAAC;MAC7F,IAAIuF,EAAE,KAAKE,8BAAiB,CAACrH,IAAI,CAAC,IAAI,CAAC,CAACuD,IAAI,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC+D,SAAS,CAACH,EAAE,EAAE,IAAI,CAAC5F,IAAI,CAACK,UAAU,CAAC,CAAC,KAAM,IAAI,CAAC0F,SAAS,CAAC,EAAE,CAAC;MACnH;MACAC,sBAAU,CAACC,GAAG,CAAC,IAAI,CAACvD,EAAE,CAAC;;MAEvB;MACA,IAAIwD,aAAa;MACjB,IAAIjJ,MAAM,CAACkJ,wBAAwB,IAAIlJ,MAAM,CAACC,cAAc,EAAE;QAC1DgJ,aAAa,GAAGjJ,MAAM,CAACkJ,wBAAwB,CAAClJ,MAAM,CAACC,cAAc,CAAC,IAAI,CAACwF,EAAE,CAAC,EAAE,OAAO,CAAC;QACxF,IAAIwD,aAAa,EAAE;UACf,IAAI,IAAI,CAACE,UAAU,EAAE;YACjBnJ,MAAM,CAACQ,cAAc,CAAC,IAAI,CAACiF,EAAE,EAAE,OAAO,EAAE;cACpC2D,GAAG,EAAE,IAAI,CAACD,UAAU;cACpBE,GAAG,EAAE,IAAI,CAACC,UAAU;cACpBC,YAAY,EAAE;YAClB,CAAC,CAAC;UACN;QACJ;MACJ,CAAC,MAAM,IAAIvE,QAAQ,CAACwE,gBAAgB,IAAI,IAAI,CAAC/D,EAAE,CAAC+D,gBAAgB,CAAC,OAAO,CAAC,EAAE;QACvE,IAAI,IAAI,CAACL,UAAU,EAAE;UACjB,IAAI,CAAC1D,EAAE,CAACgE,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAACN,UAAU,CAAC;UAClD,IAAI,CAAC1D,EAAE,CAACiE,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAACJ,UAAU,CAAC;QACtD;MACJ;MACA;MACA,IAAI,CAAC7D,EAAE,CAACsC,SAAS,GAAGrC,SAAS;IACjC;IACA,OAAO,IAAI,CAACD,EAAE;EAClB,CAAC;EACDkE,YAAY,EAAE,wBAAY;IAAE;IACxB,IAAI,CAAC/G,OAAO,GAAG,IAAI,CAACA,OAAO,IAAI,IAAAkF,0BAAe,EAAC,IAAI,CAAC/E,IAAI,EAAE,IAAI,CAACgD,YAAY,CAAC;IAC5E,OAAO,CAAC,IAAI,CAACkB,KAAK,GAAG4B,8BAAiB,CAACrH,IAAI,CAAC,IAAI,CAAC,CAACoI,OAAO,EAAE,GAAGf,8BAAiB,CAACrH,IAAI,CAAC,IAAI,CAAC,EAAEuD,IAAI,CAAC,EAAE,CAAC;EACxG,CAAC;EACD8E,cAAc,EAAE,0BAAY;IAAE;IAC1B,OAAO,CAAC,IAAI,CAAC9G,IAAI,CAACK,UAAU;EAChC,CAAC;EACD0G,UAAU,EAAE,sBAAY;IACpB,IAAI,CAAClH,OAAO,GAAG,IAAI,CAACA,OAAO,IAAI,IAAAkF,0BAAe,EAAC,IAAI,CAAC/E,IAAI,EAAE,IAAI,CAACgD,YAAY,CAAC;IAC5E,OAAO+D,sBAAU,CAACtI,IAAI,CAAC,IAAI,EAAEkH,sBAAS,CAAClH,IAAI,CAAC,IAAI,CAAC,CAAC;EACtD,CAAC;EACDuI,WAAW,EAAE,uBAAY;IAAE;IACvB,IAAI,CAACnH,OAAO,GAAG,IAAI,CAACA,OAAO,IAAI,IAAAkF,0BAAe,EAAC,IAAI,CAAC/E,IAAI,EAAE,IAAI,CAACgD,YAAY,CAAC;IAC5E,IAAIzF,KAAK,CAACkH,OAAO,CAAC,IAAI,CAAC5E,OAAO,CAACoH,QAAQ,CAAC,EAAE;MACtC,IAAIC,UAAU,GAAGpF,gCAAe,CAACrD,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,KAAK,CAAC,CAACuD,IAAI,CAAC,EAAE,CAAC;MACpE,IAAI,CAACnC,OAAO,CAACoH,QAAQ,CAACtC,OAAO,CAAC,UAAUwC,IAAI,EAAE;QAC1C,IAAIA,IAAI,CAAC3G,IAAI,KAAK0G,UAAU,EAAE;UAC1BA,UAAU,GAAGC,IAAI;UACjB,OAAO,KAAK;QAChB;QAEA,OAAO,IAAI;MACf,CAAC,CAAC;MACF,OAAOD,UAAU;IACrB;IACA,OAAO,IAAI,CAACrH,OAAO,CAACoH,QAAQ;EAChC,CAAC;EACDG,OAAO,EAAE,iBAAU1J,KAAK,EAAE;IACtB,IAAI,CAACmC,OAAO,GAAG,IAAI,CAACA,OAAO,IAAI,IAAAkF,0BAAe,EAAC,IAAI,CAAC/E,IAAI,EAAE,IAAI,CAACgD,YAAY,CAAC;IAC5E,IAAItF,KAAK,EAAE;MACP,IAAI4H,WAAW,GAAG,CAAC,OAAO,IAAI,CAACtF,IAAI,CAACuF,YAAY,KAAK,UAAU,GAAI,IAAI,CAACvF,IAAI,CAACuF,YAAY,CAAC9G,IAAI,CAAC,IAAI,EAAEf,KAAK,EAAE,IAAI,CAACsC,IAAI,CAAC,IAAItC,KAAK,GAAIA,KAAK,EAAE8H,KAAK,CAAC,EAAE,CAAC;MACnJC,uBAAQ,CAAChH,IAAI,CAAC,IAAI,EAAEkE,SAAS,EAAE,IAAI,EAAE,KAAK,EAAE2C,WAAW,CAAC;IAC5D,CAAC,MAAM;MACH5H,KAAK,GAAG,IAAI,CAACwG,KAAK,GAAGyB,sBAAS,CAAClH,IAAI,CAAC,IAAI,CAAC,CAACiG,KAAK,EAAE,CAACmC,OAAO,EAAE,CAAC7E,IAAI,CAAC,EAAE,CAAC,GAAG2D,sBAAS,CAAClH,IAAI,CAAC,IAAI,CAAC,CAACuD,IAAI,CAAC,EAAE,CAAC;IACxG;IACA,IAAI/B,MAAM,GAAG0F,sBAAS,CAAClH,IAAI,CAAC,IAAI,CAAC;IACjC,IAAI4I,EAAE,GAAGC,0CAA6B,CAAC7I,IAAI,CAAC,IAAI,CAAC;MAC7C8I,IAAI,GAAGtH,MAAM,CAACjC,MAAM,GAAG,CAAC;IAC5B,OAAOuJ,IAAI,GAAGF,EAAE,EAAEE,IAAI,EAAE,EAAE;MACtB,IAAIC,mBAAM,CAAC/I,IAAI,CAAC,IAAI,EAAE8I,IAAI,CAAC,EAAE;IACjC;IACAtH,MAAM,CAACwH,MAAM,CAACJ,EAAE,EAAEE,IAAI,GAAG,CAAC,GAAGF,EAAE,CAAC;IAEhC,OAAON,sBAAU,CAACtI,IAAI,CAAC,IAAI,EAAEwB,MAAM,CAAC,IAAIvC,KAAK,MAAM,IAAI,CAACwG,KAAK,GAAGyB,sBAAS,CAAClH,IAAI,CAAC,IAAI,CAAC,CAACiG,KAAK,EAAE,CAACmC,OAAO,EAAE,CAAC7E,IAAI,CAAC,EAAE,CAAC,GAAG2D,sBAAS,CAAClH,IAAI,CAAC,IAAI,CAAC,CAACuD,IAAI,CAAC,EAAE,CAAC,CAAC;EAEpJ,CAAC;EACD0F,MAAM,EAAE,gBAAUhK,KAAK,EAAEuJ,QAAQ,EAAE;IAC/B,IAAI,CAACpH,OAAO,GAAG,IAAI,CAACA,OAAO,IAAI,IAAAkF,0BAAe,EAAC,IAAI,CAAC/E,IAAI,EAAE,IAAI,CAACgD,YAAY,CAAC;IAC5E,IAAIsC,WAAW,GAAG,CAAC,OAAO,IAAI,CAACtF,IAAI,CAACuF,YAAY,KAAK,UAAU,GAAI,IAAI,CAACvF,IAAI,CAACuF,YAAY,CAAC9G,IAAI,CAAC,IAAI,EAAEf,KAAK,EAAE,IAAI,CAACsC,IAAI,CAAC,IAAItC,KAAK,GAAIA,KAAK,EAAE8H,KAAK,CAAC,EAAE,CAAC;IACnJC,uBAAQ,CAAChH,IAAI,CAAC,IAAI,EAAEkE,SAAS,EAAE,IAAI,EAAE,KAAK,EAAE2C,WAAW,CAAC;IACxD,IAAIqC,cAAc,GAAG,IAAI,CAACzD,KAAK,GAAGyB,sBAAS,CAAClH,IAAI,CAAC,IAAI,CAAC,CAACiG,KAAK,EAAE,CAACmC,OAAO,EAAE,CAAC7E,IAAI,CAAC,EAAE,CAAC,GAAG2D,sBAAS,CAAClH,IAAI,CAAC,IAAI,CAAC,CAACuD,IAAI,CAAC,EAAE,CAAC;IACjH,OAAOiF,QAAQ,GAAG;MACdvJ,KAAK,EAAEiK,cAAc;MACrBV,QAAQ,EAAE,IAAI,CAACD,WAAW;IAC9B,CAAC,GAAGW,cAAc;EACtB,CAAC;EACDC,QAAQ,EAAE,kBAAUlK,KAAK,EAAE;IACvB,IAAI,IAAI,CAACgF,EAAE,EAAE;MACT,IAAAD,qBAAC,EAAC,IAAI,CAACC,EAAE,CAAC,CAACmF,OAAO,CAAC,UAAU,EAAE,CAACnK,KAAK,CAAC,CAAC;IAC3C;EACJ,CAAC;EACDoK,WAAW,EAAEA;AACjB,CAAC;AAED,SAAS5E,YAAY,CAAC6E,QAAQ,EAAE1F,OAAO,EAAErC,IAAI,EAAE;EAC3C,IAAIgI,eAAe,GAAG3I,SAAS,CAAC/B,SAAS,CAAC0G,OAAO,CAAC+D,QAAQ,CAAC;EAC3D,IAAIC,eAAe,EAAE;IACjB,IAAIA,eAAe,CAAC5F,KAAK,EAAEc,YAAY,CAAC8E,eAAe,CAAC5F,KAAK,EAAEO,SAAS,EAAE3C,IAAI,CAAC,CAAC,CAAC;IACjFyC,qBAAC,CAACK,MAAM,CAAC,IAAI,EAAE9C,IAAI,EAAEgI,eAAe,CAAC,CAAC,CAAC;IACvCvF,qBAAC,CAACK,MAAM,CAAC,IAAI,EAAE9C,IAAI,EAAEqC,OAAO,CAAC,CAAC,CAAC;IAC/B,OAAO,IAAI;EACf,CAAC;IAAM;IACP,IAAIrC,IAAI,CAACQ,IAAI,KAAK,IAAI,EAAE;MACpBR,IAAI,CAACQ,IAAI,GAAGuH,QAAQ;IACxB;EAEA,OAAO,KAAK;AAChB;AAEA,SAASjD,sBAAsB,CAACmD,GAAG,EAAEjI,IAAI,EAAEiD,WAAW,EAAEc,aAAa,EAAE;EACnE,SAASmE,YAAY,CAAC/C,MAAM,EAAEgD,UAAU,EAAE;IACtC,IAAMC,UAAU,GAAGrE,aAAa,KAAK,EAAE,GAAGoB,MAAM,GAAGpB,aAAa,GAAG,GAAG,GAAGoB,MAAM;IAC/EgD,UAAU,GAAGA,UAAU,KAAKxF,SAAS,GAAGwF,UAAU,GAAGF,GAAG,CAACI,YAAY,CAACD,UAAU,CAAC;IACjF,IAAID,UAAU,KAAK,IAAI,EAAE;MACrB,IAAI,OAAOA,UAAU,KAAK,QAAQ,EAAE;QAChC,IAAIhD,MAAM,CAAC/F,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;UAC5B+I,UAAU,GAAGjG,kBAAM,CAACiG,UAAU,CAAC;QACnC,CAAC;QAAA,KACI,IAAIA,UAAU,KAAK,OAAO,EAAE;UAC7BA,UAAU,GAAG,KAAK;QACtB,CAAC,MAAM,IAAIA,UAAU,KAAK,MAAM,EAAEA,UAAU,GAAG,IAAI;MACvD;MACAlF,WAAW,CAACkC,MAAM,CAAC,GAAGgD,UAAU;IACpC;EACJ;EAEA,IAAInI,IAAI,CAACsI,oBAAoB,KAAK,IAAI,EAAE;IACpC,IAAIC,WAAW,GAAGN,GAAG,CAACI,YAAY,CAACtE,aAAa,CAAC;MAAEoB,MAAM;MAAEqD,WAAW;MAAEL,UAAU;MAAEM,CAAC;IAErF,IAAIF,WAAW,IAAIA,WAAW,KAAK,EAAE,EAAE;MACnCA,WAAW,GAAGA,WAAW,CAAC/G,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC;MAC7CgH,WAAW,GAAGE,IAAI,CAACC,KAAK,CAAC,GAAG,GAAGJ,WAAW,GAAG,GAAG,CAAC;IACrD;;IAEA;IACA,IAAIC,WAAW,EAAE;MAAE;MACfL,UAAU,GAAGxF,SAAS;MACtB,KAAK8F,CAAC,IAAID,WAAW,EAAE;QACnB,IAAIC,CAAC,CAAClH,WAAW,EAAE,KAAK,OAAO,EAAE;UAC7B4G,UAAU,GAAGK,WAAW,CAACC,CAAC,CAAC;UAC3B;QACJ;MACJ;IACJ;IACAP,YAAY,CAAC,OAAO,EAAEC,UAAU,CAAC,CAAC,CAAC;IACnC,IAAIlF,WAAW,CAACb,KAAK,EAAE;MACnBc,YAAY,CAACD,WAAW,CAACb,KAAK,EAAEa,WAAW,EAAEjD,IAAI,CAAC;IACtD;IAEA,KAAKmF,MAAM,IAAInF,IAAI,EAAE;MACjB,IAAIwI,WAAW,EAAE;QACbL,UAAU,GAAGxF,SAAS;QACtB,KAAK8F,CAAC,IAAID,WAAW,EAAE;UACnB,IAAIC,CAAC,CAAClH,WAAW,EAAE,KAAK4D,MAAM,CAAC5D,WAAW,EAAE,EAAE;YAC1C4G,UAAU,GAAGK,WAAW,CAACC,CAAC,CAAC;YAC3B;UACJ;QACJ;MACJ;MACAP,YAAY,CAAC/C,MAAM,EAAEgD,UAAU,CAAC;IACpC;EACJ;EACA1F,qBAAC,CAACK,MAAM,CAAC,IAAI,EAAE9C,IAAI,EAAEiD,WAAW,CAAC;;EAEjC;EACA,IAAIgF,GAAG,CAACW,GAAG,KAAK,KAAK,IAAI5I,IAAI,CAAC6I,UAAU,EAAE;IACtCZ,GAAG,CAACa,KAAK,CAACC,SAAS,GAAG,OAAO;EACjC;EAEA,IAAId,GAAG,CAACW,GAAG,KAAK,KAAK,IAAI5I,IAAI,CAACmE,YAAY,EAAE;IACxC8D,GAAG,CAACW,GAAG,GAAG,KAAK;IACfX,GAAG,CAACe,eAAe,CAAC,KAAK,CAAC;IAC1BhJ,IAAI,CAACkE,KAAK,GAAG,IAAI;EACrB;EAEA,OAAOjH,MAAM,CAAC4B,IAAI,CAACoE,WAAW,CAAC,CAACjF,MAAM;AAC1C;;AAEA;AACAqB,SAAS,CAAC4J,cAAc,GAAG,UAAU5G,OAAO,EAAE;EAC1CI,qBAAC,CAACK,MAAM,CAAC,IAAI,EAAEzD,SAAS,CAAC/B,SAAS,CAACyF,QAAQ,EAAEV,OAAO,CAAC;AACzD,CAAC;AACDhD,SAAS,CAACC,iBAAiB,GAAG,UAAU4J,UAAU,EAAE;EAChDzG,qBAAC,CAACK,MAAM,CAAC,IAAI,EAAEzD,SAAS,CAAC/B,SAAS,CAACmD,WAAW,EAAEyI,UAAU,CAAC;AAC/D,CAAC;AACD7J,SAAS,CAACc,aAAa,GAAG,UAAUiC,KAAK,EAAE;EACvCK,qBAAC,CAACK,MAAM,CAAC,IAAI,EAAEzD,SAAS,CAAC/B,SAAS,CAAC0G,OAAO,EAAE5B,KAAK,CAAC;AACtD,CAAC;AACD;AACA/C,SAAS,CAACqI,MAAM,GAAG,UAAUhK,KAAK,EAAE2E,OAAO,EAAE4E,QAAQ,EAAE;EACnD,OAAO5H,SAAS,CAACgD,OAAO,CAAC,CAACqF,MAAM,CAAChK,KAAK,EAAEuJ,QAAQ,CAAC;AACrD,CAAC;AACD5H,SAAS,CAAC8J,MAAM,GAAG,UAAUzL,KAAK,EAAE2E,OAAO,EAAE;EACzC,OAAOhD,SAAS,CAACgD,OAAO,CAAC,CAACgD,aAAa,CAAC3H,KAAK,CAAC;AAClD,CAAC;AACD2B,SAAS,CAAC+H,OAAO,GAAG,UAAU1J,KAAK,EAAE2E,OAAO,EAAE;EAC1C,OAAOhD,SAAS,CAACgD,OAAO,CAAC,CAAC+E,OAAO,CAAC1J,KAAK,CAAC;AAC5C,CAAC;AACD2B,SAAS,CAAC4F,MAAM,GAAG,UAAUb,KAAK,EAAE;EAChC,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;IAC3BA,KAAK,GAAGnC,QAAQ,CAACqC,cAAc,CAACF,KAAK,CAAC,IAAInC,QAAQ,CAACsC,gBAAgB,CAACH,KAAK,CAAC;EAC9E;EACAA,KAAK,GAAGA,KAAK,CAACI,QAAQ,GAAG,CAACJ,KAAK,CAAC,GAAGA,KAAK;EACxCA,KAAK,CAACO,OAAO,CAAC,UAAUjC,EAAE,EAAE;IACxB,IAAIA,EAAE,CAACsC,SAAS,EAAEtC,EAAE,CAACsC,SAAS,CAACC,MAAM,EAAE;EAC3C,CAAC,CAAC;AACN,CAAC;AACD5F,SAAS,CAACuI,QAAQ,GAAG,UAAUxD,KAAK,EAAE1G,KAAK,EAAE;EACzC,IAAI,OAAO0G,KAAK,KAAK,QAAQ,EAAE;IAC3BA,KAAK,GAAGnC,QAAQ,CAACqC,cAAc,CAACF,KAAK,CAAC,IAAInC,QAAQ,CAACsC,gBAAgB,CAACH,KAAK,CAAC;EAC9E;EACAA,KAAK,GAAGA,KAAK,CAACI,QAAQ,GAAG,CAACJ,KAAK,CAAC,GAAGA,KAAK;EACxCA,KAAK,CAACO,OAAO,CAAC,UAAUjC,EAAE,EAAE;IACxB,IAAIA,EAAE,CAACsC,SAAS,EAAEtC,EAAE,CAACsC,SAAS,CAAC4C,QAAQ,CAAClK,KAAK,CAAC,CAAC,KAAM,IAAA+E,qBAAC,EAACC,EAAE,CAAC,CAACmF,OAAO,CAAC,UAAU,EAAE,CAACnK,KAAK,CAAC,CAAC;EAC3F,CAAC,CAAC;AACN,CAAC;AAED2B,SAAS,CAACmD,aAAa,GAAGC,qBAAC;;AAE3B;AACAP,kBAAM,CAAC7C,SAAS,GAAGA,SAAS;AAAC,eACdA,SAAS;AAAA;;;;;;;;;;;;ACjWxB;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA,SAASmB,IAAI,GAAG;EACZ,IAAMwE,SAAS,GAAG,IAAI;IAClBhF,IAAI,GAAG,IAAI,CAACA,IAAI;IAChB0C,EAAE,GAAG,IAAI,CAACA,EAAE;IAAED,CAAC,GAAG,IAAI,CAACD,aAAa;EAGxC,SAAS4G,sBAAsB,CAACC,KAAK,EAAErJ,IAAI,EAAE;IACzC,SAASsJ,kBAAkB,CAACrB,GAAG,EAAE;MAC7B,IAAIsB,QAAQ;MACZ,IAAIC,QAAQ;MAEZ,SAASC,YAAY,CAACC,IAAI,EAAE;QACxB,IAAIjH,CAAC,CAACkH,QAAQ,KAAKlH,CAAC,CAACkH,QAAQ,CAACD,IAAI,CAAC,KAAK/G,SAAS,IAAIF,CAAC,CAACkH,QAAQ,CAACD,IAAI,CAAC,CAACE,cAAc,KAAK,IAAI,CAAC,EAAE;UAC5F,IAAIC,UAAU,GAAGpH,CAAC,CAACkH,QAAQ,CAACD,IAAI,CAAC,IAAIjH,CAAC,CAACkH,QAAQ,CAACD,IAAI,CAAC,CAACrD,GAAG,GAAG5D,CAAC,CAACkH,QAAQ,CAACD,IAAI,CAAC,CAACrD,GAAG,GAAG,UAAUyD,IAAI,EAAE;YAC/F,OAAOA,IAAI,CAACpM,KAAK;UACrB,CAAC;UACD,IAAIqM,UAAU,GAAGtH,CAAC,CAACkH,QAAQ,CAACD,IAAI,CAAC,IAAIjH,CAAC,CAACkH,QAAQ,CAACD,IAAI,CAAC,CAACpD,GAAG,GAAG7D,CAAC,CAACkH,QAAQ,CAACD,IAAI,CAAC,CAACpD,GAAG,GAAG,UAAUwD,IAAI,EAAEpM,KAAK,EAAE;YACtGoM,IAAI,CAACpM,KAAK,GAAGA,KAAK;YAClB,OAAOoM,IAAI;UACf,CAAC;UAEDrH,CAAC,CAACkH,QAAQ,CAACD,IAAI,CAAC,GAAG;YACfrD,GAAG,EAAE,aAAUyD,IAAI,EAAE;cACjB,IAAIA,IAAI,CAAC9E,SAAS,EAAE;gBAChB,IAAI8E,IAAI,CAAC9E,SAAS,CAAChF,IAAI,CAACK,UAAU,EAAE;kBAChC,OAAOyJ,IAAI,CAAC9E,SAAS,CAACK,aAAa,EAAE;gBACzC,CAAC,MAAM;kBACH,IAAI2E,MAAM,GAAGH,UAAU,CAACC,IAAI,CAAC;kBAC7B,OAAO/H,iCAAoB,CAACtD,IAAI,CAACuG,SAAS,EAAErC,SAAS,EAAEA,SAAS,EAAEmH,IAAI,CAAC9E,SAAS,CAACnF,OAAO,CAACoK,cAAc,CAAC,KAAK,CAAC,CAAC,IAAIjK,IAAI,CAACkK,QAAQ,KAAK,IAAI,GAAGF,MAAM,GAAG,EAAE;gBAC3J;cACJ,CAAC,MAAM;gBACH,OAAOH,UAAU,CAACC,IAAI,CAAC;cAC3B;YACJ,CAAC;YACDxD,GAAG,EAAE,aAAUwD,IAAI,EAAEpM,KAAK,EAAE;cACxB,IAAIsM,MAAM,GAAGD,UAAU,CAACD,IAAI,EAAEpM,KAAK,CAAC;cACpC,IAAIoM,IAAI,CAAC9E,SAAS,EAAE;gBAChB,IAAAmF,8BAAe,EAACL,IAAI,EAAEpM,KAAK,CAAC;cAChC;cACA,OAAOsM,MAAM;YACjB,CAAC;YACDJ,cAAc,EAAE;UACpB,CAAC;QACL;MACJ;MAEA,SAASQ,MAAM,GAAG;QACd,IAAI,IAAI,CAACpF,SAAS,EAAE;UAChB,OAAO,IAAI,CAACA,SAAS,CAAChF,IAAI,CAACK,UAAU,GACjC,IAAI,CAAC2E,SAAS,CAACK,aAAa,EAAE,GAC7BtD,iCAAoB,CAACtD,IAAI,CAACuG,SAAS,CAAC,KAAK,CAAC,CAAC,IAAIhF,IAAI,CAACkK,QAAQ,KAAK,IAAI,GAChE,CAAC,IAAI,CAAClF,SAAS,CAACqF,UAAU,IAAI,IAAI,CAACC,aAAa,EAAEC,aAAa,KAAM,IAAI,IAAIvK,IAAI,CAACwK,oBAAoB,GACpG,CAACxF,SAAS,CAACd,KAAK,GAAGuG,gCAAiB,CAAChM,IAAI,CAACuG,SAAS,EAAEW,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,CAACN,KAAK,EAAE,CAAC,CAACmC,OAAO,EAAE,GAAG4D,gCAAiB,CAAChM,IAAI,CAACuG,SAAS,EAAEW,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,CAACN,KAAK,EAAE,CAAC,EAAE1C,IAAI,CAAC,EAAE,CAAC,GAClLuH,QAAQ,CAAC9K,IAAI,CAAC,IAAI,CAAC,GACvB,EAAG;QACf,CAAC,MAAM;UACH,OAAO8K,QAAQ,CAAC9K,IAAI,CAAC,IAAI,CAAC;QAC9B;MACJ;MAEA,SAASiM,MAAM,CAAChN,KAAK,EAAE;QACnB8L,QAAQ,CAAC/K,IAAI,CAAC,IAAI,EAAEf,KAAK,CAAC;QAC1B,IAAI,IAAI,CAACsH,SAAS,EAAE;UAChB,IAAAmF,8BAAe,EAAC,IAAI,EAAEzM,KAAK,CAAC;QAChC;MACJ;MAEA,SAASiN,6BAA6B,CAAC1C,GAAG,EAAE;QACxCjC,sBAAU,CAAC4E,EAAE,CAAC3C,GAAG,EAAE,YAAY,EAAE,YAAY;UACzC,IAAIoB,KAAK,GAAG,IAAI;YACZ3L,KAAK,GAAG2L,KAAK,CAACrE,SAAS,CAACa,SAAS,CAAC,IAAI,CAAC;YACvCgF,WAAW,GAAG,CAACxB,KAAK,CAACrE,SAAS,CAACd,KAAK,GAAGyB,sBAAS,CAAClH,IAAI,CAAC4K,KAAK,CAACrE,SAAS,CAAC,CAACN,KAAK,EAAE,CAACmC,OAAO,EAAE,GAAGlB,sBAAS,CAAClH,IAAI,CAAC4K,KAAK,CAACrE,SAAS,CAAC,EAAEhD,IAAI,CAAC,EAAE,CAAC;UACxI,IAAItE,KAAK,IAAImN,WAAW,EAAE;YACtB,IAAAV,8BAAe,EAACd,KAAK,EAAE3L,KAAK,CAAC;UACjC;QACJ,CAAC,CAAC;MACN;MAEA,IAAI,CAACuK,GAAG,CAACjD,SAAS,CAACoB,UAAU,EAAE;QAC3B,IAAIpG,IAAI,CAAC8K,eAAe,KAAK,IAAI,EAAE;UAC/B,IAAI7N,MAAM,CAACkJ,wBAAwB,EAAE;YACjC,IAAID,aAAa,GAAGjJ,MAAM,CAACC,cAAc,GAAGD,MAAM,CAACkJ,wBAAwB,CAAClJ,MAAM,CAACC,cAAc,CAAC+K,GAAG,CAAC,EAAE,OAAO,CAAC,GAAGtF,SAAS;YAC5H,IAAIuD,aAAa,IAAIA,aAAa,CAACG,GAAG,IAAIH,aAAa,CAACI,GAAG,EAAE;cACzDiD,QAAQ,GAAGrD,aAAa,CAACG,GAAG;cAC5BmD,QAAQ,GAAGtD,aAAa,CAACI,GAAG;cAC5BrJ,MAAM,CAACQ,cAAc,CAACwK,GAAG,EAAE,OAAO,EAAE;gBAChC5B,GAAG,EAAE+D,MAAM;gBACX9D,GAAG,EAAEoE,MAAM;gBACXlE,YAAY,EAAE;cAClB,CAAC,CAAC;YACN,CAAC,MAAM,IAAIyB,GAAG,CAAC8C,OAAO,CAACxJ,WAAW,EAAE,KAAK,OAAO,EAAE;cAC9CgI,QAAQ,GAAG,oBAAY;gBACnB,OAAO,IAAI,CAACyB,WAAW;cAC3B,CAAC;cACDxB,QAAQ,GAAG,kBAAU9L,KAAK,EAAE;gBACxB,IAAI,CAACsN,WAAW,GAAGtN,KAAK;cAC5B,CAAC;cACDT,MAAM,CAACQ,cAAc,CAACwK,GAAG,EAAE,OAAO,EAAE;gBAChC5B,GAAG,EAAE+D,MAAM;gBACX9D,GAAG,EAAEoE,MAAM;gBACXlE,YAAY,EAAE;cAClB,CAAC,CAAC;YACN;UACJ,CAAC,MAAM,IAAIvE,QAAQ,CAACwE,gBAAgB,IAAIwB,GAAG,CAACxB,gBAAgB,CAAC,OAAO,CAAC,EAAE;YACnE8C,QAAQ,GAAGtB,GAAG,CAACxB,gBAAgB,CAAC,OAAO,CAAC;YACxC+C,QAAQ,GAAGvB,GAAG,CAACgD,gBAAgB,CAAC,OAAO,CAAC;YAExChD,GAAG,CAACvB,gBAAgB,CAAC,OAAO,EAAE0D,MAAM,CAAC;YACrCnC,GAAG,CAACtB,gBAAgB,CAAC,OAAO,EAAE+D,MAAM,CAAC;UACzC;UACAzC,GAAG,CAACjD,SAAS,CAACoB,UAAU,GAAGmD,QAAQ,CAAC,CAAC;UACrCtB,GAAG,CAACjD,SAAS,CAACuB,UAAU,GAAGiD,QAAQ,CAAC,CAAC;QACzC;;QACAvB,GAAG,CAACjD,SAAS,CAACa,SAAS,GAAG,UAAUqF,WAAW,EAAE;UAC7C,OAAOlG,SAAS,CAACd,KAAK,IAAIgH,WAAW,KAAK,IAAI,GAAG3B,QAAQ,CAAC9K,IAAI,CAAC,IAAI,CAACiE,EAAE,CAAC,CAAC8C,KAAK,CAAC,EAAE,CAAC,CAACqB,OAAO,EAAE,CAAC7E,IAAI,CAAC,EAAE,CAAC,GAAGuH,QAAQ,CAAC9K,IAAI,CAAC,IAAI,CAACiE,EAAE,CAAC;QACjI,CAAC;QACDuF,GAAG,CAACjD,SAAS,CAACe,SAAS,GAAG,UAAUrI,KAAK,EAAEwN,WAAW,EAAE;UAAE;UACtD1B,QAAQ,CAAC/K,IAAI,CAAC,IAAI,CAACiE,EAAE,EAAGhF,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAKiF,SAAS,GAAI,EAAE,GAAKuI,WAAW,KAAK,IAAI,IAAIlG,SAAS,CAACd,KAAK,GAAIxG,KAAK,CAAC8H,KAAK,CAAC,EAAE,CAAC,CAACqB,OAAO,EAAE,CAAC7E,IAAI,CAAC,EAAE,CAAC,GAAGtE,KAAM,CAAC;QACnK,CAAC;QAED,IAAI6L,QAAQ,KAAK5G,SAAS,EAAE;UAAE;UAC1B4G,QAAQ,GAAG,oBAAY;YACnB,OAAO,IAAI,CAAC7L,KAAK;UACrB,CAAC;UACD8L,QAAQ,GAAG,kBAAU9L,KAAK,EAAE;YACxB,IAAI,CAACA,KAAK,GAAGA,KAAK;UACtB,CAAC;UACD+L,YAAY,CAACxB,GAAG,CAACyB,IAAI,CAAC;UACtBiB,6BAA6B,CAAC1C,GAAG,CAAC;QACtC;MACJ;IACJ;IAEA,IAAIoB,KAAK,CAAC0B,OAAO,CAACxJ,WAAW,EAAE,KAAK,UAAU,EAAE;MAC5CvB,IAAI,CAACmL,UAAU,CAACC,IAAI,CAACvM,aAAI,CAACwM,KAAK,CAAC;IACpC;IAEA,IAAIC,WAAW,GAAGjC,KAAK,CAAChB,YAAY,CAAC,MAAM,CAAC;IAC5C,IAAIkD,WAAW,GAAIlC,KAAK,CAAC0B,OAAO,CAACxJ,WAAW,EAAE,KAAK,OAAO,IAAIvB,IAAI,CAACwL,iBAAiB,CAAChO,QAAQ,CAAC8N,WAAW,CAAC,IAAKjC,KAAK,CAACoC,iBAAiB,IAAIpC,KAAK,CAAC0B,OAAO,CAACxJ,WAAW,EAAE,KAAK,UAAU;IACpL,IAAI,CAACgK,WAAW,EAAE;MACd,IAAIlC,KAAK,CAAC0B,OAAO,CAACxJ,WAAW,EAAE,KAAK,OAAO,EAAE;QACzC,IAAImB,EAAE,GAAGT,QAAQ,CAACyJ,aAAa,CAAC,OAAO,CAAC;QACxChJ,EAAE,CAACiJ,YAAY,CAAC,MAAM,EAAEL,WAAW,CAAC;QACpCC,WAAW,GAAG7I,EAAE,CAACgH,IAAI,KAAK,MAAM,CAAC,CAAC;QAClChH,EAAE,GAAG,IAAI;MACb,CAAC,MAAM;QACH6I,WAAW,GAAG,SAAS;MAC3B;IACJ;IACA,IAAIA,WAAW,KAAK,KAAK,EAAE;MACvBjC,kBAAkB,CAACD,KAAK,CAAC;IAC7B,CAAC,MAAM;MACHA,KAAK,CAACrE,SAAS,GAAGrC,SAAS;IAC/B;IACA,OAAO4I,WAAW;EACtB;;EAEA;EACAvF,sBAAU,CAACC,GAAG,CAACvD,EAAE,CAAC;EAClB,IAAI6I,WAAW,GAAGnC,sBAAsB,CAAC1G,EAAE,EAAE1C,IAAI,CAAC;EAClD,IAAIuL,WAAW,KAAK,KAAK,EAAE;IACvBvG,SAAS,CAACpB,mBAAmB,GAAGlB,EAAE,CAACkJ,WAAW;;IAE9C;IACA5G,SAAS,CAACvB,SAAS,GAAGf,EAAE,KAAKC,SAAS,GAAGD,EAAE,CAACe,SAAS,GAAGd,SAAS;IACjE,IAAIqC,SAAS,CAACvB,SAAS,KAAK,CAAC,CAAC,EAAEuB,SAAS,CAACvB,SAAS,GAAGd,SAAS;IAC/D,IAAI,WAAW,IAAID,EAAE,IAAIA,EAAE,CAAC2F,YAAY,CAAC,WAAW,CAAC,KAAK,IAAI,EAAE;MAC5D3F,EAAE,CAACmJ,SAAS,GAAG7L,IAAI,CAACa,SAAS;MAC7B6B,EAAE,CAACiJ,YAAY,CAAC,WAAW,EAAE3L,IAAI,CAACa,SAAS,CAAC;IAChD;IAGA,IAAI0K,WAAW,KAAK,IAAI,EAAE;MACtBvL,IAAI,CAAC8L,eAAe,GAAG9L,IAAI,CAAC8L,eAAe,IAAI,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC1M,OAAO,CAACsD,EAAE,CAACqJ,YAAY,CAAC,KAAK,CAAC,CAAC;MACtG,IAAIC,mBAAM,EAAE;QACR;QACAhM,IAAI,CAACiM,gBAAgB,GAAG,KAAK;QAC7B;QACAvJ,EAAE,CAACiJ,YAAY,CAAC,aAAa,EAAE,KAAK,CAAC;MACzC;;MAEA;MACA3F,sBAAU,CAAC4E,EAAE,CAAClI,EAAE,EAAE,QAAQ,EAAEwJ,4BAAa,CAACC,WAAW,CAAC;MACtDnG,sBAAU,CAAC4E,EAAE,CAAClI,EAAE,EAAE,OAAO,EAAEwJ,4BAAa,CAACE,UAAU,CAAC;MACpDpG,sBAAU,CAAC4E,EAAE,CAAClI,EAAE,EAAE,MAAM,EAAEwJ,4BAAa,CAACG,SAAS,CAAC;MAClDrG,sBAAU,CAAC4E,EAAE,CAAClI,EAAE,EAAE,OAAO,EAAEwJ,4BAAa,CAACI,UAAU,CAAC;MACpDtG,sBAAU,CAAC4E,EAAE,CAAClI,EAAE,EAAE,SAAS,EAAEwJ,4BAAa,CAACK,YAAY,CAAC;MACxDvG,sBAAU,CAAC4E,EAAE,CAAClI,EAAE,EAAE,OAAO,EAAEwJ,4BAAa,CAACM,UAAU,CAAC;MACpDxG,sBAAU,CAAC4E,EAAE,CAAClI,EAAE,EAAE,YAAY,EAAEwJ,4BAAa,CAACO,eAAe,CAAC;MAC9DzG,sBAAU,CAAC4E,EAAE,CAAClI,EAAE,EAAE,YAAY,EAAEwJ,4BAAa,CAACQ,eAAe,CAAC;MAC9D1G,sBAAU,CAAC4E,EAAE,CAAClI,EAAE,EAAE,OAAO,EAAEwJ,4BAAa,CAACS,UAAU,CAAC;MACpD3G,sBAAU,CAAC4E,EAAE,CAAClI,EAAE,EAAE,KAAK,EAAEwJ,4BAAa,CAACU,QAAQ,CAAC;MAChD5G,sBAAU,CAAC4E,EAAE,CAAClI,EAAE,EAAE,UAAU,EAAE1C,IAAI,CAAC6M,UAAU,CAAC;MAC9C7G,sBAAU,CAAC4E,EAAE,CAAClI,EAAE,EAAE,YAAY,EAAE1C,IAAI,CAAC8M,YAAY,CAAC;MAClD9G,sBAAU,CAAC4E,EAAE,CAAClI,EAAE,EAAE,SAAS,EAAE1C,IAAI,CAAC+M,SAAS,CAAC;MAC5C,IAAI/M,IAAI,CAACgN,cAAc,KAAK,IAAI,EAAE;QAC9BhH,sBAAU,CAAC4E,EAAE,CAAClI,EAAE,EAAE,SAAS,EAAEwJ,4BAAa,CAACe,QAAQ,CAAC;MACxD;MACA,IAAIC,mBAAM,IAAIlN,IAAI,CAACgN,cAAc,EAAE;QAC/BtK,EAAE,CAACsG,eAAe,CAAC,WAAW,CAAC;MACnC;MACAhD,sBAAU,CAAC4E,EAAE,CAAClI,EAAE,EAAE,OAAO,EAAEwJ,4BAAa,CAACiB,kBAAkB,CAAC;MAC5D;IACJ;;IACAnH,sBAAU,CAAC4E,EAAE,CAAClI,EAAE,EAAE,UAAU,EAAEwJ,4BAAa,CAACkB,aAAa,CAAC;;IAE1D;IACAtH,8BAAiB,CAACrH,IAAI,CAACuG,SAAS,CAAC,CAAChD,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;IAC5CgD,SAAS,CAAC5B,SAAS,GAAG4B,SAAS,CAACa,SAAS,CAAC,IAAI,CAAC;IAC/C,IAAI0E,aAAa,GAAG,CAAC7H,EAAE,CAACsC,SAAS,CAACqF,UAAU,IAAI3H,EAAE,CAAC4H,aAAa,EAAEC,aAAa;IAC/E,IAAI7H,EAAE,CAACsC,SAAS,CAACa,SAAS,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI7F,IAAI,CAACwK,oBAAoB,KAAK,KAAK,IAAID,aAAa,KAAK7H,EAAE,EAAE;MACpG,IAAAyH,8BAAe,EAACzH,EAAE,EAAEA,EAAE,CAACsC,SAAS,CAACa,SAAS,CAAC,IAAI,CAAC,EAAE7F,IAAI,CAAC;MACvD,IAAIC,MAAM,GAAG0F,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,CAACN,KAAK,EAAE;MAC9C,IAAIqC,sBAAU,CAACtI,IAAI,CAACuG,SAAS,EAAE/E,MAAM,CAAC,KAAK,KAAK,EAAE;QAC9C,IAAID,IAAI,CAACyB,eAAe,EAAE;UACtB4L,yBAAY,CAAC5O,IAAI,CAACuG,SAAS,CAAC;QAChC;MACJ;MACA,IAAIhF,IAAI,CAACwK,oBAAoB,IAAID,aAAa,KAAK7H,EAAE,EAAE;QACnD,IAAIX,iCAAoB,CAACtD,IAAI,CAACuG,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE;UAC7C/E,MAAM,GAAG,EAAE;QACf,CAAC,MAAM;UACHwK,gCAAiB,CAAChM,IAAI,CAACuG,SAAS,EAAE/E,MAAM,CAAC;QAC7C;MACJ;MACA,IAAID,IAAI,CAACwK,oBAAoB,KAAK,KAAK,IAAKxK,IAAI,CAAC8L,eAAe,IAAIvB,aAAa,KAAK7H,EAAG,IAAIA,EAAE,CAACsC,SAAS,CAACa,SAAS,CAAC,IAAI,CAAC,KAAK,EAAE,EAAE;QAC9H,IAAAyH,0BAAW,EAAC5K,EAAE,EAAEzC,MAAM,CAAC;MAC3B;MACA,IAAIsK,aAAa,KAAK7H,EAAE,EAAE;QAAE;QACxB6K,kBAAK,CAAC9O,IAAI,CAACuG,SAAS,EAAEtC,EAAE,EAAE8K,qBAAQ,CAAC/O,IAAI,CAACuG,SAAS,EAAEjD,iCAAoB,CAACtD,IAAI,CAACuG,SAAS,CAAC,CAAC,CAAC;MAC7F;IACJ;EACJ;AACJ;;;;;;;;;;;;;;;;;;;;AClPA,IAAMyI,OAAO,GAAG;EACZ,UAAU,EAAE,EAAE;EACd,WAAW,EAAE,EAAE;EACf,WAAW,EAAE,EAAE;EACf,YAAY,EAAE,EAAE;EAChB,SAAS,EAAE,EAAE;EACb,WAAW,EAAE,CAAC;EACd,kBAAkB,EAAE,GAAG;EACvB,UAAU,EAAE,EAAE;EACd,QAAQ,EAAE,EAAE;EACZ,KAAK,EAAE,EAAE;EACT,OAAO,EAAE,EAAE;EACX,QAAQ,EAAE,EAAE;EACZ,MAAM,EAAE,EAAE;EACV,QAAQ,EAAE,EAAE;EACZ,UAAU,EAAE,EAAE;EACd,QAAQ,EAAE,EAAE;EACZ,OAAO,EAAE,EAAE;EACX,KAAK,EAAE,CAAC;EACR,GAAG,EAAE,EAAE;EACP,GAAG,EAAE,EAAE;EACP,GAAG,EAAE,EAAE;EACP,OAAO,EAAE,EAAE;EACX,SAAS,EAAE,EAAE;EACb,KAAK,EAAE,EAAE;EACT,OAAO,EAAE,EAAE;EACX,WAAW,EAAE,EAAE;EACf,YAAY,EAAE,EAAE;EAChB,aAAa,EAAE,EAAE;EACjB,SAAS,EAAE,GAAG;EACd,cAAc,EAAE,GAAG;EACnB,IAAI,EAAE,GAAG;EACT,IAAI,EAAE,GAAG;EACT,IAAI,EAAE,GAAG;EACT,IAAI,EAAE,GAAG;EACT,IAAI,EAAE,GAAG;EACT,IAAI,EAAE,GAAG;EACT,IAAI,EAAE,GAAG;EACT,IAAI,EAAE,GAAG;EACT,IAAI,EAAE,GAAG;EACT,KAAK,EAAE,GAAG;EACV,KAAK,EAAE,GAAG;EACV,KAAK,EAAE;AACX,CAAC;AAAC;AAEF,IAAMC,UAAU,GAAGzQ,MAAM,CAAC6B,OAAO,CAAC2O,OAAO,CAAC,CAACnP,MAAM,CAAC,UAACqP,GAAG;EAAA;IAAGC,GAAG;IAAElQ,KAAK;EAAA,OAAOiQ,GAAG,CAACjQ,KAAK,CAAC,GAAGiQ,GAAG,CAACjQ,KAAK,CAAC,KAAKiF,SAAS,GAAGiL,GAAG,GAAGD,GAAG,CAACjQ,KAAK,CAAC,EAAGiQ,GAAG;AAAA,CAAC,EAAE,CAAC,CAAC,CAAC;AAC9I,IAAM9O,IAAI,GAAG5B,MAAM,CAAC6B,OAAO,CAAC2O,OAAO,CAAC,CAACnP,MAAM,CAAC,UAACqP,GAAG;EAAA;IAAGC,GAAG;IAAElQ,KAAK;EAAA,OAAOiQ,GAAG,CAACC,GAAG,CAAC,GAAGA,GAAG,KAAK,OAAO,GAAG,GAAG,GAAGA,GAAG,EAAED,GAAG;AAAA,CAAC,EAAE,CAAC,CAAC,CAAC;AAAC;AAEtH,SAASE,KAAK,CAACJ,OAAO,EAAEK,QAAQ,EAAE;EAC9B,OAAOJ,UAAU,CAACD,OAAO,CAAC,KAAKK,QAAQ,GAAG7O,MAAM,CAAC8O,YAAY,CAACN,OAAO,CAAC,GAAGxO,MAAM,CAAC8O,YAAY,CAACN,OAAO,CAAC,CAAClM,WAAW,EAAE,CAAC;AACxH;AAEA,SAASyM,SAAS,CAACJ,GAAG,EAAE;EACpB,OAAOH,OAAO,CAACG,GAAG,CAAC;AACvB;;;;;;;;;;;;;;;;;;;;;;ACxDA;AAQA;AAgBA;AACA,SAASL,KAAK,CAAClE,KAAK,EAAE4E,KAAK,EAAEC,GAAG,EAAEC,WAAW,EAAEC,QAAQ,EAAE;EACrD,IAAMpJ,SAAS,GAAG,IAAI;IAClBhF,IAAI,GAAG,IAAI,CAACA,IAAI;EAEpB,IAAIqO,KAAK;EACT,IAAIJ,KAAK,KAAKtL,SAAS,EAAE;IACrB,IAAIpF,KAAK,CAACkH,OAAO,CAACwJ,KAAK,CAAC,EAAE;MACtBC,GAAG,GAAGlJ,SAAS,CAACd,KAAK,GAAG+J,KAAK,CAAC,CAAC,CAAC,GAAGA,KAAK,CAAC,CAAC,CAAC;MAC3CA,KAAK,GAAGjJ,SAAS,CAACd,KAAK,GAAG+J,KAAK,CAAC,CAAC,CAAC,GAAGA,KAAK,CAAC,CAAC,CAAC;IACjD;IACA,IAAIA,KAAK,CAACA,KAAK,KAAKtL,SAAS,EAAE;MAC3BuL,GAAG,GAAGlJ,SAAS,CAACd,KAAK,GAAG+J,KAAK,CAACA,KAAK,GAAGA,KAAK,CAACC,GAAG;MAC/CD,KAAK,GAAGjJ,SAAS,CAACd,KAAK,GAAG+J,KAAK,CAACC,GAAG,GAAGD,KAAK,CAACA,KAAK;IACrD;IACA,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;MAC3BA,KAAK,GAAGE,WAAW,GAAGF,KAAK,GAAGK,iBAAiB,CAAC7P,IAAI,CAACuG,SAAS,EAAEiJ,KAAK,CAAC;MACtEC,GAAG,GAAGC,WAAW,GAAGD,GAAG,GAAGI,iBAAiB,CAAC7P,IAAI,CAACuG,SAAS,EAAEkJ,GAAG,CAAC;MAChEA,GAAG,GAAI,OAAOA,GAAG,IAAI,QAAQ,GAAIA,GAAG,GAAGD,KAAK;MAC5C;MACA;MACA;;MAEA,IAAIM,UAAU,GAAGC,QAAQ,CAAC,CAAC,CAACnF,KAAK,CAACiB,aAAa,CAACmE,WAAW,IAAIvM,MAAM,EAAEwM,gBAAgB,GAAG,CAACrF,KAAK,CAACiB,aAAa,CAACmE,WAAW,IAAIvM,MAAM,EAAEwM,gBAAgB,CAACrF,KAAK,EAAE,IAAI,CAAC,GAAGA,KAAK,CAACsF,YAAY,EAAEC,QAAQ,CAAC,GAAGV,GAAG;MACzM7E,KAAK,CAACwF,UAAU,GAAGN,UAAU,GAAGlF,KAAK,CAACyF,WAAW,GAAGP,UAAU,GAAG,CAAC;MAClElF,KAAK,CAACrE,SAAS,CAAC+J,QAAQ,GAAG;QAACd,KAAK,EAAEA,KAAK;QAAEC,GAAG,EAAEA;MAAG,CAAC,CAAC,CAAC;MACrD,IAAIlO,IAAI,CAACiM,gBAAgB,IAAIjM,IAAI,CAACgP,UAAU,KAAK,KAAK,IAAIf,KAAK,KAAKC,GAAG,EAAE;QACrE,IAAI,CAACE,QAAQ,EAAE;UACXF,GAAG,EAAE,CAAC,CAAC;QACX;MACJ;;MACA,IAAI7E,KAAK,KAAK,CAACA,KAAK,CAACrE,SAAS,CAACqF,UAAU,IAAIhB,KAAK,CAACiB,aAAa,EAAEC,aAAa,EAAE;QAC7E,IAAI,mBAAmB,IAAIlB,KAAK,EAAE;UAC9BA,KAAK,CAAC4F,iBAAiB,CAAChB,KAAK,EAAEC,GAAG,CAAC;QACvC,CAAC,MAAM,IAAIhM,MAAM,CAACgN,YAAY,EAAE;UAC5Bb,KAAK,GAAGpM,QAAQ,CAACkN,WAAW,EAAE;UAC9B,IAAI9F,KAAK,CAAC+F,UAAU,KAAKzM,SAAS,IAAI0G,KAAK,CAAC+F,UAAU,KAAK,IAAI,EAAE;YAC7D,IAAIC,QAAQ,GAAGpN,QAAQ,CAACqN,cAAc,CAAC,EAAE,CAAC;YAC1CjG,KAAK,CAACkG,WAAW,CAACF,QAAQ,CAAC;UAC/B;UACAhB,KAAK,CAACmB,QAAQ,CAACnG,KAAK,CAAC+F,UAAU,EAAEnB,KAAK,GAAG5E,KAAK,CAACrE,SAAS,CAACa,SAAS,EAAE,CAAC7H,MAAM,GAAGiQ,KAAK,GAAG5E,KAAK,CAACrE,SAAS,CAACa,SAAS,EAAE,CAAC7H,MAAM,CAAC;UACzHqQ,KAAK,CAACoB,MAAM,CAACpG,KAAK,CAAC+F,UAAU,EAAElB,GAAG,GAAG7E,KAAK,CAACrE,SAAS,CAACa,SAAS,EAAE,CAAC7H,MAAM,GAAGkQ,GAAG,GAAG7E,KAAK,CAACrE,SAAS,CAACa,SAAS,EAAE,CAAC7H,MAAM,CAAC;UACnHqQ,KAAK,CAACqB,QAAQ,CAAC,IAAI,CAAC;UACpB,IAAIC,GAAG,GAAGzN,MAAM,CAACgN,YAAY,EAAE;UAC/BS,GAAG,CAACC,eAAe,EAAE;UACrBD,GAAG,CAACE,QAAQ,CAACxB,KAAK,CAAC;UACnB;QACJ,CAAC,MAAM,IAAIhF,KAAK,CAACyG,eAAe,EAAE;UAC9BzB,KAAK,GAAGhF,KAAK,CAACyG,eAAe,EAAE;UAC/BzB,KAAK,CAACqB,QAAQ,CAAC,IAAI,CAAC;UACpBrB,KAAK,CAAC0B,OAAO,CAAC,WAAW,EAAE7B,GAAG,CAAC;UAC/BG,KAAK,CAAC2B,SAAS,CAAC,WAAW,EAAE/B,KAAK,CAAC;UACnCI,KAAK,CAAC4B,MAAM,EAAE;QAClB;MACJ;IACJ;EACJ,CAAC,MAAM;IACH,IAAI,gBAAgB,IAAI5G,KAAK,IAAI,cAAc,IAAIA,KAAK,EAAE;MACtD4E,KAAK,GAAG5E,KAAK,CAAC6G,cAAc;MAC5BhC,GAAG,GAAG7E,KAAK,CAAC8G,YAAY;IAC5B,CAAC,MAAM,IAAIjO,MAAM,CAACgN,YAAY,EAAE;MAC5Bb,KAAK,GAAGnM,MAAM,CAACgN,YAAY,EAAE,CAACkB,UAAU,CAAC,CAAC,CAAC;MAC3C,IAAI/B,KAAK,CAACgC,uBAAuB,CAACC,UAAU,KAAKjH,KAAK,IAAIgF,KAAK,CAACgC,uBAAuB,KAAKhH,KAAK,EAAE;QAC/F4E,KAAK,GAAGI,KAAK,CAACkC,WAAW;QACzBrC,GAAG,GAAGG,KAAK,CAACmC,SAAS;MACzB;IACJ,CAAC,MAAM,IAAIvO,QAAQ,CAACwO,SAAS,IAAIxO,QAAQ,CAACwO,SAAS,CAACtB,WAAW,EAAE;MAC7Dd,KAAK,GAAGpM,QAAQ,CAACwO,SAAS,CAACtB,WAAW,EAAE;MACxClB,KAAK,GAAG,CAAC,GAAGI,KAAK,CAACqC,SAAS,EAAE,CAACV,SAAS,CAAC,WAAW,EAAE,CAAC3G,KAAK,CAACrE,SAAS,CAACa,SAAS,EAAE,CAAC7H,MAAM,CAAC;MACzFkQ,GAAG,GAAGD,KAAK,GAAGI,KAAK,CAACsC,IAAI,CAAC3S,MAAM;IACnC;;IAEA;;IAEA;IACA,OAAO;MACH,OAAO,EAAEmQ,WAAW,GAAGF,KAAK,GAAGK,iBAAiB,CAAC7P,IAAI,CAACuG,SAAS,EAAEiJ,KAAK,CAAC;MACvE,KAAK,EAAEE,WAAW,GAAGD,GAAG,GAAGI,iBAAiB,CAAC7P,IAAI,CAACuG,SAAS,EAAEkJ,GAAG;IACpE,CAAC;IACD;EACJ;AACJ;;AAEA;AACA,SAAS5G,6BAA6B,CAACsJ,gBAAgB,EAAE;EAC/C,IAAA5L,SAAS,GAAG,IAAI;IAAGnF,OAAO,GAAsBmF,SAAS,CAAtCnF,OAAO;IAAiB4C,CAAC,GAAIuC,SAAS,CAA7BxC,aAAa;EAE/C,IAAIvC,MAAM,GAAG6B,gCAAe,CAACrD,IAAI,CAACuG,SAAS,EAAE,IAAI,EAAEjD,oBAAoB,CAACtD,IAAI,CAACuG,SAAS,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC;IAChG6L,EAAE,GAAG5Q,MAAM,CAACjC,MAAM;IAClB8B,GAAG;IAAEgR,GAAG,GAAG/O,oBAAoB,CAACtD,IAAI,CAACuG,SAAS,CAAC;IAC/C+L,SAAS,GAAG,CAAC,CAAC;IACdC,MAAM,GAAGnR,OAAO,CAACoK,cAAc,CAAC6G,GAAG,CAAC;IACpCG,SAAS,GAAGD,MAAM,KAAKrO,SAAS,GAAGqO,MAAM,CAACE,OAAO,CAACxM,KAAK,EAAE,GAAG/B,SAAS;IACrEwO,OAAO;EACX,KAAKrR,GAAG,GAAGgR,GAAG,GAAG,CAAC,EAAEhR,GAAG,GAAGG,MAAM,CAACjC,MAAM,EAAE8B,GAAG,EAAE,EAAE;IAC5CqR,OAAO,GAAGC,gCAAe,CAAC3S,IAAI,CAACuG,SAAS,EAAElF,GAAG,EAAEmR,SAAS,EAAEnR,GAAG,GAAG,CAAC,CAAC;IAClEmR,SAAS,GAAGE,OAAO,CAACD,OAAO,CAACxM,KAAK,EAAE;IACnCqM,SAAS,CAACjR,GAAG,CAAC,GAAG2C,CAAC,CAACK,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,EAAEqO,OAAO,CAAC;EAChD;EAEA,IAAIE,SAAS,GAAGL,MAAM,IAAIA,MAAM,CAACM,WAAW,KAAK3O,SAAS,GAAGqO,MAAM,CAACE,OAAO,CAACF,MAAM,CAACM,WAAW,CAAC,GAAG3O,SAAS;EAC3G,KAAK7C,GAAG,GAAG+Q,EAAE,GAAG,CAAC,EAAE/Q,GAAG,GAAGgR,GAAG,EAAEhR,GAAG,EAAE,EAAE;IACjCqR,OAAO,GAAGJ,SAAS,CAACjR,GAAG,CAAC;IACxB,IAAI,CAACqR,OAAO,CAACI,KAAK,CAACC,WAAW,IACrBL,OAAO,CAACI,KAAK,CAACE,kBAAkB,IAAIN,OAAO,CAACI,KAAK,CAACG,cAAe,IACjEL,SAAS,KAEDA,SAAS,KAAKN,SAAS,CAACjR,GAAG,CAAC,CAACoR,OAAO,CAACF,MAAM,CAACM,WAAW,CAAC,IAAIH,OAAO,CAACI,KAAK,UAAO,IAAI,IAAI,IACxFJ,OAAO,CAACI,KAAK,UAAO,KAAK,IAAI,IAC1BJ,OAAO,CAACD,OAAO,CAACF,MAAM,CAACM,WAAW,CAAC,IACnCK,iCAAqB,CAAClT,IAAI,CAACuG,SAAS,EAAEmM,OAAO,CAACD,OAAO,CAACF,MAAM,CAACM,WAAW,CAAC,CAACzO,QAAQ,EAAE,CAAC2C,KAAK,CAAC,GAAG,CAAC,EAAE6L,SAAS,CAACxO,QAAQ,EAAE,CAAC2C,KAAK,CAAC,GAAG,CAAC,CAAC,IACjIoM,yBAAQ,CAACnT,IAAI,CAACuG,SAAS,EAAElF,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC+R,GAAG,KAAK,EAAG,CAEvD,KACL5R,MAAM,CAACH,GAAG,CAAC,KAAKgS,+BAAc,CAACrT,IAAI,CAACuG,SAAS,EAAElF,GAAG,EAAEqR,OAAO,CAACI,KAAK,CAAC,EAAE;MACpEV,EAAE,EAAE;IACR,CAAC,MAAM;MACH;IACJ;EACJ;EACA,OAAOD,gBAAgB,GAAG;IACtB,GAAG,EAAEC,EAAE;IACP,KAAK,EAAEE,SAAS,CAACF,EAAE,CAAC,GAAGE,SAAS,CAACF,EAAE,CAAC,CAACU,KAAK,GAAG5O;EACjD,CAAC,GAAGkO,EAAE;AACV;;AAEA;AACA,SAASkB,yBAAyB,CAACC,aAAa,EAAEC,MAAM,EAAEC,oBAAoB,EAAE;EACtE,IAAAlN,SAAS,GAAG,IAAI;IAAGnF,OAAO,GAAUmF,SAAS,CAA1BnF,OAAO;IAAEG,IAAI,GAAIgF,SAAS,CAAjBhF,IAAI;EAEtC,SAASmS,YAAY,CAACC,QAAQ,EAAE;IAC5B,IAAIpS,IAAI,CAACqS,UAAU,KAAK,EAAE,IAAIrS,IAAI,CAACsS,MAAM,KAAK,CAAC,EAAE;MAC7C,IAAIC,GAAG,GAAG1S,OAAO,CAACoK,cAAc;MAChC,IAAIsI,GAAG,CAACH,QAAQ,CAAC,KAAKzP,SAAS,IAAK4P,GAAG,CAACH,QAAQ,CAAC,CAAC/I,KAAK,KAAKyI,+BAAc,CAACrT,IAAI,CAACuG,SAAS,EAAEoN,QAAQ,CAAE,EAAE;QACnG,IAAIA,QAAQ,GAAG5E,QAAQ,CAAC/O,IAAI,CAACuG,SAAS,EAAE,CAAC,CAAC,CAAC,EAAE,OAAO,IAAI;QACxD,IAAIwN,QAAQ,GAAG7M,SAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,CAAC5F,OAAO,CAACY,IAAI,CAACqS,UAAU,CAAC;QACjE,IAAIG,QAAQ,KAAK,CAAC,CAAC,EAAE;UACjB,KAAK,IAAIC,EAAE,GAAG,CAAC,EAAEC,GAAG,GAAGH,GAAG,CAACvU,MAAM,EAAEyU,EAAE,GAAGC,GAAG,EAAED,EAAE,EAAE,EAAE;YAC/C,IAAIF,GAAG,CAACE,EAAE,CAAC,IAAID,QAAQ,GAAGC,EAAE,IAAIF,GAAG,CAACE,EAAE,CAAC,CAACpJ,KAAK,KAAKyI,+BAAc,CAACrT,IAAI,CAACuG,SAAS,EAAEyN,EAAE,CAAC,EAAE;cAClF,OAAO,KAAK;YAChB;UACJ;UACA,OAAO,IAAI;QACf;MACJ;IACJ;IACA,OAAO,KAAK;EAChB;EAEA,IAAIR,MAAM,EAAE;IACR,IAAIjN,SAAS,CAACd,KAAK,EAAE;MACjB8N,aAAa,CAAC9D,GAAG,GAAG8D,aAAa,CAAC/D,KAAK;IAC3C,CAAC,MAAM;MACH+D,aAAa,CAAC/D,KAAK,GAAG+D,aAAa,CAAC9D,GAAG;IAC3C;EACJ;EACA,IAAI8D,aAAa,CAAC/D,KAAK,KAAK+D,aAAa,CAAC9D,GAAG,EAAE;IAC3CgE,oBAAoB,GAAGA,oBAAoB,IAAIlS,IAAI,CAACkS,oBAAoB;IACxE,QAAQA,oBAAoB;MACxB,KAAK,MAAM;QACP;MACJ,KAAK,QAAQ;QACTF,aAAa,GAAG;UAAC/D,KAAK,EAAE,CAAC;UAAEC,GAAG,EAAEvI,SAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,CAAChH;QAAM,CAAC;QACjE;MACJ,KAAK,QAAQ;QACTgU,aAAa,CAAC9D,GAAG,GAAG8D,aAAa,CAAC/D,KAAK,GAAGT,QAAQ,CAAC/O,IAAI,CAACuG,SAAS,EAAEjD,oBAAoB,CAACtD,IAAI,CAACuG,SAAS,CAAC,CAAC;QACxG;MACJ,KAAK,YAAY;QACb,IAAIA,SAAS,CAACrB,OAAO,GAAG,CAAC,IAAI9D,OAAO,CAACoK,cAAc,CAACjM,MAAM,IAAI,CAAC,EAC3D;QACJ,IAAImU,YAAY,CAACH,aAAa,CAAC/D,KAAK,CAAC,EAAE;UACnC,IAAIuE,QAAQ,GAAG7M,SAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,CAAChD,IAAI,CAAC,EAAE,CAAC,CAAC5C,OAAO,CAACY,IAAI,CAACqS,UAAU,CAAC;UAC1EL,aAAa,CAAC9D,GAAG,GAAG8D,aAAa,CAAC/D,KAAK,GAAGjO,IAAI,CAACmE,YAAY,GAAGqJ,QAAQ,CAAC/O,IAAI,CAACuG,SAAS,EAAEwN,QAAQ,CAAC,GAAGA,QAAQ;UAC3G;QACJ;MAAE;MACN;MACA;QAAS;QACL,IAAIG,aAAa,GAAGX,aAAa,CAAC/D,KAAK;UACnC2E,eAAe,GAAG7Q,oBAAoB,CAACtD,IAAI,CAACuG,SAAS,EAAE2N,aAAa,EAAE,IAAI,CAAC;UAC3EE,YAAY,GAAGrF,QAAQ,CAAC/O,IAAI,CAACuG,SAAS,EAAG4N,eAAe,KAAK,CAAC,CAAC,IAAI,CAACpL,MAAM,CAAC/I,IAAI,CAACuG,SAAS,EAAE,CAAC,CAAC,GAAI,CAAC,CAAC,GAAG4N,eAAe,CAAC;QAE1H,IAAID,aAAa,IAAIE,YAAY,EAAE;UAC/Bb,aAAa,CAAC9D,GAAG,GAAG8D,aAAa,CAAC/D,KAAK,GAAG,CAACzG,MAAM,CAAC/I,IAAI,CAACuG,SAAS,EAAE2N,aAAa,EAAE,KAAK,EAAE,IAAI,CAAC,GAAGnF,QAAQ,CAAC/O,IAAI,CAACuG,SAAS,EAAE2N,aAAa,CAAC,GAAGA,aAAa;QAC3J,CAAC,MAAM;UACH,IAAI7B,GAAG,GAAGjR,OAAO,CAACoK,cAAc,CAAC2I,eAAe,CAAC;YAC7CE,EAAE,GAAG1B,gCAAe,CAAC3S,IAAI,CAACuG,SAAS,EAAE6N,YAAY,EAAE/B,GAAG,GAAGA,GAAG,CAACS,KAAK,CAACL,OAAO,GAAGvO,SAAS,EAAEmO,GAAG,CAAC;YAC5FlF,WAAW,GAAGkG,+BAAc,CAACrT,IAAI,CAACuG,SAAS,EAAE6N,YAAY,EAAEC,EAAE,CAACvB,KAAK,CAAC;UACxE,IAAK3F,WAAW,KAAK,EAAE,IAAIjG,SAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,CAAC6N,YAAY,CAAC,KAAKjH,WAAW,IAAIkH,EAAE,CAACvB,KAAK,CAACE,kBAAkB,KAAK,IAAI,IAAIqB,EAAE,CAACvB,KAAK,CAACG,cAAc,KAAK,IAAI,IAAM,CAAClK,MAAM,CAAC/I,IAAI,CAACuG,SAAS,EAAE6N,YAAY,EAAE7S,IAAI,CAACM,UAAU,EAAE,IAAI,CAAC,IAAIwS,EAAE,CAACvB,KAAK,CAACM,GAAG,KAAKjG,WAAY,EAAE;YAC/P,IAAImH,MAAM,GAAGvF,QAAQ,CAAC/O,IAAI,CAACuG,SAAS,EAAE6N,YAAY,CAAC;YACnD,IAAIF,aAAa,IAAII,MAAM,IAAIJ,aAAa,KAAKE,YAAY,EAAE;cAC3DA,YAAY,GAAGE,MAAM;YACzB;UACJ;UACAf,aAAa,CAAC9D,GAAG,GAAG8D,aAAa,CAAC/D,KAAK,GAAG4E,YAAY;QAC1D;IAAC;IAGT,OAAOb,aAAa;EACxB;AACJ;;AAGA;AACA,SAASrM,SAAS,CAACqN,OAAO,EAAE;EAClB,IAAAhO,SAAS,GAAG,IAAI;IAAGnF,OAAO,GAAImF,SAAS,CAApBnF,OAAO;EAEhC,IAAIA,OAAO,CAACI,MAAM,KAAK0C,SAAS,IAAIqQ,OAAO,KAAK,IAAI,EAAE;IAClDnT,OAAO,CAACI,MAAM,GAAG6B,gCAAe,CAACrD,IAAI,CAACuG,SAAS,EAAE,IAAI,EAAEjD,oBAAoB,CAACtD,IAAI,CAACuG,SAAS,CAAC,EAAE,IAAI,CAAC;IAClG,IAAInF,OAAO,CAACoT,OAAO,KAAKtQ,SAAS,EAAE9C,OAAO,CAACoT,OAAO,GAAGpT,OAAO,CAACI,MAAM,CAACyE,KAAK,EAAE;EAC/E;EACA,OAAO7E,OAAO,CAACI,MAAM;AACzB;;AAEA;AACA,SAAS6F,iBAAiB,GAAG;EACzB,IAAMd,SAAS,GAAG,IAAI;IAAEnF,OAAO,GAAG,IAAI,CAACA,OAAO;EAE9C,IAAIA,OAAO,CAACoT,OAAO,KAAKtQ,SAAS,EAAE;IAC/B;IACA9C,OAAO,CAACoT,OAAO,GAAGnR,gCAAe,CAACrD,IAAI,CAACuG,SAAS,EAAE,KAAK,EAAE,CAAC,CAAC;IAC3D,IAAInF,OAAO,CAACI,MAAM,KAAK0C,SAAS,EAAE9C,OAAO,CAACI,MAAM,GAAGJ,OAAO,CAACoT,OAAO,CAACvO,KAAK,EAAE;EAC9E;EACA,OAAO7E,OAAO,CAACoT,OAAO;AAC1B;;AAEA;AACA,SAASlR,oBAAoB,CAACmR,SAAS,EAAEnT,MAAM,EAAEkK,cAAc,EAAE;EAC7D,IAAMpK,OAAO,GAAG,IAAI,CAACA,OAAO;EAE5B,IAAIsT,MAAM,GAAG,CAAC,CAAC;IACXC,KAAK,GAAG,CAAC,CAAC;IACVC,MAAM,GAAGpJ,cAAc,IAAIpK,OAAO,CAACoK,cAAc,CAAC,CAAC;EACvD,IAAIiJ,SAAS,KAAKvQ,SAAS,EAAEuQ,SAAS,GAAG,CAAC,CAAC;EAC3C,KAAK,IAAII,KAAK,GAAG,CAAC,EAAEZ,GAAG,GAAGW,MAAM,CAACrV,MAAM,EAAEsV,KAAK,GAAGZ,GAAG,EAAEY,KAAK,EAAE,EAAE;IAC3D,IAAID,MAAM,CAACC,KAAK,CAAC,KAAKvT,MAAM,IAAIsT,MAAM,CAACC,KAAK,CAAC,CAACC,cAAc,KAAK,IAAI,CAAC,EAAE;MACpE,IAAID,KAAK,IAAIJ,SAAS,EAAEC,MAAM,GAAGG,KAAK;MACtC,IAAIA,KAAK,IAAIJ,SAAS,EAAEE,KAAK,GAAGE,KAAK;IACzC;EACJ;EACA,OAAQH,MAAM,KAAK,CAAC,CAAC,IAAIA,MAAM,IAAID,SAAS,GAAIE,KAAK,GAAGA,KAAK,IAAI,CAAC,CAAC,GAAGD,MAAM,GAAID,SAAS,GAAGC,MAAM,GAAKC,KAAK,GAAGF,SAAU,GAAGC,MAAM,GAAGC,KAAK;AAC9I;;AAEA;AACA,SAAS5L,MAAM,CAAC1H,GAAG,EAAEC,MAAM,EAAEyT,KAAK,EAAE;EAChC,IAAMxO,SAAS,GAAG,IAAI;IAAEnF,OAAO,GAAG,IAAI,CAACA,OAAO;EAE9C,IAAIK,IAAI,GAAGkR,gCAAe,CAAC3S,IAAI,CAACuG,SAAS,EAAElF,GAAG,CAAC,CAACyR,KAAK;EACrD,IAAIrR,IAAI,CAAC2R,GAAG,KAAK,EAAE,EAAE3R,IAAI,GAAGuT,wBAAO,CAAChV,IAAI,CAACuG,SAAS,EAAElF,GAAG,CAAC,CAACyR,KAAK;EAE9D,IAAIrR,IAAI,UAAO,KAAK,IAAI,EAAE;IACtB,OAAOA,IAAI,CAACwT,EAAE;EAClB;EACA,IAAIF,KAAK,KAAK,IAAI,IAAK3T,OAAO,CAACoK,cAAc,CAACnK,GAAG,CAAC,KAAK6C,SAAS,IAAI9C,OAAO,CAACoK,cAAc,CAACnK,GAAG,CAAC,CAACyT,cAAc,KAAK,IAAK,EAAE;IACtH,OAAO,IAAI;EACf;EAEA,IAAIxT,MAAM,KAAK,IAAI,IAAID,GAAG,GAAG,CAAC,CAAC,EAAE;IAC7B,IAAI0T,KAAK,EAAE;MAAE;MACT,IAAIG,KAAK,GAAG/B,yBAAQ,CAACnT,IAAI,CAACuG,SAAS,EAAElF,GAAG,CAAC;MACzC,OAAO6T,KAAK,CAAC3V,MAAM,GAAI,CAAC,IAAI2V,KAAK,CAACA,KAAK,CAAC3V,MAAM,GAAG,CAAC,CAAC,CAACuT,KAAK,CAACM,GAAG,KAAK,EAAE,GAAG,CAAC,GAAG,CAAC,CAAE;IAClF;IACA;IACA,IAAI+B,YAAY,GAAGC,sCAAqB,CAACpV,IAAI,CAACuG,SAAS,EAAElF,GAAG,EAAE8R,yBAAQ,CAACnT,IAAI,CAACuG,SAAS,EAAElF,GAAG,CAAC,CAAC;IAC5F,IAAIgU,eAAe,GAAGhC,+BAAc,CAACrT,IAAI,CAACuG,SAAS,EAAElF,GAAG,EAAE8T,YAAY,CAACrC,KAAK,CAAC;IAC7E,OAAOqC,YAAY,CAACrC,KAAK,CAACM,GAAG,KAAKiC,eAAe;EAErD;EACA,OAAO,KAAK;AAChB;;AAEA;AACA,SAASzG,YAAY,CAAC0G,IAAI,EAAE;EACxB,IAAMlU,OAAO,GAAG,IAAI,CAACA,OAAO;EAE5BA,OAAO,CAACI,MAAM,GAAG0C,SAAS;EAC1B,IAAIoR,IAAI,KAAK,IAAI,EAAE;IACflU,OAAO,CAACoK,cAAc,GAAG,EAAE;IAC3BpK,OAAO,CAAC4I,CAAC,GAAG,CAAC;EACjB;AACJ;;AAEA;AACA,SAAS+E,QAAQ,CAAC1N,GAAG,EAAEkU,QAAQ,EAAER,KAAK,EAAE;EACpC,IAAMxO,SAAS,GAAG,IAAI;EAEtB,IAAIwO,KAAK,KAAK7Q,SAAS,EAAE6Q,KAAK,GAAG,IAAI;EACrC,IAAIS,QAAQ,GAAGnU,GAAG,GAAG,CAAC;EACtB,OAAO2T,wBAAO,CAAChV,IAAI,CAACuG,SAAS,EAAEiP,QAAQ,CAAC,CAAC1C,KAAK,CAACM,GAAG,KAAK,EAAE,KACvDmC,QAAQ,KAAK,IAAI,KAAKP,wBAAO,CAAChV,IAAI,CAACuG,SAAS,EAAEiP,QAAQ,CAAC,CAAC1C,KAAK,CAACG,cAAc,KAAK,IAAI,IAAI,CAAClK,MAAM,CAAC/I,IAAI,CAACuG,SAAS,EAAEiP,QAAQ,EAAEtR,SAAS,EAAE,IAAI,CAAC,CAAC,IACzIqR,QAAQ,KAAK,IAAI,IAAI,CAACxM,MAAM,CAAC/I,IAAI,CAACuG,SAAS,EAAEiP,QAAQ,EAAEtR,SAAS,EAAE6Q,KAAK,CAAE,CAAC,EAAE;IAC7ES,QAAQ,EAAE;EACd;EACA,OAAOA,QAAQ;AACnB;;AAEA;AACA,SAASC,YAAY,CAACpU,GAAG,EAAEkU,QAAQ,EAAE;EACjC,IAAMhP,SAAS,GAAG,IAAI;EAEtB,IAAIiP,QAAQ,GAAGnU,GAAG,GAAG,CAAC;EACtB,IAAIA,GAAG,IAAI,CAAC,EAAE,OAAO,CAAC;EAEtB,OAAOmU,QAAQ,GAAG,CAAC,KACjBD,QAAQ,KAAK,IAAI,KAAKP,wBAAO,CAAChV,IAAI,CAACuG,SAAS,EAAEiP,QAAQ,CAAC,CAAC1C,KAAK,CAACG,cAAc,KAAK,IAAI,IAAI,CAAClK,MAAM,CAAC/I,IAAI,CAACuG,SAAS,EAAEiP,QAAQ,EAAEtR,SAAS,EAAE,IAAI,CAAC,CAAC,IACzIqR,QAAQ,KAAK,IAAI,IAAI,CAACxM,MAAM,CAAC/I,IAAI,CAACuG,SAAS,EAAEiP,QAAQ,EAAEtR,SAAS,EAAE,IAAI,CAAE,CAAC,EAAE;IAC5EsR,QAAQ,EAAE;EACd;EACA,OAAOA,QAAQ;AACnB;;AAEA;AACA,SAAS3F,iBAAiB,CAACxO,GAAG,EAAE;EAC5B,IAAMkF,SAAS,GAAG,IAAI;IAClBhF,IAAI,GAAG,IAAI,CAACA,IAAI;IAChB0C,EAAE,GAAG,IAAI,CAACA,EAAE;EAEhB,IAAIsC,SAAS,CAACd,KAAK,IAAI,OAAOpE,GAAG,KAAK,QAAQ,KAAK,CAACE,IAAI,CAACmB,MAAM,IAAInB,IAAI,CAAC4L,WAAW,KAAK,EAAE,CAAC,IAAIlJ,EAAE,EAAE;IAC/F5C,GAAG,GAAGkF,SAAS,CAACa,SAAS,EAAE,CAAC7H,MAAM,GAAG8B,GAAG;IACxC,IAAIA,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAG,CAAC;EACxB;EACA,OAAOA,GAAG;AACd;;;;;;;;;;;;;;;;;;;AC/UA;AAAoC;AAEpC,SAASqU,UAAU,CAACC,GAAG,EAAEC,KAAK,EAAE;EAAE;EAC9B,IAAInD,OAAO,GAAG,CAACkD,GAAG,CAAC9C,WAAW,IAAI3O,SAAS,GAAGyR,GAAG,CAACE,IAAI,CAACC,gBAAgB,CAACH,GAAG,CAAC,CAAC,GAAGA,GAAG,CAAClD,OAAO,EAAElP,IAAI,CAAC,EAAE,CAAC;EACrG,IAAIkP,OAAO,KAAK,EAAE,EAAE,OAAOA,OAAO,CAAClT,MAAM,GAAGqW,KAAK;IAAEnD,OAAO,IAAI,GAAG;EAAC;EAClE,OAAOA,OAAO;AAClB;AAEA,SAASqD,gBAAgB,CAACH,GAAG,EAAE;EAC3B,IAAII,aAAa,GAAGJ,GAAG,CAAClD,OAAO,CAACkD,GAAG,CAAC9C,WAAW,CAAC;EAChD,IAAI,OAAOkD,aAAa,IAAI,QAAQ,IAAIA,aAAa,CAACxW,MAAM,GAAG,CAAC,EAAE;IAAE;IAChEwW,aAAa,GAAGA,aAAa,CAAChP,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EAC/C;EACA,OAAOgP,aAAa,KAAK7R,SAAS,GAAG6R,aAAa,CAAC3R,QAAQ,EAAE,GAAG,EAAE;AACtE;;AAEA;AACA,SAASiP,cAAc,CAAChS,GAAG,EAAEI,IAAI,EAAEuU,QAAQ,EAAE;EACzC,IAAMzP,SAAS,GAAG,IAAI;IAClBhF,IAAI,GAAG,IAAI,CAACA,IAAI;IAChBH,OAAO,GAAG,IAAI,CAACA,OAAO;EAE1BK,IAAI,GAAGA,IAAI,IAAIuT,OAAO,CAAChV,IAAI,CAACuG,SAAS,EAAElF,GAAG,CAAC,CAACyR,KAAK;EACjD,IAAIrR,IAAI,CAAC0L,WAAW,KAAKjJ,SAAS,IAAI8R,QAAQ,KAAK,IAAI,EAAE;IACrD,OAAO,OAAOvU,IAAI,CAAC0L,WAAW,KAAK,UAAU,GAAG1L,IAAI,CAAC0L,WAAW,CAAC5L,IAAI,CAAC,GAAGE,IAAI,CAAC0L,WAAW;EAC7F,CAAC,MAAM,IAAI1L,IAAI,UAAO,KAAK,IAAI,EAAE;IAC7B,IAAIJ,GAAG,GAAG,CAAC,CAAC,IAAID,OAAO,CAACoK,cAAc,CAACnK,GAAG,CAAC,KAAK6C,SAAS,EAAE;MACvD,IAAIgR,KAAK,GAAG/B,QAAQ,CAACnT,IAAI,CAACuG,SAAS,EAAElF,GAAG,CAAC;QACrC4U,kBAAkB,GAAG,EAAE;QACvBC,QAAQ;MACZ,IAAIhB,KAAK,CAAC3V,MAAM,GAAG,CAAC,IAAI2V,KAAK,CAACA,KAAK,CAAC3V,MAAM,GAAG,CAAC,CAAC,CAACuT,KAAK,CAACM,GAAG,KAAK,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE;QACvE,KAAK,IAAI3Q,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGyS,KAAK,CAAC3V,MAAM,EAAEkD,CAAC,EAAE,EAAE;UACnC,IAAIyS,KAAK,CAACzS,CAAC,CAAC,CAACqQ,KAAK,CAACM,GAAG,KAAK,EAAE,IAAI8B,KAAK,CAACzS,CAAC,CAAC,CAACqQ,KAAK,CAACC,WAAW,KAAK,IAAI,IAAImC,KAAK,CAACzS,CAAC,CAAC,CAACqQ,KAAK,CAACE,kBAAkB,KAAK,IAAI,KAC7GkC,KAAK,CAACzS,CAAC,CAAC,CAACqQ,KAAK,UAAO,KAAK,IAAI,IAAKoD,QAAQ,KAAKhS,SAAS,IAAIgR,KAAK,CAACzS,CAAC,CAAC,CAACqQ,KAAK,CAACmC,EAAE,CAACxT,IAAI,CAACyU,QAAQ,CAACpD,KAAK,CAACM,GAAG,EAAEhS,OAAO,EAAEC,GAAG,EAAE,IAAI,EAAEE,IAAI,CAAC,KAAK,KAAM,CAAC,EAAE;YAChJ0U,kBAAkB,CAACtJ,IAAI,CAACuI,KAAK,CAACzS,CAAC,CAAC,CAAC;YACjC,IAAIyS,KAAK,CAACzS,CAAC,CAAC,CAACqQ,KAAK,UAAO,KAAK,IAAI,EAAEoD,QAAQ,GAAGhB,KAAK,CAACzS,CAAC,CAAC;YACvD,IAAIwT,kBAAkB,CAAC1W,MAAM,GAAG,CAAC,EAAE;cAC/B,IAAI,aAAa,CAACkC,IAAI,CAACwU,kBAAkB,CAAC,CAAC,CAAC,CAACnD,KAAK,CAACM,GAAG,CAAC,EAAE;gBACrD,OAAO7R,IAAI,CAAC4L,WAAW,CAACgJ,MAAM,CAAC9U,GAAG,GAAGE,IAAI,CAAC4L,WAAW,CAAC5N,MAAM,CAAC;cACjE;YACJ;UACJ;QACJ;MACJ;IACJ;IACA,OAAOkC,IAAI,CAAC2R,GAAG;EACnB;EAEA,OAAO7R,IAAI,CAAC4L,WAAW,CAACgJ,MAAM,CAAC9U,GAAG,GAAGE,IAAI,CAAC4L,WAAW,CAAC5N,MAAM,CAAC;AACjE;;AAEA;AACA,SAAS8D,eAAe,CAAC+S,WAAW,EAAEC,UAAU,EAAEC,WAAW,EAAEC,KAAK,EAAEvK,iBAAiB,EAAE;EACrF;;EAEA,IAAIzF,SAAS,GAAG,IAAI;IAChBhF,IAAI,GAAG,IAAI,CAACA,IAAI;IAChBH,OAAO,GAAG,IAAI,CAACA,OAAO;EAG1B,IAAIsB,MAAM,GAAGnB,IAAI,CAACmB,MAAM;EACxB,IAAIsJ,iBAAiB,IAAIzK,IAAI,CAACmB,MAAM,EAAE;IAClCnB,IAAI,CAACmB,MAAM,GAAG,KAAK;IACnB6D,SAAS,CAACnF,OAAO,CAAC8T,KAAK,GAAG,CAAC,CAAC;EAChC;EACAmB,UAAU,GAAGA,UAAU,IAAI,CAAC;EAC5B,IAAIG,YAAY,GAAG,EAAE;IACjBhE,SAAS;IAAEnR,GAAG,GAAG,CAAC;IAClBI,IAAI;IAAEiR,OAAO;IAAE+D,eAAe;EAClC,GAAG;IACC,IAAIL,WAAW,KAAK,IAAI,IAAIhV,OAAO,CAACoK,cAAc,CAACnK,GAAG,CAAC,EAAE;MACrDqR,OAAO,GAAI1G,iBAAiB,IAAI5K,OAAO,CAACoK,cAAc,CAACnK,GAAG,CAAC,CAACyR,KAAK,CAACC,WAAW,IACtE3R,OAAO,CAACoK,cAAc,CAACnK,GAAG,GAAG,CAAC,CAAC,KAAK6C,SAAS,KAC5C9C,OAAO,CAACoK,cAAc,CAACnK,GAAG,CAAC,CAACyT,cAAc,KAAK,IAAI,IAAK1T,OAAO,CAACoK,cAAc,CAACnK,GAAG,CAAC,CAACuJ,KAAK,IAAIrJ,IAAI,CAACoB,yBAAyB,IAAItB,GAAG,GAAG,CAAE,CAAC,GAC1I+T,qBAAqB,CAACpV,IAAI,CAACuG,SAAS,EAAElF,GAAG,EAAE8R,QAAQ,CAACnT,IAAI,CAACuG,SAAS,EAAElF,GAAG,EAAEmR,SAAS,EAAEnR,GAAG,GAAG,CAAC,CAAC,CAAC,GAC7FD,OAAO,CAACoK,cAAc,CAACnK,GAAG,CAAC;MACjCI,IAAI,GAAGiR,OAAO,CAACI,KAAK;MACpBN,SAAS,GAAGE,OAAO,CAACD,OAAO,CAACxM,KAAK,EAAE;MACnCuQ,YAAY,CAAC7J,IAAI,CAAC2J,WAAW,KAAK,IAAI,GAAG5D,OAAO,CAAC9H,KAAK,GAAG0L,WAAW,KAAK,KAAK,GAAG7U,IAAI,CAACiV,SAAS,GAAGrD,cAAc,CAACrT,IAAI,CAACuG,SAAS,EAAElF,GAAG,EAAEI,IAAI,CAAC,CAAC;IAChJ,CAAC,MAAM;MACHiR,OAAO,GAAGC,eAAe,CAAC3S,IAAI,CAACuG,SAAS,EAAElF,GAAG,EAAEmR,SAAS,EAAEnR,GAAG,GAAG,CAAC,CAAC;MAClEI,IAAI,GAAGiR,OAAO,CAACI,KAAK;MACpBN,SAAS,GAAGE,OAAO,CAACD,OAAO,CAACxM,KAAK,EAAE;MACnC,IAAI0Q,UAAU,GAAGJ,KAAK,KAAK,IAAI,GAAG,KAAK,GAAIhV,IAAI,CAACoV,UAAU,KAAK,KAAK,GAAGpV,IAAI,CAACoV,UAAU,GAAGlV,IAAI,CAACmV,GAAI;MAClG;MACAH,eAAe,GAAG,CAAEA,eAAe,IAAIhV,IAAI,UAAO,IAAIA,IAAI,CAAC2R,GAAG,KAAK7R,IAAI,CAACsV,cAAc,IAAIpV,IAAI,CAACwT,EAAE,KAAK,IAAI,IAAM7T,OAAO,CAACoK,cAAc,CAACnK,GAAG,GAAG,CAAC,CAAC,IAAII,IAAI,UAAO,IAAIA,IAAI,CAAC2R,GAAG,KAAK7R,IAAI,CAACsV,cAAc,IAAIpV,IAAI,CAACwT,EAAE,KAAK,IAAK,KAAK7T,OAAO,CAAC8T,KAAK,CAAC7T,GAAG,CAAC,IAAID,OAAO,CAAC8T,KAAK,CAAC7T,GAAG,CAAC,CAAC9B,MAAM,KAAK,CAAC;MACjR,IAAIkX,eAAe,IAAIE,UAAU,KAAK,KAAK,IAAIA,UAAU,KAAKzS,SAAS,CAAC,oBAAqB,OAAOyS,UAAU,KAAK,QAAQ,IAAIG,QAAQ,CAACH,UAAU,CAAC,IAAIA,UAAU,GAAGtV,GAAI,EAAE;QACtKmV,YAAY,CAAC7J,IAAI,CAAC2J,WAAW,KAAK,KAAK,GAAG7U,IAAI,CAACiV,SAAS,GAAGrD,cAAc,CAACrT,IAAI,CAACuG,SAAS,EAAEiQ,YAAY,CAACjX,MAAM,EAAEkC,IAAI,CAAC,CAAC;MACzH,CAAC,MAAM;QACHgV,eAAe,GAAG,KAAK;MAC3B;IACJ;IAEApV,GAAG,EAAE;EACT,CAAC,QAASI,IAAI,UAAO,KAAK,IAAI,IAAIA,IAAI,CAAC2R,GAAG,KAAK,EAAE,IAAKiD,UAAU,GAAGhV,GAAG;EACtE,IAAImV,YAAY,CAACA,YAAY,CAACjX,MAAM,GAAG,CAAC,CAAC,KAAK,EAAE,EAAE;IAC9CiX,YAAY,CAACO,GAAG,EAAE,CAAC,CAAC;EACxB;;EACA,IAAIT,WAAW,KAAK,KAAK;EAAI;EACzBlV,OAAO,CAAC4V,UAAU,KAAK9S,SAAS;IAAE;IACtC;MACI9C,OAAO,CAAC4V,UAAU,GAAG3V,GAAG,GAAG,CAAC;IAChC;EAEAE,IAAI,CAACmB,MAAM,GAAGA,MAAM;EACpB,OAAO8T,YAAY;AACvB;;AAEA;AACA,SAAS7D,eAAe,CAACtR,GAAG,EAAEmR,SAAS,EAAEyE,KAAK,EAAE;EAC5C,IAAI1Q,SAAS,GAAG,IAAI;IAChBnF,OAAO,GAAG,IAAI,CAACA,OAAO;EAE1B,OAAOA,OAAO,CAACoK,cAAc,CAACnK,GAAG,CAAC,IAAI+T,qBAAqB,CAACpV,IAAI,CAACuG,SAAS,EAAElF,GAAG,EAAE8R,QAAQ,CAACnT,IAAI,CAACuG,SAAS,EAAElF,GAAG,EAAEmR,SAAS,GAAGA,SAAS,CAACvM,KAAK,EAAE,GAAGuM,SAAS,EAAEyE,KAAK,CAAC,CAAC;AACrK;;AAEA;AACA,SAAS7B,qBAAqB,CAAC/T,GAAG,EAAE6T,KAAK,EAAE;EACvC,IAAI3O,SAAS,GAAG,IAAI;IAChBhF,IAAI,GAAG,IAAI,CAACA,IAAI;IAChB2V,YAAY,GAAG,CAAC;EACpB,IAAIC,gBAAgB,GAAGC,yBAAyB,CAAC/V,GAAG,EAAE6T,KAAK,CAAC;EAC5D7T,GAAG,GAAGA,GAAG,GAAG,CAAC,GAAGA,GAAG,GAAG,CAAC,GAAG,CAAC;EAC3B,IAAIgW,OAAO,GAAGrC,OAAO,CAAChV,IAAI,CAACuG,SAAS,EAAElF,GAAG,CAAC;IAAEiW,aAAa,GAAG5B,UAAU,CAAC2B,OAAO,CAAC;IAAEE,UAAU;IAAEC,OAAO;IAAEC,SAAS;EAC/G,IAAIlW,IAAI,CAACmB,MAAM,IAAIwS,KAAK,CAAC3V,MAAM,GAAG,CAAC,IAAI2V,KAAK,CAACA,KAAK,CAAC3V,MAAM,GAAG,CAAC,CAAC,CAACuT,KAAK,CAACM,GAAG,KAAK,EAAE,EAC3E8D,YAAY,GAAG,CAAC;EACpB;EACA;EACA,KAAK,IAAI/Q,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAG+O,KAAK,CAAC3V,MAAM,GAAG2X,YAAY,EAAE/Q,GAAG,EAAE,EAAE;IAAE;IAC1D,IAAIwP,GAAG,GAAGT,KAAK,CAAC/O,GAAG,CAAC;IACpBoR,UAAU,GAAG7B,UAAU,CAACC,GAAG,EAAE2B,aAAa,CAAC/X,MAAM,CAAC;IAClD,IAAImY,QAAQ,GAAGhY,IAAI,CAACE,GAAG,CAAC2X,UAAU,GAAGD,aAAa,CAAC;IAEnD,IAAIE,OAAO,KAAKtT,SAAS,IACjBqT,UAAU,KAAK,EAAE,IAAIG,QAAQ,GAAGF,OAAQ,IACxCC,SAAS,IAAI,CAAClW,IAAI,CAACmB,MAAM,IACxB+U,SAAS,CAAC3E,KAAK,CAACC,WAAW,IAAI0E,SAAS,CAAC3E,KAAK,CAACC,WAAW,GAAGoE,gBAAgB,GAAG,CAAE,IACnFM,SAAS,CAAC3E,KAAK,CAACG,cAAc,KAAK,QAAQ,KACzC,CAAC0C,GAAG,CAAC7C,KAAK,CAACC,WAAW,IAAI4C,GAAG,CAAC7C,KAAK,CAACC,WAAW,GAAGoE,gBAAgB,GAAG,CAAC,IAAK,CAACxB,GAAG,CAAC7C,KAAK,CAACG,cAAc,CAAE,IACxGwE,SAAS,IAAI,CAAClW,IAAI,CAACmB,MAAM,IAAI+U,SAAS,CAAC3E,KAAK,CAACE,kBAAkB,IAAI,CAAC2C,GAAG,CAAC7C,KAAK,CAACE,kBAAmB,EAAE;MACvGwE,OAAO,GAAGE,QAAQ;MAClBD,SAAS,GAAG9B,GAAG;IACnB;EACJ;EACA,OAAO8B,SAAS;AACpB;AAEA,SAASL,yBAAyB,CAAC/V,GAAG,EAAE6T,KAAK,EAAE;EAC3C,IAAIiC,gBAAgB,GAAG,CAAC;IAAEQ,uBAAuB,GAAG,KAAK;EACzDzC,KAAK,CAAChP,OAAO,CAAC,UAAAzE,IAAI,EAAI;IAClB,IAAIA,IAAI,CAACqR,KAAK,CAACC,WAAW,EAAE;MACxB,IAAIoE,gBAAgB,KAAK,CAAC,IAAIA,gBAAgB,KAAK1V,IAAI,CAACqR,KAAK,CAACC,WAAW,EACrE4E,uBAAuB,GAAG,IAAI;MAClC,IAAIR,gBAAgB,KAAK,CAAC,IAAIA,gBAAgB,GAAG1V,IAAI,CAACqR,KAAK,CAACC,WAAW,EAAE;QACrEoE,gBAAgB,GAAG1V,IAAI,CAACqR,KAAK,CAACC,WAAW;MAC7C;IACJ;EACJ,CAAC,CAAC;EACF,IAAIoE,gBAAgB,EAAE;IAClB,IAAI9V,GAAG,IAAI,CAAC,EAAE8V,gBAAgB,GAAG,CAAC,CAAC,KAC9B,IAAIjC,KAAK,CAAC3V,MAAM,IAAI,CAAC,EAAE4X,gBAAgB,GAAG,CAAC,CAAC,KAC5C,IAAI,CAACQ,uBAAuB,EAAER,gBAAgB,GAAG,CAAC;EAC3D;EACA,OAAOA,gBAAgB;AAC3B;;AAEA;AACA,SAASnC,OAAO,CAAC3T,GAAG,EAAE6T,KAAK,EAAE;EACzB,IAAI3O,SAAS,GAAG,IAAI;IAChBnF,OAAO,GAAG,IAAI,CAACA,OAAO;EAE1B,IAAIA,OAAO,CAACoK,cAAc,CAACnK,GAAG,CAAC,EAAE;IAC7B,OAAOD,OAAO,CAACoK,cAAc,CAACnK,GAAG,CAAC;EACtC;EACA,OAAO,CAAC6T,KAAK,IAAI/B,QAAQ,CAACnT,IAAI,CAACuG,SAAS,EAAElF,GAAG,CAAC,EAAE,CAAC,CAAC;AACtD;AAEA,SAASuW,UAAU,CAACC,MAAM,EAAEC,MAAM,EAAEvW,IAAI,EAAE;EACtC,SAASwW,MAAM,CAACC,OAAO,EAAE;IACrB,IAAIC,QAAQ,GAAG,EAAE;MAAEvX,KAAK,GAAG,CAAC,CAAC;MAAE+O,GAAG;IAClC,KAAK,IAAIhN,CAAC,GAAG,CAAC,EAAEyV,CAAC,GAAGF,OAAO,CAACzY,MAAM,EAAEkD,CAAC,GAAGyV,CAAC,EAAEzV,CAAC,EAAE,EAAE;MAC5C,IAAIuV,OAAO,CAAC7B,MAAM,CAAC1T,CAAC,CAAC,KAAK,GAAG,EAAE;QAC3BgN,GAAG,GAAGuI,OAAO,CAACG,UAAU,CAAC1V,CAAC,GAAG,CAAC,CAAC;QAC/B,OAAO,EAAE/B,KAAK,GAAG+O,GAAG;UAAEwI,QAAQ,CAACtL,IAAI,CAACnM,MAAM,CAAC8O,YAAY,CAAC5O,KAAK,CAAC,CAAC;QAAC;MACpE,CAAC,MAAM;QACHA,KAAK,GAAGsX,OAAO,CAACG,UAAU,CAAC1V,CAAC,CAAC;QAC7BwV,QAAQ,CAACtL,IAAI,CAACqL,OAAO,CAAC7B,MAAM,CAAC1T,CAAC,CAAC,CAAC;MACpC;IACJ;IACA,OAAOwV,QAAQ,CAAC1U,IAAI,CAAC,EAAE,CAAC;EAC5B;EAEA,IAAIsU,MAAM,CAAC/E,KAAK,CAACM,GAAG,KAAK0E,MAAM,CAAChF,KAAK,CAAC4D,SAAS,EAAE,OAAO,IAAI;EAC5D,IAAI,CAACnV,IAAI,CAACI,KAAK,IAAKkW,MAAM,CAAC/E,KAAK,CAACmC,EAAE,YAAYhU,MAAM,IAAI6W,MAAM,CAAChF,KAAK,CAACmC,EAAE,YAAYhU,MAAO,KAAK4W,MAAM,CAAC/E,KAAK,UAAO,KAAK,IAAI,IAAIgF,MAAM,CAAChF,KAAK,UAAO,KAAK,IAAI,EAAE;IAAE;IAC5J,OAAOiF,MAAM,CAACD,MAAM,CAAChF,KAAK,CAACmC,EAAE,CAAC7Q,QAAQ,EAAE,CAACrB,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC,CAACpC,OAAO,CAACoX,MAAM,CAACF,MAAM,CAAC/E,KAAK,CAACmC,EAAE,CAAC7Q,QAAQ,EAAE,CAACrB,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;EAC9I;EACA,OAAO,KAAK;AAChB;;AAEA;AACA,SAASoQ,QAAQ,CAAC9R,GAAG,EAAEmR,SAAS,EAAEyE,KAAK,EAAE;EACrC,IAAI1Q,SAAS,GAAG,IAAI;IAChBvC,CAAC,GAAG,IAAI,CAACD,aAAa;IACtB3C,OAAO,GAAG,IAAI,CAACA,OAAO;IACtBG,IAAI,GAAG,IAAI,CAACA,IAAI;IAChB0C,EAAE,GAAG,IAAI,CAACA,EAAE;IACZmU,UAAU,GAAGhX,OAAO,CAACiX,SAAS;IAC9B3F,OAAO,GAAGF,SAAS,GAAGyE,KAAK,GAAG,CAAC;IAC/BqB,cAAc,GAAG9F,SAAS,GAAGA,SAAS,CAACvM,KAAK,EAAE,GAAG,CAAC,CAAC,CAAC;IACpDsS,OAAO,GAAG,EAAE;IACZC,UAAU,GAAG,KAAK;IAClBC,WAAW;IACXC,eAAe,GAAGlG,SAAS,GAAGA,SAAS,CAACjP,IAAI,CAAC,EAAE,CAAC,GAAG,EAAE;EAEzD,SAASoV,oBAAoB,CAACN,SAAS,EAAEC,cAAc,EAAEM,OAAO,EAAEC,iBAAiB,EAAE;IAAE;IACnF,SAASC,WAAW,CAAChG,KAAK,EAAE8F,OAAO,EAAEC,iBAAiB,EAAE;MACpD,SAASE,YAAY,CAACN,WAAW,EAAEO,UAAU,EAAE;QAC3C,IAAIC,UAAU,GAAGD,UAAU,CAACT,OAAO,CAAC5X,OAAO,CAAC8X,WAAW,CAAC,KAAK,CAAC;QAC9D,IAAI,CAACQ,UAAU,EAAE;UACbD,UAAU,CAACT,OAAO,CAACW,KAAK,CAAC,UAAUpG,KAAK,EAAE3M,GAAG,EAAE;YAC3C,IAAI2M,KAAK,CAACqG,YAAY,KAAK,IAAI,EAAE;cAC7BF,UAAU,GAAGF,YAAY,CAACN,WAAW,EAAEO,UAAU,CAACT,OAAO,CAACpS,GAAG,GAAG,CAAC,CAAC,CAAC;YACvE,CAAC,MAAM,IAAI3H,MAAM,CAACK,SAAS,CAACua,cAAc,CAACpZ,IAAI,CAAC8S,KAAK,EAAE,SAAS,CAAC,EAAEmG,UAAU,GAAGF,YAAY,CAACN,WAAW,EAAE3F,KAAK,CAAC;YAChH,IAAImG,UAAU,EAAE,OAAO,KAAK;YAE5B,OAAO,IAAI;UACf,CAAC,CAAC;QACN;QACA,OAAOA,UAAU;MACrB;MAEA,SAASI,qBAAqB,CAAChY,GAAG,EAAEiY,YAAY,EAAEC,iBAAiB,EAAE;QACjE,IAAI9B,SAAS,EAAE+B,QAAQ;QAEvB,IAAIpY,OAAO,CAAC8T,KAAK,CAAC7T,GAAG,CAAC,IAAID,OAAO,CAACoK,cAAc,CAACnK,GAAG,CAAC,EAAE;UACnD,CAACD,OAAO,CAAC8T,KAAK,CAAC7T,GAAG,CAAC,IAAI,CAACD,OAAO,CAACoK,cAAc,CAACnK,GAAG,CAAC,CAAC,EAAE6X,KAAK,CAAC,UAAUO,IAAI,EAAEtT,GAAG,EAAE;YAC7E,IAAIsT,IAAI,CAAC5D,IAAI,CAACyD,YAAY,CAAC,EAAE;cACzB7B,SAAS,GAAGgC,IAAI;cAChB,OAAO,KAAK,CAAC,CAAC;YAClB;;YACA,IAAI5G,WAAW,GAAG0G,iBAAiB,KAAKrV,SAAS,GAAGqV,iBAAiB,GAAGE,IAAI,CAAC5G,WAAW;cACpF6G,MAAM,GAAGD,IAAI,CAAChH,OAAO,CAACI,WAAW,CAAC,KAAK3O,SAAS,GAAGuV,IAAI,CAAChH,OAAO,CAACI,WAAW,CAAC,CAACzO,QAAQ,EAAE,CAACzD,OAAO,CAAC2Y,YAAY,CAAC,GAAG,CAAC,CAAC;YACtH,IAAI,CAACE,QAAQ,KAAKtV,SAAS,IAAIwV,MAAM,GAAGF,QAAQ,KAAKE,MAAM,KAAK,CAAC,CAAC,EAAE;cAChEjC,SAAS,GAAGgC,IAAI;cAChBD,QAAQ,GAAGE,MAAM;YACrB;YAEA,OAAO,IAAI;UACf,CAAC,CAAC;QACN;QACA,IAAIjC,SAAS,EAAE;UACX,IAAIkC,iBAAiB,GAAGlC,SAAS,CAAChF,OAAO,CAACgF,SAAS,CAAC5E,WAAW,CAAC;UAChE,IAAIJ,OAAO,GAAGgF,SAAS,CAAC5B,IAAI,CAACyD,YAAY,CAAC,IAAI7B,SAAS,CAAC5B,IAAI,CAAC8D,iBAAiB,CAAC,IAAIlC,SAAS,CAAChF,OAAO;UACpG,OAAOA,OAAO,CAACxM,KAAK,CAAC,CAACsT,iBAAiB,KAAKrV,SAAS,GAAGqV,iBAAiB,GAAG9B,SAAS,CAAC5E,WAAW,IAAI,CAAC,CAAC;QAC3G,CAAC,MAAM;UACH,OAAO0G,iBAAiB,KAAKrV,SAAS,GAAGmV,qBAAqB,CAAChY,GAAG,EAAEiY,YAAY,CAAC,GAAGpV,SAAS;QACjG;MACJ;MAEA,SAAS0V,wBAAwB,CAAC/B,MAAM,EAAEC,MAAM,EAAE;QAC9C,OAAOD,MAAM,CAAC/E,KAAK,UAAO,KAAK,IAAI,IAAIgF,MAAM,CAAChF,KAAK,UAAO,KAAK,IAAI,GAAGgF,MAAM,CAAChF,KAAK,CAACmC,EAAE,CAACxT,IAAI,CAACoW,MAAM,CAAC/E,KAAK,CAACM,GAAG,EAAEhS,OAAO,EAAEC,GAAG,EAAE,KAAK,EAAEE,IAAI,EAAE,KAAK,CAAC,GAAG,KAAK;MAC1J;;MAEA;MACA,SAASsY,gBAAgB,CAACC,WAAW,EAAEC,QAAQ,EAAE;QAC7C,IAAIC,cAAc,GAAGF,WAAW,CAACjH,WAAW;UACxCoH,WAAW,GAAGF,QAAQ,KAAK7V,SAAS,IAAK8V,cAAc,KAAKD,QAAQ,CAAClH,WAAW,IAC5EiH,WAAW,CAACrH,OAAO,CAACuH,cAAc,CAAC,CAAC5V,QAAQ,EAAE,CAACzD,OAAO,CAACoZ,QAAQ,CAACtH,OAAO,CAACuH,cAAc,CAAC,CAAC,KAAK,CAAC,CAAE;QACxG,IAAI,CAACC,WAAW,IAAID,cAAc,GAAGD,QAAQ,CAAClH,WAAW,EAAE;UACvD,KAAK,IAAIpQ,CAAC,GAAGsX,QAAQ,CAAClH,WAAW,EAAEpQ,CAAC,GAAGuX,cAAc,EAAEvX,CAAC,EAAE,EAAE;YACxD,IAAIqX,WAAW,CAACrH,OAAO,CAAChQ,CAAC,CAAC,KAAKsX,QAAQ,CAACtH,OAAO,CAAChQ,CAAC,CAAC,EAAE;cAChDuX,cAAc,GAAGvX,CAAC;cAClBwX,WAAW,GAAG,IAAI;cAClB;YACJ;UACJ;QACJ;QAEA,IAAIA,WAAW,EAAE;UACbH,WAAW,CAACjE,IAAI,GAAGiE,WAAW,CAACjE,IAAI,IAAI,CAAC,CAAC;UACzC,IAAIqE,MAAM,GAAGJ,WAAW,CAACrH,OAAO,CAACuH,cAAc,CAAC;UAChD,IAAIE,MAAM,KAAKhW,SAAS,EAAE;YACtB4V,WAAW,CAACjH,WAAW,GAAG3O,SAAS;UACvC,CAAC,MAAM;YACH,IAAI,OAAOgW,MAAM,KAAK,QAAQ,EAAEA,MAAM,GAAGA,MAAM,CAACnT,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAC7D,IAAI+S,WAAW,CAACjE,IAAI,CAACqE,MAAM,CAAC,KAAKhW,SAAS,EAAE4V,WAAW,CAACjE,IAAI,CAACqE,MAAM,CAAC,GAAGJ,WAAW,CAACrH,OAAO,CAACxM,KAAK,EAAE;YAClG,IAAI8T,QAAQ,KAAK7V,SAAS,EAAE;cACxB,KAAK,IAAIiC,GAAG,IAAI4T,QAAQ,CAAClE,IAAI,EAAE;gBAC3B,IAAI,OAAO1P,GAAG,KAAK,QAAQ,EAAEA,GAAG,GAAGA,GAAG,CAACY,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACpD,IAAI+S,WAAW,CAACjE,IAAI,CAAC1P,GAAG,CAAC,KAAKjC,SAAS,EAAE4V,WAAW,CAACjE,IAAI,CAAC1P,GAAG,CAAC,GAAG4T,QAAQ,CAAClE,IAAI,CAAC1P,GAAG,CAAC;cACvF;cACA2T,WAAW,CAACrH,OAAO,CAACuH,cAAc,CAAC,GAAGxb,MAAM,CAAC4B,IAAI,CAAC0Z,WAAW,CAACjE,IAAI,CAAC,CAACtS,IAAI,CAAC,GAAG,CAAC;YACjF;YACA,OAAO,IAAI;UACf;QACJ;QACA,OAAO,KAAK;MAChB;MAEA,SAAS4W,WAAW,CAACL,WAAW,EAAEC,QAAQ,EAAE;QACxC,IAAID,WAAW,CAACrH,OAAO,CAAClT,MAAM,KAAKwa,QAAQ,CAACtH,OAAO,CAAClT,MAAM,EAAE;UACxD,OAAO,KAAK;QAChB;QACA,KAAK,IAAI2a,MAAM,GAAGJ,WAAW,CAACjH,WAAW,GAAG,CAAC,EAAEqH,MAAM,GAAGJ,WAAW,CAACrH,OAAO,CAAClT,MAAM,EAAE2a,MAAM,EAAE,EAAE;UAC1F,IAAIJ,WAAW,CAACrH,OAAO,CAACyH,MAAM,CAAC,KAAKH,QAAQ,CAACtH,OAAO,CAACyH,MAAM,CAAC,EAAE;YAC1D,OAAO,KAAK;UAChB;QACJ;QACA,OAAO,IAAI;MACf;MAEA,SAASE,WAAW,GAAG;QACnBtH,KAAK,GAAGgG,WAAW,CAACT,SAAS,CAACE,OAAO,CAACF,SAAS,CAACE,OAAO,CAAC5X,OAAO,CAACmS,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE8F,OAAO,EAAEC,iBAAiB,CAAC;QACxG,IAAI/F,KAAK,EAAE,OAAO,IAAI;MAC1B;MAEA,SAASuH,cAAc,GAAG;QACtB,IAAIC,aAAa,GAAGxH,KAAK;UAAEyH,QAAQ,GAAGhC,OAAO,CAAChZ,MAAM;QACpDuT,KAAK,GAAG6F,oBAAoB,CAAC7F,KAAK,EAAEwF,cAAc,EAAEM,OAAO,EAAEC,iBAAiB,CAAC;QAC/E,IAAIN,OAAO,CAAChZ,MAAM,GAAG,CAAC,EAAE;UAAE;UACtB;UACAgZ,OAAO,CAACrS,OAAO,CAAC,UAAUsU,IAAI,EAAErU,GAAG,EAAE;YACjC,IAAIA,GAAG,IAAIoU,QAAQ,EAAE;cACjBC,IAAI,CAAC1H,KAAK,CAACC,WAAW,GAAGyH,IAAI,CAAC1H,KAAK,CAACC,WAAW,GAAGyH,IAAI,CAAC1H,KAAK,CAACC,WAAW,GAAG,CAAC,GAAG,CAAC;YACpF;UACJ,CAAC,CAAC;UACF0F,WAAW,GAAGF,OAAO,CAACA,OAAO,CAAChZ,MAAM,GAAG,CAAC,CAAC,CAACuT,KAAK;UAE/C,IAAI+F,iBAAiB,KAAK3U,SAAS,IAAI6U,YAAY,CAACN,WAAW,EAAE6B,aAAa,CAAC,EAAE;YAAE;YAC/E9B,UAAU,GAAG,IAAI,CAAC,CAAC;YACnB9F,OAAO,GAAGrR,GAAG,CAAC,CAAC;UACnB,CAAC,MAAM;YACH,OAAOyR,KAAK,CAAC,CAAC;UAClB;QACJ;MACJ;;MAEA,SAAS2H,gBAAgB,GAAG;QACxBlU,SAAS,CAAClB,aAAa,GAAG,IAAI;QAC9B,IAAIqV,cAAc,GAAG5H,KAAK;UACtB6H,iBAAiB,GAAG,EAAE;UACtBC,WAAW;UACXC,cAAc,GAAGtC,OAAO,CAACtS,KAAK,EAAE;UAChC6U,UAAU,GAAGlC,OAAO,CAACrZ,MAAM;UAC3Bwb,oBAAoB,GAAG,KAAK;QAChC,IAAIC,QAAQ,GAAG1C,cAAc,CAAC/Y,MAAM,GAAG,CAAC,GAAG+Y,cAAc,CAAC2C,KAAK,EAAE,GAAG,CAAC,CAAC;QACtE,IAAID,QAAQ,KAAK,CAAC,CAAC,IAAI,OAAOA,QAAQ,KAAK,QAAQ,EAAE;UACjD,IAAIE,UAAU,GAAGxI,OAAO;YACpByI,mBAAmB,GAAG7C,cAAc,CAACrS,KAAK,EAAE;YAC5CmV,WAAW,GAAG,EAAE;YAChBC,KAAK;UACT,IAAI,OAAOL,QAAQ,IAAI,QAAQ,EAAE;YAC7BI,WAAW,GAAGJ,QAAQ,CAACjU,KAAK,CAAC,GAAG,CAAC;UACrC,CAAC,MAAM;YACH,KAAKsU,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGX,cAAc,CAACnC,OAAO,CAAChZ,MAAM,EAAE8b,KAAK,EAAE,EAAE;cAC5DD,WAAW,CAACzO,IAAI,CAAC0O,KAAK,CAACjX,QAAQ,EAAE,CAAC;YACtC;UACJ;UAEA,IAAIhD,OAAO,CAACka,QAAQ,CAACja,GAAG,CAAC,KAAK6C,SAAS,EAAE;YACrC,IAAIqX,gBAAgB,GAAGH,WAAW,CAACnV,KAAK,EAAE;YAC1C,KAAK,IAAIxD,CAAC,GAAG,CAAC,EAAE+Y,GAAG,GAAGpa,OAAO,CAACka,QAAQ,CAACja,GAAG,CAAC,CAAC9B,MAAM,EAAEkD,CAAC,GAAG+Y,GAAG,EAAE/Y,CAAC,EAAE,EAAE;cAC9D,IAAIgZ,UAAU,GAAGra,OAAO,CAACka,QAAQ,CAACja,GAAG,CAAC,CAACoB,CAAC,CAAC,CAAC2B,QAAQ,EAAE,CAAC2C,KAAK,CAAC,GAAG,CAAC;cAC/D,IAAI6R,OAAO,CAACrZ,MAAM,IAAIkc,UAAU,CAAC,CAAC,CAAC,EAAE;gBACjCL,WAAW,CAACpS,MAAM,CAACoS,WAAW,CAACza,OAAO,CAAC8a,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;cAC7D;YACJ;YACA,IAAIL,WAAW,CAAC7b,MAAM,KAAK,CAAC,EAAE;cAAE;cAC5B,OAAO6B,OAAO,CAACka,QAAQ,CAACja,GAAG,CAAC;cAC5B+Z,WAAW,GAAGG,gBAAgB;YAClC;UACJ;UACA,IAAIha,IAAI,CAACM,UAAU,KAAK,IAAI,IAAKiV,QAAQ,CAAC/G,QAAQ,CAACxO,IAAI,CAACM,UAAU,CAAC,CAAC,IAAIqZ,UAAU,IAAI3Z,IAAI,CAACM,UAAW,IACjGT,OAAO,CAACoK,cAAc,CAAC0P,UAAU,GAAG,CAAC,CAAC,KAAKhX,SAAS,IAAI9C,OAAO,CAAC8T,KAAK,CAACgG,UAAU,GAAG,CAAC,CAAC,IAAI,CAAC9Z,OAAO,CAAC8T,KAAK,CAACgG,UAAU,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAACpI,KAAK,UAAQ,EAAEsI,WAAW,GAAGA,WAAW,CAACnV,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;UACpL,KAAK,IAAIE,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAGiV,WAAW,CAAC7b,MAAM,EAAE4G,GAAG,EAAE,EAAE;YAC/CkV,KAAK,GAAGtL,QAAQ,CAACqL,WAAW,CAACjV,GAAG,CAAC,CAAC;YAClCoS,OAAO,GAAG,EAAE;YACZ;YACAD,cAAc,GAAG,OAAO0C,QAAQ,KAAK,QAAQ,GAAG3B,qBAAqB,CAAC3G,OAAO,EAAE2I,KAAK,EAAEP,UAAU,CAAC,IAAIK,mBAAmB,CAAClV,KAAK,EAAE,GAAGkV,mBAAmB,CAAClV,KAAK,EAAE;YAC9J,IAAIyV,UAAU,GAAGhB,cAAc,CAACnC,OAAO,CAAC8C,KAAK,CAAC;YAC9C,IAAIK,UAAU,IAAI5C,WAAW,CAAC4C,UAAU,EAAE,CAACL,KAAK,CAAC,CAAClb,MAAM,CAACyY,OAAO,CAAC,EAAEC,iBAAiB,CAAC,EAAE;cACnF/F,KAAK,GAAG,IAAI;YAChB,CAAC,MAAM;cACH,IAAI3M,GAAG,KAAK,CAAC,EAAE;gBACX4U,oBAAoB,GAAG,IAAI;cAC/B;cACA,IAAIW,UAAU,IAAIA,UAAU,CAACnD,OAAO,IAAImD,UAAU,CAACnD,OAAO,CAAChZ,MAAM,GAAGmb,cAAc,CAACnC,OAAO,CAAC,CAAC,CAAC,CAACA,OAAO,CAAChZ,MAAM,EAAE;gBAC1G;cACJ;YACJ;YAEAqb,WAAW,GAAGrC,OAAO,CAACtS,KAAK,EAAE;YAC7ByM,OAAO,GAAGwI,UAAU;YACpB3C,OAAO,GAAG,EAAE;;YAEZ;YACA,KAAK,IAAIoD,IAAI,GAAG,CAAC,EAAEA,IAAI,GAAGf,WAAW,CAACrb,MAAM,EAAEoc,IAAI,EAAE,EAAE;cAClD,IAAI5B,QAAQ,GAAGa,WAAW,CAACe,IAAI,CAAC;gBAC5BC,SAAS,GAAG,KAAK;cACrB7B,QAAQ,CAACjH,KAAK,CAAC8D,GAAG,GAAGmD,QAAQ,CAACjH,KAAK,CAAC8D,GAAG,IAAImE,oBAAoB,CAAC,CAAC;cACjEhB,QAAQ,CAAClH,WAAW,GAAGkH,QAAQ,CAAClH,WAAW,IAAIiI,UAAU;cACzDjB,gBAAgB,CAACE,QAAQ,CAAC;cAC1B,KAAK,IAAI8B,IAAI,GAAG,CAAC,EAAEA,IAAI,GAAGlB,iBAAiB,CAACpb,MAAM,EAAEsc,IAAI,EAAE,EAAE;gBACxD,IAAIC,SAAS,GAAGnB,iBAAiB,CAACkB,IAAI,CAAC;gBACvC,IAAI,OAAOb,QAAQ,KAAK,QAAQ,IAAKjB,QAAQ,CAAClH,WAAW,KAAK3O,SAAS,IAAIkX,WAAW,CAACrc,QAAQ,CAACgb,QAAQ,CAACtH,OAAO,CAACsH,QAAQ,CAAClH,WAAW,CAAC,CAACzO,QAAQ,EAAE,CAAE,EAAE;kBACjJ,IAAI2V,QAAQ,CAACjH,KAAK,CAAC4D,SAAS,KAAKoF,SAAS,CAAChJ,KAAK,CAAC4D,SAAS,EAAE;oBACxDkF,SAAS,GAAG,IAAI;oBAChB/B,gBAAgB,CAACiC,SAAS,EAAE/B,QAAQ,CAAC;oBACrC;kBACJ,CAAC,MAAM,IAAInC,UAAU,CAACmC,QAAQ,EAAE+B,SAAS,EAAEva,IAAI,CAAC,EAAE;oBAC9C,IAAIsY,gBAAgB,CAACE,QAAQ,EAAE+B,SAAS,CAAC,EAAE;sBACvCF,SAAS,GAAG,IAAI;sBAChBjB,iBAAiB,CAAC3R,MAAM,CAAC2R,iBAAiB,CAACha,OAAO,CAACmb,SAAS,CAAC,EAAE,CAAC,EAAE/B,QAAQ,CAAC;oBAC/E;oBACA;kBACJ,CAAC,MAAM,IAAInC,UAAU,CAACkE,SAAS,EAAE/B,QAAQ,EAAExY,IAAI,CAAC,EAAE;oBAC9CsY,gBAAgB,CAACiC,SAAS,EAAE/B,QAAQ,CAAC;oBACrC;kBACJ,CAAC,MAAM,IAAIH,wBAAwB,CAACG,QAAQ,EAAE+B,SAAS,CAAC,EAAE;oBACtD,IAAI,CAAC3B,WAAW,CAACJ,QAAQ,EAAE+B,SAAS,CAAC,IAAI7X,EAAE,CAACsC,SAAS,CAAC/B,WAAW,CAAC3C,UAAU,KAAKqC,SAAS,EAAE;sBACxF3C,IAAI,CAACM,UAAU,GAAG,IAAI;oBAC1B,CAAC,MAAM,IAAIgY,gBAAgB,CAACE,QAAQ,EAAE+B,SAAS,CAAC,EAAE;sBAC9C;sBACAF,SAAS,GAAG,IAAI;sBAChBjB,iBAAiB,CAAC3R,MAAM,CAAC2R,iBAAiB,CAACha,OAAO,CAACmb,SAAS,CAAC,EAAE,CAAC,EAAE/B,QAAQ,CAAC;oBAC/E;oBACA;kBACJ;gBACJ;cACJ;cACA,IAAI,CAAC6B,SAAS,EAAE;gBACZjB,iBAAiB,CAAChO,IAAI,CAACoN,QAAQ,CAAC;cACpC;YACJ;UACJ;UAEAxB,OAAO,GAAGsC,cAAc,CAAC1a,MAAM,CAACwa,iBAAiB,CAAC;UAClDjI,OAAO,GAAGrR,GAAG;UACbmX,UAAU,GAAGD,OAAO,CAAChZ,MAAM,GAAG,CAAC,CAAC,CAAC;UACjCuT,KAAK,GAAG6H,iBAAiB,CAACpb,MAAM,GAAG,CAAC,CAAC,CAAC;;UAEtC;UACA+Y,cAAc,GAAG6C,mBAAmB,CAAClV,KAAK,EAAE;QAChD,CAAC,MAAM;UACH6M,KAAK,GAAGgG,WAAW,CAAC4B,cAAc,CAACnC,OAAO,CAACyC,QAAQ,CAAC,IAAI3C,SAAS,CAACE,OAAO,CAACyC,QAAQ,CAAC,EAAE,CAACA,QAAQ,CAAC,CAAC7a,MAAM,CAACyY,OAAO,CAAC,EAAEC,iBAAiB,CAAC;QACvI;QACA,IAAI/F,KAAK,EAAE,OAAO,IAAI;MAC1B;MAEA,SAASiJ,gBAAgB,GAAG;QACxB,IAAIC,EAAE,GAAGlJ,KAAK;UAAEmJ,SAAS,GAAG,KAAK;QACjC,KAAK,IAAIC,IAAI,GAAI5D,cAAc,CAAC/Y,MAAM,GAAG,CAAC,GAAI+Y,cAAc,CAAC2C,KAAK,EAAE,GAAG,CAAC,EAAGiB,IAAI,IAAIC,KAAK,CAACH,EAAE,CAACzZ,UAAU,CAAC5C,GAAG,CAAC,GAAGuc,IAAI,GAAG,CAAC,GAAGF,EAAE,CAACzZ,UAAU,CAAC5C,GAAG,CAAC,IAAK+S,OAAO,IAAIrR,GAAG,EAAE6a,IAAI,EAAE,EAAE;UACpK,IAAIlD,UAAU,GAAGX,SAAS,CAACE,OAAO,CAACF,SAAS,CAACE,OAAO,CAAC5X,OAAO,CAACqb,EAAE,CAAC,GAAG,CAAC,CAAC;UACrElJ,KAAK,GAAGgG,WAAW,CAACE,UAAU,EAAE,CAACkD,IAAI,CAAC,CAAC/b,MAAM,CAACyY,OAAO,CAAC,EAAEI,UAAU,CAAC,CAAC,CAAC;UACrE,IAAIlG,KAAK,EAAE;YACPyF,OAAO,CAACrS,OAAO,CAAC,UAAUsU,IAAI,EAAErU,GAAG,EAAE;cACjC,IAAIiW,SAAS,CAACpD,UAAU,EAAEwB,IAAI,CAAC1H,KAAK,CAAC,EACjC2F,WAAW,GAAG+B,IAAI,CAAC1H,KAAK,CAAC,KACxB2F,WAAW,GAAGF,OAAO,CAACA,OAAO,CAAChZ,MAAM,GAAG,CAAC,CAAC,CAACuT,KAAK;;cAEpD;cACA;cACA2F,WAAW,CAACzF,kBAAkB,GAAGkJ,IAAI,IAAIF,EAAE,CAACzZ,UAAU,CAAC8Z,GAAG;cAC1D;cACA;cACA5D,WAAW,CAAC7B,GAAG,GAAG,CAACsF,IAAI,GAAG,CAAC,KAAKlD,UAAU,CAACT,OAAO,CAAC5X,OAAO,CAAC8X,WAAW,CAAC,GAAG,CAAC,CAAC,GAAGuD,EAAE,CAACzZ,UAAU,CAACqU,GAAG;cAChG,IAAI6B,WAAW,CAACzF,kBAAkB,IAAI+F,YAAY,CAACN,WAAW,EAAEO,UAAU,CAAC,EAAE;gBACzER,UAAU,GAAG,IAAI;gBACjB9F,OAAO,GAAGrR,GAAG,CAAC,CAAC;gBACf,IAAIE,IAAI,CAACmB,MAAM,IAAItB,OAAO,CAACoK,cAAc,CAACnK,GAAG,GAAG,CAAC,CAAC,IAAI6C,SAAS,IAAIgY,IAAI,GAAGF,EAAE,CAACzZ,UAAU,CAAC8Z,GAAG,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC1b,OAAO,CAACqb,EAAE,CAACzZ,UAAU,CAAC5C,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE;kBACxI4Y,OAAO,CAACxB,GAAG,EAAE;kBACb2B,eAAe,GAAGxU,SAAS;gBAC/B;gBACA+X,SAAS,GAAG,IAAI,CAAC,CAAC;gBAClBnJ,KAAK,GAAG,KAAK,CAAC,CAAC;cACnB;;cACA,IAAI,CAACmJ,SAAS,IAAIxD,WAAW,CAAC7B,GAAG,CAAC,wCAAwC;gBACtE;gBACAxV,OAAO,CAACkb,SAAS,CAACjb,GAAG,CAAC,GAAG2X,UAAU,CAACT,OAAO,CAAChZ,MAAM,GAAGyZ,UAAU,CAACT,OAAO,CAAC5X,OAAO,CAAC8X,WAAW,CAAC;cAChG;YACJ,CAAC,CAAC;YACF,IAAIwD,SAAS,EAAE,MAAM,CAAC;YACtB,OAAO,IAAI;UACf;QACJ;MACJ;MAEA,IAAIvJ,OAAO,GAAIrR,GAAG,GAAGE,IAAI,CAACgb,WAAY,EAAE;QACpC,MAAM,qJAAqJ,GAAGnb,OAAO,CAACW,IAAI;MAC9K;MACA,IAAI2Q,OAAO,KAAKrR,GAAG,IAAIyR,KAAK,CAACyF,OAAO,KAAKrU,SAAS,EAAE;QAChDqU,OAAO,CAAC5L,IAAI,CAAC;UACT,OAAO,EAAEmG,KAAK;UACd,SAAS,EAAE8F,OAAO,CAACxQ,OAAO,EAAE;UAC5B,IAAI,EAAEsQ,eAAe;UACrB,MAAM,EAAE,CAAC;QACb,CAAC,CAAC;QACF,IAAI5F,KAAK,CAACC,WAAW,IAAI8F,iBAAiB,KAAK3U,SAAS,KAClD3C,IAAI,CAACS,WAAW,IAAIT,IAAI,CAACS,WAAW,CAAC8Q,KAAK,CAAC4D,SAAS,CAAC,IAAInV,IAAI,CAACS,WAAW,CAAC8Q,KAAK,CAAC4D,SAAS,CAAC,CAAC8F,QAAQ,IAChG5b,qBAAS,CAAC/B,SAAS,CAACmD,WAAW,CAAC8Q,KAAK,CAAC4D,SAAS,CAAC,IAAI9V,qBAAS,CAAC/B,SAAS,CAACmD,WAAW,CAAC8Q,KAAK,CAAC4D,SAAS,CAAC,CAAC8F,QAAS,CAAC,EAAE;UAAE;UACxHhE,UAAU,GAAG,IAAI,CAAC,CAAC;UACnB9F,OAAO,GAAGrR,GAAG,CAAC,CAAC;QACnB,CAAC,MAAM;UACH,OAAO,IAAI;QACf;MACJ,CAAC,MAAM,IAAIyR,KAAK,CAACyF,OAAO,KAAKrU,SAAS,EAAE;QACpC,IAAI4O,KAAK,CAAC2J,OAAO,IAAI5D,iBAAiB,KAAK/F,KAAK,EAAE;UAAE;UAChD,OAAOsH,WAAW,EAAE;QACxB,CAAC,MAAM,IAAItH,KAAK,CAAC4J,UAAU,EAAE;UACzB,OAAOrC,cAAc,EAAE;QAC3B,CAAC,MAAM,IAAIvH,KAAK,CAAC6J,YAAY,EAAE;UAC3B,OAAOlC,gBAAgB,EAAE;QAC7B,CAAC,MAAM,IAAI3H,KAAK,CAACqG,YAAY,IAAIN,iBAAiB,KAAKR,SAAS,CAACE,OAAO,CAACF,SAAS,CAACE,OAAO,CAAC5X,OAAO,CAACmS,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE;UAC5G,OAAOiJ,gBAAgB,EAAE;QAC7B,CAAC,MAAM;UACHjJ,KAAK,GAAG6F,oBAAoB,CAAC7F,KAAK,EAAEwF,cAAc,EAAEM,OAAO,EAAEC,iBAAiB,CAAC;UAC/E,IAAI/F,KAAK,EAAE,OAAO,IAAI;QAC1B;MACJ,CAAC,MAAM;QACHJ,OAAO,EAAE;MACb;IACJ;;IAEA;IACA,KAAK,IAAIkK,IAAI,GAAItE,cAAc,CAAC/Y,MAAM,GAAG,CAAC,GAAG+Y,cAAc,CAAC2C,KAAK,EAAE,GAAG,CAAE,EAAE2B,IAAI,GAAGvE,SAAS,CAACE,OAAO,CAAChZ,MAAM,EAAEqd,IAAI,EAAE,EAAE;MAC/G,IAAIvE,SAAS,CAACE,OAAO,CAACqE,IAAI,CAAC,CAACzD,YAAY,KAAK,IAAI,EAAE;QAC/C,IAAIrG,KAAK,GAAGgG,WAAW,CAACT,SAAS,CAACE,OAAO,CAACqE,IAAI,CAAC,EAAE,CAACA,IAAI,CAAC,CAACzc,MAAM,CAACyY,OAAO,CAAC,EAAEC,iBAAiB,CAAC;QAC3F,IAAI/F,KAAK,IAAIJ,OAAO,KAAKrR,GAAG,EAAE;UAC1B,OAAOyR,KAAK;QAChB,CAAC,MAAM,IAAIJ,OAAO,GAAGrR,GAAG,EAAE;UACtB;QACJ;MACJ;IACJ;EACJ;EAEA,SAAS+a,SAAS,CAACpD,UAAU,EAAElG,KAAK,EAAE;IAClC,IAAI+J,OAAO,GAAG7D,UAAU,CAACT,OAAO,CAAC5X,OAAO,CAACmS,KAAK,CAAC,IAAI,CAAC,CAAC;IACrD,IAAI,CAAC+J,OAAO,EAAE;MACV7D,UAAU,CAACT,OAAO,CAACrS,OAAO,CAAC,UAACsU,IAAI,EAAErU,GAAG,EAAK;QACtC,IAAIqU,IAAI,CAACjC,OAAO,KAAKrU,SAAS,IAAI,CAAC2Y,OAAO,EAAE;UACxCA,OAAO,GAAGT,SAAS,CAAC5B,IAAI,EAAE1H,KAAK,CAAC;QACpC;MACJ,CAAC,CAAC;IACN;IACA,OAAO+J,OAAO;EAClB;EAEA,SAASC,aAAa,CAACzb,GAAG,EAAE6T,KAAK,EAAE;IAC/B,IAAIzC,OAAO,GAAG,EAAE;MAAEI,WAAW;IAC7B,IAAI,CAAC/T,KAAK,CAACkH,OAAO,CAACkP,KAAK,CAAC,EAAEA,KAAK,GAAG,CAACA,KAAK,CAAC;IAE1C,IAAIA,KAAK,CAAC3V,MAAM,GAAG,CAAC,EAAE;MAClB,IAAI2V,KAAK,CAAC,CAAC,CAAC,CAACrC,WAAW,KAAK3O,SAAS,IAAI3C,IAAI,CAACM,UAAU,KAAK,IAAI,EAAE;QAChE4Q,OAAO,GAAG2C,qBAAqB,CAACpV,IAAI,CAACuG,SAAS,EAAElF,GAAG,EAAE6T,KAAK,CAACjP,KAAK,EAAE,CAAC,CAACwM,OAAO,CAACxM,KAAK,EAAE;QACnF,IAAIwM,OAAO,CAAClT,MAAM,KAAK,CAAC,EAAEkT,OAAO,GAAGyC,KAAK,CAAC,CAAC,CAAC,CAACzC,OAAO,CAACxM,KAAK,EAAE;MAChE,CAAC,MAAM;QACHiP,KAAK,CAAChP,OAAO,CAAC,UAAUyP,GAAG,EAAE;UACzB,IAAIA,GAAG,CAACvC,GAAG,KAAK,EAAE,EAAE;YAChB,IAAIX,OAAO,CAAClT,MAAM,KAAK,CAAC,EAAE;cACtBsT,WAAW,GAAG8C,GAAG,CAAC9C,WAAW;cAC7BJ,OAAO,GAAGkD,GAAG,CAAClD,OAAO,CAACxM,KAAK,EAAE;YACjC,CAAC,MAAM;cACH,IAAI0P,GAAG,CAAClD,OAAO,CAACI,WAAW,CAAC,IAAIJ,OAAO,CAACI,WAAW,CAAC,CAACzO,QAAQ,EAAE,CAACzD,OAAO,CAACgV,GAAG,CAAClD,OAAO,CAACI,WAAW,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE;gBACtGJ,OAAO,CAACI,WAAW,CAAC,IAAI,GAAG,GAAG8C,GAAG,CAAClD,OAAO,CAACI,WAAW,CAAC;cAC1D;YACJ;UACJ;QACJ,CAAC,CAAC;MACN;IACJ;IACA,OAAOJ,OAAO;EAClB;EAEA,IAAIpR,GAAG,GAAG,CAAC,CAAC,EAAE;IACV,IAAImR,SAAS,KAAKtO,SAAS,EAAE;MAAE;MAC3B,IAAI6Y,WAAW,GAAG1b,GAAG,GAAG,CAAC;QACrBI,IAAI;MACR,OAAO,CAACA,IAAI,GAAGL,OAAO,CAACoK,cAAc,CAACuR,WAAW,CAAC,IAAI3b,OAAO,CAAC8T,KAAK,CAAC6H,WAAW,CAAC,MAAM7Y,SAAS,IAAI6Y,WAAW,GAAG,CAAC,CAAC,EAAE;QACjHA,WAAW,EAAE;MACjB;MACA,IAAItb,IAAI,KAAKyC,SAAS,IAAI6Y,WAAW,GAAG,CAAC,CAAC,EAAE;QACxCzE,cAAc,GAAGwE,aAAa,CAACC,WAAW,EAAEtb,IAAI,CAAC;QACjDiX,eAAe,GAAGJ,cAAc,CAAC/U,IAAI,CAAC,EAAE,CAAC;QACzCmP,OAAO,GAAGqK,WAAW;MACzB;IACJ;IACA,IAAI3b,OAAO,CAAC8T,KAAK,CAAC7T,GAAG,CAAC,IAAID,OAAO,CAAC8T,KAAK,CAAC7T,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC2b,EAAE,KAAKtE,eAAe,EAAE;MAAE;MACtE,OAAOtX,OAAO,CAAC8T,KAAK,CAAC7T,GAAG,CAAC;IAC7B;IACA,KAAK,IAAI4b,KAAK,GAAG3E,cAAc,CAAC2C,KAAK,EAAE,EAAEgC,KAAK,GAAG7E,UAAU,CAAC7Y,MAAM,EAAE0d,KAAK,EAAE,EAAE;MACzE,IAAInK,KAAK,GAAG6F,oBAAoB,CAACP,UAAU,CAAC6E,KAAK,CAAC,EAAE3E,cAAc,EAAE,CAAC2E,KAAK,CAAC,CAAC;MAC5E,IAAKnK,KAAK,IAAIJ,OAAO,KAAKrR,GAAG,IAAKqR,OAAO,GAAGrR,GAAG,EAAE;QAC7C;MACJ;IACJ;EACJ;EACA,IAAIkX,OAAO,CAAChZ,MAAM,KAAK,CAAC,IAAIiZ,UAAU,EAAE;IACpCD,OAAO,CAAC5L,IAAI,CAAC;MACTmG,KAAK,EAAE;QACHmC,EAAE,EAAE,IAAI;QACR,UAAQ,IAAI;QACZlC,WAAW,EAAE,KAAK;QAClBhS,MAAM,EAAE,IAAI;QACZqS,GAAG,EAAE,EAAE;QACPjG,WAAW,EAAE;MACjB,CAAC;MACDsF,OAAO,EAAE,EAAE;MACXoD,IAAI,EAAE,CAAC,CAAC;MACRmH,EAAE,EAAEtE;IACR,CAAC,CAAC;EACN;EACA,IAAInN,MAAM;EACV,IAAIiH,SAAS,KAAKtO,SAAS,IAAI9C,OAAO,CAAC8T,KAAK,CAAC7T,GAAG,CAAC,EAAE;IAAE;IACjDkK,MAAM,GAAGvH,CAAC,CAACK,MAAM,CAAC,IAAI,EAAE,EAAE,EAAEkU,OAAO,CAAC;EACxC,CAAC,MAAM;IACHnX,OAAO,CAAC8T,KAAK,CAAC7T,GAAG,CAAC,GAAG2C,CAAC,CAACK,MAAM,CAAC,IAAI,EAAE,EAAE,EAAEkU,OAAO,CAAC,CAAC,CAAC;IAClDhN,MAAM,GAAGnK,OAAO,CAAC8T,KAAK,CAAC7T,GAAG,CAAC;EAC/B;;EAEA;EACA;EACAkX,OAAO,CAACrS,OAAO,CAAC,UAAAgX,CAAC,EAAI;IACjBA,CAAC,CAACpK,KAAK,CAACC,WAAW,GAAGmK,CAAC,CAACpK,KAAK,CAACqK,cAAc,IAAI,KAAK;EACzD,CAAC,CAAC;EAEF,OAAO5R,MAAM;AACjB;;;;;;;;;;;;;;;;;;;AC7nBA;AAQA;AACA;AASA;AAaA;AACA,SAAS6R,SAAS,CAACC,OAAO,EAAEna,CAAC,EAAE5B,MAAM,EAAEgc,WAAW,EAAEC,OAAO,EAAEvL,SAAS,EAAE;EAAE;EACzE,IAAMzL,SAAS,GAAG,IAAI;IACrBvC,CAAC,GAAG,IAAI,CAACD,aAAa;IACtBxC,IAAI,GAAG,IAAI,CAACA,IAAI;IAChBH,OAAO,GAAGmF,SAAS,CAACnF,OAAO;EAE5B,IAAIoc,YAAY,GAAGxZ,CAAC,CAACK,MAAM,CAAC,IAAI,EAAE,EAAE,EAAEjD,OAAO,CAACoK,cAAc,CAAC;IAC5DiS,QAAQ,GAAGzZ,CAAC,CAACK,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,EAAEjD,OAAO,CAAC8T,KAAK,CAAC;IAC5CwI,OAAO;IACP7K,WAAW;IACX8K,WAAW,GAAG,KAAK;IAAEC,UAAU,GAAG,KAAK;IACvCC,MAAM;IAAEC,UAAU;IAAErb,CAAC;IAAEsb,QAAQ;IAC/BC,WAAW;IACXC,OAAO,GAAGV,OAAO,KAAKrZ,SAAS,GAAGqZ,OAAO,GAAGja,iCAAoB,CAACtD,IAAI,CAACuG,SAAS,CAAC;IAAE2X,OAAO;IAAEtT,KAAK;IAAE4E,KAAK;IAAEC,GAAG;EAE7G,IAAIuC,SAAS,EAAE;IACdxC,KAAK,GAAGwC,SAAS,CAACxC,KAAK;IACvBC,GAAG,GAAGuC,SAAS,CAACvC,GAAG;IACnB,IAAIuC,SAAS,CAACxC,KAAK,GAAGwC,SAAS,CAACvC,GAAG,EAAE;MACpCD,KAAK,GAAGwC,SAAS,CAACvC,GAAG;MACrBA,GAAG,GAAGuC,SAAS,CAACxC,KAAK;IACtB;EACD;EACA,IAAIyO,OAAO,KAAK,CAAC,CAAC,IAAIV,OAAO,KAAKrZ,SAAS,EAAE;IAAE;IAC9CwZ,OAAO,GAAG,CAAC;IACXI,UAAU,GAAG9I,wBAAO,CAAChV,IAAI,CAACuG,SAAS,EAAEmX,OAAO,CAAC;IAC7C7K,WAAW,GAAGiL,UAAU,CAACjL,WAAW;EACrC,CAAC,MAAM;IACN;IACA,OAAOoL,OAAO,IAAI,CAAC,EAAEA,OAAO,EAAE,EAAE;MAC/BJ,MAAM,GAAGzc,OAAO,CAACoK,cAAc,CAACyS,OAAO,CAAC;MACxC,IAAIJ,MAAM,IAAIA,MAAM,CAAChL,WAAW,KAAK3O,SAAS,EAAE;QAC/C,IAAI+Z,OAAO,KAAKZ,OAAO,IAAI,CAAC,CAAC,IAAIS,UAAU,IAAIA,UAAU,CAACrL,OAAO,CAACoL,MAAM,CAAChL,WAAW,CAAC,KAAKgL,MAAM,CAACpL,OAAO,CAACoL,MAAM,CAAChL,WAAW,CAAC,EAAE;UAC7H;QACD;QACA6K,OAAO,GAAGO,OAAO;QACjBpL,WAAW,GAAGzR,OAAO,CAACoK,cAAc,CAACkS,OAAO,CAAC,CAAC7K,WAAW;QACzDiL,UAAU,GAAGD,MAAM;MACpB;IACD;EACD;EAEA,IAAIhL,WAAW,KAAK3O,SAAS,EAAE;IAC9B8Z,WAAW,GAAGjO,QAAQ,CAAC2N,OAAO,CAAC;IAC/Btc,OAAO,CAACka,QAAQ,CAAC0C,WAAW,CAAC,GAAG5c,OAAO,CAACka,QAAQ,CAAC0C,WAAW,CAAC,IAAI,EAAE;IACnE,IAAIX,OAAO,KAAK,IAAI,EAAE;MAAE;MACvBjc,OAAO,CAACka,QAAQ,CAAC0C,WAAW,CAAC,CAACrR,IAAI,CAAC,IAAAmJ,iCAAgB,EAACgI,UAAU,CAAC,GAAG,GAAG,GAAGA,UAAU,CAACjL,WAAW,CAAC;IAChG;IAEA,IAAIsL,WAAW,GAAG,EAAE;MAAEC,SAAS,GAAG,CAAC,CAAC;IACpC,KAAK3b,CAAC,GAAGub,WAAW,EAAEvb,CAAC,GAAGa,iCAAoB,CAACtD,IAAI,CAACuG,SAAS,EAAErC,SAAS,EAAE,IAAI,CAAC,GAAG,CAAC,EAAEzB,CAAC,EAAE,EAAE;MACzF,IAAI2b,SAAS,KAAK,CAAC,CAAC,IAAIf,OAAO,IAAI5a,CAAC,IAAIS,CAAC,KAAKgB,SAAS,EAAE;QACxDia,WAAW,CAACxR,IAAI,CAACzJ,CAAC,CAAC;QACnBkb,SAAS,GAAGD,WAAW,CAAC5e,MAAM,GAAG,CAAC;MACnC;MACAwe,QAAQ,GAAG3c,OAAO,CAACoK,cAAc,CAAC/I,CAAC,CAAC;MACpC,IAAIsb,QAAQ,IAAIA,QAAQ,CAACjJ,cAAc,KAAK,IAAI,KAAK9C,SAAS,KAAK9N,SAAS,IAAKzB,CAAC,GAAG+M,KAAK,IAAI/M,CAAC,IAAIgN,GAAI,CAAC,EAAE;QACzG0O,WAAW,CAACxR,IAAI,CAACoR,QAAQ,CAACnT,KAAK,CAAC;MACjC;MACA,OAAOxJ,OAAO,CAACoK,cAAc,CAAC/I,CAAC,CAAC;IACjC;IACA,IAAI2b,SAAS,KAAK,CAAC,CAAC,IAAIlb,CAAC,KAAKgB,SAAS,EAAE;MACxCia,WAAW,CAACxR,IAAI,CAACzJ,CAAC,CAAC;MACnBkb,SAAS,GAAGD,WAAW,CAAC5e,MAAM,GAAG,CAAC;IACnC;IAEA,OAAO6B,OAAO,CAACka,QAAQ,CAAC0C,WAAW,CAAC,KAAK9Z,SAAS,IAAI9C,OAAO,CAACka,QAAQ,CAAC0C,WAAW,CAAC,CAACze,MAAM,GAAG,EAAE,EAAE;MAChG;MACA6B,OAAO,CAAC8T,KAAK,GAAG,CAAC,CAAC,CAAC,CAAE;MACrBtG,yBAAY,CAAC5O,IAAI,CAACuG,SAAS,EAAE,IAAI,CAAC,CAAC,CAAC;MACpCoX,WAAW,GAAG,IAAI;MAClB,KAAKlb,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG0b,WAAW,CAAC5e,MAAM,EAAEkD,CAAC,EAAE,EAAE;QACxCyb,OAAO,GAAGP,WAAW,CAAC7O,KAAK,IAAKxL,iCAAoB,CAACtD,IAAI,CAACuG,SAAS,EAAErC,SAAS,EAAE,IAAI,CAAC,GAAG,CAAE;QAC1F0G,KAAK,GAAGuT,WAAW,CAAC1b,CAAC,CAAC;QACtB;QACA,IAAI,EAAEkb,WAAW,GAAGhV,OAAO,CAAC3I,IAAI,CAACuG,SAAS,EAAE2X,OAAO,EAAEtT,KAAK,EAAE,KAAK,EAAE0S,WAAW,EAAE,IAAI,CAAC,CAAC,EAAE;UACvF;QACD;QACA,IAAI7a,CAAC,KAAK2b,SAAS,EAAE;UACpBR,UAAU,GAAGD,WAAW;QACzB;QACA,IAAIN,OAAO,IAAI,IAAI,IAAIM,WAAW,EAAE;UAAG;UACtCC,UAAU,GAAG;YAACtN,QAAQ,EAAE7N;UAAC,CAAC;QAC3B;MACD;MACA,IAAI,CAACkb,WAAW,EAAE;QACjB/O,yBAAY,CAAC5O,IAAI,CAACuG,SAAS,CAAC;QAC5BuX,UAAU,GAAG9I,wBAAO,CAAChV,IAAI,CAACuG,SAAS,EAAEyX,WAAW,CAAC,CAAC,CAAE;QACpD;QACA5c,OAAO,CAACoK,cAAc,GAAGxH,CAAC,CAACK,MAAM,CAAC,IAAI,EAAE,EAAE,EAAEmZ,YAAY,CAAC;QACzDpc,OAAO,CAAC8T,KAAK,GAAGlR,CAAC,CAACK,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,EAAEoZ,QAAQ,CAAC,CAAC,CAAC;QAC9C,IAAIrc,OAAO,CAACka,QAAQ,CAAC0C,WAAW,CAAC,EAAE;UAClC,IAAIjI,aAAa,GAAG,IAAAD,iCAAgB,EAACgI,UAAU,CAAC;UAChD,IAAI1c,OAAO,CAACka,QAAQ,CAAC0C,WAAW,CAAC,CAACrd,OAAO,CAACoV,aAAa,GAAG,GAAG,GAAG+H,UAAU,CAACjL,WAAW,CAAC,KAAK,CAAC,CAAC,EAAE;YAC/F+K,UAAU,GAAGR,SAAS,CAACpd,IAAI,CAACuG,SAAS,EAAE8W,OAAO,EAAEna,CAAC,EAAE5B,MAAM,EAAEgc,WAAW,EAAEU,WAAW,GAAG,CAAC,EAAEhM,SAAS,CAAC;YACnG;UACD;UACA5Q,OAAO,CAACka,QAAQ,CAAC0C,WAAW,CAAC,CAACrR,IAAI,CAACoJ,aAAa,GAAG,GAAG,GAAG+H,UAAU,CAACjL,WAAW,CAAC;UAChF,KAAKpQ,CAAC,GAAGub,WAAW,EAAEvb,CAAC,GAAGa,iCAAoB,CAACtD,IAAI,CAACuG,SAAS,EAAErC,SAAS,EAAE,IAAI,CAAC,GAAG,CAAC,EAAEzB,CAAC,EAAE;YAAE,OAAOrB,OAAO,CAACoK,cAAc,CAAC/I,CAAC,CAAC;UAAC;QAC5H,CAAC,MAAM;UAAE;UACRmb,UAAU,GAAGR,SAAS,CAACpd,IAAI,CAACuG,SAAS,EAAE8W,OAAO,EAAEna,CAAC,EAAE5B,MAAM,EAAEgc,WAAW,EAAEU,WAAW,GAAG,CAAC,EAAEhM,SAAS,CAAC;UACnG;QACD;MACD,CAAC,MAAM;QACN;MACD;IACD;EACD;EACA;EACA,IAAI,CAAC4L,UAAU,IAAIrc,IAAI,CAACM,UAAU,KAAK,KAAK,EAAE;IAC7C,OAAOT,OAAO,CAACka,QAAQ,CAAC0C,WAAW,CAAC;EACrC;EACA,OAAOJ,UAAU;AAClB;AAEA,SAAS7c,MAAM,CAACsK,IAAI,EAAE5J,IAAI,EAAEJ,GAAG,EAAE;EAChC,IAAME,IAAI,GAAG,IAAI,CAACA,IAAI;IACrBH,OAAO,GAAG,IAAI,CAACA,OAAO;EAEvB,QAAQG,IAAI,CAACR,MAAM,IAAIU,IAAI,CAACV,MAAM;IACjC,KAAK,OAAO;MACXsK,IAAI,GAAGA,IAAI,CAACgT,WAAW,EAAE;MACzB;IACD,KAAK,OAAO;MACXhT,IAAI,GAAGA,IAAI,CAACvI,WAAW,EAAE;MACzB;IACD,KAAK,OAAO;MACX,IAAIwb,SAAS,GAAGld,OAAO,CAACoK,cAAc,CAACnK,GAAG,GAAG,CAAC,CAAC;MAC/C,IAAIA,GAAG,KAAK,CAAC,IAAIid,SAAS,IAAIA,SAAS,CAAC1T,KAAK,KAAKpK,MAAM,CAAC8O,YAAY,CAACN,gBAAO,CAACuP,KAAK,CAAC,EAAE;QACrFlT,IAAI,GAAGA,IAAI,CAACgT,WAAW,EAAE;MAC1B,CAAC,MAAM;QACNhT,IAAI,GAAGA,IAAI,CAACvI,WAAW,EAAE;MAC1B;MACA;IACD;MACC,IAAI,OAAOvB,IAAI,CAACR,MAAM,KAAK,UAAU,EAAE;QACtC,IAAIyd,IAAI,GAAG1f,KAAK,CAACD,SAAS,CAACoH,KAAK,CAACjG,IAAI,CAACye,SAAS,CAAC;QAChDD,IAAI,CAAC7R,IAAI,CAACvL,OAAO,CAACoK,cAAc,CAAC;QACjCH,IAAI,GAAG9J,IAAI,CAACR,MAAM,CAAC2d,KAAK,CAAC,IAAI,EAAEF,IAAI,CAAC;MACrC;EAAC;EAGH,OAAOnT,IAAI;AACZ;;AAEA;AACA,SAAS6H,qBAAqB,CAACyL,OAAO,EAAEC,OAAO,EAAEC,EAAE,EAAE;EACpD,IAAMtd,IAAI,GAAG,IAAI,CAACA,IAAI;EAEtB,IAAIud,OAAO,GAAGvd,IAAI,CAACmB,MAAM,GAAGkc,OAAO,GAAGA,OAAO,CAAC3Y,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;IACxD4W,OAAO,GAAG,KAAK;IACfkC,KAAK,GAAGF,EAAE,KAAK3a,SAAS,GAAG2a,EAAE,CAAC9X,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE;IAC7CiY,KAAK;;EAEN;EACA,KAAK,IAAIvc,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGsc,KAAK,CAACxf,MAAM,EAAEkD,CAAC,EAAE,EAAE;IACtC,IAAI,CAACuc,KAAK,GAAGL,OAAO,CAAChe,OAAO,CAACoe,KAAK,CAACtc,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE;MAC/Ckc,OAAO,CAAC3V,MAAM,CAACgW,KAAK,EAAE,CAAC,CAAC;IACzB;EACD;EAEA,KAAK,IAAIC,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGN,OAAO,CAACpf,MAAM,EAAE0f,KAAK,EAAE,EAAE;IACpD,IAAIH,OAAO,CAAC/f,QAAQ,CAAC4f,OAAO,CAACM,KAAK,CAAC,CAAC,EAAE;MACrCpC,OAAO,GAAG,IAAI;MACd;IACD;EACD;EACA,OAAOA,OAAO;AACf;;AAEA;AACA,SAASqC,YAAY,CAACtU,KAAK,EAAE1H,CAAC,EAAE7B,GAAG,EAAEC,MAAM,EAAEgc,WAAW,EAAE;EACzD,IAAM/W,SAAS,GAAG,IAAI;IAAEnF,OAAO,GAAG,IAAI,CAACA,OAAO;IAAEG,IAAI,GAAG,IAAI,CAACA,IAAI;EAEhE,IAAIA,IAAI,CAACmE,YAAY,IAAIa,SAAS,CAACd,KAAK,EAAE;IACzC,IAAIvC,CAAC,KAAK9C,aAAI,CAAC+e,SAAS,EAAE;MACzBjc,CAAC,GAAG9C,aAAI,CAACgf,MAAM;IAChB,CAAC,MAAM,IAAIlc,CAAC,KAAK9C,aAAI,CAACgf,MAAM,EAAE;MAC7Blc,CAAC,GAAG9C,aAAI,CAAC+e,SAAS;IACnB;IAEA,IAAI5Y,SAAS,CAACd,KAAK,EAAE;MACpB,IAAI4Z,IAAI,GAAGhe,GAAG,CAACoO,GAAG;MAClBpO,GAAG,CAACoO,GAAG,GAAGpO,GAAG,CAACmO,KAAK;MACnBnO,GAAG,CAACmO,KAAK,GAAG6P,IAAI;IACjB;EACD;EAEA,IAAIhN,GAAG,GAAG/O,iCAAoB,CAACtD,IAAI,CAACuG,SAAS,EAAErC,SAAS,EAAE,IAAI,CAAC;EAC/D,IAAI7C,GAAG,CAACoO,GAAG,IAAIvI,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,CAAChH,MAAM,IAAI8S,GAAG,IAAIhR,GAAG,CAACoO,GAAG,EAAE;IAAE;IACpEpO,GAAG,CAACoO,GAAG,GAAG4C,GAAG,GAAG,CAAC;EAClB;EAEA,IAAInP,CAAC,KAAK9C,aAAI,CAAC+e,SAAS,EAAE;IACzB,IAAK9d,GAAG,CAACoO,GAAG,GAAGpO,GAAG,CAACmO,KAAK,GAAG,CAAC,EAAG;MAC9BnO,GAAG,CAACmO,KAAK,GAAGiG,yBAAY,CAACzV,IAAI,CAACuG,SAAS,EAAElF,GAAG,CAACmO,KAAK,CAAC;IACpD;EACD,CAAC,MAAM,IAAItM,CAAC,KAAK9C,aAAI,CAACgf,MAAM,EAAE;IAC7B,IAAI/d,GAAG,CAACmO,KAAK,KAAKnO,GAAG,CAACoO,GAAG,EAAE;MAC1BpO,GAAG,CAACoO,GAAG,GAAG1G,mBAAM,CAAC/I,IAAI,CAACuG,SAAS,EAAElF,GAAG,CAACoO,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,GAAGpO,GAAG,CAACoO,GAAG,GAAG,CAAC,GAAGV,qBAAQ,CAAC/O,IAAI,CAACuG,SAAS,EAAElF,GAAG,CAACoO,GAAG,CAAC,GAAG,CAAC;IAC5G;EACD;EACA,IAAI6P,MAAM;EACV,IAAI,CAACA,MAAM,GAAGC,cAAc,CAACvf,IAAI,CAACuG,SAAS,EAAElF,GAAG,CAAC,MAAM,KAAK,EAAE;IAC7D,IAAIC,MAAM,KAAK,IAAI,IAAIC,IAAI,CAACM,UAAU,KAAK,KAAK,IAAKN,IAAI,CAACI,KAAK,KAAK,IAAI,IAAIqT,wBAAO,CAAChV,IAAI,CAACuG,SAAS,EAAElF,GAAG,CAACmO,KAAK,CAAC,CAACsD,KAAK,CAACM,GAAG,CAACzS,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAE,EAAE;MAAE;MAChJ,IAAI4K,MAAM,GAAG6R,SAAS,CAACpd,IAAI,CAACuG,SAAS,EAAE,IAAI,CAAC;MAC5C,IAAIgF,MAAM,EAAE;QACX,IAAI+I,MAAM,GAAG/I,MAAM,CAACuD,KAAK,KAAK5K,SAAS,GAAGqH,MAAM,CAACuD,KAAK,GAAIvD,MAAM,CAAClK,GAAG,GAAG0N,qBAAQ,CAAC/O,IAAI,CAACuG,SAAS,EAAEgF,MAAM,CAAClK,GAAG,CAACmO,KAAK,GAAGjE,MAAM,CAAClK,GAAG,CAACmO,KAAK,GAAGjE,MAAM,CAAClK,GAAG,CAAC,GAAGiC,iCAAoB,CAACtD,IAAI,CAACuG,SAAS,EAAE,CAAC,CAAC,EAAE,IAAI,CAAE;QACnM,IAAIrD,CAAC,KAAK9C,aAAI,CAACgf,MAAM,IAAI/d,GAAG,CAACmO,KAAK,GAAG8E,MAAM,EAAE;UAC5CjT,GAAG,CAACmO,KAAK,IAAI8E,MAAM;QACpB;MACD;IACD;IAEA,IAAIhT,MAAM,KAAK,IAAI,EAAE;MACpBF,OAAO,CAAC4I,CAAC,GAAG9G,CAAC,KAAK9C,aAAI,CAACgf,MAAM,GAAG/d,GAAG,CAACmO,KAAK,GAAG8P,MAAM,GAAGje,GAAG,CAACmO,KAAK;MAC9DpO,OAAO,CAAC4I,CAAC,GAAGsJ,sCAAyB,CAACtT,IAAI,CAACuG,SAAS,EAAE;QACrDiJ,KAAK,EAAEpO,OAAO,CAAC4I,CAAC;QAChByF,GAAG,EAAErO,OAAO,CAAC4I;MACd,CAAC,EAAE,KAAK,EAAEzI,IAAI,CAACgP,UAAU,KAAK,KAAK,IAAIrN,CAAC,KAAK9C,aAAI,CAAC+e,SAAS,GAAG,MAAM,GAAGjb,SAAS,CAAC,CAACsL,KAAK;IACxF;EACD;AACD;;AAEA;AACA,SAASlH,UAAU,CAAC9G,MAAM,EAAE;EAAE;EAC7B,IAAM+E,SAAS,GAAG,IAAI;IAAEhF,IAAI,GAAG,IAAI,CAACA,IAAI;IAAEH,OAAO,GAAG,IAAI,CAACA,OAAO;EAEhE,IAAI,OAAOG,IAAI,CAAC+G,UAAU,KAAK,UAAU,EAAE,OAAO/G,IAAI,CAAC+G,UAAU,CAAC9G,MAAM,EAAED,IAAI,CAAC;EAC/E,IAAIA,IAAI,CAACie,MAAM,KAAK,GAAG,EAAE,OAAOtb,SAAS;EACzC,IAAIub,QAAQ,GAAG,KAAK;IACnBC,GAAG,GAAG7W,0CAA6B,CAAC7I,IAAI,CAACuG,SAAS,EAAE,IAAI,CAAC;IACzDoZ,GAAG,GAAGlK,yBAAY,CAACzV,IAAI,CAACuG,SAAS,EAAEmZ,GAAG,CAACxH,CAAC,CAAC;EAE1C,IAAIwH,GAAG,CAACtM,GAAG,KAAKlP,SAAS,IAAIwb,GAAG,CAACtM,GAAG,CAACH,cAAc,IAAIyM,GAAG,CAACtM,GAAG,CAACL,WAAW,IAAI2M,GAAG,CAACtM,GAAG,CAACJ,kBAAkB,EAAE;IACzGyM,QAAQ,GAAG,IAAI;IACf,KAAK,IAAIhd,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAIkd,GAAG,EAAEld,CAAC,EAAE,EAAE;MAC9B,IAAIhB,IAAI,GAAGkR,gCAAe,CAAC3S,IAAI,CAACuG,SAAS,EAAE9D,CAAC,CAAC,CAACqQ,KAAK;MACnD,IAAKrR,IAAI,UAAO,KAAK,IAAI,IAAIL,OAAO,CAACoK,cAAc,CAAC/I,CAAC,CAAC,KAAKyB,SAAS,IAAIzC,IAAI,CAACsR,WAAW,KAAK,IAAI,IAAItR,IAAI,CAACuR,kBAAkB,KAAK,IAAI,IAAMvR,IAAI,UAAO,KAAK,IAAI,IAAID,MAAM,CAACiB,CAAC,CAAC,KAAK4Q,+BAAc,CAACrT,IAAI,CAACuG,SAAS,EAAE9D,CAAC,EAAEhB,IAAI,CAAE,EAAE;QAC1Nge,QAAQ,GAAG,KAAK;QAChB;MACD;IACD;EACD;EACA,OAAOA,QAAQ;AAChB;AAEA,SAASG,WAAW,CAACC,MAAM,EAAE;EAC5B,IAAMtZ,SAAS,GAAG,IAAI;IACrBhF,IAAI,GAAG,IAAI,CAACA,IAAI;IAAEue,gBAAgB,GAAGve,IAAI,CAACgP,UAAU,GAAG,CAAC,GAAG,CAAC;EAC7D,OAAOhK,SAAS,CAACd,KAAK,GAAIoa,MAAM,CAACrQ,KAAK,GAAGqQ,MAAM,CAACpQ,GAAG,GAAIqQ,gBAAgB,GAAID,MAAM,CAACpQ,GAAG,GAAGoQ,MAAM,CAACrQ,KAAK,GAAIsQ,gBAAgB;AACzH;;AAEA;AACA,SAASnX,OAAO,CAACtH,GAAG,EAAE6B,CAAC,EAAE5B,MAAM,EAAEgc,WAAW,EAAEyC,aAAa,EAAEC,YAAY,EAAEC,YAAY,EAAE;EAAE;EAC1F,IAAM1Z,SAAS,GAAG,IAAI;IACrBvC,CAAC,GAAG,IAAI,CAACD,aAAa;IACtBxC,IAAI,GAAG,IAAI,CAACA,IAAI;IAChBH,OAAO,GAAGmF,SAAS,CAACnF,OAAO;EAE5BE,MAAM,GAAGA,MAAM,KAAK,IAAI,CAAC,CAAC;;EAE1B,IAAI+b,OAAO,GAAGhc,GAAG;EACjB,IAAIA,GAAG,CAACmO,KAAK,KAAKtL,SAAS,EAAE;IAAE;IAC9BmZ,OAAO,GAAG9W,SAAS,CAACd,KAAK,GAAGpE,GAAG,CAACoO,GAAG,GAAGpO,GAAG,CAACmO,KAAK;EAChD;EAEA,SAAS0Q,oBAAoB,CAACC,UAAU,EAAE;IACzC,IAAIA,UAAU,KAAKjc,SAAS,EAAE;MAC7B,IAAIic,UAAU,CAAC3Z,MAAM,KAAKtC,SAAS,EAAE;QAAE;QACtC,IAAI,CAACpF,KAAK,CAACkH,OAAO,CAACma,UAAU,CAAC3Z,MAAM,CAAC,EAAE2Z,UAAU,CAAC3Z,MAAM,GAAG,CAAC2Z,UAAU,CAAC3Z,MAAM,CAAC;QAC9E2Z,UAAU,CAAC3Z,MAAM,CAAC4Z,IAAI,CAAC,UAAUC,CAAC,EAAEC,CAAC,EAAE;UACtC,OAAO/Z,SAAS,CAACd,KAAK,GAAG4a,CAAC,CAAChf,GAAG,GAAGif,CAAC,CAACjf,GAAG,GAAGif,CAAC,CAACjf,GAAG,GAAGgf,CAAC,CAAChf,GAAG;QACvD,CAAC,CAAC,CAAC6E,OAAO,CAAC,UAAUuT,IAAI,EAAE;UAC1B8F,cAAc,CAACvf,IAAI,CAACuG,SAAS,EAAE;YAACiJ,KAAK,EAAEiK,IAAI;YAAEhK,GAAG,EAAEgK,IAAI,GAAG;UAAC,CAAC,CAAC;QAC7D,CAAC,CAAC;QACF0G,UAAU,CAAC3Z,MAAM,GAAGtC,SAAS;MAC9B;MACA,IAAIic,UAAU,CAACI,MAAM,KAAKrc,SAAS,EAAE;QAAE;QACtC,IAAI,CAACpF,KAAK,CAACkH,OAAO,CAACma,UAAU,CAACI,MAAM,CAAC,EAAEJ,UAAU,CAACI,MAAM,GAAG,CAACJ,UAAU,CAACI,MAAM,CAAC;QAC9EJ,UAAU,CAACI,MAAM,CAACH,IAAI,CAAC,UAAUC,CAAC,EAAEC,CAAC,EAAE;UACtC,OAAO/Z,SAAS,CAACd,KAAK,GAAG6a,CAAC,CAACjf,GAAG,GAAGgf,CAAC,CAAChf,GAAG,GAAGgf,CAAC,CAAChf,GAAG,GAAGif,CAAC,CAACjf,GAAG;QACvD,CAAC,CAAC,CAAC6E,OAAO,CAAC,UAAUuT,IAAI,EAAE;UAC1B,IAAIA,IAAI,CAACvW,CAAC,KAAK,EAAE,EAAE;YAClByF,OAAO,CAAC3I,IAAI,CAACuG,SAAS,EAAEkT,IAAI,CAACpY,GAAG,EAAEoY,IAAI,CAACvW,CAAC,EAAEuW,IAAI,CAACnY,MAAM,KAAK4C,SAAS,GAAGuV,IAAI,CAACnY,MAAM,GAAG,IAAI,EAAEmY,IAAI,CAAC6D,WAAW,KAAKpZ,SAAS,GAAGuV,IAAI,CAAC6D,WAAW,GAAGA,WAAW,CAAC;UAC3J;QACD,CAAC,CAAC;QACF6C,UAAU,CAACI,MAAM,GAAGrc,SAAS;MAC9B;MAEA,IAAIic,UAAU,CAACK,iBAAiB,IAAIL,UAAU,CAAC3e,MAAM,EAAE;QACtD,IAAIif,OAAO,GAAGN,UAAU,CAACK,iBAAiB;QAC1CA,iBAAiB,CAACxgB,IAAI,CAACuG,SAAS,EAAEka,OAAO,KAAK,IAAI,GAAGA,OAAO,GAAGA,OAAO,CAAC/f,KAAK,EAAE+f,OAAO,CAAChR,GAAG,EAAE0Q,UAAU,CAAC3e,MAAM,CAAC;QAC7G2e,UAAU,CAACK,iBAAiB,GAAGtc,SAAS;MACzC;MAEA,IAAIic,UAAU,CAACO,eAAe,KAAKxc,SAAS,EAAE;QAC7CmZ,OAAO,GAAG8C,UAAU,CAACO,eAAe;QACpC;QACAP,UAAU,GAAG,IAAI;MAClB;IACD;IACA,OAAOA,UAAU;EAClB;EAEA,SAASQ,QAAQ,CAACnL,QAAQ,EAAEtS,CAAC,EAAE5B,MAAM,EAAE;IACtC,IAAIsf,IAAI,GAAG,KAAK;IAChBzN,yBAAQ,CAACnT,IAAI,CAACuG,SAAS,EAAEiP,QAAQ,CAAC,CAAC0D,KAAK,CAAC,UAAUvD,GAAG,EAAExP,GAAG,EAAE;MAC5D,IAAI1E,IAAI,GAAGkU,GAAG,CAAC7C,KAAK;MACpB;MACA5L,sBAAS,CAAClH,IAAI,CAACuG,SAAS,EAAE,IAAI,CAAC;MAC/B,IAAI9E,IAAI,CAACmV,GAAG,IAAIxV,OAAO,CAACoK,cAAc,CAACiK,yBAAY,CAACzV,IAAI,CAACuG,SAAS,EAAEiP,QAAQ,CAAC,CAAC,KAAKtR,SAAS;QAAE;QAC9F;UACC0c,IAAI,GAAG,KAAK;QACb,CAAC,MAAM;QACN;QACAA,IAAI,GAAGnf,IAAI,CAACwT,EAAE,IAAI,IAAI,GACrBxT,IAAI,CAACwT,EAAE,CAACxT,IAAI,CAACyB,CAAC,EAAE9B,OAAO,EAAEoU,QAAQ,EAAElU,MAAM,EAAEC,IAAI,EAAEqe,WAAW,CAAC5f,IAAI,CAACuG,SAAS,EAAElF,GAAG,CAAC,CAAC,GAAG,CAAC6B,CAAC,KAAKzB,IAAI,CAAC2R,GAAG,IAAIlQ,CAAC,KAAK3B,IAAI,CAACoB,yBAAyB,KAAKlB,IAAI,CAAC2R,GAAG,KAAK,EAAE;QAAG;QAClK;UACClQ,CAAC,EAAEmQ,+BAAc,CAACrT,IAAI,CAACuG,SAAS,EAAEiP,QAAQ,EAAE/T,IAAI,EAAE,IAAI,CAAC,IAAIA,IAAI,CAAC2R,GAAG;UACnE/R,GAAG,EAAEmU;QACN,CAAC,GAAG,KAAK;MACZ;MACA,IAAIoL,IAAI,KAAK,KAAK,EAAE;QACnB,IAAIvV,IAAI,GAAGuV,IAAI,CAAC1d,CAAC,KAAKgB,SAAS,GAAG0c,IAAI,CAAC1d,CAAC,GAAGA,CAAC;UAAE2d,YAAY,GAAGrL,QAAQ;QACrEnK,IAAI,GAAIA,IAAI,KAAK9J,IAAI,CAACoB,yBAAyB,IAAIlB,IAAI,UAAO,KAAK,IAAI,GACrE4R,+BAAc,CAACrT,IAAI,CAACuG,SAAS,EAAEiP,QAAQ,EAAE/T,IAAI,EAAE,IAAI,CAAC,IAAIA,IAAI,CAAC2R,GAAG,GAAI/H,IAAI;QAE1EuV,IAAI,GAAGV,oBAAoB,CAACU,IAAI,CAAC;QAEjC,IAAIA,IAAI,KAAK,IAAI,IAAIA,IAAI,CAACvf,GAAG,KAAK6C,SAAS,IAAI0c,IAAI,CAACvf,GAAG,KAAKmU,QAAQ,EAAE;UAAE;UACvEqL,YAAY,GAAGD,IAAI,CAACvf,GAAG;QACxB;QAEA,IAAIuf,IAAI,KAAK,IAAI,IAAIA,IAAI,CAACvf,GAAG,KAAK6C,SAAS,IAAI0c,IAAI,CAAC1d,CAAC,KAAKgB,SAAS,EAAE;UACpE,OAAO,KAAK,CAAC,CAAC;QACf;;QAEA,IAAIqb,cAAc,CAACvf,IAAI,CAACuG,SAAS,EAAElF,GAAG,EAAE2C,CAAC,CAACK,MAAM,CAAC,CAAC,CAAC,EAAEsR,GAAG,EAAE;UACzD,OAAO,EAAE5U,MAAM,CAACf,IAAI,CAACuG,SAAS,EAAE8E,IAAI,EAAE5J,IAAI,EAAEof,YAAY;QACzD,CAAC,CAAC,EAAEvD,WAAW,EAAEuD,YAAY,CAAC,KAAK,KAAK,EAAE;UACzCD,IAAI,GAAG,KAAK;QACb;QACA,OAAO,KAAK,CAAC,CAAC;MACf;;MAEA,OAAO,IAAI;IACZ,CAAC,CAAC;IACF,OAAOA,IAAI;EACZ;EAEA,IAAIrV,MAAM,GAAG,IAAI;IAChBuV,cAAc,GAAG9c,CAAC,CAACK,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,EAAEjD,OAAO,CAACoK,cAAc,CAAC,CAAC,CAAC;;EAE9D,IAAIjK,IAAI,CAACM,UAAU,KAAK,KAAK,IAAIT,OAAO,CAACka,QAAQ,CAAC+B,OAAO,CAAC,KAAKnZ,SAAS,IAAI6b,aAAa,KAAK,IAAI,IAAIzC,WAAW,KAAK,IAAI,EAAE;IAC3H,KAAK,IAAI7a,CAAC,GAAG4a,OAAO,EAAE5a,CAAC,IAAI8D,SAAS,CAACd,KAAK,GAAGpE,GAAG,CAACmO,KAAK,GAAGnO,GAAG,CAACoO,GAAG,CAAC,EAAEhN,CAAC,EAAE,EAAE;MACvE,IAAIrB,OAAO,CAACka,QAAQ,CAAC7Y,CAAC,CAAC,KAAKyB,SAAS,EAAE;QACtC9C,OAAO,CAACka,QAAQ,CAAC7Y,CAAC,CAAC,GAAGyB,SAAS;QAC/B,OAAO9C,OAAO,CAAC8T,KAAK,CAACzS,CAAC,CAAC;MACxB;IACD;EACD;EAEA,IAAI,OAAOlB,IAAI,CAACwf,aAAa,KAAK,UAAU,IAAIzD,WAAW,KAAK,IAAI,IAAI0C,YAAY,KAAK,IAAI,EAAE;IAC9FzU,MAAM,GAAGhK,IAAI,CAACwf,aAAa,CAAC/gB,IAAI,CAACuG,SAAS,EAAEW,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,EAAE8W,OAAO,EAAEna,CAAC,EAAE0c,WAAW,CAAC5f,IAAI,CAACuG,SAAS,EAAElF,GAAG,CAAC,EAAEE,IAAI,EAAEH,OAAO,EAAEC,GAAG,EAAEC,MAAM,IAAIye,aAAa,CAAC;IACjKxU,MAAM,GAAG2U,oBAAoB,CAAC3U,MAAM,CAAC;EACtC;EACA,IAAIA,MAAM,KAAK,IAAI,EAAE;IAAE;IACtBA,MAAM,GAAGoV,QAAQ,CAACtD,OAAO,EAAEna,CAAC,EAAE5B,MAAM,CAAC;IACrC,IAAI,CAAC,CAACA,MAAM,IAAIgc,WAAW,KAAK,IAAI,KAAK/R,MAAM,KAAK,KAAK,IAAIyU,YAAY,KAAK,IAAI,EAAE;MACnF,IAAIgB,eAAe,GAAG5f,OAAO,CAACoK,cAAc,CAAC6R,OAAO,CAAC;MACrD,IAAI2D,eAAe,IAAIA,eAAe,CAAClO,KAAK,UAAO,KAAK,IAAI,KAAKkO,eAAe,CAAClO,KAAK,CAACM,GAAG,KAAKlQ,CAAC,IAAIA,CAAC,KAAK3B,IAAI,CAACoB,yBAAyB,CAAC,EAAE;QAC1I4I,MAAM,GAAG;UACR,OAAO,EAAEwD,qBAAQ,CAAC/O,IAAI,CAACuG,SAAS,EAAE8W,OAAO;QAC1C,CAAC;MACF,CAAC,MAAM;QACN,IAAI9b,IAAI,CAACgP,UAAU,IAAInP,OAAO,CAACoK,cAAc,CAACuD,qBAAQ,CAAC/O,IAAI,CAACuG,SAAS,EAAE8W,OAAO,CAAC,CAAC,KAAKnZ,SAAS,IAAI7C,GAAG,CAACoO,GAAG,GAAG4N,OAAO,EAAE;UAAE;UACtH,IAAI4D,IAAI,GAAG,KAAK;UAChB,IAAI7f,OAAO,CAACkb,SAAS,CAACe,OAAO,CAAC,IAAIjc,OAAO,CAACoK,cAAc,CAACuD,qBAAQ,CAAC/O,IAAI,CAACuG,SAAS,EAAE8W,OAAO,CAAC,CAAC,KAAKnZ,SAAS,EAAE;YAC1GqH,MAAM,GAAG5C,OAAO,CAAC3I,IAAI,CAACuG,SAAS,EAAE8W,OAAO,GAAGjc,OAAO,CAACkb,SAAS,CAACe,OAAO,CAAC,EAAEna,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC;YACrF,IAAIqI,MAAM,KAAK,KAAK,EAAE;cACrB,IAAIwU,aAAa,KAAK,IAAI,EAAExU,MAAM,CAACuD,KAAK,GAAGuO,OAAO;cAClD4D,IAAI,GAAG,IAAI;YACZ;UACD;UACA,IAAI5f,GAAG,CAACoO,GAAG,GAAG4N,OAAO,EAAE;YACtBjc,OAAO,CAACoK,cAAc,CAAC6R,OAAO,CAAC,GAAGnZ,SAAS;UAC5C;UACA,IAAI,CAAC+c,IAAI,IAAI,CAAClY,mBAAM,CAAC/I,IAAI,CAACuG,SAAS,EAAE8W,OAAO,EAAE9b,IAAI,CAACM,UAAU,IAAIwb,OAAO,KAAK,CAAC,CAAC,EAAE;YAChF,KAAK,IAAI6D,IAAI,GAAG7D,OAAO,GAAG,CAAC,EAAE8D,KAAK,GAAGpS,qBAAQ,CAAC/O,IAAI,CAACuG,SAAS,EAAE8W,OAAO,EAAE,KAAK,EAAEA,OAAO,KAAK,CAAC,CAAC,EAAE6D,IAAI,IAAIC,KAAK,EAAED,IAAI,EAAE,EAAE;cACpH;cACA;cACA;cACA3V,MAAM,GAAGoV,QAAQ,CAACO,IAAI,EAAEhe,CAAC,EAAE5B,MAAM,CAAC;cAClC,IAAIiK,MAAM,KAAK,KAAK,EAAE;gBACrBA,MAAM,GAAG6V,kBAAkB,CAACphB,IAAI,CAACuG,SAAS,EAAE8W,OAAO,EAAE9R,MAAM,CAAClK,GAAG,KAAK6C,SAAS,GAAGqH,MAAM,CAAClK,GAAG,GAAG6f,IAAI,CAAC,IAAI3V,MAAM;gBAC5G8R,OAAO,GAAG6D,IAAI;gBACd;cACD;YACD;UACD;QACD;MACD;IACD;IAEA,IAAI3a,SAAS,CAAClB,aAAa,IAAI0a,aAAa,KAAK,IAAI,IAAI,CAACze,MAAM,EAAE;MACjE,IAAIiK,MAAM,KAAK,KAAK,IAAIhK,IAAI,CAACM,UAAU,KAAKyG,UAAU,CAACtI,IAAI,CAACuG,SAAS,EAAEW,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,CAAC,IAAI8W,OAAO,KAAK,CAAC,CAAC,EAAE;QAAE;QACtH9R,MAAM,GAAG6R,SAAS,CAACpd,IAAI,CAACuG,SAAS,EAAE8W,OAAO,EAAEna,CAAC,EAAE5B,MAAM,EAAEgc,WAAW,EAAEpZ,SAAS,EAAE7C,GAAG,CAAC;MACpF,CAAC,MAAM,IAAIue,WAAW,CAAC5f,IAAI,CAACuG,SAAS,EAAElF,GAAG,CAAC,IAAID,OAAO,CAAC8T,KAAK,CAACmI,OAAO,CAAC,IAAIjc,OAAO,CAAC8T,KAAK,CAACmI,OAAO,CAAC,CAAC9d,MAAM,GAAG,CAAC,IAAIgC,IAAI,CAACM,UAAU,EAAE;QAAE;QAChI0J,MAAM,GAAG6R,SAAS,CAACpd,IAAI,CAACuG,SAAS,EAAE,IAAI,CAAC;MACzC,CAAC,MAAM,IAAIgF,MAAM,IAAI,IAAI,IAAIhK,IAAI,CAACmE,YAAY,KAAK,IAAI,IAAItE,OAAO,CAAC8T,KAAK,CAACmI,OAAO,CAAC,IAAIjc,OAAO,CAAC8T,KAAK,CAACmI,OAAO,CAAC,CAAC9d,MAAM,GAAG,CAAC,IAAI+D,iCAAoB,CAACtD,IAAI,CAACuG,SAAS,EAAErC,SAAS,EAAE,IAAI,CAAC,GAAGmZ,OAAO,EAAE;QAC1L9R,MAAM,GAAG6R,SAAS,CAACpd,IAAI,CAACuG,SAAS,EAAE,IAAI,CAAC;MACzC;IACD;IAEA,IAAIgF,MAAM,KAAK,IAAI,EAAE;MACpBA,MAAM,GAAG;QACR,KAAK,EAAE8R;MACR,CAAC;IACF;EACD;EACA,IAAI,OAAO9b,IAAI,CAAC0B,cAAc,KAAK,UAAU,IAAIqa,WAAW,KAAK,IAAI,IAAI0C,YAAY,KAAK,IAAI,EAAE;IAC/F,IAAIqB,UAAU,GAAG9f,IAAI,CAAC0B,cAAc,CAACjD,IAAI,CAACuG,SAAS,EAAEW,sBAAS,CAAClH,IAAI,CAACuG,SAAS,EAAE,IAAI,CAAC,EAAElF,GAAG,CAACmO,KAAK,KAAKtL,SAAS,GAAIqC,SAAS,CAACd,KAAK,GAAGpE,GAAG,CAACoO,GAAG,GAAGpO,GAAG,CAACmO,KAAK,GAAInO,GAAG,EAAE6B,CAAC,EAAEqI,MAAM,EAAEhK,IAAI,EAAEH,OAAO,EAAEE,MAAM,EAAE2e,YAAY,CAAC;IAC9M,IAAIoB,UAAU,KAAKnd,SAAS,EAAE;MAC7BqH,MAAM,GAAG8V,UAAU,KAAK,IAAI,GAAG9V,MAAM,GAAG8V,UAAU;IACnD;EACD;EAEA,IAAI9V,MAAM,IAAIA,MAAM,CAAClK,GAAG,KAAK6C,SAAS,EAAE;IACvCqH,MAAM,CAAClK,GAAG,GAAGgc,OAAO;EACrB;EAEA,IAAI9R,MAAM,KAAK,KAAK,IAAIyU,YAAY,KAAK,IAAI,EAAE;IAC9CpR,yBAAY,CAAC5O,IAAI,CAACuG,SAAS,EAAE,IAAI,CAAC;IAClCnF,OAAO,CAACoK,cAAc,GAAGxH,CAAC,CAACK,MAAM,CAAC,IAAI,EAAE,EAAE,EAAEyc,cAAc,CAAC,CAAC,CAAC;EAC9D,CAAC,MAAM;IACNM,kBAAkB,CAACphB,IAAI,CAACuG,SAAS,EAAErC,SAAS,EAAEmZ,OAAO,EAAE,IAAI,CAAC;EAC7D;EAEA,IAAIiE,SAAS,GAAGpB,oBAAoB,CAAC3U,MAAM,CAAC;EAC5C;EACA,IAAIhF,SAAS,CAACvB,SAAS,KAAKd,SAAS,EAAE;IACtC,IAAI1C,MAAM,GAAG0F,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC;IACtC,IAAI/E,MAAM,CAACjC,MAAM,GAAGgH,SAAS,CAACvB,SAAS,IAAI,CAACsY,WAAW,EAAE;MACxD1O,yBAAY,CAAC5O,IAAI,CAACuG,SAAS,EAAE,IAAI,CAAC;MAClCnF,OAAO,CAACoK,cAAc,GAAGxH,CAAC,CAACK,MAAM,CAAC,IAAI,EAAE,EAAE,EAAEyc,cAAc,CAAC,CAAC,CAAC;MAC7DQ,SAAS,GAAG,KAAK;IAClB;EACD;EACA,OAAOA,SAAS;AACjB;;AAEA;AACA,SAASC,0BAA0B,CAAClgB,GAAG,EAAEmgB,cAAc,EAAEjgB,IAAI,EAAE;EAC9D,IAAMgF,SAAS,GAAG,IAAI;IACrBnF,OAAO,GAAG,IAAI,CAACA,OAAO;EAEvB,IAAIqgB,KAAK,GAAG,KAAK;IAChBvM,KAAK,GAAG/B,yBAAQ,CAACnT,IAAI,CAACuG,SAAS,EAAElF,GAAG,CAAC;EACtC,KAAK,IAAIub,IAAI,GAAG,CAAC,EAAEA,IAAI,GAAG1H,KAAK,CAAC3V,MAAM,EAAEqd,IAAI,EAAE,EAAE;IAC/C,IAAI1H,KAAK,CAAC0H,IAAI,CAAC,CAAC9J,KAAK,KAClBoC,KAAK,CAAC0H,IAAI,CAAC,CAAC9J,KAAK,CAAC,WAAW,CAAC,KAAK0O,cAAc,CAAC1O,KAAK,CAACvR,IAAI,CAACmgB,cAAc,GAAG,KAAK,GAAG,WAAW,CAAC,KAAK,CAACngB,IAAI,CAACmgB,cAAc,IAAI,CAACF,cAAc,CAAC1O,KAAK,UAAO,CAAC,IAC7JoC,KAAK,CAAC0H,IAAI,CAAC,CAAC9J,KAAK,CAAC,WAAW,CAAC,KAAK0O,cAAc,CAAC1O,KAAK,CAAC,WAAW,CAAC,IACnEvR,IAAI,CAACI,KAAK,IAAI,CAACuT,KAAK,CAAC0H,IAAI,CAAC,CAAC9J,KAAK,UAAO,IAAIoC,KAAK,CAAC0H,IAAI,CAAC,CAAC9J,KAAK,CAACmC,EAAE,CAACxT,IAAI,CAAC+f,cAAc,CAAC5W,KAAK,EAAExJ,OAAO,EAAEC,GAAG,EAAE,KAAK,EAAEE,IAAI,CAAE,CAAC,EAAE;MAC3HkgB,KAAK,GAAG,IAAI;MACZ;IACD,CAAC,MAAM,IAAIvM,KAAK,CAAC0H,IAAI,CAAC,CAAC9J,KAAK,IAAIoC,KAAK,CAAC0H,IAAI,CAAC,CAAC9J,KAAK,CAAC,KAAK,CAAC,KAAK0O,cAAc,CAAC1O,KAAK,CAAC,WAAW,CAAC,EAAE;MAC/F2O,KAAK,GAAGvd,SAAS;MACjB;IACD;EACD;EACA,IAAIud,KAAK,KAAK,KAAK,EAAE;IACpB,IAAIrgB,OAAO,CAACkb,SAAS,CAACjb,GAAG,CAAC,KAAK6C,SAAS,EAAE;MACzCud,KAAK,GAAGF,0BAA0B,CAACvhB,IAAI,CAACuG,SAAS,EAAElF,GAAG,GAAGD,OAAO,CAACkb,SAAS,CAACjb,GAAG,CAAC,EAAEmgB,cAAc,EAAEjgB,IAAI,CAAC;IACvG;EACD;EACA,OAAOkgB,KAAK;AACb;;AAEA;AACA,SAASjB,iBAAiB,CAAC9f,KAAK,EAAE+O,GAAG,EAAEjO,MAAM,EAAE;EAC9C,IAAM+E,SAAS,GAAG,IAAI;IACrBnF,OAAO,GAAG,IAAI,CAACA,OAAO;IACtBG,IAAI,GAAG,IAAI,CAACA,IAAI;IAChByC,CAAC,GAAG,IAAI,CAACD,aAAa;EACvB;EACA,IAAItB,CAAC;IAAEuH,CAAC;IAAErH,yBAAyB,GAAGpB,IAAI,CAACoB,yBAAyB;IACnES,IAAI,GAAGmD,SAAS,CAACd,KAAK,GAAGjE,MAAM,CAACyE,KAAK,EAAE,CAACmC,OAAO,EAAE,GAAG5G,MAAM;EAC3DD,IAAI,CAACoB,yBAAyB,GAAG,EAAE;EACnC,IAAIjC,KAAK,KAAK,IAAI,EAAE;IACnBkO,yBAAY,CAAC5O,IAAI,CAACuG,SAAS,CAAC;IAC5BnF,OAAO,CAAC8T,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC;IACpBxU,KAAK,GAAG,CAAC;IACT+O,GAAG,GAAGjO,MAAM,CAACjC,MAAM;IACnByK,CAAC,GAAGsJ,sCAAyB,CAACtT,IAAI,CAACuG,SAAS,EAAE;MAACiJ,KAAK,EAAE,CAAC;MAAEC,GAAG,EAAE;IAAC,CAAC,EAAE,KAAK,CAAC,CAACD,KAAK;EAC/E,CAAC,MAAM;IACN,KAAK/M,CAAC,GAAG/B,KAAK,EAAE+B,CAAC,GAAGgN,GAAG,EAAEhN,CAAC,EAAE,EAAE;MAC7B,OAAOrB,OAAO,CAACoK,cAAc,CAAC/I,CAAC,CAAC;IACjC;IACAuH,CAAC,GAAGtJ,KAAK;EACV;EAEA,IAAIihB,QAAQ,GAAG,IAAI3d,CAAC,CAAC4d,KAAK,CAAC,UAAU,CAAC;EACtC,KAAKnf,CAAC,GAAG/B,KAAK,EAAE+B,CAAC,GAAGgN,GAAG,EAAEhN,CAAC,EAAE,EAAE;IAC7Bkf,QAAQ,CAACxS,GAAG,GAAG/L,IAAI,CAACX,CAAC,CAAC,CAAC2B,QAAQ,EAAE;IACjCmC,SAAS,CAACxB,SAAS,GAAG,KAAK,CAAC,CAAC;IAC7B,IAAI8c,SAAS,GAAGpU,4BAAa,CAACqU,aAAa,CAAC9hB,IAAI,CAACuG,SAAS,EAAEob,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE3X,CAAC,CAAC;IAC5F,IAAI6X,SAAS,KAAK,KAAK,IAAIA,SAAS,KAAK3d,SAAS,EAAE;MACnD8F,CAAC,GAAG6X,SAAS,CAACE,eAAe;IAC9B;EACD;EAEAxgB,IAAI,CAACoB,yBAAyB,GAAGA,yBAAyB;AAC3D;;AAEA;AACA;AACA,SAASye,kBAAkB,CAACY,WAAW,EAAE1N,MAAM,EAAE2N,QAAQ,EAAE;EAC1D,IAAM1b,SAAS,GAAG,IAAI;IACrBnF,OAAO,GAAG,IAAI,CAACA,OAAO;IACtB4C,CAAC,GAAG,IAAI,CAACD,aAAa;;EAEvB;EACA,IAAIie,WAAW,KAAK9d,SAAS,EAAE;IAC9B;IACA,KAAK8d,WAAW,GAAG1N,MAAM,GAAG,CAAC,EAAE0N,WAAW,GAAG,CAAC,EAAEA,WAAW,EAAE,EAAE;MAC9D,IAAI5gB,OAAO,CAACoK,cAAc,CAACwW,WAAW,CAAC,EAAE;IAC1C;EACD;EACA,KAAK,IAAIE,EAAE,GAAGF,WAAW,EAAEE,EAAE,GAAG5N,MAAM,EAAE4N,EAAE,EAAE,EAAE;IAC7C,IAAI9gB,OAAO,CAACoK,cAAc,CAAC0W,EAAE,CAAC,KAAKhe,SAAS,IAAI,CAAC6E,mBAAM,CAAC/I,IAAI,CAACuG,SAAS,EAAE2b,EAAE,EAAE,KAAK,CAAC,EAAE;MACnF,IAAIlO,EAAE,GAAGkO,EAAE,IAAI,CAAC,GAAGlN,wBAAO,CAAChV,IAAI,CAACuG,SAAS,EAAE2b,EAAE,CAAC,GAAG9gB,OAAO,CAACoK,cAAc,CAAC0W,EAAE,GAAG,CAAC,CAAC;MAC/E,IAAIlO,EAAE,EAAE;QACP,IAAIkB,KAAK,GAAG/B,yBAAQ,CAACnT,IAAI,CAACuG,SAAS,EAAE2b,EAAE,CAAC,CAACjc,KAAK,EAAE;QAChD,IAAIiP,KAAK,CAACA,KAAK,CAAC3V,MAAM,GAAG,CAAC,CAAC,CAACuT,KAAK,CAACM,GAAG,KAAK,EAAE,EAAE8B,KAAK,CAAC6B,GAAG,EAAE;QACzD,IAAIU,SAAS,GAAGrC,sCAAqB,CAACpV,IAAI,CAACuG,SAAS,EAAE2b,EAAE,EAAEhN,KAAK,CAAC;UAAEiN,EAAE;QACpE,IAAI1K,SAAS,KAAKA,SAAS,CAAC3E,KAAK,CAAC8D,GAAG,KAAK,IAAI,IAAKa,SAAS,CAAC3E,KAAK,CAACG,cAAc,KAAK,QAAQ,KAAKkP,EAAE,GAAG/gB,OAAO,CAACoK,cAAc,CAAC0W,EAAE,GAAG,CAAC,CAAC,CAAC,IAAIC,EAAE,CAACrP,KAAK,CAACE,kBAAkB,KAAK,IAAK,CAAC,EAAE;UAClLyE,SAAS,GAAGzT,CAAC,CAACK,MAAM,CAAC,CAAC,CAAC,EAAEoT,SAAS,EAAE;YACnC,OAAO,EAAEpE,+BAAc,CAACrT,IAAI,CAACuG,SAAS,EAAE2b,EAAE,EAAEzK,SAAS,CAAC3E,KAAK,EAAE,IAAI,CAAC,IAAI2E,SAAS,CAAC3E,KAAK,CAACM;UACvF,CAAC,CAAC;UACFqE,SAAS,CAAC3C,cAAc,GAAG,IAAI;UAC/ByK,cAAc,CAACvf,IAAI,CAACuG,SAAS,EAAE2b,EAAE,EAAEzK,SAAS,EAAE,IAAI,CAAC;UAEnD,IAAIwK,QAAQ,KAAK,IAAI,EAAE;YACtB;YACA,IAAIG,QAAQ,GAAGhhB,OAAO,CAACoK,cAAc,CAAC8I,MAAM,CAAC,CAAC1J,KAAK;YACnDxJ,OAAO,CAACoK,cAAc,CAAC8I,MAAM,CAAC,GAAGpQ,SAAS;YAC1C,OAAOyE,OAAO,CAAC3I,IAAI,CAACuG,SAAS,EAAE+N,MAAM,EAAE8N,QAAQ,EAAE,IAAI,EAAE,IAAI,CAAC;UAC7D;QACD;MACD;IACD;EACD;AACD;;AAEA;AACA,SAAS7C,cAAc,CAACle,GAAG,EAAEghB,SAAS,EAAE/E,WAAW,EAAEuD,YAAY,EAAE;EAClE,IAAMta,SAAS,GAAG,IAAI;IACrBnF,OAAO,GAAG,IAAI,CAACA,OAAO;IACtBG,IAAI,GAAG,IAAI,CAACA,IAAI;IAChByC,CAAC,GAAG,IAAI,CAACD,aAAa;EAEvB,SAASue,gBAAgB,CAACjhB,GAAG,EAAEuT,MAAM,EAAE5C,SAAS,EAAE;IACjD,IAAIuQ,QAAQ,GAAG3N,MAAM,CAACvT,GAAG,CAAC;IAC1B,IAAIkhB,QAAQ,KAAKre,SAAS,IAAIqe,QAAQ,CAACzP,KAAK,UAAO,KAAK,IAAI,IAAIyP,QAAQ,CAACzP,KAAK,CAACC,WAAW,KAAK,IAAI,KAAK6B,MAAM,CAAC,CAAC,CAAC,KAAK1Q,SAAS,IAAI0Q,MAAM,CAAC,CAAC,CAAC,CAAC/B,WAAW,KAAK3O,SAAS,CAAC,EAAE;MACxK,IAAIse,SAAS,GAAGxQ,SAAS,CAACxC,KAAK,IAAInO,GAAG,GAAG,CAAC,GAAGuT,MAAM,CAACvT,GAAG,GAAG,CAAC,CAAC,IAAIuT,MAAM,CAACvT,GAAG,GAAG,CAAC,CAAC,CAACyR,KAAK,UAAO,KAAK,IAAI,IAAI8B,MAAM,CAACvT,GAAG,GAAG,CAAC,CAAC,GAAGuT,MAAM,CAACvT,GAAG,GAAG,CAAC,CAAC;QACzIohB,SAAS,GAAGzQ,SAAS,CAACvC,GAAG,GAAGpO,GAAG,GAAG,CAAC,GAAGuT,MAAM,CAACvT,GAAG,GAAG,CAAC,CAAC,IAAIuT,MAAM,CAACvT,GAAG,GAAG,CAAC,CAAC,CAACyR,KAAK,UAAO,KAAK,IAAI,IAAI8B,MAAM,CAACvT,GAAG,GAAG,CAAC,CAAC,GAAGuT,MAAM,CAACvT,GAAG,GAAG,CAAC,CAAC;MACpI,OAAOmhB,SAAS,IAAIC,SAAS;IAC9B;IACA,OAAO,KAAK;EACb;EAEA,IAAInD,MAAM,GAAG,CAAC;IAAE9P,KAAK,GAAGnO,GAAG,CAACmO,KAAK,KAAKtL,SAAS,GAAG7C,GAAG,CAACmO,KAAK,GAAGnO,GAAG;IAAEoO,GAAG,GAAGpO,GAAG,CAACoO,GAAG,KAAKvL,SAAS,GAAG7C,GAAG,CAACoO,GAAG,GAAGpO,GAAG;IAC7GogB,KAAK,GAAG,IAAI;EACb,IAAIpgB,GAAG,CAACmO,KAAK,GAAGnO,GAAG,CAACoO,GAAG,EAAE;IACxBD,KAAK,GAAGnO,GAAG,CAACoO,GAAG;IACfA,GAAG,GAAGpO,GAAG,CAACmO,KAAK;EAChB;EAEAqR,YAAY,GAAGA,YAAY,KAAK3c,SAAS,GAAG2c,YAAY,GAAGrR,KAAK;EAChE,IAAI8N,WAAW,KAAKpZ,SAAS,KAAKsL,KAAK,KAAKC,GAAG,IAAKlO,IAAI,CAACgP,UAAU,IAAInP,OAAO,CAACoK,cAAc,CAACqV,YAAY,CAAC,KAAK3c,SAAU,IAAIme,SAAS,KAAKne,SAAS,IAAIme,SAAS,CAACvP,KAAK,CAACE,kBAAkB,IAAIqP,SAAS,CAACvP,KAAK,CAACC,WAAW,CAAC,EAAE;IAC5N;IACA,IAAI+N,cAAc,GAAG9c,CAAC,CAACK,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,EAAEjD,OAAO,CAACoK,cAAc,CAAC;MAC9D6G,GAAG,GAAG/O,iCAAoB,CAACtD,IAAI,CAACuG,SAAS,EAAErC,SAAS,EAAE,IAAI,CAAC;MAC3DzB,CAAC;IACFrB,OAAO,CAAC4I,CAAC,GAAGwF,KAAK,CAAC,CAAC;;IAEnB,KAAK/M,CAAC,GAAG4P,GAAG,EAAE5P,CAAC,IAAI+M,KAAK,EAAE/M,CAAC,EAAE,EAAE;MAC9B,OAAOrB,OAAO,CAACoK,cAAc,CAAC/I,CAAC,CAAC;MAChC,IAAI4f,SAAS,KAAKne,SAAS,EAAE,OAAO9C,OAAO,CAAC8T,KAAK,CAACzS,CAAC,GAAG,CAAC,CAAC;IACzD;IAEA,IAAIigB,CAAC,GAAG7B,YAAY;MACnB0B,QAAQ,GAAGG,CAAC;MAAExF,CAAC;MAAEyF,QAAQ;MAAElhB,IAAI;IAEhC,IAAI4gB,SAAS,EAAE;MACdjhB,OAAO,CAACoK,cAAc,CAACqV,YAAY,CAAC,GAAG7c,CAAC,CAACK,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,EAAEge,SAAS,CAAC;MACpEE,QAAQ,EAAE;MACVG,CAAC,EAAE;IACJ;IAEA,KAAKjgB,CAAC,GAAG4f,SAAS,GAAG5S,GAAG,GAAGA,GAAG,GAAG,CAAC,EAAEhN,CAAC,IAAI4P,GAAG,EAAE5P,CAAC,EAAE,EAAE;MAClD,IAAI,CAACya,CAAC,GAAG4D,cAAc,CAACre,CAAC,CAAC,MAAMyB,SAAS,IAAIgZ,CAAC,CAACpI,cAAc,KAAK,IAAI,KACpErS,CAAC,IAAIgN,GAAG,IAAKhN,CAAC,IAAI+M,KAAK,IAAI8S,gBAAgB,CAAC7f,CAAC,EAAEqe,cAAc,EAAE;QAC/DtR,KAAK,EAAEA,KAAK;QACZC,GAAG,EAAEA;MACN,CAAC,CAAE,CAAC,EAAE;QACN,OAAOhO,IAAI,GAAGuT,wBAAO,CAAChV,IAAI,CAACuG,SAAS,EAAEgc,QAAQ,CAAC,EAAE9gB,IAAI,CAACqR,KAAK,CAACM,GAAG,KAAK,EAAE,EAAE;UAAE;UACzE,IAAI,CAACuP,QAAQ,GAAGpB,0BAA0B,CAACvhB,IAAI,CAACuG,SAAS,EAAEgc,QAAQ,EAAErF,CAAC,EAAE3b,IAAI,CAAC,MAAM,KAAK,IAAI2b,CAAC,CAACpK,KAAK,CAACM,GAAG,KAAK,GAAG,EAAE;YAAE;YAClH,IAAI8J,CAAC,CAACpK,KAAK,CAACM,GAAG,KAAK,GAAG,EAAElM,sBAAS,CAAClH,IAAI,CAACuG,SAAS,EAAE,IAAI,CAAC;YACxD,IAAIgF,MAAM,GAAG5C,OAAO,CAAC3I,IAAI,CAACuG,SAAS,EAAEgc,QAAQ,EAAErF,CAAC,CAACtS,KAAK,EAAEsS,CAAC,CAACpK,KAAK,CAACM,GAAG,KAAK,GAAG,EAAE,uBAAwB,IAAI,CAAC;YAC1GqO,KAAK,GAAGlW,MAAM,KAAK,KAAK;YACxBmX,CAAC,GAAG,CAACnX,MAAM,CAAClK,GAAG,IAAIkhB,QAAQ,IAAI,CAAC;YAChC,IAAI,CAACd,KAAK,IAAIkB,QAAQ,EAAE;UACzB,CAAC,MAAM;YACNlB,KAAK,GAAG,KAAK;UACd;UACA,IAAIA,KAAK,EAAE;YACV,IAAIY,SAAS,KAAKne,SAAS,IAAIgZ,CAAC,CAACpK,KAAK,UAAO,IAAIrQ,CAAC,KAAKpB,GAAG,CAACmO,KAAK,EAAE8P,MAAM,EAAE;YAC1E;UACD;UACA,IAAI,CAACmC,KAAK,IAAIva,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,EAAEgc,QAAQ,GAAGnhB,OAAO,CAAC4V,UAAU,EAAE;YACvE;UACD;UACAuL,QAAQ,EAAE;QACX;QACA,IAAIvN,wBAAO,CAAChV,IAAI,CAACuG,SAAS,EAAEgc,QAAQ,CAAC,CAACzP,KAAK,CAACM,GAAG,IAAI,EAAE,EAAE;UACtDqO,KAAK,GAAG,KAAK;QACd;QACA;QACAc,QAAQ,GAAGG,CAAC;MACb;MACA,IAAI,CAACjB,KAAK,EAAE;IACb;IACA,IAAI,CAACA,KAAK,EAAE;MACXrgB,OAAO,CAACoK,cAAc,GAAGxH,CAAC,CAACK,MAAM,CAAC,IAAI,EAAE,EAAE,EAAEyc,cAAc,CAAC;MAC3DlS,yBAAY,CAAC5O,IAAI,CAACuG,SAAS,EAAE,IAAI,CAAC;MAClC,OAAO,KAAK;IACb;EACD,CAAC,MAAM,IAAI8b,SAAS,IAAIrN,wBAAO,CAAChV,IAAI,CAACuG,SAAS,EAAEsa,YAAY,CAAC,CAAC/N,KAAK,CAACkK,EAAE,KAAKqF,SAAS,CAACvP,KAAK,CAACkK,EAAE,EAAE;IAC9F5b,OAAO,CAACoK,cAAc,CAACqV,YAAY,CAAC,GAAG7c,CAAC,CAACK,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,EAAEge,SAAS,CAAC;EACrE;EAEAzT,yBAAY,CAAC5O,IAAI,CAACuG,SAAS,EAAE,IAAI,CAAC;EAClC,OAAO+Y,MAAM;AACd;;;;;;;;;;;;ACrqBA;AASA;AACA;AACA;AACA;AACA;AAA2D;AAAA;AAAA;AAI3D,IAAI7R,aAAa,GAAG;EAChBe,QAAQ,EAAE,kBAAUjO,CAAC,EAAEqiB,QAAQ,EAAEC,QAAQ,EAAEvhB,MAAM,EAAE6E,GAAG,EAAE;IACpD,IAAMI,SAAS,GAAG,IAAI,CAACA,SAAS;MAAEhF,IAAI,GAAGgF,SAAS,CAAChF,IAAI;MAAEyC,CAAC,GAAGuC,SAAS,CAACxC,aAAa;MAChF3C,OAAO,GAAGmF,SAAS,CAACnF,OAAO;IAE/B,IAAIwJ,KAAK,GAAG,IAAI;MACZkY,MAAM,GAAG9e,CAAC,CAAC4G,KAAK,CAAC;MACjB1H,CAAC,GAAG3C,CAAC,CAAC4O,GAAG;MACT9N,GAAG,GAAGyN,kBAAK,CAAC9O,IAAI,CAACuG,SAAS,EAAEqE,KAAK,CAAC;IAEtC,IAAImY,QAAQ,GAAGxhB,IAAI,CAACyhB,SAAS,CAAChjB,IAAI,CAAC,IAAI,EAAEO,CAAC,EAAE2G,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,EAAElF,GAAG,EAAEE,IAAI,CAAC;IACjF,IAAIwhB,QAAQ,KAAK7e,SAAS,EAAE,OAAO6e,QAAQ;;IAE3C;IACA,IAAI7f,CAAC,KAAK9C,aAAI,CAAC+e,SAAS,IAAIjc,CAAC,KAAK9C,aAAI,CAACgf,MAAM,IAAK7R,mBAAM,IAAIrK,CAAC,KAAK9C,aAAI,CAAC6iB,gBAAiB,IAAK1iB,CAAC,CAAC2iB,OAAO,IAAIhgB,CAAC,KAAK9C,aAAI,CAAC+iB,CAAC,IAAI,EAAE,OAAO,IAAIvY,KAAK,CAAE,EAAE;MAAE;MAC9IrK,CAAC,CAAC6iB,cAAc,EAAE,CAAC,CAAC;MACpBlE,wBAAY,CAAClf,IAAI,CAACuG,SAAS,EAAEqE,KAAK,EAAE1H,CAAC,EAAE7B,GAAG,CAAC;MAC3C,IAAAwN,0BAAW,EAACjE,KAAK,EAAE1D,sBAAS,CAAClH,IAAI,CAACuG,SAAS,EAAE,IAAI,CAAC,EAAEnF,OAAO,CAAC4I,CAAC,EAAEzJ,CAAC,EAAEqK,KAAK,CAACrE,SAAS,CAACa,SAAS,EAAE,KAAKF,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,CAAChD,IAAI,CAAC,EAAE,CAAC,CAAC;IACzI,CAAC,MAAM,IAAIL,CAAC,KAAK9C,aAAI,CAACijB,GAAG,IAAIngB,CAAC,KAAK9C,aAAI,CAACkjB,QAAQ,EAAE;MAAE;MAChD/iB,CAAC,CAAC6iB,cAAc,EAAE;MAClB,IAAI9S,QAAQ,GAAGvB,qBAAQ,CAAC/O,IAAI,CAACuG,SAAS,EAAEjD,iCAAoB,CAACtD,IAAI,CAACuG,SAAS,CAAC,CAAC;MAC7EuI,kBAAK,CAAC9O,IAAI,CAACuG,SAAS,EAAEqE,KAAK,EAAErK,CAAC,CAAC8O,QAAQ,GAAGhO,GAAG,CAACmO,KAAK,GAAGc,QAAQ,EAAEA,QAAQ,EAAE,IAAI,CAAC;IACnF,CAAC,MAAM,IAAKpN,CAAC,KAAK9C,aAAI,CAACmjB,IAAI,IAAI,CAAChjB,CAAC,CAAC8O,QAAQ,IAAKnM,CAAC,KAAK9C,aAAI,CAACojB,MAAM,EAAE;MAAE;MAChEjjB,CAAC,CAAC6iB,cAAc,EAAE;MAClBtU,kBAAK,CAAC9O,IAAI,CAACuG,SAAS,EAAEqE,KAAK,EAAE,CAAC,EAAErK,CAAC,CAAC8O,QAAQ,GAAGhO,GAAG,CAACmO,KAAK,GAAG,CAAC,EAAE,IAAI,CAAC;IACrE,CAAC,MAAM,IAAI,CAAEjO,IAAI,CAACkiB,YAAY,IAAIvgB,CAAC,KAAK9C,aAAI,CAACsjB,MAAM,IAAM,MAAqB,IAAInjB,CAAU,KAAKA,CAAC,CAACqjB,MAAM,KAAK,IAAI,EAAE;MAAE;MAClH,IAAA5c,uBAAQ,EAAC4D,KAAK,EAAE,IAAI,EAAE,KAAK,EAAErE,SAAS,CAAC5B,SAAS,CAACoC,KAAK,CAAC,EAAE,CAAC,CAAC;MAC3D+b,MAAM,CAAC1Z,OAAO,CAAC,OAAO,CAAC;IAC3B,CAAC,MAAM,IAAIlG,CAAC,KAAK9C,aAAI,CAACyjB,MAAM,IAAI,EAAEtjB,CAAC,CAAC8O,QAAQ,IAAI9O,CAAC,CAAC2iB,OAAO,CAAC,IAAI3c,SAAS,CAAC/B,WAAW,CAAC+L,UAAU,KAAKrM,SAAS,EAAE;MAAE;MAC5G,IAAI,CAAC0b,uBAAW,CAAC5f,IAAI,CAACuG,SAAS,EAAElF,GAAG,CAAC,EAAE;QACnCE,IAAI,CAACgP,UAAU,GAAG,CAAChP,IAAI,CAACgP,UAAU;QAClCzB,kBAAK,CAAC9O,IAAI,CAACuG,SAAS,EAAEqE,KAAK,EAAEvJ,GAAG,CAACmO,KAAK,EAAEnO,GAAG,CAACmO,KAAK,CAAC;MACtD,CAAC,MAAMjO,IAAI,CAACgP,UAAU,GAAG,CAAChP,IAAI,CAACgP,UAAU;IAC7C,CAAC,MAAM,IAAIhP,IAAI,CAACO,UAAU,KAAK,IAAI,IAAIoB,CAAC,KAAK9C,aAAI,CAAC0jB,GAAG,EAAE;MACnD,IAAIvjB,CAAC,CAAC8O,QAAQ,KAAK,IAAI,EAAE;QACrBhO,GAAG,CAACoO,GAAG,GAAGgG,yBAAY,CAACzV,IAAI,CAACuG,SAAS,EAAElF,GAAG,CAACoO,GAAG,EAAE,IAAI,CAAC;QACrD,IAAIuF,wBAAO,CAAChV,IAAI,CAACuG,SAAS,EAAElF,GAAG,CAACoO,GAAG,GAAG,CAAC,CAAC,CAACqD,KAAK,UAAO,KAAK,IAAI,EAAE;UAC5DzR,GAAG,CAACoO,GAAG,EAAE;QACb;QACApO,GAAG,CAACmO,KAAK,GAAGiG,yBAAY,CAACzV,IAAI,CAACuG,SAAS,EAAElF,GAAG,CAACoO,GAAG,EAAE,IAAI,CAAC;QACvD,IAAIpO,GAAG,CAACmO,KAAK,IAAI,CAAC,IAAInO,GAAG,CAACoO,GAAG,GAAG,CAAC,EAAE;UAC/BlP,CAAC,CAAC6iB,cAAc,EAAE;UAClBtU,kBAAK,CAAC9O,IAAI,CAACuG,SAAS,EAAEqE,KAAK,EAAEvJ,GAAG,CAACmO,KAAK,EAAEnO,GAAG,CAACoO,GAAG,CAAC;QACpD;MACJ,CAAC,MAAM;QACHpO,GAAG,CAACmO,KAAK,GAAGT,qBAAQ,CAAC/O,IAAI,CAACuG,SAAS,EAAElF,GAAG,CAACmO,KAAK,EAAE,IAAI,CAAC;QACrDnO,GAAG,CAACoO,GAAG,GAAGV,qBAAQ,CAAC/O,IAAI,CAACuG,SAAS,EAAElF,GAAG,CAACmO,KAAK,EAAE,IAAI,CAAC;QACnD,IAAInO,GAAG,CAACoO,GAAG,GAAGrO,OAAO,CAAC4V,UAAU,EAAE3V,GAAG,CAACoO,GAAG,EAAE;QAC3C,IAAIpO,GAAG,CAACmO,KAAK,IAAIpO,OAAO,CAAC4V,UAAU,EAAE;UACjCzW,CAAC,CAAC6iB,cAAc,EAAE;UAClBtU,kBAAK,CAAC9O,IAAI,CAACuG,SAAS,EAAEqE,KAAK,EAAEvJ,GAAG,CAACmO,KAAK,EAAEnO,GAAG,CAACoO,GAAG,CAAC;QACpD;MACJ;IACJ,CAAC,MAAM,IAAI,CAAClP,CAAC,CAAC8O,QAAQ,EAAE;MACpB,IAAI9N,IAAI,CAACiM,gBAAgB,IAAIjM,IAAI,CAACgP,UAAU,KAAK,KAAK,EAAE;QACpD,IAAIrN,CAAC,KAAK9C,aAAI,CAAC2jB,UAAU,EAAE;UACvBC,UAAU,CAAC,YAAY;YACnB,IAAI1T,QAAQ,GAAGxB,kBAAK,CAAC9O,IAAI,CAACuG,SAAS,EAAEqE,KAAK,CAAC;YAC3CkE,kBAAK,CAAC9O,IAAI,CAACuG,SAAS,EAAEqE,KAAK,EAAE0F,QAAQ,CAACd,KAAK,CAAC;UAChD,CAAC,EAAE,CAAC,CAAC;QACT,CAAC,MAAM,IAAItM,CAAC,KAAK9C,aAAI,CAAC6jB,SAAS,EAAE;UAC7BD,UAAU,CAAC,YAAY;YACnB,IAAI1T,QAAQ,GAAG;cACXd,KAAK,EAAEK,8BAAiB,CAAC7P,IAAI,CAACuG,SAAS,EAAEqE,KAAK,CAACrE,SAAS,CAAC+J,QAAQ,CAACd,KAAK,CAAC;cACxEC,GAAG,EAAEI,8BAAiB,CAAC7P,IAAI,CAACuG,SAAS,EAAEqE,KAAK,CAACrE,SAAS,CAAC+J,QAAQ,CAACb,GAAG;YACvE,CAAC;YACD,IAAIlJ,SAAS,CAACd,KAAK,EAAE;cACjBqJ,kBAAK,CAAC9O,IAAI,CAACuG,SAAS,EAAEqE,KAAK,EAAE0F,QAAQ,CAACd,KAAK,IAAIc,QAAQ,CAACd,KAAK,KAAKpO,OAAO,CAAC4V,UAAU,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;YAClG,CAAC,MAAM;cACHlI,kBAAK,CAAC9O,IAAI,CAACuG,SAAS,EAAEqE,KAAK,EAAE0F,QAAQ,CAACd,KAAK,IAAIc,QAAQ,CAACd,KAAK,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;YACjF;UACJ,CAAC,EAAE,CAAC,CAAC;QACT;MACJ;IACJ;IAEAjJ,SAAS,CAACnB,WAAW,GAAIlC,CAAC,IAAI9C,aAAI,CAAC8jB,OAAO,IAAIhhB,CAAC,IAAI9C,aAAI,CAAC+jB,YAAa;IACrE5d,SAAS,CAACxB,SAAS,GAAGxD,IAAI,CAACmL,UAAU,CAAC3N,QAAQ,CAACmE,CAAC,CAAC;IACjD,OAAOuK,aAAa,CAACqU,aAAa,CAAC9hB,IAAI,CAAC,IAAI,EAAEO,CAAC,EAAEqiB,QAAQ,EAAEC,QAAQ,EAAEvhB,MAAM,EAAE6E,GAAG,CAAC;EACrF,CAAC;EACD2b,aAAa,EAAE,uBAAUvhB,CAAC,EAAEqiB,QAAQ,EAAEC,QAAQ,EAAEvhB,MAAM,EAAE6E,GAAG,EAAE;IACzD,IAAMI,SAAS,GAAG,IAAI,CAACA,SAAS,IAAI,IAAI;MAAEhF,IAAI,GAAGgF,SAAS,CAAChF,IAAI;MAAEyC,CAAC,GAAGuC,SAAS,CAACxC,aAAa;MACxF3C,OAAO,GAAGmF,SAAS,CAACnF,OAAO;IAE/B,IAAIwJ,KAAK,GAAGrE,SAAS,CAACtC,EAAE;MACpB6e,MAAM,GAAG9e,CAAC,CAAC4G,KAAK,CAAC;MACjB1H,CAAC,GAAG3C,CAAC,CAAC4O,GAAG;IAEb,IAAIyT,QAAQ,KAAK,IAAI,IAAK,EAAEriB,CAAC,CAAC2iB,OAAO,IAAI3iB,CAAC,CAACqjB,MAAM,CAAC,KAAKrjB,CAAC,CAAC2iB,OAAO,IAAI3iB,CAAC,CAAC6jB,OAAO,IAAI7d,SAAS,CAACxB,SAAS,CAAE,EAAE;MACpG,IAAI7B,CAAC,KAAK9C,aAAI,CAACwM,KAAK,EAAE;QAClB,IAAIrG,SAAS,CAAC5B,SAAS,KAAK4B,SAAS,CAACa,SAAS,CAAC,IAAI,CAAC,EAAE;UACnDb,SAAS,CAAC5B,SAAS,GAAG4B,SAAS,CAACa,SAAS,CAAC,IAAI,CAAC;UAC/C;;UAEA4c,UAAU,CAAC,YAAY;YACnBlB,MAAM,CAAC1Z,OAAO,CAAC,QAAQ,CAAC;UAC5B,CAAC,EAAE,CAAC,CAAC;QACT;MACJ;MACA;MACA;IACJ,CAAC,MAAM,IAAIlG,CAAC,EAAE;MACV;MACA;MACA,IAAI7B,GAAG,GAAGuhB,QAAQ,GAAG;UACbpT,KAAK,EAAErJ,GAAG;UACVsJ,GAAG,EAAEtJ;QACT,CAAC,GAAG2I,kBAAK,CAAC9O,IAAI,CAACuG,SAAS,EAAEqE,KAAK,CAAC;QAChCmX,eAAe;;MAEnB;MACA7e,CAAC,GAAG3B,IAAI,CAACc,WAAW,CAACa,CAAC,CAAC,IAAIA,CAAC;MAC5B9B,OAAO,CAACijB,cAAc,GAAG,IAAI;MAC7B,IAAIxC,SAAS,GAAGlZ,mBAAO,CAAC3I,IAAI,CAACuG,SAAS,EAAElF,GAAG,EAAE6B,CAAC,EAAE5B,MAAM,EAAE4C,SAAS,EAAEA,SAAS,EAAEA,SAAS,EAAE0e,QAAQ,CAAC;MAClG,IAAIf,SAAS,KAAK,KAAK,EAAE;QACrBjT,yBAAY,CAAC5O,IAAI,CAACuG,SAAS,EAAE,IAAI,CAAC;QAClCwb,eAAe,GAAGF,SAAS,CAAC/S,KAAK,KAAK5K,SAAS,GAAG2d,SAAS,CAAC/S,KAAK,GAAGC,qBAAQ,CAAC/O,IAAI,CAACuG,SAAS,EAAEsb,SAAS,CAACxgB,GAAG,CAACmO,KAAK,GAAGqS,SAAS,CAACxgB,GAAG,CAACmO,KAAK,GAAGqS,SAAS,CAACxgB,GAAG,CAAC;QACvJD,OAAO,CAAC4I,CAAC,GAAG+X,eAAe,CAAC,CAAC;MACjC;;MAEAA,eAAe,GAAKxgB,IAAI,CAACmE,YAAY,IAAImc,SAAS,CAAC/S,KAAK,KAAK5K,SAAS,GAAIuR,yBAAY,CAACzV,IAAI,CAACuG,SAAS,EAAEwb,eAAe,CAAC,GAAGA,eAAgB;MAC1I,IAAIc,QAAQ,KAAK,KAAK,EAAE;QAEpBmB,UAAU,CAAC,YAAY;UACnBziB,IAAI,CAAC+iB,eAAe,CAACtkB,IAAI,CAAC4K,KAAK,EAAE1H,CAAC,EAAE2e,SAAS,CAAC;QAClD,CAAC,EAAE,CAAC,CAAC;QACL,IAAIzgB,OAAO,CAACijB,cAAc,IAAIxC,SAAS,KAAK,KAAK,EAAE;UAC/C,IAAIrgB,MAAM,GAAG0F,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC;UACtC,IAAAsI,0BAAW,EAACjE,KAAK,EAAEpJ,MAAM,EAAEugB,eAAe,EAAExhB,CAAC,EAAEqiB,QAAQ,KAAK,IAAI,CAAC;QACrE;MACJ;MAEAriB,CAAC,CAAC6iB,cAAc,EAAE;MAElB,IAAIR,QAAQ,EAAE;QACV,IAAIf,SAAS,KAAK,KAAK,EAAEA,SAAS,CAACE,eAAe,GAAGA,eAAe;QACpE,OAAOF,SAAS;MACpB;IACJ;EACJ,CAAC;EACD3T,UAAU,EAAE,oBAAU3N,CAAC,EAAE;IACrB,IAAMgG,SAAS,GAAG,IAAI,CAACA,SAAS;MAAEhF,IAAI,GAAGgF,SAAS,CAAChF,IAAI;IAEvD,IAAIqJ,KAAK,GAAG,IAAI;MACZ2Z,UAAU,GAAGhe,SAAS,CAACa,SAAS,CAAC,IAAI,CAAC;MACtCkJ,QAAQ,GAAGxB,kBAAK,CAAC9O,IAAI,CAACuG,SAAS,EAAEqE,KAAK,CAAC;MACvC4Z,SAAS;IAEb,IAAIje,SAAS,CAACd,KAAK,EAAE;MACjB+e,SAAS,GAAGlU,QAAQ,CAACb,GAAG;MACxBa,QAAQ,CAACb,GAAG,GAAGI,8BAAiB,CAAC7P,IAAI,CAACuG,SAAS,EAAE+J,QAAQ,CAACd,KAAK,CAAC;MAChEc,QAAQ,CAACd,KAAK,GAAGK,8BAAiB,CAAC7P,IAAI,CAACuG,SAAS,EAAEie,SAAS,CAAC;IACjE;IAEA,IAAIC,gBAAgB,GAAGF,UAAU,CAACG,MAAM,CAAC,CAAC,EAAEpU,QAAQ,CAACd,KAAK,CAAC;MACvDmV,eAAe,GAAGJ,UAAU,CAACG,MAAM,CAACpU,QAAQ,CAACb,GAAG,EAAE8U,UAAU,CAAChlB,MAAM,CAAC;IAExE,IAAIklB,gBAAgB,IAAI,CAACle,SAAS,CAACd,KAAK,GAAG4B,8BAAiB,CAACrH,IAAI,CAACuG,SAAS,CAAC,CAACN,KAAK,EAAE,CAACmC,OAAO,EAAE,GAAGf,8BAAiB,CAACrH,IAAI,CAACuG,SAAS,CAAC,EAAEN,KAAK,CAAC,CAAC,EAAEqK,QAAQ,CAACd,KAAK,CAAC,CAACjM,IAAI,CAAC,EAAE,CAAC,EAAEkhB,gBAAgB,GAAG,EAAE;IAC5L,IAAIE,eAAe,IAAI,CAACpe,SAAS,CAACd,KAAK,GAAG4B,8BAAiB,CAACrH,IAAI,CAACuG,SAAS,CAAC,CAACN,KAAK,EAAE,CAACmC,OAAO,EAAE,GAAGf,8BAAiB,CAACrH,IAAI,CAACuG,SAAS,CAAC,EAAEN,KAAK,CAACqK,QAAQ,CAACb,GAAG,CAAC,CAAClM,IAAI,CAAC,EAAE,CAAC,EAAEohB,eAAe,GAAG,EAAE;IAErL,IAAIlhB,MAAM,CAACmhB,aAAa,IAAInhB,MAAM,CAACmhB,aAAa,CAACC,OAAO,EAAE;MAAE;MACxDN,UAAU,GAAGE,gBAAgB,GAAGhhB,MAAM,CAACmhB,aAAa,CAACC,OAAO,CAAC,MAAM,CAAC,GAAGF,eAAe;IAC1F,CAAC,MAAM,IAAIpkB,CAAC,CAACqkB,aAAa,IAAIrkB,CAAC,CAACqkB,aAAa,CAACC,OAAO,EAAE;MACnDN,UAAU,GAAGE,gBAAgB,GAAGlkB,CAAC,CAACqkB,aAAa,CAACC,OAAO,CAAC,YAAY,CAAC,GAAGF,eAAe;IAC3F,CAAC,MAAM;MACH,OAAO,IAAI;IACf,CAAC,CAAC;;IAEF,IAAIG,UAAU,GAAGP,UAAU;IAC3B,IAAIhe,SAAS,CAACd,KAAK,EAAE;MACjBqf,UAAU,GAAGA,UAAU,CAAC/d,KAAK,CAAC,EAAE,CAAC;MAAC,2CACpBM,8BAAiB,CAACrH,IAAI,CAACuG,SAAS,CAAC;QAAA;MAAA;QAA/C,oDAAiD;UAAA,IAAxCrD,CAAC;UACN,IAAI4hB,UAAU,CAAC,CAAC,CAAC,KAAK5hB,CAAC,EACnB4hB,UAAU,CAAC7J,KAAK,EAAE;QAC1B;MAAC;QAAA;MAAA;QAAA;MAAA;MACD6J,UAAU,GAAGA,UAAU,CAACvhB,IAAI,CAAC,EAAE,CAAC;IACpC;IACA,IAAI,OAAOhC,IAAI,CAACqB,aAAa,KAAK,UAAU,EAAE;MAC1CkiB,UAAU,GAAGvjB,IAAI,CAACqB,aAAa,CAAC5C,IAAI,CAACuG,SAAS,EAAEue,UAAU,EAAEvjB,IAAI,CAAC;MACjE,IAAIujB,UAAU,KAAK,KAAK,EAAE;QACtB,OAAO,KAAK;MAChB;MACA,IAAI,CAACA,UAAU,EAAE;QACbA,UAAU,GAAGP,UAAU;MAC3B;IACJ;IACA,IAAAvd,uBAAQ,EAAC4D,KAAK,EAAE,IAAI,EAAE,KAAK,EAAEka,UAAU,CAAC1gB,QAAQ,EAAE,CAAC2C,KAAK,CAAC,EAAE,CAAC,EAAExG,CAAC,CAAC;IAChEA,CAAC,CAAC6iB,cAAc,EAAE;EACtB,CAAC;EACD1U,kBAAkB,EAAE,4BAAUnO,CAAC,EAAE;IAAE;IAC/B,IAAMgG,SAAS,GAAG,IAAI,CAACA,SAAS;MAAEhF,IAAI,GAAGgF,SAAS,CAAChF,IAAI;MAAEyC,CAAC,GAAGuC,SAAS,CAACxC,aAAa;IACpF;;IAEA,SAASghB,cAAc,CAACR,UAAU,EAAE/iB,MAAM,EAAE8O,QAAQ,EAAE;MAClD,IAAI0U,SAAS,GAAGT,UAAU,CAACG,MAAM,CAAC,CAAC,EAAEpU,QAAQ,CAACd,KAAK,CAAC,CAACzI,KAAK,CAAC,EAAE,CAAC;QAC1Dke,QAAQ,GAAGV,UAAU,CAACG,MAAM,CAACpU,QAAQ,CAACd,KAAK,CAAC,CAACzI,KAAK,CAAC,EAAE,CAAC;QACtDme,eAAe,GAAG1jB,MAAM,CAACkjB,MAAM,CAAC,CAAC,EAAEpU,QAAQ,CAACd,KAAK,CAAC,CAACzI,KAAK,CAAC,EAAE,CAAC;QAC5Doe,cAAc,GAAG3jB,MAAM,CAACkjB,MAAM,CAACpU,QAAQ,CAACd,KAAK,CAAC,CAACzI,KAAK,CAAC,EAAE,CAAC;MAE5D,IAAIqe,GAAG,GAAGJ,SAAS,CAACzlB,MAAM,IAAI2lB,eAAe,CAAC3lB,MAAM,GAAGylB,SAAS,CAACzlB,MAAM,GAAG2lB,eAAe,CAAC3lB,MAAM;QAC5F8lB,GAAG,GAAGJ,QAAQ,CAAC1lB,MAAM,IAAI4lB,cAAc,CAAC5lB,MAAM,GAAG0lB,QAAQ,CAAC1lB,MAAM,GAAG4lB,cAAc,CAAC5lB,MAAM;QACxF6S,EAAE;QAAE3P,CAAC;QAAE6iB,MAAM,GAAG,EAAE;QAAE7e,IAAI,GAAG,EAAE;QAAE8e,MAAM,GAAG,GAAG;QAAEpY,WAAW;;MAE5D;MACA,OAAO6X,SAAS,CAACzlB,MAAM,GAAG6lB,GAAG;QAAEJ,SAAS,CAACrY,IAAI,CAAC4Y,MAAM,CAAC;MAAC;MACtD,OAAOL,eAAe,CAAC3lB,MAAM,GAAG6lB,GAAG;QAAEF,eAAe,CAACvY,IAAI,CAAC4Y,MAAM,CAAC;MAAC;MAClE,OAAON,QAAQ,CAAC1lB,MAAM,GAAG8lB,GAAG;QAAEJ,QAAQ,CAACO,OAAO,CAACD,MAAM,CAAC;MAAC;MACvD,OAAOJ,cAAc,CAAC5lB,MAAM,GAAG8lB,GAAG;QAAEF,cAAc,CAACK,OAAO,CAACD,MAAM,CAAC;MAAC;MAEnE,IAAIE,SAAS,GAAGT,SAAS,CAAC7kB,MAAM,CAAC8kB,QAAQ,CAAC;MAC1C,IAAIS,SAAS,GAAGR,eAAe,CAAC/kB,MAAM,CAACglB,cAAc,CAAC;;MAEtD;MACA;;MAEA,KAAK1iB,CAAC,GAAG,CAAC,EAAE2P,EAAE,GAAGqT,SAAS,CAAClmB,MAAM,EAAEkD,CAAC,GAAG2P,EAAE,EAAE3P,CAAC,EAAE,EAAE;QAC5C0K,WAAW,GAAGkG,+BAAc,CAACrT,IAAI,CAACuG,SAAS,EAAEsJ,8BAAiB,CAAC7P,IAAI,CAACuG,SAAS,EAAE9D,CAAC,CAAC,CAAC;QAClF,QAAQ6iB,MAAM;UACV,KAAK,YAAY;YACb,IAAII,SAAS,CAACjjB,CAAC,GAAG,CAAC,CAAC,KAAKgjB,SAAS,CAAChjB,CAAC,CAAC,IAAI6N,QAAQ,CAACd,KAAK,IAAIiW,SAAS,CAAClmB,MAAM,GAAG,CAAC,EAAE;cAC7EkH,IAAI,CAACkG,IAAI,CAAC8Y,SAAS,CAAChjB,CAAC,CAAC,CAAC;YAC3B;YACAA,CAAC,GAAG2P,EAAE;YACN;UACJ,KAAK,uBAAuB;YACxB,IAAIqT,SAAS,CAAChjB,CAAC,CAAC,KAAK8iB,MAAM,EAAE;cAAE;cAC3BjV,QAAQ,CAACb,GAAG,EAAE;YAClB,CAAC,MAAM;cACH;cACAhN,CAAC,GAAG2P,EAAE;YACV;YACA;UACJ,KAAK,uBAAuB;YACxB,IAAIqT,SAAS,CAAChjB,CAAC,CAAC,KAAK8iB,MAAM,EAAE;cACzBjV,QAAQ,CAACb,GAAG,EAAE;YAClB,CAAC,MAAM;cACH;cACAhN,CAAC,GAAG2P,EAAE;YACV;YACA;UACJ;YACI,IAAIqT,SAAS,CAAChjB,CAAC,CAAC,KAAKijB,SAAS,CAACjjB,CAAC,CAAC,EAAE;cAC/B,IAAI,CAACgjB,SAAS,CAAChjB,CAAC,GAAG,CAAC,CAAC,KAAK8iB,MAAM,IAAIE,SAAS,CAAChjB,CAAC,GAAG,CAAC,CAAC,KAAK0K,WAAW,IAAIsY,SAAS,CAAChjB,CAAC,GAAG,CAAC,CAAC,KAAKyB,SAAS,MAAOwhB,SAAS,CAACjjB,CAAC,CAAC,KAAK0K,WAAW,IAAIuY,SAAS,CAACjjB,CAAC,GAAG,CAAC,CAAC,KAAK8iB,MAAM,IAAKG,SAAS,CAACjjB,CAAC,CAAC,KAAK8iB,MAAM,CAAC,EAAE;gBAAG;gBACtMD,MAAM,GAAG,YAAY;gBACrB7e,IAAI,CAACkG,IAAI,CAAC8Y,SAAS,CAAChjB,CAAC,CAAC,CAAC;gBACvB6N,QAAQ,CAACd,KAAK,EAAE;gBAChBc,QAAQ,CAACb,GAAG,EAAE;cAClB,CAAC,MAAM,IAAIiW,SAAS,CAACjjB,CAAC,GAAG,CAAC,CAAC,KAAK8iB,MAAM,IAAIG,SAAS,CAACjjB,CAAC,CAAC,KAAKgjB,SAAS,CAAChjB,CAAC,GAAG,CAAC,CAAC,EAAE;gBAAE;gBAC3E6iB,MAAM,GAAG,YAAY;gBACrB7e,IAAI,CAACkG,IAAI,CAAC8Y,SAAS,CAAChjB,CAAC,CAAC,CAAC;gBACvB6N,QAAQ,CAACd,KAAK,EAAE;gBAChBc,QAAQ,CAACb,GAAG,EAAE;cAClB,CAAC,MAAM,IAAIgW,SAAS,CAAChjB,CAAC,CAAC,KAAK0K,WAAW,IAAIsY,SAAS,CAAChjB,CAAC,CAAC,KAAK8iB,MAAM,KAC7DE,SAAS,CAAChjB,CAAC,GAAG,CAAC,CAAC,KAAK8iB,MAAM,IAAKG,SAAS,CAACjjB,CAAC,CAAC,KAAKgjB,SAAS,CAAChjB,CAAC,CAAC,IAAIijB,SAAS,CAACjjB,CAAC,GAAG,CAAC,CAAC,KAAKgjB,SAAS,CAAChjB,CAAC,GAAG,CAAC,CAAC,CAAC,2BAA4B,CAAC,EAAE;gBAAE;gBACzI6iB,MAAM,GAAG,uBAAuB;gBAChC7e,IAAI,CAACkG,IAAI,CAAC8Y,SAAS,CAAChjB,CAAC,CAAC,CAAC;gBACvB6N,QAAQ,CAACd,KAAK,EAAE;cACpB,CAAC,MAAM,IAAIiW,SAAS,CAAChjB,CAAC,CAAC,KAAK8iB,MAAM,EAAE;gBAAG;gBACnCD,MAAM,GAAG,uBAAuB;gBAChC,IAAIvc,mBAAM,CAAC/I,IAAI,CAACuG,SAAS,EAAEsJ,8BAAiB,CAAC7P,IAAI,CAACuG,SAAS,EAAE9D,CAAC,CAAC,EAAE,IAAI,CAAC,IAAIijB,SAAS,CAACjjB,CAAC,CAAC,KAAKlB,IAAI,CAACqS,UAAU,EAAEtD,QAAQ,CAACb,GAAG,EAAE;cAC9H,CAAC,MAAM;gBACHhN,CAAC,GAAG2P,EAAE;cACV;YACJ;YACA;QAAM;MAElB;MAEA,OAAO;QACHkT,MAAM,EAAEA,MAAM;QACd7e,IAAI,EAAEA,IAAI;QACVqI,KAAK,EAAEwB;MACX,CAAC;IACL;IAEA,IAAI1F,KAAK,GAAG,IAAI;MACZ2Z,UAAU,GAAG3Z,KAAK,CAACrE,SAAS,CAACa,SAAS,CAAC,IAAI,CAAC;MAC5C5F,MAAM,GAAG,CAAC+E,SAAS,CAACd,KAAK,GAAGyB,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,CAACN,KAAK,EAAE,CAACmC,OAAO,EAAE,GAAGlB,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,EAAEhD,IAAI,CAAC,EAAE,CAAC;MAC7G+M,QAAQ,GAAGxB,kBAAK,CAAC9O,IAAI,CAACuG,SAAS,EAAEqE,KAAK,EAAE1G,SAAS,EAAEA,SAAS,EAAE,IAAI,CAAC;MACnEyhB,OAAO;IAEX,IAAInkB,MAAM,KAAK+iB,UAAU,EAAE;MACvBoB,OAAO,GAAGZ,cAAc,CAACR,UAAU,EAAE/iB,MAAM,EAAE8O,QAAQ,CAAC;MACtD,IAAI,CAAC1F,KAAK,CAACrE,SAAS,CAACqF,UAAU,IAAIhB,KAAK,CAACiB,aAAa,EAAEC,aAAa,KAAKlB,KAAK,EAAE;QAC7EA,KAAK,CAACgb,KAAK,EAAE;MACjB;MACA,IAAA/W,0BAAW,EAACjE,KAAK,EAAE1D,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,CAAC;MAC7CuI,kBAAK,CAAC9O,IAAI,CAACuG,SAAS,EAAEqE,KAAK,EAAE0F,QAAQ,CAACd,KAAK,EAAEc,QAAQ,CAACb,GAAG,EAAE,IAAI,CAAC;;MAEhE;MACA,IAAI,CAAChB,mBAAM,IAAIlI,SAAS,CAACsf,cAAc,IAAItlB,CAAC,CAACulB,SAAS,KAAK,YAAY,IAAIH,OAAO,CAACL,MAAM,KAAK,YAAY,IAAI/e,SAAS,CAACnB,WAAW,EAAE;QACjI,OAAO,KAAK;MAChB;MACA,IAAI7E,CAAC,CAACulB,SAAS,KAAK,uBAAuB,IAAIH,OAAO,CAACL,MAAM,KAAK,YAAY,IAAI/e,SAAS,CAACnB,WAAW,EAAE;QACrGmB,SAAS,CAACsf,cAAc,GAAG,IAAI;MACnC,CAAC,MAAM;QACHtf,SAAS,CAACsf,cAAc,GAAG,KAAK;MACpC;MAEA,QAAQF,OAAO,CAACL,MAAM;QAClB,KAAK,YAAY;QACjB,KAAK,uBAAuB;UACxBK,OAAO,CAAClf,IAAI,CAACP,OAAO,CAAC,UAAU6f,KAAK,EAAE5f,GAAG,EAAE;YACvC,IAAIwb,QAAQ,GAAG,IAAI3d,CAAC,CAAC4d,KAAK,CAAC,UAAU,CAAC;YACtCD,QAAQ,CAACxS,GAAG,GAAG4W,KAAK;YACpBxf,SAAS,CAACxB,SAAS,GAAG,KAAK,CAAC,CAAC;YAC7B0I,aAAa,CAACqU,aAAa,CAAC9hB,IAAI,CAAC4K,KAAK,EAAE+W,QAAQ,CAAC;UACrD,CAAC,CAAC;UACFqC,UAAU,CAAC,YAAY;YAAG;YACtBzd,SAAS,CAAC3B,GAAG,CAACwE,OAAO,CAAC,OAAO,CAAC;UAClC,CAAC,EAAE,CAAC,CAAC;UACL;QACJ,KAAK,uBAAuB;UACxB,IAAI4c,OAAO,GAAG,IAAIhiB,CAAC,CAAC4d,KAAK,CAAC,SAAS,CAAC;UACpCoE,OAAO,CAAC7W,GAAG,GAAG/O,aAAI,CAAC+e,SAAS;UAC5B1R,aAAa,CAACe,QAAQ,CAACxO,IAAI,CAAC4K,KAAK,EAAEob,OAAO,CAAC;UAC3C;QACJ;UACI,IAAAta,8BAAe,EAACd,KAAK,EAAE2Z,UAAU,CAAC;UAClCzV,kBAAK,CAAC9O,IAAI,CAACuG,SAAS,EAAEqE,KAAK,EAAE0F,QAAQ,CAACd,KAAK,EAAEc,QAAQ,CAACb,GAAG,EAAE,IAAI,CAAC;UAChE;MAAM;MAGdlP,CAAC,CAAC6iB,cAAc,EAAE;IACtB;EACJ,CAAC;EACDzU,aAAa,EAAE,uBAAUpO,CAAC,EAAE;IACxB,IAAMgG,SAAS,GAAG,IAAI,CAACA,SAAS;IAChC,IAAIqE,KAAK,GAAG,IAAI;MACZ3L,KAAK,GAAIsB,CAAC,IAAIA,CAAC,CAAC0lB,MAAM,GAAI1lB,CAAC,CAAC0lB,MAAM,CAAC,CAAC,CAAC,GAAGxH,SAAS,CAAC,CAAC,CAAC;IAExD,IAAIxf,KAAK,KAAKiF,SAAS,EAAE;MACrBjF,KAAK,GAAG2L,KAAK,CAACrE,SAAS,CAACa,SAAS,CAAC,IAAI,CAAC;IAC3C;IAEA,IAAAsE,8BAAe,EAACd,KAAK,EAAE3L,KAAK,CAAC;IAE7B,IAAKsB,CAAC,CAAC0lB,MAAM,IAAI1lB,CAAC,CAAC0lB,MAAM,CAAC,CAAC,CAAC,KAAK/hB,SAAS,IAAKua,SAAS,CAAC,CAAC,CAAC,KAAKva,SAAS,EAAE;MACvE4K,kBAAK,CAAC9O,IAAI,CAACuG,SAAS,EAAEqE,KAAK,EAAErK,CAAC,CAAC0lB,MAAM,GAAG1lB,CAAC,CAAC0lB,MAAM,CAAC,CAAC,CAAC,GAAGxH,SAAS,CAAC,CAAC,CAAC,CAAC;IACvE;EACJ,CAAC;EAED5Q,UAAU,EAAE,oBAAUtN,CAAC,EAAE;IACrB,IAAMgG,SAAS,GAAG,IAAI,CAACA,SAAS;MAAEhF,IAAI,GAAGgF,SAAS,CAAChF,IAAI;IACvD,IAAIqJ,KAAK,GAAG,IAAI;MACZsb,QAAQ,GAAGtb,KAAK,CAACrE,SAAS,CAACa,SAAS,EAAE;IAE1C,IAAI7F,IAAI,CAAC8L,eAAe,EAAE;MACtB,IAAI6Y,QAAQ,KAAKhf,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,CAAChD,IAAI,CAAC,EAAE,CAAC,EAAE;QACjD,IAAAsL,0BAAW,EAACjE,KAAK,EAAE1D,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,EAAEwI,qBAAQ,CAAC/O,IAAI,CAACuG,SAAS,EAAEjD,iCAAoB,CAACtD,IAAI,CAACuG,SAAS,CAAC,CAAC,CAAC;MACjH,CAAC,CAAC;AACd;AACA;IACQ;;IACA,IAAIhF,IAAI,CAAC4kB,kBAAkB,KAAK,IAAI,IAAI5f,SAAS,CAACtB,UAAU,KAAK,KAAK,KAAK,CAACqD,sBAAU,CAACtI,IAAI,CAACuG,SAAS,EAAEW,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,CAAC,IAAIjD,iCAAoB,CAACtD,IAAI,CAACuG,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE;MAC/KkH,aAAa,CAACM,UAAU,CAAC2Q,KAAK,CAAC9T,KAAK,EAAE,CAACrK,CAAC,EAAE,IAAI,CAAC,CAAC;IACpD;IACAgG,SAAS,CAAC5B,SAAS,GAAG4B,SAAS,CAACa,SAAS,CAAC,IAAI,CAAC;EACnD,CAAC;EACD0G,YAAY,EAAE,sBAAUvN,CAAC,EAAE;IACvB,IAAI,CAACgG,SAAS,CAACzB,eAAe,GAAG,IAAI;EACzC,CAAC;EACDkJ,eAAe,EAAE,2BAAY;IACzB,IAAMzH,SAAS,GAAG,IAAI,CAACA,SAAS;MAAEhF,IAAI,GAAGgF,SAAS,CAAChF,IAAI;IAEvD,IAAIqJ,KAAK,GAAG,IAAI;IAChBrE,SAAS,CAACtB,UAAU,GAAG,KAAK;IAC5B,IAAI1D,IAAI,CAACwK,oBAAoB,IAAI,CAACnB,KAAK,CAACrE,SAAS,CAACqF,UAAU,IAAIhB,KAAK,CAACiB,aAAa,EAAEC,aAAa,KAAKlB,KAAK,EAAE;MAC1G,IAAAwb,sCAAuB,EAACxb,KAAK,EAAErE,SAAS,CAACpB,mBAAmB,CAAC;IACjE;EACJ,CAAC;EACD4I,UAAU,EAAE,oBAAUxN,CAAC,EAAEiT,MAAM,EAAE;IAC7B,IAAMjN,SAAS,GAAG,IAAI,CAACA,SAAS;IAChCA,SAAS,CAACrB,OAAO,EAAE;IAEnB,IAAI0F,KAAK,GAAG,IAAI;IAChB,IAAI,CAACA,KAAK,CAACrE,SAAS,CAACqF,UAAU,IAAIhB,KAAK,CAACiB,aAAa,EAAEC,aAAa,KAAKlB,KAAK,EAAE;MAC7E,IAAIyb,gBAAgB,GAAG/S,sCAAyB,CAACtT,IAAI,CAACuG,SAAS,EAAEuI,kBAAK,CAAC9O,IAAI,CAACuG,SAAS,EAAEqE,KAAK,CAAC,EAAE4I,MAAM,CAAC;MACtG,IAAI6S,gBAAgB,KAAKniB,SAAS,EAAE;QAChC4K,kBAAK,CAAC9O,IAAI,CAACuG,SAAS,EAAEqE,KAAK,EAAEyb,gBAAgB,CAAC;MAClD;IACJ;EACJ,CAAC;EACDlY,QAAQ,EAAE,kBAAU5N,CAAC,EAAE;IACnB,IAAMgG,SAAS,GAAG,IAAI,CAACA,SAAS;MAAEnF,OAAO,GAAGmF,SAAS,CAACnF,OAAO;IAE7D,IAAIwJ,KAAK,GAAG,IAAI;MACZvJ,GAAG,GAAGyN,kBAAK,CAAC9O,IAAI,CAACuG,SAAS,EAAEqE,KAAK,CAAC;;IAEtC;IACA,IAAI0b,QAAQ,GAAG/f,SAAS,CAACd,KAAK,GAAGyB,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,CAACN,KAAK,CAAC5E,GAAG,CAACoO,GAAG,EAAEpO,GAAG,CAACmO,KAAK,CAAC,GAAGtI,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,CAACN,KAAK,CAAC5E,GAAG,CAACmO,KAAK,EAAEnO,GAAG,CAACoO,GAAG,CAAC;MACtI8W,YAAY,GAAGhgB,SAAS,CAACd,KAAK,GAAG6gB,QAAQ,CAACle,OAAO,EAAE,CAAC7E,IAAI,CAAC,EAAE,CAAC,GAAG+iB,QAAQ,CAAC/iB,IAAI,CAAC,EAAE,CAAC;IACpF,IAAIE,MAAM,CAAC+iB,SAAS,CAACC,SAAS,EAAEhjB,MAAM,CAAC+iB,SAAS,CAACC,SAAS,CAACC,SAAS,CAACH,YAAY,CAAC,CAAC,KAC9E,IAAI9iB,MAAM,CAACmhB,aAAa,IAAInhB,MAAM,CAACmhB,aAAa,CAACC,OAAO,EAAE;MAAE;MAC7DphB,MAAM,CAACmhB,aAAa,CAAC+B,OAAO,CAAC,MAAM,EAAEJ,YAAY,CAAC;IACtD;IACArH,wBAAY,CAAClf,IAAI,CAACuG,SAAS,EAAEqE,KAAK,EAAExK,aAAI,CAACgf,MAAM,EAAE/d,GAAG,CAAC;IACrD,IAAAwN,0BAAW,EAACjE,KAAK,EAAE1D,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,EAAEnF,OAAO,CAAC4I,CAAC,EAAEzJ,CAAC,EAAEgG,SAAS,CAAC5B,SAAS,KAAK4B,SAAS,CAACa,SAAS,CAAC,IAAI,CAAC,CAAC;EAClH,CAAC;EACDwG,SAAS,EAAE,mBAAUrN,CAAC,EAAE;IACpB,IAAMgG,SAAS,GAAG,IAAI,CAACA,SAAS;MAAEhF,IAAI,GAAGgF,SAAS,CAAChF,IAAI;MAAEyC,CAAC,GAAGuC,SAAS,CAACxC,aAAa;IACpFwC,SAAS,CAACrB,OAAO,GAAG,CAAC;IAErB,IAAI4d,MAAM,GAAG9e,CAAC,CAAC,IAAI,CAAC;MAChB4G,KAAK,GAAG,IAAI;IAChB,IAAIA,KAAK,CAACrE,SAAS,EAAE;MACjB,IAAA6f,sCAAuB,EAACxb,KAAK,EAAErE,SAAS,CAACpB,mBAAmB,CAAC;MAC7D,IAAI+gB,QAAQ,GAAGtb,KAAK,CAACrE,SAAS,CAACa,SAAS,EAAE;QACtC5F,MAAM,GAAG0F,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,CAACN,KAAK,EAAE;MAE9C,IAAIigB,QAAQ,KAAK,EAAE,EAAE;QACjB,IAAI3kB,IAAI,CAACwK,oBAAoB,EAAE;UAC3B,IAAIzI,iCAAoB,CAACtD,IAAI,CAACuG,SAAS,CAAC,KAAK,CAAC,CAAC,IAAI2f,QAAQ,KAAK7e,8BAAiB,CAACrH,IAAI,CAACuG,SAAS,CAAC,CAAChD,IAAI,CAAC,EAAE,CAAC,EAAE;YACxG/B,MAAM,GAAG,EAAE;UACf,CAAC,MAAM;YAAE;YACLwK,gCAAiB,CAAChM,IAAI,CAACuG,SAAS,EAAE/E,MAAM,CAAC;UAC7C;QACJ;QACA,IAAI8G,sBAAU,CAACtI,IAAI,CAACuG,SAAS,EAAE/E,MAAM,CAAC,KAAK,KAAK,EAAE;UAC9CwiB,UAAU,CAAC,YAAY;YACnBlB,MAAM,CAAC1Z,OAAO,CAAC,YAAY,CAAC;UAChC,CAAC,EAAE,CAAC,CAAC;UACL,IAAI7H,IAAI,CAACyB,eAAe,EAAE;YACtB4L,yBAAY,CAAC5O,IAAI,CAACuG,SAAS,CAAC;YAC5B,IAAIhF,IAAI,CAACwK,oBAAoB,EAAE;cAC3BvK,MAAM,GAAG,EAAE;YACf,CAAC,MAAM;cACHA,MAAM,GAAG6F,8BAAiB,CAACrH,IAAI,CAACuG,SAAS,CAAC,CAACN,KAAK,EAAE;YACtD;UAEJ;QACJ;QAEA,IAAA4I,0BAAW,EAACjE,KAAK,EAAEpJ,MAAM,EAAE0C,SAAS,EAAE3D,CAAC,CAAC;MAC5C;MAEA,IAAIgG,SAAS,CAAC5B,SAAS,KAAK4B,SAAS,CAACa,SAAS,CAAC,IAAI,CAAC,EAAE;QACnDb,SAAS,CAAC5B,SAAS,GAAG4B,SAAS,CAACa,SAAS,CAAC,IAAI,CAAC;QAC/C0b,MAAM,CAAC1Z,OAAO,CAAC,QAAQ,CAAC;MAC5B;IACJ;EACJ,CAAC;EAED6E,eAAe,EAAE,2BAAY;IACnB,IAAA1H,SAAS,GAAG,IAAI,CAACA,SAAS;MAAGqgB,eAAe,GAAIrgB,SAAS,CAAChF,IAAI,CAAjCqlB,eAAe;IAElD,IAAIhc,KAAK,GAAG,IAAI;IAChBrE,SAAS,CAACtB,UAAU,GAAG,IAAI;IAC3B,IAAI,CAAC2F,KAAK,CAACrE,SAAS,CAACqF,UAAU,IAAIhB,KAAK,CAACiB,aAAa,EAAEC,aAAa,KAAKlB,KAAK,EAAE;MAC7E,IAAIic,cAAc,GAAG,CAACtgB,SAAS,CAACd,KAAK,GAAG4B,8BAAiB,CAACrH,IAAI,CAACuG,SAAS,CAAC,CAACN,KAAK,EAAE,CAACmC,OAAO,EAAE,GAAGf,8BAAiB,CAACrH,IAAI,CAACuG,SAAS,CAAC,EAAEhD,IAAI,CAAC,EAAE,CAAC;MACzI,IAAIqjB,eAAe,EAAE;QACjB,IAAAR,sCAAuB,EAACxb,KAAK,EAAEic,cAAc,CAAC;MAClD;IACJ;EACJ,CAAC;EAEDnZ,WAAW,EAAE,uBAAY;IAAE;IACvB,IAAMnH,SAAS,GAAG,IAAI,CAACA,SAAS;MAAEhF,IAAI,GAAGgF,SAAS,CAAChF,IAAI;IAEvD,IAAIgF,SAAS,CAAC5B,SAAS,KAAK4B,SAAS,CAACa,SAAS,CAAC,IAAI,CAAC,EAAE;MACnDb,SAAS,CAAC3B,GAAG,CAACwE,OAAO,CAAC,QAAQ,CAAC;IACnC;IACA,KAAI,iCAAiC9F,iCAAoB,CAACtD,IAAI,CAACuG,SAAS,CAAC,KAAK,CAAC,CAAC,IAAIA,SAAS,CAACa,SAAS,IAAIb,SAAS,CAACa,SAAS,EAAE,KAAKC,8BAAiB,CAACrH,IAAI,CAACuG,SAAS,CAAC,CAAChD,IAAI,CAAC,EAAE,CAAC,EAAE;MAC7KgD,SAAS,CAACe,SAAS,CAAC,EAAE,CAAC,CAAC,CAAC;IAC7B;;IACA,IAAI/F,IAAI,CAACyB,eAAe,IAAIsF,sBAAU,CAACtI,IAAI,CAACuG,SAAS,EAAEW,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,CAAC,KAAK,KAAK,EAAE;MACzFA,SAAS,CAACe,SAAS,CAAC,EAAE,CAAC;IAC3B;IACA,IAAI/F,IAAI,CAACulB,kBAAkB,EAAE;MACzBvgB,SAAS,CAACe,SAAS,CAACf,SAAS,CAACK,aAAa,EAAE,EAAE,IAAI,CAAC;MACpDod,UAAU,CAAC,YAAY;QACnB,IAAAnV,0BAAW,EAACtI,SAAS,CAACtC,EAAE,EAAEiD,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,CAAC;MACxD,CAAC,EAAE,CAAC,CAAC;IACT;EACJ,CAAC;EAEDoH,UAAU,EAAE,sBAAY;IACpB,IAAMpH,SAAS,GAAG,IAAI,CAACA,SAAS;IAEhCA,SAAS,CAAC7B,YAAY,GAAG,IAAI,CAAC,CAAC;IAC/Bsf,UAAU,CAAC,YAAY;MACnB,IAAAtY,8BAAe,EAACnF,SAAS,CAACtC,EAAE,EAAEsC,SAAS,CAACa,SAAS,CAAC,IAAI,CAAC,CAAC;IAC5D,CAAC,EAAE,CAAC,CAAC;EACT;AACJ,CAAC;AAAC;;;;;;;;;;;;ACrfF;AAAqC;AAErC,IAAM2f,EAAE,GAAItjB,kBAAM,CAAC+iB,SAAS,IAAI/iB,kBAAM,CAAC+iB,SAAS,CAACQ,SAAS,IAAK,EAAE;EAC7DC,EAAE,GAAIF,EAAE,CAACpmB,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,IAAMomB,EAAE,CAACpmB,OAAO,CAAC,UAAU,CAAC,GAAG,CAAE;EAC9D8N,MAAM,GAAI+X,SAAS,CAACU,aAAa,IAAIV,SAAS,CAACU,aAAa,CAACzY,MAAM,IAAMhL,kBAAM,CAAC+iB,SAAS,IAAI/iB,kBAAM,CAAC+iB,SAAS,CAACW,cAAe,IAAI,cAAc,IAAI1jB,kBAAM;EAAE;EAC3J8J,MAAM,GAAG,SAAS,CAAC9L,IAAI,CAACslB,EAAE,CAAC;AAAC;AAAA;AAAA;;;;;;;;;;;;ACLhC;AAAqC;AAAA,eAEtBjjB,qBAAS,GAAGL,MAAM,GAAG,CAAC,CAAC;AAAA;;;;;;;;;;;;ACFtC,IAAMK,SAAS,GAAG,CAAC,EACjB,OAAOL,MAAM,KAAK,WAAW,IAC7BA,MAAM,CAACD,QAAQ,IACfC,MAAM,CAACD,QAAQ,CAACyJ,aAAa,CAC9B;AAAC,eAEanJ,SAAS;AAAA;;;;;;;;;;;;;;;;;ACNxB;AACA;AACA;AASA;AACA;AACA;AAKA,SAAS4H,eAAe,CAACd,KAAK,EAAE3L,KAAK,EAAE;EACtC,IAAMsH,SAAS,GAAGqE,KAAK,GAAGA,KAAK,CAACrE,SAAS,GAAG,IAAI;IAAEhF,IAAI,GAAGgF,SAAS,CAAChF,IAAI;EAEvEqJ,KAAK,CAACrE,SAAS,CAAC7B,YAAY,GAAG,KAAK;EACpC,IAAI,OAAOnD,IAAI,CAACuF,YAAY,KAAK,UAAU,EAAE7H,KAAK,GAAGsC,IAAI,CAACuF,YAAY,CAAC9G,IAAI,CAACuG,SAAS,EAAEtH,KAAK,EAAEsC,IAAI,CAAC,IAAItC,KAAK;EAC5GA,KAAK,GAAGA,KAAK,CAACmF,QAAQ,EAAE,CAAC2C,KAAK,CAAC,EAAE,CAAC;EAClCC,QAAQ,CAAC4D,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE3L,KAAK,CAAC;EACnCsH,SAAS,CAAC5B,SAAS,GAAG4B,SAAS,CAACa,SAAS,CAAC,IAAI,CAAC;EAC/C,IAAI,CAAC7F,IAAI,CAACwK,oBAAoB,IAAIxK,IAAI,CAACyB,eAAe,KAAK4H,KAAK,CAACrE,SAAS,CAACa,SAAS,EAAE,KAAKC,8BAAiB,CAACrH,IAAI,CAACuG,SAAS,CAAC,CAAChD,IAAI,CAAC,EAAE,CAAC,IAAID,iCAAoB,CAACtD,IAAI,CAACuG,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE;IACrLqE,KAAK,CAACrE,SAAS,CAACe,SAAS,CAAC,EAAE,CAAC;EAC9B;AACD;;AAEA;AACA,SAAS0E,iBAAiB,CAACxK,MAAM,EAAE;EAClC,IAAM+E,SAAS,GAAG,IAAI;EAEtB/E,MAAM,CAACjC,MAAM,GAAG,CAAC;EACjB,IAAI6nB,QAAQ,GAAG/jB,gCAAe,CAACrD,IAAI,CAACuG,SAAS,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAErC,SAAS,EAAE,IAAI,CAAC;IAAEuV,IAAI;EACpF,OAAO,CAACA,IAAI,GAAG2N,QAAQ,CAACnM,KAAK,EAAE,MAAM/W,SAAS;IAAE1C,MAAM,CAACmL,IAAI,CAAC8M,IAAI,CAAC;EAAC;EAClE,OAAOjY,MAAM;AACd;AAEA,SAASwF,QAAQ,CAAC4D,KAAK,EAAEiY,QAAQ,EAAEvhB,MAAM,EAAE+lB,KAAK,EAAEC,eAAe,EAAE;EAClE,IAAM/gB,SAAS,GAAGqE,KAAK,GAAGA,KAAK,CAACrE,SAAS,GAAG,IAAI;IAC/CnF,OAAO,GAAGmF,SAAS,CAACnF,OAAO;IAC3BG,IAAI,GAAGgF,SAAS,CAAChF,IAAI;IAAEyC,CAAC,GAAGuC,SAAS,CAACxC,aAAa;EAEnD,IAAIwgB,UAAU,GAAG8C,KAAK,CAACphB,KAAK,EAAE;IAC7BshB,SAAS,GAAG,EAAE;IACdC,UAAU,GAAG,CAAC,CAAC;IACfjc,MAAM,GAAGrH,SAAS;IAAEvB,yBAAyB,GAAGpB,IAAI,CAACoB,yBAAyB;EAC/EpB,IAAI,CAACoB,yBAAyB,GAAG,EAAE,CAAC,CAAC;;EAErC,SAAS8kB,eAAe,CAACthB,GAAG,EAAEohB,SAAS,EAAE;IACxC,IAAIG,cAAc,GAAGrkB,gCAAe,CAACrD,IAAI,CAACuG,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC,CAACN,KAAK,CAACE,GAAG,EAAE4I,qBAAQ,CAAC/O,IAAI,CAACuG,SAAS,EAAEJ,GAAG,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC5C,IAAI,CAAC,EAAE,CAAC,CAACR,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC;MAC/I4kB,WAAW,GAAGD,cAAc,CAAC/mB,OAAO,CAAC4mB,SAAS,CAAC;IAChD;IACA,OAAOI,WAAW,GAAG,CAAC,IAAID,cAAc,CAACC,WAAW,GAAG,CAAC,CAAC,KAAK,GAAG;MAAEA,WAAW,EAAE;IAAC;IAEjF,IAAI7U,KAAK,GAAG6U,WAAW,KAAK,CAAC,IAAI,CAAC5e,mBAAM,CAAC/I,IAAI,CAACuG,SAAS,EAAEJ,GAAG,CAAC,KACxD6O,wBAAO,CAAChV,IAAI,CAACuG,SAAS,EAAEJ,GAAG,CAAC,CAAC2M,KAAK,CAAC4D,SAAS,KAAK6Q,SAAS,CAACpR,MAAM,CAAC,CAAC,CAAC,IACnEnB,wBAAO,CAAChV,IAAI,CAACuG,SAAS,EAAEJ,GAAG,CAAC,CAAC2M,KAAK,UAAO,KAAK,IAAI,IAAIkC,wBAAO,CAAChV,IAAI,CAACuG,SAAS,EAAEJ,GAAG,CAAC,CAAC2M,KAAK,CAAC4D,SAAS,KAAM,GAAG,GAAG6Q,SAAS,CAACpR,MAAM,CAAC,CAAC,CAAG,IACnInB,wBAAO,CAAChV,IAAI,CAACuG,SAAS,EAAEJ,GAAG,CAAC,CAAC2M,KAAK,CAAC4D,SAAS,KAAK,GAAG,KAAK1B,wBAAO,CAAChV,IAAI,CAACuG,SAAS,EAAEJ,GAAG,GAAG,CAAC,CAAC,CAAC2M,KAAK,CAAC4D,SAAS,KAAK6Q,SAAS,CAACpR,MAAM,CAAC,CAAC,CAAC,IAChInB,wBAAO,CAAChV,IAAI,CAACuG,SAAS,EAAEJ,GAAG,GAAG,CAAC,CAAC,CAAC2M,KAAK,UAAO,KAAK,IAAI,IAAIkC,wBAAO,CAAChV,IAAI,CAACuG,SAAS,EAAEJ,GAAG,GAAG,CAAC,CAAC,CAAC2M,KAAK,CAAC4D,SAAS,KAAM,GAAG,GAAG6Q,SAAS,CAACpR,MAAM,CAAC,CAAC,CAAG,CAAE,CAAC;IAErJ,IAAI,CAACrD,KAAK,IAAI6U,WAAW,GAAG,CAAC,IAAI,CAAC5e,mBAAM,CAAC/I,IAAI,CAACuG,SAAS,EAAEJ,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,EAAE;MAC3E,IAAI+X,OAAO,GAAGnP,qBAAQ,CAAC/O,IAAI,CAACuG,SAAS,EAAEJ,GAAG,CAAC;MAC3C,IAAII,SAAS,CAAC+J,QAAQ,CAACd,KAAK,GAAG0O,OAAO,EAAE;QACvC3X,SAAS,CAAC+J,QAAQ,GAAG;UAACd,KAAK,EAAE0O;QAAO,CAAC;MACtC;IACD;IACA,OAAOpL,KAAK;EACb;EAEAlE,yBAAY,CAAC5O,IAAI,CAACuG,SAAS,CAAC;EAC5BnF,OAAO,CAAC8T,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC;EACpBsS,UAAU,GAAGjmB,IAAI,CAACqS,UAAU,GAAGN,sCAAyB,CAACtT,IAAI,CAACuG,SAAS,EAAE;IACxEiJ,KAAK,EAAE,CAAC;IACRC,GAAG,EAAE;EACN,CAAC,EAAE,KAAK,EAAElO,IAAI,CAACqmB,cAAc,KAAK,KAAK,GAAG,YAAY,GAAG1jB,SAAS,CAAC,CAACsL,KAAK,GAAG,CAAC;EAC7EpO,OAAO,CAAC4I,CAAC,GAAGwd,UAAU;EACtBjhB,SAAS,CAAC+J,QAAQ,GAAG;IAACd,KAAK,EAAEgY;EAAU,CAAC;EAExC,IAAIK,aAAa,GAAG,EAAE;IAAEC,YAAY,GAAGvhB,SAAS,CAAC+J,QAAQ;EACzDiU,UAAU,CAACre,OAAO,CAAC,UAAU6hB,QAAQ,EAAE5hB,GAAG,EAAE;IAC3C,IAAI4hB,QAAQ,KAAK7jB,SAAS,EAAE;MAAE;MAC7B;AACH;AACA;AACA;MACG;QACC,IAAIyd,QAAQ,GAAG,IAAI3d,CAAC,CAAC4d,KAAK,CAAC,WAAW,CAAC;QACvCD,QAAQ,CAACxS,GAAG,GAAG4Y,QAAQ;QACvBR,SAAS,IAAIQ,QAAQ;QACrB,IAAI1V,GAAG,GAAG/O,iCAAoB,CAACtD,IAAI,CAACuG,SAAS,EAAErC,SAAS,EAAE,IAAI,CAAC;QAC/D,IAAI,CAACujB,eAAe,CAACD,UAAU,EAAED,SAAS,CAAC,EAAE;UAC5Chc,MAAM,GAAGkC,4BAAa,CAACqU,aAAa,CAAC9hB,IAAI,CAACuG,SAAS,EAAEob,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAErgB,MAAM,EAAEiF,SAAS,CAAC+J,QAAQ,CAACd,KAAK,CAAC;UAE7G,IAAIjE,MAAM,EAAE;YACXic,UAAU,GAAGjhB,SAAS,CAAC+J,QAAQ,CAACd,KAAK,GAAG,CAAC;YACzC+X,SAAS,GAAG,EAAE;UACf;QACD,CAAC,MAAM;UACNhc,MAAM,GAAGkC,4BAAa,CAACqU,aAAa,CAAC9hB,IAAI,CAACuG,SAAS,EAAEob,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAErgB,MAAM,EAAE+Q,GAAG,GAAG,CAAC,CAAC;QAC7F;QACA,IAAI9G,MAAM,EAAE;UACX,IAAIA,MAAM,CAAClK,GAAG,KAAK6C,SAAS,IAAI9C,OAAO,CAACoK,cAAc,CAACD,MAAM,CAAClK,GAAG,CAAC,IAAID,OAAO,CAACoK,cAAc,CAACD,MAAM,CAAClK,GAAG,CAAC,CAACyR,KAAK,UAAO,KAAK,IAAI,IAAI1R,OAAO,CAACoK,cAAc,CAACD,MAAM,CAAClK,GAAG,CAAC,CAACwR,WAAW,KAAK3O,SAAS,EAAE;YAC/L2jB,aAAa,CAAClb,IAAI,CAACpB,MAAM,CAAClK,GAAG,CAAC;YAC9B,IAAI,CAACkF,SAAS,CAACd,KAAK,EAAE;cACrB8F,MAAM,CAACwW,eAAe,GAAGxW,MAAM,CAAClK,GAAG,GAAG,CAAC;YACxC;UACD;UACAwN,WAAW,CAAC7O,IAAI,CAACuG,SAAS,EAAErC,SAAS,EAAEgD,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,EAAEgF,MAAM,CAACwW,eAAe,EAAEJ,QAAQ,EAAE,KAAK,CAAC;UAC1Gpb,SAAS,CAAC+J,QAAQ,GAAG;YAACd,KAAK,EAAEjE,MAAM,CAACwW,eAAe;YAAEtS,GAAG,EAAElE,MAAM,CAACwW;UAAe,CAAC;UACjF+F,YAAY,GAAGvhB,SAAS,CAAC+J,QAAQ;QAClC,CAAC,MAAM;UACN,IAAIlP,OAAO,CAACoK,cAAc,CAACrF,GAAG,CAAC,KAAKjC,SAAS,IAAIqgB,UAAU,CAACpe,GAAG,CAAC,KAAKkN,+BAAc,CAACrT,IAAI,CAACuG,SAAS,EAAEJ,GAAG,CAAC,IAAI4C,mBAAM,CAAC/I,IAAI,CAACuG,SAAS,EAAEJ,GAAG,EAAE,IAAI,CAAC,EAAE;YAC9II,SAAS,CAAC+J,QAAQ,CAACd,KAAK,EAAE;UAC3B,CAAC,MAAMjJ,SAAS,CAAC+J,QAAQ,GAAGwX,YAAY,CAAC,CAAC;QAC3C;MACD;IACD;EACD,CAAC,CAAC;;EACF,IAAID,aAAa,CAACtoB,MAAM,GAAG,CAAC,EAAE;IAC7B,IAAIyoB,IAAI;MAAEjK,QAAQ;MAAEkK,SAAS,GAAGlZ,qBAAQ,CAAC/O,IAAI,CAACuG,SAAS,EAAE,CAAC,CAAC,EAAErC,SAAS,EAAE,KAAK,CAAC;IAC9E,IAAK,CAACoE,sBAAU,CAACtI,IAAI,CAACuG,SAAS,EAAEW,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,CAAC,IAAIshB,aAAa,CAACtoB,MAAM,IAAI0oB,SAAS,IAC3F3f,sBAAU,CAACtI,IAAI,CAACuG,SAAS,EAAEW,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,CAAC,IAAIshB,aAAa,CAACtoB,MAAM,GAAG,CAAC,IAAKsoB,aAAa,CAACtoB,MAAM,KAAK0oB,SAAS,IAAIJ,aAAa,CAAC,CAAC,CAAC,KAAK,CAAG,EAAE;MAAE;MAC5J,IAAIK,QAAQ,GAAGD,SAAS;MACxB,OAAO,CAACD,IAAI,GAAGH,aAAa,CAAC5M,KAAK,EAAE,MAAM/W,SAAS,EAAE;QACpD,IAAIyd,QAAQ,GAAG,IAAI3d,CAAC,CAAC4d,KAAK,CAAC,WAAW,CAAC;QACvC7D,QAAQ,GAAG3c,OAAO,CAACoK,cAAc,CAACwc,IAAI,CAAC;QACvCjK,QAAQ,CAACjJ,cAAc,GAAG,IAAI;QAC9B6M,QAAQ,CAACxS,GAAG,GAAG4O,QAAQ,CAACnT,KAAK;QAC7BW,MAAM,GAAGkC,4BAAa,CAACqU,aAAa,CAAC9hB,IAAI,CAACuG,SAAS,EAAEob,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAErgB,MAAM,EAAE4mB,QAAQ,CAAC;QAC7F,IAAI3c,MAAM,IAAIA,MAAM,CAAClK,GAAG,KAAK6C,SAAS,IAAIqH,MAAM,CAAClK,GAAG,KAAK2mB,IAAI,IAAI5mB,OAAO,CAACoK,cAAc,CAACD,MAAM,CAAClK,GAAG,CAAC,IAAID,OAAO,CAACoK,cAAc,CAACD,MAAM,CAAClK,GAAG,CAAC,CAACyR,KAAK,UAAO,KAAK,IAAI,EAAE;UAChK+U,aAAa,CAAClb,IAAI,CAACpB,MAAM,CAAClK,GAAG,CAAC;QAC/B,CAAC,MAAM,IAAI,CAACkK,MAAM,EAAE;QACpB2c,QAAQ,EAAE;MACX;IACD,CAAC,MAAM,CAAE;MACR;MACA;MACA;MACA;MACA;MACA;IAAA;EAEF;EACA,IAAIrF,QAAQ,EAAE;IACbhU,WAAW,CAAC7O,IAAI,CACfuG,SAAS,EACTqE,KAAK,EACL1D,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,EAAEgF,MAAM,GAAGA,MAAM,CAACwW,eAAe,GAAGxb,SAAS,CAAC+J,QAAQ,CAACd,KAAK,EACrF8X,eAAe,IAAI,IAAItjB,CAAC,CAAC4d,KAAK,CAAC,UAAU,CAAC,EAC1C0F,eAAe,KAAMA,eAAe,CAACrc,IAAI,KAAK,OAAO,IAAI1E,SAAS,CAAC5B,SAAS,KAAKuC,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,CAAChD,IAAI,CAAC,EAAE,CAAC,IAAK+jB,eAAe,CAACrc,IAAI,KAAK,OAAO,CAAC,CAAC;IAC3J;IACA;IACA;IACA;IACA;EACD;;EACA1J,IAAI,CAACoB,yBAAyB,GAAGA,yBAAyB;AAC3D;AAEA,SAASyjB,uBAAuB,CAAC5c,GAAG,EAAEvK,KAAK,EAAE;EAC5C,IAAMsH,SAAS,GAAGiD,GAAG,GAAGA,GAAG,CAACjD,SAAS,GAAG,IAAI;EAE5C,IAAI0gB,eAAE,EAAE;IACP,IAAIzd,GAAG,CAACjD,SAAS,CAACa,SAAS,EAAE,KAAKnI,KAAK,KAAKuK,GAAG,CAAC2D,WAAW,KAAKlO,KAAK,IAAIuK,GAAG,CAAC2D,WAAW,KAAK,EAAE,CAAC,EAAE;MACjG,IAAI3L,MAAM,GAAG0F,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,CAACN,KAAK,EAAE;QAC7CigB,QAAQ,GAAG1c,GAAG,CAACjD,SAAS,CAACa,SAAS,EAAE;MACrC,IAAI8e,QAAQ,KAAKjnB,KAAK,EAAE;QACvB,IAAIoT,GAAG,GAAG/O,iCAAoB,CAACtD,IAAI,CAACuG,SAAS,CAAC;QAC9C,IAAI8L,GAAG,KAAK,CAAC,CAAC,IAAI6T,QAAQ,KAAK7e,8BAAiB,CAACrH,IAAI,CAACuG,SAAS,CAAC,CAAChD,IAAI,CAAC,EAAE,CAAC,EAAE;UAC1E/B,MAAM,GAAG,EAAE;QACZ,CAAC,MAAM,IAAI6Q,GAAG,KAAK,CAAC,CAAC,EAAE;UAAE;UACxBrG,iBAAiB,CAAChM,IAAI,CAACuG,SAAS,EAAE/E,MAAM,CAAC;QAC1C;QACAqN,WAAW,CAACrF,GAAG,EAAEhI,MAAM,CAAC;MACzB;IACD;EACD,CAAC,MAAM,IAAIgI,GAAG,CAAC2D,WAAW,KAAKlO,KAAK,EAAE;IACrCuK,GAAG,CAAC2D,WAAW,GAAGlO,KAAK;IACvB,IAAIuK,GAAG,CAAC2D,WAAW,KAAK,EAAE,EAAE3D,GAAG,CAACe,eAAe,CAAC,aAAa,CAAC;EAC/D;AACD;AAEA,SAAS3D,aAAa,CAACgE,KAAK,EAAE;EAC7B,IAAMrE,SAAS,GAAGqE,KAAK,GAAGA,KAAK,CAACrE,SAAS,GAAG,IAAI;IAC/ChF,IAAI,GAAGgF,SAAS,CAAChF,IAAI;IACrBH,OAAO,GAAGmF,SAAS,CAACnF,OAAO;EAE5B,IAAIwJ,KAAK,EAAE;IACV,IAAIA,KAAK,CAACrE,SAAS,KAAKrC,SAAS,EAAE;MAClC,OAAO0G,KAAK,CAAC3L,KAAK;IACnB;IACA,IAAI2L,KAAK,CAACrE,SAAS,IAAIqE,KAAK,CAACrE,SAAS,CAAC7B,YAAY,EAAE;MAAE;MACtDgH,eAAe,CAACd,KAAK,EAAEA,KAAK,CAACrE,SAAS,CAACa,SAAS,CAAC,IAAI,CAAC,CAAC;IACxD;EACD;EACA,IAAI+gB,OAAO,GAAG,EAAE;IACfrU,GAAG,GAAG1S,OAAO,CAACoK,cAAc;EAC7B,KAAK,IAAI4c,IAAI,GAAG,CAAC,EAAEnU,GAAG,GAAGH,GAAG,CAACvU,MAAM,EAAE6oB,IAAI,GAAGnU,GAAG,EAAEmU,IAAI,EAAE,EAAE;IACxD,IAAItU,GAAG,CAACsU,IAAI,CAAC,IAAItU,GAAG,CAACsU,IAAI,CAAC,CAACtV,KAAK,KAAKgB,GAAG,CAACsU,IAAI,CAAC,CAACtV,KAAK,UAAO,IAAI,IAAI,IAAKhU,KAAK,CAACkH,OAAO,CAAC5E,OAAO,CAACoH,QAAQ,CAAC,IAAIsL,GAAG,CAACsU,IAAI,CAAC,CAACtT,cAAc,KAAK,IAAK,CAAC,EAAE;MAC/I;MACAqT,OAAO,CAACxb,IAAI,CAACmH,GAAG,CAACsU,IAAI,CAAC,CAACxd,KAAK,CAAC;IAC9B;EACD;EACA,IAAIzI,aAAa,GAAGgmB,OAAO,CAAC5oB,MAAM,KAAK,CAAC,GAAG,EAAE,GAAG,CAACgH,SAAS,CAACd,KAAK,GAAG0iB,OAAO,CAAC/f,OAAO,EAAE,GAAG+f,OAAO,EAAE5kB,IAAI,CAAC,EAAE,CAAC;EACxG,IAAI,OAAOhC,IAAI,CAACU,QAAQ,KAAK,UAAU,EAAE;IACxC,IAAImK,WAAW,GAAG,CAAC7F,SAAS,CAACd,KAAK,GAAGyB,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,CAACN,KAAK,EAAE,CAACmC,OAAO,EAAE,GAAGlB,sBAAS,CAAClH,IAAI,CAACuG,SAAS,CAAC,EAAEhD,IAAI,CAAC,EAAE,CAAC;IACtHpB,aAAa,GAAGZ,IAAI,CAACU,QAAQ,CAACjC,IAAI,CAACuG,SAAS,EAAE6F,WAAW,EAAEjK,aAAa,EAAEZ,IAAI,CAAC;EAChF;EACA,OAAOY,aAAa;AACrB;AAEA,SAAS0M,WAAW,CAACjE,KAAK,EAAEpJ,MAAM,EAAE8O,QAAQ,EAAE+X,KAAK,EAAEC,aAAa,EAAE;EACnE,IAAM/hB,SAAS,GAAGqE,KAAK,GAAGA,KAAK,CAACrE,SAAS,GAAG,IAAI;IAC/ChF,IAAI,GAAGgF,SAAS,CAAChF,IAAI;IACrByC,CAAC,GAAGuC,SAAS,CAACxC,aAAa;EAE5B,IAAIskB,KAAK,IAAI,OAAO9mB,IAAI,CAAC0F,aAAa,KAAK,UAAU,EAAE;IACtD;IACA,IAAIsE,MAAM,GAAGhK,IAAI,CAAC0F,aAAa,CAACjH,IAAI,CAACuG,SAAS,EAAE8hB,KAAK,EAAE7mB,MAAM,EAAE8O,QAAQ,EAAE/O,IAAI,CAAC;IAC9E,IAAIgK,MAAM,EAAE;MACX,IAAIA,MAAM,CAACiV,iBAAiB,EAAE;QAC7B,IAAIC,OAAO,GAAGlV,MAAM,CAACiV,iBAAiB;QACtCA,6BAAiB,CAACxgB,IAAI,CAACuG,SAAS,EAAEka,OAAO,KAAK,IAAI,GAAGA,OAAO,GAAGA,OAAO,CAAC/f,KAAK,EAAE+f,OAAO,CAAChR,GAAG,EAAElE,MAAM,CAAC/J,MAAM,IAAIA,MAAM,CAAC;QACnHA,MAAM,GAAG0F,sBAAS,CAAClH,IAAI,CAACuG,SAAS,EAAE,IAAI,CAAC;MACzC;MACA,IAAI+J,QAAQ,KAAKpM,SAAS,EAAEoM,QAAQ,GAAG/E,MAAM,CAACuD,KAAK,KAAK5K,SAAS,GAAGqH,MAAM,CAACuD,KAAK,GAAGwB,QAAQ;IAC5F;EACD;EACA,IAAI1F,KAAK,KAAK1G,SAAS,EAAE;IACxB0G,KAAK,CAACrE,SAAS,CAACe,SAAS,CAAC9F,MAAM,CAAC+B,IAAI,CAAC,EAAE,CAAC,CAAC;IAC1C,IAAI+M,QAAQ,KAAKpM,SAAS,KAAKmkB,KAAK,KAAKnkB,SAAS,IAAImkB,KAAK,CAACpd,IAAI,KAAK,MAAM,CAAC,EAAE;MAC7E;MACA6D,kBAAK,CAAC9O,IAAI,CAACuG,SAAS,EAAEqE,KAAK,EAAE0F,QAAQ,EAAEpM,SAAS,EAAEA,SAAS,EAAGmkB,KAAK,KAAKnkB,SAAS,IAAImkB,KAAK,CAACpd,IAAI,KAAK,SAAS,KAAKod,KAAK,CAAClZ,GAAG,KAAK/O,aAAI,CAACgf,MAAM,IAAIiJ,KAAK,CAAClZ,GAAG,KAAK/O,aAAI,CAAC+e,SAAS,CAAC,CAAE;IAC/K;IACA,IAAImJ,aAAa,KAAK,IAAI,EAAE;MAC3B,IAAIxF,MAAM,GAAG9e,CAAC,CAAC4G,KAAK,CAAC;QAAE2d,MAAM,GAAG3d,KAAK,CAACrE,SAAS,CAACa,SAAS,EAAE;MAC3DwD,KAAK,CAACrE,SAAS,CAAC1B,cAAc,GAAG,IAAI;MACrCie,MAAM,CAAC1Z,OAAO,CAAC,OAAO,CAAC;MACvB4a,UAAU,CAAC,YAAY;QAAE;QACxB,IAAIuE,MAAM,KAAKlhB,8BAAiB,CAACrH,IAAI,CAACuG,SAAS,CAAC,CAAChD,IAAI,CAAC,EAAE,CAAC,EAAE;UAC1Duf,MAAM,CAAC1Z,OAAO,CAAC,SAAS,CAAC;QAC1B,CAAC,MAAM,IAAId,sBAAU,CAACtI,IAAI,CAACuG,SAAS,EAAE/E,MAAM,CAAC,KAAK,IAAI,EAAE;UACvDshB,MAAM,CAAC1Z,OAAO,CAAC,UAAU,CAAC;QAC3B;MACD,CAAC,EAAE,CAAC,CAAC;IACN;EACD;AACD;;;;;;;;;;;;AC3PA;AACA;AACA;AACA;AAAwD;AAIxD,IAAI7B,UAAU,GAAG;EACb4E,EAAE,EAAE,YAAUvB,KAAK,EAAE4d,SAAS,EAAEC,YAAY,EAAE;IAC1C,IAAMzkB,CAAC,GAAG4G,KAAK,CAACrE,SAAS,CAACxC,aAAa;IAEvC,IAAI2kB,EAAE,GAAG,YAAUnoB,CAAC,EAAE;MAClB,IAAIA,CAAC,CAACooB,aAAa,EAAE;QACjBpoB,CAAC,GAAGA,CAAC,CAACooB,aAAa,IAAIpoB,CAAC,CAAC,CAAC;QAC1Bke,SAAS,CAAC,CAAC,CAAC,GAAGle,CAAC;MACpB;MACA;MACA,IAAIqF,IAAI,GAAG,IAAI;QAAE4Y,IAAI;QAAEjY,SAAS,GAAGX,IAAI,CAACW,SAAS;QAAEhF,IAAI,GAAGgF,SAAS,GAAGA,SAAS,CAAChF,IAAI,GAAG2C,SAAS;MAChG,IAAIqC,SAAS,KAAKrC,SAAS,IAAI,IAAI,CAAC6B,QAAQ,KAAK,MAAM,EAAE;QAAE;QACvD,IAAI6iB,MAAM,GAAG5kB,CAAC,CAACyC,IAAI,CAACb,IAAI,EAAE,iBAAiB,CAAC;QAC5C5B,CAAC,CAAC4B,IAAI,CAAC,CAAC4B,GAAG,EAAE,CAAC,CAAC;QACf,IAAIohB,MAAM,EAAE;UACP,IAAIhoB,qBAAS,CAACgoB,MAAM,CAAC,CAAE7mB,IAAI,CAAC6D,IAAI,CAAC;QACtC;MACJ,CAAC,MAAM,IAAI,CAAC,CAAC,QAAQ,EAAE,OAAO,EAAE,UAAU,CAAC,CAAC7G,QAAQ,CAACwB,CAAC,CAAC0K,IAAI,CAAC,IAAI,IAAI,CAAClF,QAAQ,KAAK,MAAM,KAAKH,IAAI,CAACijB,QAAQ,IAAKjjB,IAAI,CAACkjB,QAAQ,IAAI,EAAEvoB,CAAC,CAAC0K,IAAI,KAAK,SAAS,IAAK1K,CAAC,CAAC2iB,OAAO,IAAI3iB,CAAC,CAAC4O,GAAG,KAAK/O,aAAI,CAAC8C,CAAE,IAAK3B,IAAI,CAACO,UAAU,KAAK,KAAK,IAAIvB,CAAC,CAAC4O,GAAG,KAAK/O,aAAI,CAAC0jB,GAAI,CAAE,CAAC,EAAE;QAC/OvjB,CAAC,CAAC6iB,cAAc,EAAE;MACtB,CAAC,MAAM;QACH,QAAQ7iB,CAAC,CAAC0K,IAAI;UACV,KAAK,OAAO;YACR,IAAI1E,SAAS,CAAC1B,cAAc,KAAK,IAAI,EAAE;cACnC0B,SAAS,CAAC1B,cAAc,GAAG,KAAK;cAChC,OAAOtE,CAAC,CAAC6iB,cAAc,EAAE;YAC7B;;YAEA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;UACJ,KAAK,OAAO;UACZ,KAAK,OAAO;YACR,IAAI7c,SAAS,CAACzB,eAAe,EAAE;cAAE;cAC7ByB,SAAS,CAACzB,eAAe,GAAG,KAAK;cACjC8F,KAAK,CAACme,IAAI,EAAE;cACZ,IAAA3C,sCAAuB,EAACxb,KAAK,EAAE,CAACrE,SAAS,CAACd,KAAK,GAAG4B,8BAAiB,CAACrH,IAAI,CAACuG,SAAS,CAAC,CAACN,KAAK,EAAE,CAACmC,OAAO,EAAE,GAAGf,8BAAiB,CAACrH,IAAI,CAACuG,SAAS,CAAC,EAAEhD,IAAI,CAAC,EAAE,CAAC,CAAC;cACpJygB,UAAU,CAAC,YAAY;gBACnBpZ,KAAK,CAACgb,KAAK,EAAE;cACjB,CAAC,EAAErkB,IAAI,CAACynB,sBAAsB,CAAC;cAC/B,OAAO,KAAK;YAChB;YACAxK,IAAI,GAAGC,SAAS;YAChBuF,UAAU,CAAC,YAAY;cAAE;cACrB,IAAI,CAACpZ,KAAK,CAACrE,SAAS,EAAE;gBAClB;gBACA;cACJ;cACAkiB,YAAY,CAAC/J,KAAK,CAAC9Y,IAAI,EAAE4Y,IAAI,CAAC;YAClC,CAAC,EAAE,CAAC,CAAC;YACL,OAAiB,CAAV;UAAW;QAAA;;QAE1B,IAAIyK,SAAS,GAAGR,YAAY,CAAC/J,KAAK,CAAC9Y,IAAI,EAAE6Y,SAAS,CAAC;QACnD,IAAIwK,SAAS,KAAK,KAAK,EAAE;UACrB1oB,CAAC,CAAC6iB,cAAc,EAAE;UAClB7iB,CAAC,CAAC2oB,eAAe,EAAE;QACvB;QACA,OAAOD,SAAS;MACpB;IACJ,CAAC;IACD,IAAI,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAClqB,QAAQ,CAACypB,SAAS,CAAC,EAAE;MACzCE,EAAE,GAAGA,EAAE,CAAC3oB,IAAI,CAAC6K,KAAK,CAAC,CAAC,CAAC;MACrB,IAAIA,KAAK,CAACue,IAAI,KAAK,IAAI,EAAEnlB,CAAC,CAAC4G,KAAK,CAACue,IAAI,CAAC,CAAChd,EAAE,CAACqc,SAAS,EAAEE,EAAE,CAAC;IAC5D,CAAC,MAAM;MACH1kB,CAAC,CAAC4G,KAAK,CAAC,CAACuB,EAAE,CAACqc,SAAS,EAAEE,EAAE,CAAC;IAC9B;;IAEA;IACA9d,KAAK,CAACrE,SAAS,CAACpC,MAAM,CAACqkB,SAAS,CAAC,GAAG5d,KAAK,CAACrE,SAAS,CAACpC,MAAM,CAACqkB,SAAS,CAAC,IAAI,EAAE;IAC3E5d,KAAK,CAACrE,SAAS,CAACpC,MAAM,CAACqkB,SAAS,CAAC,CAAC7b,IAAI,CAAC+b,EAAE,CAAC;EAE9C,CAAC;EACDlhB,GAAG,EAAE,aAAUoD,KAAK,EAAEyd,KAAK,EAAE;IACzB,IAAIzd,KAAK,CAACrE,SAAS,IAAIqE,KAAK,CAACrE,SAAS,CAACpC,MAAM,EAAE;MAC3C,IAAMH,CAAC,GAAG4G,KAAK,CAACrE,SAAS,CAACxC,aAAa;MACvC,IAAII,MAAM,GAAGyG,KAAK,CAACrE,SAAS,CAACpC,MAAM;MACnC,IAAIkkB,KAAK,EAAE;QACPlkB,MAAM,GAAG,EAAE;QACXA,MAAM,CAACkkB,KAAK,CAAC,GAAGzd,KAAK,CAACrE,SAAS,CAACpC,MAAM,CAACkkB,KAAK,CAAC;MACjD;MACA,KAAK,IAAIG,SAAS,IAAIrkB,MAAM,EAAE;QAC1B,IAAIilB,KAAK,GAAGjlB,MAAM,CAACqkB,SAAS,CAAC;QAC7B,OAAOY,KAAK,CAAC7pB,MAAM,GAAG,CAAC,EAAE;UACrB,IAAImpB,EAAE,GAAGU,KAAK,CAACrS,GAAG,EAAE;UACpB,IAAI,CAAC,QAAQ,EAAE,OAAO,CAAE,CAAChY,QAAQ,CAACypB,SAAS,CAAC,EAAE;YAC1C,IAAI5d,KAAK,CAACue,IAAI,KAAK,IAAI,EAAEnlB,CAAC,CAAC4G,KAAK,CAACue,IAAI,CAAC,CAAC3hB,GAAG,CAACghB,SAAS,EAAEE,EAAE,CAAC;UAC7D,CAAC,MAAM;YACH1kB,CAAC,CAAC4G,KAAK,CAAC,CAACpD,GAAG,CAACghB,SAAS,EAAEE,EAAE,CAAC;UAC/B;QACJ;QACA,OAAO9d,KAAK,CAACrE,SAAS,CAACpC,MAAM,CAACqkB,SAAS,CAAC;MAC5C;IACJ;EACJ;AACJ,CAAC;AAAC;;;;;;;;;;;;ACnGF;AACA;AACA;AACA;AAAkD;AAVlD;AACA;AACA;AACA;AACA;AACA;;AAOA,IAAMhlB,QAAQ,GAAGC,kBAAM,CAACD,QAAQ;AAEhC,SAAS6lB,aAAa,CAAChe,IAAI,EAAE;EAC5B,IAAIA,IAAI,YAAYge,aAAa,EAAE;IAClC,OAAOhe,IAAI;EACZ;EACA,IAAI,EAAE,IAAI,YAAYge,aAAa,CAAC,EAAE;IACrC,OAAO,IAAIA,aAAa,CAAChe,IAAI,CAAC;EAC/B;EACA,IAAIA,IAAI,KAAKnH,SAAS,IAAImH,IAAI,KAAK,IAAI,IAAIA,IAAI,KAAK5H,kBAAM,EAAE;IAC3D,IAAI,CAAC,CAAC,CAAC,GAAG4H,IAAI,CAACtF,QAAQ,GAAGsF,IAAI,GAAIA,IAAI,CAAC,CAAC,CAAC,KAAKnH,SAAS,IAAImH,IAAI,CAAC,CAAC,CAAC,CAACtF,QAAQ,GAAGsF,IAAI,CAAC,CAAC,CAAC,GAAG7H,QAAQ,CAAC8lB,aAAa,CAACje,IAAI,CAAE;IACrH,IAAI,IAAI,CAAC,CAAC,CAAC,KAAKnH,SAAS,IAAI,IAAI,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE;MAC9C,IAAI,CAAC,CAAC,CAAC,CAACqlB,aAAa,GAAG,IAAI,CAAC,CAAC,CAAC,CAACA,aAAa,IAAI,CAAC,CAAC;IACpD;EACD;AACD;AAEAF,aAAa,CAACxqB,SAAS,GAAG;EACzBsN,EAAE,EAAEA,UAAE;EACN3E,GAAG,EAAEA,WAAG;EACR4B,OAAO,EAAEA;AACV,CAAC;;AAED;AACAigB,aAAa,CAAChlB,MAAM,GAAGA,kBAAM;AAC7BglB,aAAa,CAAC5iB,IAAI,GAAGA,gBAAI;AACzB4iB,aAAa,CAACzH,KAAK,GAAGA,aAAK;AAAC,eAEbyH,aAAa;AAAA;;;;;;;;;;;;;ACxCb,SAAShlB,MAAM,GAAG;EAChC,IAAIT,OAAO;IAAE4lB,IAAI;IAAEC,GAAG;IAAEC,IAAI;IAAEC,WAAW;IAAEC,KAAK;IAC/C9R,MAAM,GAAG2G,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;IAC3Bhc,CAAC,GAAG,CAAC;IACLlD,MAAM,GAAGkf,SAAS,CAAClf,MAAM;IACzBsqB,IAAI,GAAG,KAAK;;EAEb;EACA,IAAI,OAAO/R,MAAM,KAAK,SAAS,EAAE;IAChC+R,IAAI,GAAG/R,MAAM;;IAEb;IACAA,MAAM,GAAG2G,SAAS,CAAChc,CAAC,CAAC,IAAI,CAAC,CAAC;IAC3BA,CAAC,EAAE;EACJ;;EAEA;EACA,IAAI,QAAOqV,MAAM,MAAK,QAAQ,IAAI,OAAOA,MAAM,KAAK,UAAU,EAAE;IAC/DA,MAAM,GAAG,CAAC,CAAC;EACZ;EAEA,OAAOrV,CAAC,GAAGlD,MAAM,EAAEkD,CAAC,EAAE,EAAE;IACvB;IACA,IAAI,CAACmB,OAAO,GAAG6a,SAAS,CAAChc,CAAC,CAAC,KAAK,IAAI,EAAE;MACrC;MACA,KAAK+mB,IAAI,IAAI5lB,OAAO,EAAE;QACrB6lB,GAAG,GAAG3R,MAAM,CAAC0R,IAAI,CAAC;QAClBE,IAAI,GAAG9lB,OAAO,CAAC4lB,IAAI,CAAC;;QAEpB;QACA,IAAI1R,MAAM,KAAK4R,IAAI,EAAE;UACpB;QACD;;QAEA;QACA,IAAIG,IAAI,IAAIH,IAAI,KAAKlrB,MAAM,CAACK,SAAS,CAACuF,QAAQ,CAACpE,IAAI,CAAC0pB,IAAI,CAAC,KAAK,iBAAiB,KAAKC,WAAW,GAAG7qB,KAAK,CAACkH,OAAO,CAAC0jB,IAAI,CAAC,CAAC,CAAC,EAAE;UACxH,IAAIC,WAAW,EAAE;YAChBA,WAAW,GAAG,KAAK;YACnBC,KAAK,GAAGH,GAAG,IAAI3qB,KAAK,CAACkH,OAAO,CAACyjB,GAAG,CAAC,GAAGA,GAAG,GAAG,EAAE;UAE7C,CAAC,MAAM;YACNG,KAAK,GAAGH,GAAG,IAAIjrB,MAAM,CAACK,SAAS,CAACuF,QAAQ,CAACpE,IAAI,CAACypB,GAAG,CAAC,KAAK,iBAAiB,GAAGA,GAAG,GAAG,CAAC,CAAC;UACpF;;UAEA;UACA3R,MAAM,CAAC0R,IAAI,CAAC,GAAGnlB,MAAM,CAACwlB,IAAI,EAAED,KAAK,EAAEF,IAAI,CAAC;;UAExC;QACD,CAAC,MAAM,IAAIA,IAAI,KAAKxlB,SAAS,EAAE;UAC9B4T,MAAM,CAAC0R,IAAI,CAAC,GAAGE,IAAI;QACpB;MACD;IACD;EACD;;EAEA;EACA,OAAO5R,MAAM;AACd;;;;;;;;;;;;ACzDe,kBAAUgS,KAAK,EAAE3a,GAAG,EAAElQ,KAAK,EAAE;EAC3C,IAAIA,KAAK,KAAKiF,SAAS,EAAE;IACxB,OAAO4lB,KAAK,CAACC,MAAM,GAAGD,KAAK,CAACC,MAAM,CAAC5a,GAAG,CAAC,GAAG,IAAI;EAC/C,CAAC,MAAM;IACN2a,KAAK,CAACC,MAAM,GAAGD,KAAK,CAACC,MAAM,IAAI,CAAC,CAAC;IACjCD,KAAK,CAACC,MAAM,CAAC5a,GAAG,CAAC,GAAGlQ,KAAK;EAC1B;AACD;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AAAqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIrC,SAAS+qB,cAAc,CAAC3e,IAAI,EAAE;EAC7B,OAAOA,IAAI,YAAY4e,OAAO;AAC/B;AAEA,IAAIrI,KAAK;AAAC;AACV,IAAI,OAAOne,kBAAM,CAACymB,WAAW,KAAK,UAAU,EAAE;EAC7C,gBAAAtI,KAAK,GAAGne,kBAAM,CAACymB,WAAW;AAC3B,CAAC,MAAM;EACN,IAAIpmB,qBAAS,EAAE;IACd,gBAAA8d,KAAK,GAAG,eAAUyG,KAAK,EAAE8B,MAAM,EAAE;MAChCA,MAAM,GAAGA,MAAM,IAAI;QAACC,OAAO,EAAE,KAAK;QAAEC,UAAU,EAAE,KAAK;QAAEC,QAAQ,EAAE,IAAI;QAAErE,MAAM,EAAE/hB;MAAS,CAAC;MACzF,IAAIqmB,GAAG,GAAG/mB,QAAQ,CAACgnB,WAAW,CAAC,aAAa,CAAC;MAC7CD,GAAG,CAACE,eAAe,CAACpC,KAAK,EAAE8B,MAAM,CAACC,OAAO,EAAED,MAAM,CAACE,UAAU,EAAEF,MAAM,CAAClE,MAAM,CAAC;MAC5E,OAAOsE,GAAG;IACX,CAAC;IACD3I,KAAK,CAAC/iB,SAAS,GAAG4E,kBAAM,CAACme,KAAK,CAAC/iB,SAAS;EACzC;AACD;AAGA,SAASsN,EAAE,CAAChI,MAAM,EAAEumB,OAAO,EAAE;EAC5B,SAASC,QAAQ,CAACjC,EAAE,EAAEkC,SAAS,EAAE;IAChC;IACA,IAAIvf,IAAI,CAACwf,gBAAgB,EAAE;MAAE;MAC5Bxf,IAAI,CAACwf,gBAAgB,CAACnC,EAAE,EAAEgC,OAAO,EAAE,KAAK,CAAC;IAC1C,CAAC,MAAM,IAAIrf,IAAI,CAACyf,WAAW,EAAE;MAAE;MAC9Bzf,IAAI,CAACyf,WAAW,aAAMpC,EAAE,GAAIgC,OAAO,CAAC;IACrC;IACAnB,aAAa,CAACb,EAAE,CAAC,GAAGa,aAAa,CAACb,EAAE,CAAC,IAAI,CAAC,CAAC;IAC3Ca,aAAa,CAACb,EAAE,CAAC,CAACkC,SAAS,CAAC,GAAGrB,aAAa,CAACb,EAAE,CAAC,CAACkC,SAAS,CAAC,IAAI,EAAE;IACjErB,aAAa,CAACb,EAAE,CAAC,CAACkC,SAAS,CAAC,CAACje,IAAI,CAAC+d,OAAO,CAAC;EAC3C;EAEA,IAAIV,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE;IAC5B,IAAIT,aAAa,GAAG,IAAI,CAAC,CAAC,CAAC,CAACA,aAAa;MACxCle,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC;IAEflH,MAAM,CAAC4C,KAAK,CAAC,GAAG,CAAC,CAACb,OAAO,CAAC,UAACmiB,KAAK,EAAK;MACpC,mBAAmCA,KAAK,CAACthB,KAAK,CAAC,GAAG,CAAC;QAAA;QAA5C2hB,EAAE;QAAA;QAAEkC,SAAS,+BAAG,QAAQ;MAC/BD,QAAQ,CAACjC,EAAE,EAAEkC,SAAS,CAAC;IACxB,CAAC,CAAC;EACH;EACA,OAAO,IAAI;AACZ;AAEA,SAASpjB,GAAG,CAACrD,MAAM,EAAEumB,OAAO,EAAE;EAC7B,IAAInB,aAAa,EAAEle,IAAI;EAEvB,SAAS0f,WAAW,CAACrC,EAAE,EAAEkC,SAAS,EAAEF,OAAO,EAAE;IAC5C,IAAIhC,EAAE,IAAIa,aAAa,KAAK,IAAI,EAAE;MACjC;MACA,IAAIle,IAAI,CAAC2f,mBAAmB,EAAE;QAAE;QAC/B3f,IAAI,CAAC2f,mBAAmB,CAACtC,EAAE,EAAEgC,OAAO,EAAE,KAAK,CAAC;MAC7C,CAAC,MAAM,IAAIrf,IAAI,CAAC4f,WAAW,EAAE;QAAE;QAC9B5f,IAAI,CAAC4f,WAAW,aAAMvC,EAAE,GAAIgC,OAAO,CAAC;MACrC;MACA,IAAIE,SAAS,KAAK,QAAQ,EAAE;QAC3B,KAAK,IAAIM,IAAI,IAAI3B,aAAa,CAACb,EAAE,CAAC,EAAE;UACnCa,aAAa,CAACb,EAAE,CAAC,CAACwC,IAAI,CAAC,CAACliB,MAAM,CAACugB,aAAa,CAACb,EAAE,CAAC,CAACwC,IAAI,CAAC,CAACvqB,OAAO,CAAC+pB,OAAO,CAAC,EAAE,CAAC,CAAC;QAC5E;MACD,CAAC,MAAM;QACNnB,aAAa,CAACb,EAAE,CAAC,CAACkC,SAAS,CAAC,CAAC5hB,MAAM,CAACugB,aAAa,CAACb,EAAE,CAAC,CAACkC,SAAS,CAAC,CAACjqB,OAAO,CAAC+pB,OAAO,CAAC,EAAE,CAAC,CAAC;MACtF;IACD;EACD;EAEA,SAASS,gBAAgB,CAACzC,EAAE,EAAEkC,SAAS,EAAE;IACxC,IAAIQ,IAAI,GAAG,EAAE;MACZC,IAAI;MAAEC,IAAI;IACX,IAAI5C,EAAE,CAACnpB,MAAM,GAAG,CAAC,EAAE;MAClB,IAAImrB,OAAO,KAAKxmB,SAAS,EAAE;QAC1B,KAAKmnB,IAAI,GAAG,CAAC,EAAEC,IAAI,GAAG/B,aAAa,CAACb,EAAE,CAAC,CAACkC,SAAS,CAAC,CAACrrB,MAAM,EAAE8rB,IAAI,GAAGC,IAAI,EAAED,IAAI,EAAE,EAAE;UAC/ED,IAAI,CAACze,IAAI,CAAC;YACT+b,EAAE,EAAEA,EAAE;YACNkC,SAAS,EAAEA,SAAS,IAAIA,SAAS,CAACrrB,MAAM,GAAG,CAAC,GAAGqrB,SAAS,GAAG,QAAQ;YACnEF,OAAO,EAAEnB,aAAa,CAACb,EAAE,CAAC,CAACkC,SAAS,CAAC,CAACS,IAAI;UAC3C,CAAC,CAAC;QACH;MACD,CAAC,MAAM;QACND,IAAI,CAACze,IAAI,CAAC;UACT+b,EAAE,EAAEA,EAAE;UACNkC,SAAS,EAAEA,SAAS,IAAIA,SAAS,CAACrrB,MAAM,GAAG,CAAC,GAAGqrB,SAAS,GAAG,QAAQ;UACnEF,OAAO,EAAEA;QACV,CAAC,CAAC;MACH;IACD,CAAC,MAAM,IAAIE,SAAS,CAACrrB,MAAM,GAAG,CAAC,EAAE;MAChC,KAAK,IAAIgsB,KAAK,IAAIhC,aAAa,EAAE;QAChC,KAAK,IAAI2B,IAAI,IAAI3B,aAAa,CAACgC,KAAK,CAAC,EAAE;UACtC,IAAIL,IAAI,KAAKN,SAAS,EAAE;YACvB,IAAIF,OAAO,KAAKxmB,SAAS,EAAE;cAC1B,KAAKmnB,IAAI,GAAG,CAAC,EAAEC,IAAI,GAAG/B,aAAa,CAACgC,KAAK,CAAC,CAACL,IAAI,CAAC,CAAC3rB,MAAM,EAAE8rB,IAAI,GAAGC,IAAI,EAAED,IAAI,EAAE,EAAE;gBAC7ED,IAAI,CAACze,IAAI,CAAC;kBACT+b,EAAE,EAAE6C,KAAK;kBACTX,SAAS,EAAEM,IAAI;kBACfR,OAAO,EAAEnB,aAAa,CAACgC,KAAK,CAAC,CAACL,IAAI,CAAC,CAACG,IAAI;gBACzC,CAAC,CAAC;cACH;YACD,CAAC,MAAM;cACND,IAAI,CAACze,IAAI,CAAC;gBACT+b,EAAE,EAAE6C,KAAK;gBACTX,SAAS,EAAEM,IAAI;gBACfR,OAAO,EAAEA;cACV,CAAC,CAAC;YACH;UACD;QACD;MACD;IACD;IAEA,OAAOU,IAAI;EACZ;EAEA,IAAIpB,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI7lB,MAAM,EAAE;IACtColB,aAAa,GAAG,IAAI,CAAC,CAAC,CAAC,CAACA,aAAa;IACrCle,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC;IAEdlH,MAAM,CAAC4C,KAAK,CAAC,GAAG,CAAC,CAACb,OAAO,CAAC,UAACmiB,KAAK,EAAK;MACpC,oBAAwBA,KAAK,CAACthB,KAAK,CAAC,GAAG,CAAC;QAAA;QAAjC2hB,EAAE;QAAEkC,SAAS;MACpBO,gBAAgB,CAACzC,EAAE,EAAEkC,SAAS,CAAC,CAAC1kB,OAAO,CAAC,gBAAyD;QAAA,IAAnDslB,GAAG,QAAP9C,EAAE;UAAgB+C,QAAQ,QAAjBf,OAAO;UAAuBgB,UAAU,QAArBd,SAAS;QAC9EG,WAAW,CAACS,GAAG,EAAEE,UAAU,EAAED,QAAQ,CAAC;MACvC,CAAC,CAAC;IACH,CAAC,CAAC;EACH;EACA,OAAO,IAAI;AACZ;AAEA,SAASriB,OAAO,CAACjF,MAAM,CAAC,iBAAiB;EAAA;EACxC,IAAI6lB,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE;IAC5B,IAAIT,aAAa,GAAG,IAAI,CAAC,CAAC,CAAC,CAACA,aAAa;MACxCle,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC;IACf,IAAIsgB,OAAO,GAAG,OAAOxnB,MAAM,KAAK,QAAQ,GAAGA,MAAM,CAAC4C,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC5C,MAAM,CAAC8G,IAAI,CAAC;IAC5E,KAAK,IAAI2gB,IAAI,GAAG,CAAC,EAAEA,IAAI,GAAGD,OAAO,CAACpsB,MAAM,EAAEqsB,IAAI,EAAE,EAAE;MACjD,IAAIC,OAAO,GAAGF,OAAO,CAACC,IAAI,CAAC,CAAC7kB,KAAK,CAAC,GAAG,CAAC;QACrC2hB,EAAE,GAAGmD,OAAO,CAAC,CAAC,CAAC;QACfjB,SAAS,GAAGiB,OAAO,CAAC,CAAC,CAAC,IAAI,QAAQ;MACnC,IAAIroB,QAAQ,KAAKU,SAAS,IAAI0mB,SAAS,KAAK,QAAQ,EAAE;QACrD;QACA,IAAIkB,IAAI;UAAErpB,CAAC;UAAE0nB,MAAM,GAAG;YACrBC,OAAO,EAAE,IAAI;YACbC,UAAU,EAAE,IAAI;YAChBC,QAAQ,EAAE,IAAI;YACdrE,MAAM,EAAExH,SAAS,CAAC,CAAC;UACpB,CAAC;QACD;QACA,IAAIjb,QAAQ,CAACgnB,WAAW,EAAE;UACzB,IAAI;YACH,QAAQ9B,EAAE;cACT,KAAK,OAAO;gBACXyB,MAAM,CAACrE,SAAS,GAAG,YAAY;gBAC/BgG,IAAI,GAAG,IAAIC,UAAU,CAACrD,EAAE,EAAEyB,MAAM,CAAC;gBACjC;cACD;gBACC2B,IAAI,GAAG,IAAI5B,WAAW,CAACxB,EAAE,EAAEyB,MAAM,CAAC;YAAC;UAEtC,CAAC,CAAC,OAAO5pB,CAAC,EAAE;YACXurB,IAAI,GAAGtoB,QAAQ,CAACgnB,WAAW,CAAC,aAAa,CAAC;YAC1CsB,IAAI,CAACrB,eAAe,CAAC/B,EAAE,EAAEyB,MAAM,CAACC,OAAO,EAAED,MAAM,CAACE,UAAU,EAAEF,MAAM,CAAClE,MAAM,CAAC;UAC3E;UACA,IAAI9hB,MAAM,CAAC8G,IAAI,EAAE,IAAA5G,kBAAM,EAACynB,IAAI,EAAE3nB,MAAM,CAAC;UACrCkH,IAAI,CAAC2gB,aAAa,CAACF,IAAI,CAAC;QACzB,CAAC,MAAM;UACNA,IAAI,GAAGtoB,QAAQ,CAACyoB,iBAAiB,EAAE;UACnCH,IAAI,CAACI,SAAS,GAAGxD,EAAE;UACnBoD,IAAI,CAAC7F,MAAM,GAAGxH,SAAS,CAAC,CAAC,CAAC;UAC1B,IAAIta,MAAM,CAAC8G,IAAI,EAAE,IAAA5G,kBAAM,EAACynB,IAAI,EAAE3nB,MAAM,CAAC;UACrCkH,IAAI,CAAC8gB,SAAS,CAAC,IAAI,GAAGL,IAAI,CAACI,SAAS,EAAEJ,IAAI,CAAC;QAC5C;MACD,CAAC,MAAM,IAAIvC,aAAa,CAACb,EAAE,CAAC,KAAKxkB,SAAS,EAAE;QAC3Cua,SAAS,CAAC,CAAC,CAAC,GAAGA,SAAS,CAAC,CAAC,CAAC,CAACxT,IAAI,GAAGwT,SAAS,CAAC,CAAC,CAAC,GAAG4K,qBAAa,CAACzH,KAAK,CAACnD,SAAS,CAAC,CAAC,CAAC,CAAC;QACnFA,SAAS,CAAC,CAAC,CAAC,CAACwH,MAAM,GAAGxH,SAAS,CAACxY,KAAK,CAAC,CAAC,CAAC;QAExC,IAAMmmB,QAAQ,GAAG7C,aAAa,CAACb,EAAE,CAAC;UACjC2D,QAAQ,GAAGzB,SAAS,KAAK,QAAQ,GAAGpsB,MAAM,CAAC8tB,MAAM,CAACF,QAAQ,CAAC,CAACG,IAAI,EAAE,GAAGH,QAAQ,CAACxB,SAAS,CAAC;QACzFyB,QAAQ,CAACnmB,OAAO,CAAC,UAAAwkB,OAAO;UAAA,OAAIA,OAAO,CAAChM,KAAK,CAACrT,IAAI,EAAEoT,UAAS,CAAC;QAAA,EAAC;MAC5D;IACD;EACD;EACA,OAAO,IAAI;AACZ;;;;;;;;;;;;;ACzLA;AACA;AACA;AACA;AAAwC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIxC,SAASnY,eAAe,CAAC/E,IAAI,EAAEirB,OAAO,EAAE;EACpC,IAAIC,EAAE;EAEN,SAASC,cAAc,CAAC3qB,IAAI,QAAuD;IAAA,IAApDyd,MAAM,QAANA,MAAM;MAAEmN,WAAW,QAAXA,WAAW;MAAEC,gBAAgB,QAAhBA,gBAAgB;MAAE/qB,UAAU,QAAVA,UAAU;IAC5E,IAAI2d,MAAM,GAAG,CAAC,IAAIA,MAAM,KAAK,GAAG,IAAIA,MAAM,KAAK,GAAG,EAAE;MAChD,IAAIqN,WAAW,GAAGrN,MAAM,KAAK,GAAG,GAAG,CAAC,GAAIA,MAAM,KAAK,GAAG,GAAG,CAAC,GAAGA,MAAO;MACpEzd,IAAI,GAAG4qB,WAAW,CAAC,CAAC,CAAC,GAAG5qB,IAAI,GAAG4qB,WAAW,CAAC,CAAC,CAAC,GAAGC,gBAAgB,CAAC,CAAC,CAAC,GAAGC,WAAW,GAAG,GAAG,GAAGrN,MAAM,GAAGoN,gBAAgB,CAAC,CAAC,CAAC;IAC1H;IACA,IAAI/qB,UAAU,KAAK,IAAI,EAAE;MACrB,IAAIirB,aAAa,GAAG,oBAAoB;QAAE;QACtCC,WAAW,GAAGhrB,IAAI,CAAC+Q,KAAK,CAAC,IAAI7R,MAAM,CAAC6rB,aAAa,EAAE,GAAG,CAAC,CAAC;MAC5DC,WAAW,IAAIA,WAAW,CAAC7mB,OAAO,CAAC,UAAC8mB,CAAC,EAAEvqB,CAAC,EAAK;QACzC,eAAeuqB,CAAC,CAACjmB,KAAK,CAAC,GAAG,CAAC;UAAA;UAAtBkmB,EAAE;UAAEC,EAAE;QAAkBA,EAAE,GAAGA,EAAE,CAACnqB,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC;QACrDhB,IAAI,GAAGA,IAAI,CAACgB,OAAO,CAAC,IAAI9B,MAAM,WAAI,IAAAksB,uBAAW,EAACF,EAAE,CAAC,gBAAM,IAAAE,uBAAW,EAACD,EAAE,CAAC,SAAM,EACxED,EAAE,CAAC9W,MAAM,CAAC,CAAC,CAAC,KAAK+W,EAAE,CAAC/W,MAAM,CAAC,CAAC,CAAC,cACrB8W,EAAE,cAAIA,EAAE,SAAGC,EAAE,mBACdD,EAAE,cAAIC,EAAE,MAAG,CAAC;QACvB;MACJ,CAAC,CAAC;IACN;;IAEA,OAAOnrB,IAAI;EACf;EAEA,SAASqrB,YAAY,CAACrrB,IAAI,EAAEyG,QAAQ,EAAEjH,IAAI,EAAE;IACxC,IAAI8rB,SAAS,GAAG,KAAK;IACrB,IAAItrB,IAAI,KAAK,IAAI,IAAIA,IAAI,KAAK,EAAE,EAAE;MAC9BsrB,SAAS,GAAG9rB,IAAI,CAACI,KAAK,KAAK,IAAI;MAC/B,IAAI0rB,SAAS,EAAE;QACXtrB,IAAI,GAAGR,IAAI,CAACI,KAAK;QACjBI,IAAI,GAAGA,IAAI,CAACgB,OAAO,CAAC,gBAAgB,EAAE,IAAI,CAAC;MAC/C,CAAC,MAAM;QACHsqB,SAAS,GAAG,IAAI;QAChBtrB,IAAI,GAAG,IAAI;MACf;IACJ;IACA,IAAIA,IAAI,CAACxC,MAAM,KAAK,CAAC,IAAIgC,IAAI,CAACmB,MAAM,KAAK,KAAK,IAAInB,IAAI,CAACie,MAAM,KAAK,CAAC,EAAE;MACjEje,IAAI,CAAC4L,WAAW,GAAG,EAAE;IACzB,CAAC,CAAC;IACFpL,IAAI,GAAG2qB,cAAc,CAAC3qB,IAAI,EAAER,IAAI,CAAC;;IAEjC;IACA,IAAI+rB,iBAAiB,EAAEC,UAAU;IACjCA,UAAU,GAAGF,SAAS,GAAG,QAAQ,GAAG9rB,IAAI,CAACI,KAAK,GAAGJ,IAAI,CAACmE,YAAY,GAAG3D,IAAI,CAACgF,KAAK,CAAC,EAAE,CAAC,CAACqB,OAAO,EAAE,CAAC7E,IAAI,CAAC,EAAE,CAAC,GAAGxB,IAAI;IAC7G,IAAIR,IAAI,CAACM,UAAU,KAAK,IAAI,EAAE;MAAE;MAC5B0rB,UAAU,GAAG,KAAK,GAAGhsB,IAAI,CAACM,UAAU,GAAG0rB,UAAU;IACrD;IAEA,IAAI3sB,sBAAS,CAAC/B,SAAS,CAAC2G,UAAU,CAAC+nB,UAAU,CAAC,KAAKrpB,SAAS,IAAIsoB,OAAO,KAAK,IAAI,EAAE;MAC9Ec,iBAAiB,GAAG;QAChB,MAAM,EAAEvrB,IAAI;QACZ,WAAW,EAAEnB,sBAAS,CAAC/B,SAAS,CAACwK,WAAW,CAACtH,IAAI,EAAEsrB,SAAS,EAAE9rB,IAAI,CAAC;QACnE,gBAAgB,EAAE,EAAE;QACpB,SAAS,EAAE2C,SAAS;QACpB,QAAQ,EAAEA,SAAS;QACnB,OAAO,EAAE,CAAC,CAAC;QACX,UAAU,EAAE,CAAC,CAAC;QAAE;QAChB,UAAU,EAAEsE,QAAQ;QACpB,YAAY,EAAEtE,SAAS;QACvB,WAAW,EAAE,CAAC;MAClB,CAAC;MACD,IAAIsoB,OAAO,KAAK,IAAI,EAAE;QAClB5rB,sBAAS,CAAC/B,SAAS,CAAC2G,UAAU,CAAC+nB,UAAU,CAAC,GAAGD,iBAAiB;QAC9DA,iBAAiB,GAAGtpB,qBAAC,CAACK,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,EAAEzD,sBAAS,CAAC/B,SAAS,CAAC2G,UAAU,CAAC+nB,UAAU,CAAC,CAAC;MACtF;IACJ,CAAC,MAAM;MACHD,iBAAiB,GAAGtpB,qBAAC,CAACK,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,EAAEzD,sBAAS,CAAC/B,SAAS,CAAC2G,UAAU,CAAC+nB,UAAU,CAAC,CAAC;IACtF;IAEA,OAAOD,iBAAiB;EAC5B;EAEA,IAAI,OAAO/rB,IAAI,CAACQ,IAAI,KAAK,UAAU,EAAE;IAAE;IACnCR,IAAI,CAACQ,IAAI,GAAGR,IAAI,CAACQ,IAAI,CAACR,IAAI,CAAC;EAC/B;EACA,IAAIzC,KAAK,CAACkH,OAAO,CAACzE,IAAI,CAACQ,IAAI,CAAC,EAAE;IAC1B,IAAIR,IAAI,CAACQ,IAAI,CAACxC,MAAM,GAAG,CAAC,EAAE;MACtB,IAAIgC,IAAI,CAACM,UAAU,KAAK,IAAI,EAAE;QAAE;QAC5BN,IAAI,CAACM,UAAU,GAAG,IAAI;MAC1B;MACA,IAAI2rB,OAAO,GAAGjsB,IAAI,CAACorB,WAAW,CAAC,CAAC,CAAC;MACjC,CAACprB,IAAI,CAACkE,KAAK,GAAGlE,IAAI,CAACQ,IAAI,CAACqG,OAAO,EAAE,GAAG7G,IAAI,CAACQ,IAAI,EAAEmE,OAAO,CAAC,UAAUunB,GAAG,EAAE;QAClE,IAAID,OAAO,CAACjuB,MAAM,GAAG,CAAC,EAAE;UACpBiuB,OAAO,IAAIjsB,IAAI,CAACmsB,gBAAgB;QACpC;QACA,IAAID,GAAG,CAAC1rB,IAAI,KAAKmC,SAAS,IAAI,OAAOupB,GAAG,CAAC1rB,IAAI,KAAK,UAAU,EAAE;UAC1DyrB,OAAO,IAAIC,GAAG,CAAC1rB,IAAI;QACvB,CAAC,MAAM;UACHyrB,OAAO,IAAIC,GAAG;QAClB;MACJ,CAAC,CAAC;MACFD,OAAO,IAAIjsB,IAAI,CAACorB,WAAW,CAAC,CAAC,CAAC;MAC9B;MACA,OAAOS,YAAY,CAACI,OAAO,EAAEjsB,IAAI,CAACQ,IAAI,EAAER,IAAI,CAAC;IACjD,CAAC,MAAM;MACHA,IAAI,CAACQ,IAAI,GAAGR,IAAI,CAACQ,IAAI,CAACgV,GAAG,EAAE;IAC/B;EACJ;EACA,IAAIxV,IAAI,CAACQ,IAAI,IAAIR,IAAI,CAACQ,IAAI,CAACA,IAAI,KAAKmC,SAAS,IAAI,OAAO3C,IAAI,CAACQ,IAAI,CAACA,IAAI,KAAK,UAAU,EAAE;IACnF0qB,EAAE,GAAGW,YAAY,CAAC7rB,IAAI,CAACQ,IAAI,CAACA,IAAI,EAAER,IAAI,CAACQ,IAAI,EAAER,IAAI,CAAC;EACtD,CAAC,MAAM;IACHkrB,EAAE,GAAGW,YAAY,CAAC7rB,IAAI,CAACQ,IAAI,EAAER,IAAI,CAACQ,IAAI,EAAER,IAAI,CAAC;EACjD;EACA,IAAIA,IAAI,CAACM,UAAU,KAAK,IAAI,EAAEN,IAAI,CAACM,UAAU,GAAG,KAAK;EACrD,OAAO4qB,EAAE;AACb;AAEA,SAASpjB,WAAW,CAACtH,IAAI,EAAEsrB,SAAS,EAAE9rB,IAAI,EAAE;EACxC,IAAMosB,SAAS,GAAG,2EAA2E;IACzF;IACAC,cAAc,GAAG,iNAAiN;EACtO,IAAIC,OAAO,GAAG,KAAK;IACfC,YAAY,GAAG,IAAIC,qBAAS,EAAE;IAC9Bjb,KAAK;IACLka,CAAC;IACDgB,UAAU,GAAG,EAAE;IACf5V,UAAU,GAAG,EAAE;IACf6V,YAAY;IACZC,mBAAmB;IACnBC,UAAU;IACVC,SAAS;IACTC,eAAe,GAAG,KAAK;;EAE3B;EACA,SAASC,oBAAoB,CAACC,MAAM,EAAEC,OAAO,EAAEhZ,QAAQ,EAAE;IACrDA,QAAQ,GAAGA,QAAQ,KAAKtR,SAAS,GAAGsR,QAAQ,GAAG+Y,MAAM,CAAChW,OAAO,CAAChZ,MAAM;IACpE,IAAIijB,SAAS,GAAG+L,MAAM,CAAChW,OAAO,CAAC/C,QAAQ,GAAG,CAAC,CAAC;IAC5C,IAAI6X,SAAS,EAAE;MACX,IAAImB,OAAO,CAAC7tB,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IAAKktB,OAAO,IAAI,kBAAkB,CAACpsB,IAAI,CAAC+sB,OAAO,CAAE,IAAIA,OAAO,KAAK,GAAG,EAAE;QAChG,IAAIC,IAAI,GAAGltB,IAAI,CAACR,MAAM,GAAG,GAAG,GAAG,EAAE;QACjC,IAAI,aAAa,CAACU,IAAI,CAAC+sB,OAAO,CAAC,EAC3BC,IAAI,IAAI,GAAG;QACfF,MAAM,CAAChW,OAAO,CAACvP,MAAM,CAACwM,QAAQ,EAAE,EAAE,CAAC,EAAE;UACjCP,EAAE,EAAE,IAAIhU,MAAM,CAACutB,OAAO,EAAEC,IAAI,CAAC;UAC7B,UAAQ,KAAK;UACb1b,WAAW,EAAE,KAAK;UAClBE,cAAc,EAAEuP,SAAS,KAAKte,SAAS,GAAG,QAAQ,GAAGse,SAAS,CAACpP,GAAG,KAAKob,OAAO;UAC9EztB,MAAM,EAAE,IAAI;UACZqS,GAAG,EAAEob,OAAO;UACZrhB,WAAW,EAAEjJ,SAAS;UACtBwS,SAAS,EAAE8X;QACf,CAAC,CAAC;MACN,CAAC,MAAM;QACH,IAAIX,OAAO,EAAEW,OAAO,GAAGA,OAAO,CAACA,OAAO,CAACjvB,MAAM,GAAG,CAAC,CAAC;QAClDivB,OAAO,CAACznB,KAAK,CAAC,EAAE,CAAC,CAACb,OAAO,CAAC,UAAUuT,IAAI,EAAEtT,GAAG,EAAE;UAC3Cqc,SAAS,GAAG+L,MAAM,CAAChW,OAAO,CAAC/C,QAAQ,GAAG,CAAC,CAAC;UACxC+Y,MAAM,CAAChW,OAAO,CAACvP,MAAM,CAACwM,QAAQ,EAAE,EAAE,CAAC,EAAE;YACjCP,EAAE,EAAE,QAAQ,CAACxT,IAAI,CAAEF,IAAI,CAACmtB,sBAAsB,IAAIjV,IAAI,CAAE,GAAG,IAAIxY,MAAM,CAAC,GAAG,IAAIM,IAAI,CAACmtB,sBAAsB,IAAIjV,IAAI,CAAC,GAAG,GAAG,EAAElY,IAAI,CAACR,MAAM,GAAG,GAAG,GAAG,EAAE,CAAC,GAAG,IAAI;YACvJ,UAAQ,IAAI;YACZgS,WAAW,EAAE,KAAK;YAClBE,cAAc,EAAEuP,SAAS,KAAKte,SAAS,GAAG,QAAQ,GAAIse,SAAS,CAACpP,GAAG,KAAKqG,IAAI,IAAI+I,SAAS,UAAO,KAAK,IAAK;YAC1GzhB,MAAM,EAAE,IAAI;YACZqS,GAAG,EAAE7R,IAAI,CAACmtB,sBAAsB,IAAIjV,IAAI;YACxCtM,WAAW,EAAE5L,IAAI,CAACmtB,sBAAsB,KAAKxqB,SAAS,GAAGuV,IAAI,GAAGvV,SAAS;YACzEwS,SAAS,EAAE,CAACmX,OAAO,GAAG,GAAG,GAAG,EAAE,IAAIpU;UACtC,CAAC,CAAC;QACN,CAAC,CAAC;MACN;MACAoU,OAAO,GAAG,KAAK;IACnB,CAAC,MAAM;MACH,IAAIc,OAAO,GAAIptB,IAAI,CAACS,WAAW,IAAIT,IAAI,CAACS,WAAW,CAACwsB,OAAO,CAAC,IAAMjtB,IAAI,CAACqtB,uBAAuB,IAAIhuB,sBAAS,CAAC/B,SAAS,CAACmD,WAAW,CAACwsB,OAAO,CAAE;MAC3I,IAAIG,OAAO,IAAI,CAACd,OAAO,EAAE;QACrBU,MAAM,CAAChW,OAAO,CAACvP,MAAM,CAACwM,QAAQ,EAAE,EAAE,CAAC,EAAE;UACjCP,EAAE,EAAE0Z,OAAO,CAAC7tB,SAAS,GAAG,OAAO6tB,OAAO,CAAC7tB,SAAS,IAAI,QAAQ,GAAG,IAAIG,MAAM,CAAC0tB,OAAO,CAAC7tB,SAAS,EAAES,IAAI,CAACR,MAAM,GAAG,GAAG,GAAG,EAAE,CAAC,GAAG,IAAI,YAAY;YACnI,IAAI,CAACU,IAAI,GAAGktB,OAAO,CAAC7tB,SAAS;UACjC,CAAC,KAAG,IAAIG,MAAM,CAAC,GAAG,CAAC;UACnB,UAAQ0tB,OAAO,UAAO,IAAI,KAAK;UAC/B5b,WAAW,EAAE4b,OAAO,CAACnS,QAAQ,IAAI,KAAK;UACtCW,cAAc,EAAEwR,OAAO,CAACnS,QAAQ,IAAI,KAAK;UAAE;UAC3CvJ,cAAc,EAAGuP,SAAS,KAAKte,SAAS,IAAIyqB,OAAO,CAACnS,QAAQ,GAAI,QAAQ,GAAGgG,SAAS,CAACpP,GAAG,MAAMub,OAAO,CAACE,gBAAgB,IAAIL,OAAO,CAAC;UAClIztB,MAAM,EAAE4tB,OAAO,CAAC5tB,MAAM;UACtBqS,GAAG,EAAEub,OAAO,CAACE,gBAAgB,IAAIL,OAAO;UACxCrhB,WAAW,EAAEwhB,OAAO,CAACxhB,WAAW;UAChCuJ,SAAS,EAAE8X,OAAO;UAClBM,SAAS,EAAEH,OAAO,CAACG;QACvB,CAAC,CAAC;MACN,CAAC,MAAM;QACHP,MAAM,CAAChW,OAAO,CAACvP,MAAM,CAACwM,QAAQ,EAAE,EAAE,CAAC,EAAE;UACjCP,EAAE,EAAE,QAAQ,CAACxT,IAAI,CAAEF,IAAI,CAACmtB,sBAAsB,IAAIF,OAAO,CAAE,GAAG,IAAIvtB,MAAM,CAAC,GAAG,IAAIM,IAAI,CAACmtB,sBAAsB,IAAIF,OAAO,CAAC,GAAG,GAAG,EAAEjtB,IAAI,CAACR,MAAM,GAAG,GAAG,GAAG,EAAE,CAAC,GAAG,IAAI;UAC7J,UAAQ,IAAI;UACZgS,WAAW,EAAE,KAAK;UAClBE,cAAc,EAAEuP,SAAS,KAAKte,SAAS,GAAG,QAAQ,GAAIse,SAAS,CAACpP,GAAG,KAAKob,OAAO,IAAIhM,SAAS,UAAO,KAAK,IAAK;UAC7GzhB,MAAM,EAAE,IAAI;UACZqS,GAAG,EAAE7R,IAAI,CAACmtB,sBAAsB,IAAIF,OAAO;UAC3CrhB,WAAW,EAAE5L,IAAI,CAACmtB,sBAAsB,KAAKxqB,SAAS,GAAGsqB,OAAO,GAAGtqB,SAAS;UAC5EwS,SAAS,EAAE,CAACmX,OAAO,GAAG,GAAG,GAAG,EAAE,IAAIW;QACtC,CAAC,CAAC;QACFX,OAAO,GAAG,KAAK;MACnB;IACJ;EACJ;EAEA,SAASkB,iBAAiB,CAAC1W,SAAS,EAAE;IAClC,IAAIA,SAAS,IAAIA,SAAS,CAACE,OAAO,EAAE;MAChCF,SAAS,CAACE,OAAO,CAACrS,OAAO,CAAC,UAAU8oB,KAAK,EAAE7oB,GAAG,EAAE;QAC5C,IAAI8oB,SAAS,GAAG5W,SAAS,CAACE,OAAO,CAACpS,GAAG,GAAG,CAAC,CAAC;QAC1C,IAAI,CAAC8oB,SAAS,KAAK/qB,SAAS,IAAK+qB,SAAS,CAAC1W,OAAO,KAAKrU,SAAS,IAAI+qB,SAAS,CAAC9V,YAAY,KAAK,KAAM,KAAK6V,KAAK,IAAIA,KAAK,CAACvS,OAAO,EAAE;UAAE;UAChIuS,KAAK,CAACvS,OAAO,GAAG,KAAK;UACrB,IAAI,CAAC4Q,SAAS,EAAE;YACZiB,oBAAoB,CAACU,KAAK,EAAEztB,IAAI,CAACorB,WAAW,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;YACnD,IAAIqC,KAAK,CAACE,SAAS,KAAK,IAAI,EAAE;cAC1BZ,oBAAoB,CAACU,KAAK,EAAEztB,IAAI,CAACorB,WAAW,CAAC,CAAC,CAAC,CAAC;YACpD;UACJ;QACJ;QACAoC,iBAAiB,CAACC,KAAK,CAAC;MAC5B,CAAC,CAAC;IACN;EACJ;EAEA,SAASG,WAAW,GAAG;IACnB,IAAInB,UAAU,CAACzuB,MAAM,GAAG,CAAC,EAAE;MACvB2uB,mBAAmB,GAAGF,UAAU,CAACA,UAAU,CAACzuB,MAAM,GAAG,CAAC,CAAC;MACvD+uB,oBAAoB,CAACJ,mBAAmB,EAAElB,CAAC,CAAC;MAC5C,IAAIkB,mBAAmB,CAACvR,YAAY,EAAE;QAAE;QACpCwR,UAAU,GAAGH,UAAU,CAACjX,GAAG,EAAE;QAC7B,KAAK,IAAIqY,IAAI,GAAG,CAAC,EAAEA,IAAI,GAAGjB,UAAU,CAAC5V,OAAO,CAAChZ,MAAM,EAAE6vB,IAAI,EAAE,EAAE;UACzD,IAAIjB,UAAU,CAAC5V,OAAO,CAAC6W,IAAI,CAAC,CAAC3S,OAAO,EAAE0R,UAAU,CAAC5V,OAAO,CAAC6W,IAAI,CAAC,CAAC3S,OAAO,GAAG,KAAK,CAAC,CAAC;QACpF;;QACA,IAAIuR,UAAU,CAACzuB,MAAM,GAAG,CAAC,EAAE;UACvB2uB,mBAAmB,GAAGF,UAAU,CAACA,UAAU,CAACzuB,MAAM,GAAG,CAAC,CAAC;UACvD2uB,mBAAmB,CAAC3V,OAAO,CAAC5L,IAAI,CAACwhB,UAAU,CAAC;QAChD,CAAC,MAAM;UACHL,YAAY,CAACvV,OAAO,CAAC5L,IAAI,CAACwhB,UAAU,CAAC;QACzC;MACJ;IACJ,CAAC,MAAM;MACHG,oBAAoB,CAACR,YAAY,EAAEd,CAAC,CAAC;IACzC;EACJ;EAEA,SAASqC,aAAa,CAAChX,SAAS,EAAE;IAC9B,SAASiX,aAAa,CAACC,EAAE,EAAE;MACvB,IAAIA,EAAE,KAAKhuB,IAAI,CAACiuB,cAAc,CAAC,CAAC,CAAC,EAAE;QAC/BD,EAAE,GAAGhuB,IAAI,CAACiuB,cAAc,CAAC,CAAC,CAAC;MAC/B,CAAC,MAAM,IAAID,EAAE,KAAKhuB,IAAI,CAACiuB,cAAc,CAAC,CAAC,CAAC,EAAE;QACtCD,EAAE,GAAGhuB,IAAI,CAACiuB,cAAc,CAAC,CAAC,CAAC;MAC/B,CAAC,MAAM,IAAID,EAAE,KAAKhuB,IAAI,CAACorB,WAAW,CAAC,CAAC,CAAC,EAAE;QACnC4C,EAAE,GAAGhuB,IAAI,CAACorB,WAAW,CAAC,CAAC,CAAC;MAC5B,CAAC,MAAM,IAAI4C,EAAE,KAAKhuB,IAAI,CAACorB,WAAW,CAAC,CAAC,CAAC,EAAE4C,EAAE,GAAGhuB,IAAI,CAACorB,WAAW,CAAC,CAAC,CAAC;MAE/D,OAAO4C,EAAE;IACb;IAEAlX,SAAS,CAACE,OAAO,GAAGF,SAAS,CAACE,OAAO,CAACnQ,OAAO,EAAE;IAC/C,KAAK,IAAI0K,KAAK,IAAIuF,SAAS,CAACE,OAAO,EAAE;MACjC,IAAI/Z,MAAM,CAACK,SAAS,CAACua,cAAc,CAACpZ,IAAI,CAACqY,SAAS,CAACE,OAAO,EAAEzF,KAAK,CAAC,EAAE;QAChE,IAAI2c,QAAQ,GAAG1f,QAAQ,CAAC+C,KAAK,CAAC;QAC9B,IAAIuF,SAAS,CAACE,OAAO,CAACzF,KAAK,CAAC,CAACqG,YAAY,IAAId,SAAS,CAACE,OAAO,CAACkX,QAAQ,GAAG,CAAC,CAAC,IAAIpX,SAAS,CAACE,OAAO,CAACkX,QAAQ,GAAG,CAAC,CAAC,CAAChT,OAAO,EAAE;UAAE;UACvH,IAAIT,EAAE,GAAG3D,SAAS,CAACE,OAAO,CAACzF,KAAK,CAAC;UACjCuF,SAAS,CAACE,OAAO,CAACvP,MAAM,CAAC8J,KAAK,EAAE,CAAC,CAAC;UAClCuF,SAAS,CAACE,OAAO,CAACvP,MAAM,CAACymB,QAAQ,GAAG,CAAC,EAAE,CAAC,EAAEzT,EAAE,CAAC;QACjD;QACA,IAAI3D,SAAS,CAACE,OAAO,CAACzF,KAAK,CAAC,CAACyF,OAAO,KAAKrU,SAAS,EAAE;UAChDmU,SAAS,CAACE,OAAO,CAACzF,KAAK,CAAC,GAAGuc,aAAa,CAAChX,SAAS,CAACE,OAAO,CAACzF,KAAK,CAAC,CAAC;QACtE,CAAC,MAAM;UACHuF,SAAS,CAACE,OAAO,CAACzF,KAAK,CAAC,GAAGwc,aAAa,CAACjX,SAAS,CAACE,OAAO,CAACzF,KAAK,CAAC,CAAC;QACtE;MACJ;IACJ;IAEA,OAAOuF,SAAS;EACpB;EAEA,SAASqX,QAAQ,CAACnX,OAAO,EAAE;IACvB,IAAIoX,UAAU,GAAG,IAAI5B,qBAAS,CAAC,IAAI,CAAC;IACpC4B,UAAU,CAACT,SAAS,GAAG,KAAK;IAC5BS,UAAU,CAACpX,OAAO,GAAGA,OAAO;IAC5B,OAAOoX,UAAU;EACrB;EAEA,SAASC,UAAU,GAAG;IAClB;IACA3B,YAAY,GAAGD,UAAU,CAACjX,GAAG,EAAE;IAC/BkX,YAAY,CAACiB,SAAS,GAAG,KAAK,CAAC,CAAC;IAChC,IAAIjB,YAAY,KAAK/pB,SAAS,EAAE;MAC5B,IAAI8pB,UAAU,CAACzuB,MAAM,GAAG,CAAC,EAAE;QACvB2uB,mBAAmB,GAAGF,UAAU,CAACA,UAAU,CAACzuB,MAAM,GAAG,CAAC,CAAC;QACvD2uB,mBAAmB,CAAC3V,OAAO,CAAC5L,IAAI,CAACshB,YAAY,CAAC;QAC9C,IAAIC,mBAAmB,CAACvR,YAAY,EAAE;UAAE;UACpCwR,UAAU,GAAGH,UAAU,CAACjX,GAAG,EAAE;UAC7B,IAAI8Y,gBAAgB,GAAG1B,UAAU,CAAC5V,OAAO,CAAC,CAAC,CAAC,CAACA,OAAO,GAAG4V,UAAU,CAAC5V,OAAO,CAAC,CAAC,CAAC,CAACA,OAAO,CAAChZ,MAAM,GAAG,CAAC;UAC/F,KAAK,IAAI6vB,IAAI,GAAG,CAAC,EAAEA,IAAI,GAAGjB,UAAU,CAAC5V,OAAO,CAAChZ,MAAM,EAAE6vB,IAAI,EAAE,EAAE;YACzDjB,UAAU,CAAC5V,OAAO,CAAC6W,IAAI,CAAC,CAAC3S,OAAO,GAAG,KAAK,CAAC,CAAC;YAC1C0R,UAAU,CAAC5V,OAAO,CAAC6W,IAAI,CAAC,CAACU,eAAe,GAAG,KAAK;YAChD,IAAIvuB,IAAI,CAACM,UAAU,KAAK,IAAI,IAAIguB,gBAAgB,IAAI1B,UAAU,CAAC5V,OAAO,CAAC6W,IAAI,CAAC,CAAC7W,OAAO,GAAG4V,UAAU,CAAC5V,OAAO,CAAC6W,IAAI,CAAC,CAAC7W,OAAO,CAAChZ,MAAM,GAAG,CAAC,CAAC,EAAE;cAAE;cACnIgC,IAAI,CAACM,UAAU,GAAG,IAAI;YAC1B;YACAguB,gBAAgB,GAAG1B,UAAU,CAAC5V,OAAO,CAAC6W,IAAI,CAAC,CAAC7W,OAAO,GAAG4V,UAAU,CAAC5V,OAAO,CAAC6W,IAAI,CAAC,CAAC7W,OAAO,CAAChZ,MAAM,GAAG,CAAC;UACrG;UACA,IAAIyuB,UAAU,CAACzuB,MAAM,GAAG,CAAC,EAAE;YACvB2uB,mBAAmB,GAAGF,UAAU,CAACA,UAAU,CAACzuB,MAAM,GAAG,CAAC,CAAC;YACvD2uB,mBAAmB,CAAC3V,OAAO,CAAC5L,IAAI,CAACwhB,UAAU,CAAC;UAChD,CAAC,MAAM;YACHL,YAAY,CAACvV,OAAO,CAAC5L,IAAI,CAACwhB,UAAU,CAAC;UACzC;QACJ;MACJ,CAAC,MAAM;QACHL,YAAY,CAACvV,OAAO,CAAC5L,IAAI,CAACshB,YAAY,CAAC;MAC3C;IACJ,CAAC,MAAM;MACHkB,WAAW,EAAE;IACjB;EACJ;EAEA,SAASY,eAAe,CAACxX,OAAO,EAAE;IAC9B,IAAI6V,SAAS,GAAG7V,OAAO,CAACxB,GAAG,EAAE;IAC7B,IAAIqX,SAAS,CAACjV,YAAY,EAAE;MACxBiV,SAAS,GAAGsB,QAAQ,CAAC,CAACnX,OAAO,CAACxB,GAAG,EAAE,EAAEqX,SAAS,CAAC,CAAC;IACpD;IACA,OAAOA,SAAS;EACpB;EAEA,IAAIf,SAAS,EAAE;IACX9rB,IAAI,CAACiuB,cAAc,CAAC,CAAC,CAAC,GAAGtrB,SAAS;IAClC3C,IAAI,CAACiuB,cAAc,CAAC,CAAC,CAAC,GAAGtrB,SAAS;EACtC;EACA,OAAQ4O,KAAK,GAAGua,SAAS,GAAGO,cAAc,CAACoC,IAAI,CAACjuB,IAAI,CAAC,GAAG4rB,SAAS,CAACqC,IAAI,CAACjuB,IAAI,CAAC,EAAG;IAC3EirB,CAAC,GAAGla,KAAK,CAAC,CAAC,CAAC;IAEZ,IAAIua,SAAS,EAAE;MACX,QAAQL,CAAC,CAAC7W,MAAM,CAAC,CAAC,CAAC;QACf;QACA,KAAK,GAAG;UACJ6W,CAAC,GAAG,OAAO;UACX;QACJ,KAAK,GAAG;QACR,KAAK,GAAG;UACJA,CAAC,GAAG,GAAG,GAAGA,CAAC,GAAG,GAAG;UACjB;QACJ,KAAK,GAAG;UACJ;UACA,IAAIgB,UAAU,CAACzuB,MAAM,KAAK,CAAC,EAAE;YAAE;YAC3B,IAAI0wB,aAAa,GAAGP,QAAQ,CAAC5B,YAAY,CAACvV,OAAO,CAAC;YAClD0X,aAAa,CAACf,SAAS,GAAG,IAAI;YAC9BlB,UAAU,CAACrhB,IAAI,CAACsjB,aAAa,CAAC;YAC9BnC,YAAY,CAACvV,OAAO,GAAG,EAAE;YACzB8V,eAAe,GAAG,IAAI;UAC1B;UACA;MAAM;MAEd,QAAQrB,CAAC;QACL,KAAK,KAAK;UACNA,CAAC,GAAG,OAAO;UACX;QACJ,KAAK,KAAK;UAAE;UACRA,CAAC,IAAIY,cAAc,CAACoC,IAAI,CAACjuB,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;UACnCirB,CAAC,IAAIY,cAAc,CAACoC,IAAI,CAACjuB,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;UACnC;QACJ,KAAK,KAAK,CAAC,CAAC;QACZ,KAAK,KAAK,CAAC,CAAC;QACZ,KAAK,KAAK,CAAC,CAAC;QACZ,KAAK,MAAM,CAAC,CAAC;QACb,KAAK,MAAM;UAAE;UACT;UACA;MAAM;IAElB;IAEA,IAAI8rB,OAAO,EAAE;MACTsB,WAAW,EAAE;MACb;IACJ;IACA,QAAQnC,CAAC,CAAC7W,MAAM,CAAC,CAAC,CAAC;MACf,KAAK,GAAG;MACR,KAAK,GAAG;QACJ;QACA,IAAI,CAACkX,SAAS,EAAE;UACZ8B,WAAW,EAAE;QACjB;QACA;MACJ,KAAK5tB,IAAI,CAAC2uB,UAAU;QAChBrC,OAAO,GAAG,IAAI;QACd,IAAIR,SAAS,EAAE8B,WAAW,EAAE;QAC5B;MACJ;MACA,KAAK5tB,IAAI,CAACiuB,cAAc,CAAC,CAAC,CAAC;MAC3B,KAAKjuB,IAAI,CAACorB,WAAW,CAAC,CAAC,CAAC;QACpBiD,UAAU,EAAE;QACZ;MACJ,KAAKruB,IAAI,CAACiuB,cAAc,CAAC,CAAC,CAAC;QACvB;QACAxB,UAAU,CAACrhB,IAAI,CAAC,IAAIohB,qBAAS,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;QAC3C;MACJ,KAAKxsB,IAAI,CAACorB,WAAW,CAAC,CAAC,CAAC;QACpB;QACAqB,UAAU,CAACrhB,IAAI,CAAC,IAAIohB,qBAAS,CAAC,IAAI,CAAC,CAAC;QACpC;MACJ,KAAKxsB,IAAI,CAACqrB,gBAAgB,CAAC,CAAC,CAAC;QACzB;QACA,IAAIrqB,UAAU,GAAG,IAAIwrB,qBAAS,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC;QAElDf,CAAC,GAAGA,CAAC,CAACjqB,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC,CAAC;QAC7B,IAAIotB,GAAG,GAAGnD,CAAC,CAACjmB,KAAK,CAAC,GAAG,CAAC;UAClBqpB,EAAE,GAAGD,GAAG,CAAC,CAAC,CAAC,CAACppB,KAAK,CAAC,GAAG,CAAC;UACtBspB,GAAG,GAAGlU,KAAK,CAACiU,EAAE,CAAC,CAAC,CAAC,CAAC,GAAGA,EAAE,CAAC,CAAC,CAAC,GAAGrgB,QAAQ,CAACqgB,EAAE,CAAC,CAAC,CAAC,CAAC;UAC5CE,GAAG,GAAGF,EAAE,CAAC7wB,MAAM,KAAK,CAAC,GAAG8wB,GAAG,GAAIlU,KAAK,CAACiU,EAAE,CAAC,CAAC,CAAC,CAAC,GAAGA,EAAE,CAAC,CAAC,CAAC,GAAGrgB,QAAQ,CAACqgB,EAAE,CAAC,CAAC,CAAC,CAAE;UACtEG,KAAK,GAAGpU,KAAK,CAACgU,GAAG,CAAC,CAAC,CAAC,CAAC,GAAGA,GAAG,CAAC,CAAC,CAAC,GAAGpgB,QAAQ,CAACogB,GAAG,CAAC,CAAC,CAAC,CAAC;QACrD,IAAIE,GAAG,KAAK,GAAG,IAAIA,GAAG,KAAK,GAAG,EAAE;UAC5BA,GAAG,GAAGC,GAAG,KAAK,GAAG,GAAG,CAAC,GAAG,CAAC;QAC7B;QACA/tB,UAAU,CAACA,UAAU,GAAG;UACpB8Z,GAAG,EAAEgU,GAAG;UACR1wB,GAAG,EAAE2wB,GAAG;UACR1Z,GAAG,EAAE2Z;QACT,CAAC;QACD,IAAIhY,OAAO,GAAGyV,UAAU,CAACzuB,MAAM,GAAG,CAAC,GAAGyuB,UAAU,CAACA,UAAU,CAACzuB,MAAM,GAAG,CAAC,CAAC,CAACgZ,OAAO,GAAGuV,YAAY,CAACvV,OAAO;QACtGzF,KAAK,GAAGyF,OAAO,CAACxB,GAAG,EAAE;QACrB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,IAAI,CAACjE,KAAK,CAAC2J,OAAO,EAAE;UAChB3J,KAAK,GAAG4c,QAAQ,CAAC,CAAC5c,KAAK,CAAC,CAAC;QAC7B;QACAyF,OAAO,CAAC5L,IAAI,CAACmG,KAAK,CAAC;QACnByF,OAAO,CAAC5L,IAAI,CAACpK,UAAU,CAAC;QAExB;MACJ,KAAKhB,IAAI,CAACmsB,gBAAgB;QACtB,IAAIM,UAAU,CAACzuB,MAAM,GAAG,CAAC,EAAE;UACvB2uB,mBAAmB,GAAGF,UAAU,CAACA,UAAU,CAACzuB,MAAM,GAAG,CAAC,CAAC;UACvD,IAAIixB,QAAQ,GAAGtC,mBAAmB,CAAC3V,OAAO,CAAC2V,mBAAmB,CAAC3V,OAAO,CAAChZ,MAAM,GAAG,CAAC,CAAC;UAClF,IAAI2uB,mBAAmB,CAACgB,SAAS;UAAI;UAChCsB,QAAQ,CAACjY,OAAO,KAAKrU,SAAS,IAAKssB,QAAQ,CAAC/T,OAAO,KAAK,KAAK,IAAI+T,QAAQ,CAAC7T,YAAY,KAAK,KAAM,CAAC,EAAE;YAAE;YACvGyR,SAAS,GAAGJ,UAAU,CAACjX,GAAG,EAAE;UAChC,CAAC,MAAM;YACHqX,SAAS,GAAG2B,eAAe,CAAC7B,mBAAmB,CAAC3V,OAAO,CAAC;UAC5D;QACJ,CAAC,MAAM;UACH6V,SAAS,GAAG2B,eAAe,CAACjC,YAAY,CAACvV,OAAO,CAAC;QACrD;QACA,IAAI6V,SAAS,CAACzR,YAAY,EAAE;UACxBqR,UAAU,CAACrhB,IAAI,CAACyhB,SAAS,CAAC;QAC9B,CAAC,MAAM;UACH,IAAIA,SAAS,CAAC0B,eAAe,EAAE;YAC3B3B,UAAU,GAAGH,UAAU,CAACjX,GAAG,EAAE;YAC7BqX,SAAS,CAAC0B,eAAe,GAAG,KAAK;UACrC,CAAC,MAAM;YACH3B,UAAU,GAAG,IAAIJ,qBAAS,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC;UACzD;UACAI,UAAU,CAAC5V,OAAO,CAAC5L,IAAI,CAACyhB,SAAS,CAAC;UAClCJ,UAAU,CAACrhB,IAAI,CAACwhB,UAAU,CAAC;UAC3B,IAAIC,SAAS,CAACc,SAAS,EAAE;YAAE;YACvBd,SAAS,CAACc,SAAS,GAAG,KAAK;YAC3B,IAAIY,eAAe,GAAG,IAAI/B,qBAAS,CAAC,IAAI,CAAC;YACzC+B,eAAe,CAACA,eAAe,GAAG,IAAI;YACtC9B,UAAU,CAACrhB,IAAI,CAACmjB,eAAe,CAAC;UACpC;QACJ;QACA;MACJ;QACIX,WAAW,EAAE;IAAC;EAE1B;EAEA,IAAId,eAAe,EAAEuB,UAAU,EAAE;EAEjC,OAAO5B,UAAU,CAACzuB,MAAM,GAAG,CAAC,EAAE;IAC1B0uB,YAAY,GAAGD,UAAU,CAACjX,GAAG,EAAE;IAC/B+W,YAAY,CAACvV,OAAO,CAAC5L,IAAI,CAACshB,YAAY,CAAC;EAC3C;EACA,IAAIH,YAAY,CAACvV,OAAO,CAAChZ,MAAM,GAAG,CAAC,EAAE;IACjCwvB,iBAAiB,CAACjB,YAAY,CAAC;IAC/B1V,UAAU,CAACzL,IAAI,CAACmhB,YAAY,CAAC;EACjC;EAEA,IAAIvsB,IAAI,CAACmE,YAAY,IAAInE,IAAI,CAACkE,KAAK,EAAE;IACjC4pB,aAAa,CAACjX,UAAU,CAAC,CAAC,CAAC,CAAC;EAChC;EACA;EACA,OAAOA,UAAU;AACrB;;;;;;;;;;;;ACpee,kBAAUqE,OAAO,EAAEC,UAAU,EAAEvD,YAAY,EAAEwD,YAAY,EAAE;EACzE,IAAI,CAACpE,OAAO,GAAG,EAAE;EACjB,IAAI,CAAC2W,SAAS,GAAGzS,OAAO,IAAI,KAAK;EACjC,IAAI,CAACqT,eAAe,GAAG,KAAK;EAC5B,IAAI,CAACrT,OAAO,GAAGA,OAAO,IAAI,KAAK;EAC/B,IAAI,CAACC,UAAU,GAAGA,UAAU,IAAI,KAAK;EACrC,IAAI,CAACvD,YAAY,GAAGA,YAAY,IAAI,KAAK;EACzC,IAAI,CAACwD,YAAY,GAAGA,YAAY,IAAI,KAAK;EACzC,IAAI,CAACpa,UAAU,GAAG;IACjB8Z,GAAG,EAAE,CAAC;IACN1c,GAAG,EAAE;EACN,CAAC;AACF;;;;;;;;;;;;ACZA,IAAO8wB,gBAAgB,GAAG,IAAIxvB,MAAM,CAAC,KAAK,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,CAACsC,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,EAAE,KAAK,CAAC;AACpI,kBAAUmtB,GAAG,EAAE;EAC7B,OAAOA,GAAG,CAAC3tB,OAAO,CAAC0tB,gBAAgB,EAAE,MAAM,CAAC;AAC7C;;;;;;;;;;;;eCHe;EACd,GAAG,EAAE;IAAE;IACN3vB,SAAS,EAAE,oBAAoB;IAC/B+tB,gBAAgB,EAAE;EACnB,CAAC;EACD,GAAG,EAAE;IAAE;IACN/tB,SAAS,EAAE,gDAAsD;IACjE+tB,gBAAgB,EAAE;EACnB,CAAC;EACD,GAAG,EAAE;IACJ/tB,SAAS,EAAE;EACZ;AACD,CAAC;AAAA;;;;;;;;;;;;ACZD;AAAkC,eAEnB;EACdyb,WAAW,EAAE,GAAG;EAChBpP,WAAW,EAAE,GAAG;EAChBqiB,cAAc,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC;EAC1B5C,gBAAgB,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC;EAC5BD,WAAW,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC;EACvBe,gBAAgB,EAAE,GAAG;EACrBwC,UAAU,EAAE,IAAI;EAChBnuB,IAAI,EAAE,IAAI;EAAE;EACZJ,KAAK,EAAE,IAAI;EAAE;EACbyM,UAAU,EAAE,sBAAM,CAClB,CAAC;EAAE;EACHC,YAAY,EAAE,wBAAM,CACpB,CAAC;EAAE;EACHC,SAAS,EAAE,qBAAM,CACjB,CAAC;EAAE;EACHkR,MAAM,EAAE,CAAC;EAAE;EACX9c,MAAM,EAAE,KAAK;EAAE;EACfd,UAAU,EAAE,KAAK;EAAE;EACnBklB,kBAAkB,EAAE,KAAK;EAAE;EAC3B/a,oBAAoB,EAAE,IAAI;EAC1BwE,UAAU,EAAE,IAAI;EAAE;EAClB/C,gBAAgB,EAAE,IAAI;EAAE;EACxBxK,eAAe,EAAE,KAAK;EAAE;EACxBW,KAAK,EAAE,IAAI;EACXqf,SAAS,EAAE,qBAAM,CACjB,CAAC;EAAE;EACHlc,YAAY,EAAE,IAAI;EAAE;EACpBlE,aAAa,EAAE,uBAAUC,WAAW,EAAEtB,IAAI,EAAE;IAC3C,OAAO,OAAOA,IAAI,CAACuF,YAAY,KAAK,UAAU,GAAGvF,IAAI,CAACuF,YAAY,CAAC9G,IAAI,CAAC,IAAI,EAAE6C,WAAW,EAAEtB,IAAI,CAAC,GAAGsB,WAAW;EAC/G,CAAC;EAAE;EACHoE,aAAa,EAAE,IAAI;EAAE;EACrBhF,QAAQ,EAAE,IAAI;EAAE;EAChBoL,eAAe,EAAE,IAAI;EAAE;EACvBuZ,eAAe,EAAE,IAAI;EAAE;EACvBtC,eAAe,EAAE,2BAAM,CACvB,CAAC;EAAE;EACH3hB,yBAAyB,EAAE,GAAG;EAAE;EAChC+C,YAAY,EAAE,KAAK;EAAE;EACrB0E,UAAU,EAAE,KAAK;EAAE;EACnBqZ,YAAY,EAAE,IAAI;EAAE;EACpB;EACA7P,UAAU,EAAE,EAAE;EAAE;EAChB+c,WAAW,EAAE,KAAK;EAAE;EACpB9Z,cAAc,EAAE,EAAE;EAAE;EACpB;EACAhV,UAAU,EAAE,IAAI;EAAE;EAClBskB,kBAAkB,EAAE,IAAI;EAAE;EAC1BrkB,UAAU,EAAE,KAAK;EAAE;EACnBiL,iBAAiB,EAAE,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,UAAU,EAAE,QAAQ,CAAC;EAAE;EACjE;EACAL,UAAU,EAAE,CACXtM,aAAI,CAAC+e,SAAS,EACd/e,aAAI,CAAC0jB,GAAG,EACR1jB,aAAI,CAACwwB,KAAK,EACVxwB,aAAI,CAACsjB,MAAM,EACXtjB,aAAI,CAACojB,MAAM,EACXpjB,aAAI,CAACkjB,QAAQ,EACbljB,aAAI,CAACijB,GAAG,EACRjjB,aAAI,CAACmjB,IAAI,EACTnjB,aAAI,CAAC6jB,SAAS,EACd7jB,aAAI,CAACywB,OAAO,EACZzwB,aAAI,CAAC2jB,UAAU,EACf3jB,aAAI,CAAC0wB,SAAS,EACd1wB,aAAI,CAACyjB,MAAM,EACXzjB,aAAI,CAACgf,MAAM,EACXhf,aAAI,CAAC2wB,WAAW,EAChB3wB,aAAI,CAAC4wB,EAAE,EACP5wB,aAAI,CAAC6wB,EAAE,EACP7wB,aAAI,CAAC8wB,EAAE,EACP9wB,aAAI,CAAC+wB,EAAE,EACP/wB,aAAI,CAACgxB,EAAE,EACPhxB,aAAI,CAACixB,EAAE,EACPjxB,aAAI,CAACkxB,EAAE,EACPlxB,aAAI,CAACmxB,EAAE,EACPnxB,aAAI,CAACoxB,EAAE,EACPpxB,aAAI,CAACqxB,GAAG,EACRrxB,aAAI,CAACsxB,GAAG,EACRtxB,aAAI,CAACuxB,GAAG,EACRvxB,aAAI,CAAC8jB,OAAO,EACZ9jB,aAAI,CAAC+jB,YAAY,EACjB/jB,aAAI,CAACwxB,KAAK,EACVxxB,aAAI,CAACyxB,OAAO,EACZzxB,aAAI,CAAC0xB,GAAG,EACR1xB,aAAI,CAAC0jB,GAAG,EACR1jB,aAAI,CAAC2xB,QAAQ,EACb3xB,aAAI,CAAC4xB,QAAQ,CACb;EACD1pB,UAAU,EAAE,IAAI;EAAE;EAClByY,aAAa,EAAE,IAAI;EAAE;EACrB9d,cAAc,EAAE,IAAI;EAAE;EACtByrB,sBAAsB,EAAExqB,SAAS;EAAE;EACnCyS,UAAU,EAAE,KAAK;EAAE;EACnBlL,QAAQ,EAAE,IAAI;EAAE;EAChB8C,cAAc,EAAE,KAAK;EAAE;EACvBlC,eAAe,EAAE,KAAK;EAAE;EACxBoH,oBAAoB,EAAE,KAAK;EAAE;EAC7B1S,MAAM,EAAE,IAAI;EAAE;EACdqB,SAAS,EAAE,MAAM;EAAE;EACnByH,oBAAoB,EAAE,IAAI;EAAE;EAC5B6X,cAAc,EAAE,IAAI;EAAE;EACtBkN,uBAAuB,EAAE,IAAI;EAAE;EAC/B5F,sBAAsB,EAAE,IAAI;EAAE;EAC9B3mB,WAAW,EAAE,CAAC,CAAC,CAAC;AACjB,CAAC;AAAA;;;;;;;;ACpGD;AACA;AACA;AACA;AACA;AAAoD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAVpD;AACA;AACA;AACA;AACA;AACA;;AAOA,IAAM2B,CAAC,GAAGpD,qBAAS,CAACmD,aAAa;AAAC,IAE5BkuB,UAAU;EACZ,oBAAYlwB,IAAI,EAAEkH,MAAM,EAAE1H,IAAI,EAAE;IAAA;IAC5B,IAAI,CAACQ,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACkH,MAAM,GAAGA,MAAM;IACpB,IAAI,CAAC1H,IAAI,GAAGA,IAAI;IAChB,IAAI,CAAC2wB,KAAK,GAAG,IAAIC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAC9B,IAAI,CAACC,cAAc,CAACrwB,IAAI,EAAE,IAAI,CAACR,IAAI,CAAC;EACxC;EAAC;IAAA;IAAA,KAED,eAAW;MACP,IAAI,IAAI,CAAC2wB,KAAK,KAAKhuB,SAAS,EAAE;QAC1B,IAAI,CAACguB,KAAK,GAAG,IAAIC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,CAACC,cAAc,CAACluB,SAAS,EAAE,IAAI,CAAC3C,IAAI,CAAC;MAC7C;MACA,OAAO,IAAI,CAAC2wB,KAAK;IACrB;EAAC;IAAA;IAAA,OAED,wBAAenwB,IAAI,EAAER,IAAI,EAAE;MACvB,IAAIuR,KAAK;MACTuf,YAAY,CAAC9wB,IAAI,CAAC,CAAC+wB,SAAS,GAAG,CAAC;MAChC,OAAQxf,KAAK,GAAGuf,YAAY,CAAC9wB,IAAI,CAAC,CAACyuB,IAAI,CAAC,IAAI,CAAC/mB,MAAM,CAAC,EAAG;QACnD,IAAIspB,UAAU,GAAG,IAAItxB,MAAM,CAAC,OAAO,CAAC,CAAC+uB,IAAI,CAACld,KAAK,CAAC,CAAC,CAAC,CAAC;UAC/C0f,KAAK,GAAGD,UAAU,GAAIzf,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,GAAIA,KAAK,CAAC,CAAC,CAAC;UACnD7T,KAAK;QACT,IAAI8C,IAAI,KAAKmC,SAAS,EAAE;UACpB,IAAIquB,UAAU,EAAE;YACZ,IAAID,SAAS,GAAGD,YAAY,CAAC9wB,IAAI,CAAC,CAAC+wB,SAAS;cACxC5W,UAAU,GAAG+W,aAAa,CAAC3f,KAAK,CAAC4f,KAAK,EAAEnxB,IAAI,CAAC;YACjD8wB,YAAY,CAAC9wB,IAAI,CAAC,CAAC+wB,SAAS,GAAGA,SAAS;YACxCrzB,KAAK,GAAG8C,IAAI,CAACkE,KAAK,CAAC,CAAC,EAAElE,IAAI,CAACpB,OAAO,CAAC+a,UAAU,CAAC+G,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;UAChE,CAAC,MAAM;YACHxjB,KAAK,GAAG8C,IAAI,CAACkE,KAAK,CAAC,CAAC,EAAG0sB,UAAU,CAACH,KAAK,CAAC,IAAIG,UAAU,CAACH,KAAK,CAAC,CAAC,CAAC,CAAC,IAAKA,KAAK,CAACjzB,MAAM,CAAC;UACtF;UACAwC,IAAI,GAAGA,IAAI,CAACkE,KAAK,CAAChH,KAAK,CAACM,MAAM,CAAC;QACnC;QAEA,IAAIf,MAAM,CAACK,SAAS,CAACua,cAAc,CAACpZ,IAAI,CAAC2yB,UAAU,EAAEH,KAAK,CAAC,EAAE;UACzD,IAAI,CAACrpB,QAAQ,CAAC,IAAI,EAAElK,KAAK,EAAEuzB,KAAK,EAAEG,UAAU,CAACH,KAAK,CAAC,CAAC,CAAC,CAAC,EAAEG,UAAU,CAACH,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QACjF;MACJ;IACJ;EAAC;IAAA;IAAA,OAED,kBAASI,OAAO,EAAE3zB,KAAK,EAAEuzB,KAAK,EAAEK,UAAU,EAAEC,aAAa,EAAE;MACvD,IAAI7zB,KAAK,KAAKiF,SAAS,EAAE;QACrB0uB,OAAO,CAACC,UAAU,CAAC,GAAGA,UAAU,KAAK,MAAM,GAAG5zB,KAAK,GAAGA,KAAK,CAAC8D,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC;QACnF6vB,OAAO,CAAC,KAAK,GAAGC,UAAU,CAAC,GAAG5zB,KAAK,CAAC8D,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC;MAC3D;MACA,IAAI+vB,aAAa,KAAK5uB,SAAS,EAAE;QAC7B,IAAI6uB,SAAS,GAAGH,OAAO,CAACC,UAAU,CAAC;QACnC,IAAKA,UAAU,KAAK,KAAK,IAAI9iB,QAAQ,CAACgjB,SAAS,CAAC,KAAK,EAAE,IAAMF,UAAU,KAAK,OAAO,IAAI9iB,QAAQ,CAACgjB,SAAS,CAAC,KAAK,CAAE,EAAE;UAC/G,IAAIhjB,QAAQ,CAAC6iB,OAAO,CAACI,GAAG,CAAC,KAAK,EAAE,IAAIjjB,QAAQ,CAAC6iB,OAAO,CAACK,KAAK,CAAC,KAAK,CAAC,KAAKL,OAAO,CAACM,IAAI,KAAK,EAAE,IAAIN,OAAO,CAACM,IAAI,KAAKhvB,SAAS,CAAC,EAAE;YACtH;YACA0uB,OAAO,CAACV,KAAK,CAACiB,WAAW,CAAC,IAAI,EAAE,CAAC,EAAE,EAAE,CAAC;UAC1C;QACJ;QACA,IAAIN,UAAU,KAAK,KAAK,EAAE;UACtBO,aAAa,GAAG,IAAI;UACpB,IAAIrjB,QAAQ,CAACgjB,SAAS,CAAC,KAAK,CAAC,EACzBA,SAAS,GAAG,CAAC;QACrB;QACA,IAAIF,UAAU,KAAK,OAAO,EACtBO,aAAa,GAAG,IAAI;QACxB,IAAIP,UAAU,KAAK,MAAM,EAAE;UACvBO,aAAa,GAAG,IAAI;UACpB,IAAIL,SAAS,CAACxzB,MAAM,GAAG,CAAC,EACpBwzB,SAAS,GAAGM,GAAG,CAACN,SAAS,EAAE,CAAC,EAAE,IAAI,CAAC;QAC3C;QACA,IAAIA,SAAS,KAAK,EAAE,IAAI,CAAC5W,KAAK,CAAC4W,SAAS,CAAC,EAAED,aAAa,CAAC9yB,IAAI,CAAC4yB,OAAO,CAACV,KAAK,EAAEa,SAAS,CAAC;QACvF,IAAIF,UAAU,KAAK,MAAM,EACrBC,aAAa,CAAC9yB,IAAI,CAAC4yB,OAAO,CAACV,KAAK,EAAEa,SAAS,CAAC;MACpD;IACJ;EAAC;IAAA;IAAA,OAED,iBAAQ;MACJ,IAAI,CAACb,KAAK,GAAG,IAAIC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAClC;EAAC;IAAA;IAAA,OAED,kBAAS;MACL,IAAI,CAACD,KAAK,GAAGhuB,SAAS;MACtB,IAAI,CAACovB,IAAI;IACb;EAAC;EAAA;AAAA;AAGL,IAAIC,WAAW,GAAG,IAAIpB,IAAI,EAAE,CAACqB,WAAW,EAAE;EACtCJ,aAAa,GAAG,KAAK;EACrB;EACA;EACA;EACAT,UAAU,GAAG;IAAE;IACXc,CAAC,EAAE,CAAC,uBAAuB,EAAEtB,IAAI,CAACtzB,SAAS,CAAC60B,OAAO,EAAE,KAAK,EAAEvB,IAAI,CAACtzB,SAAS,CAAC80B,OAAO,CAAC;IAAE;IACrFC,EAAE,EAAE,CAAC,wBAAwB,EAAEzB,IAAI,CAACtzB,SAAS,CAAC60B,OAAO,EAAE,KAAK,EAAE,YAAY;MACtE,OAAOL,GAAG,CAAClB,IAAI,CAACtzB,SAAS,CAAC80B,OAAO,CAAC3zB,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IACpD,CAAC,CAAC;IAAE;IACJ6zB,GAAG,EAAE,CAAC,EAAE,CAAC;IAAE;IACXC,IAAI,EAAE,CAAC,EAAE,CAAC;IAAE;IACZ9G,CAAC,EAAE,CAAC,cAAc,EAAE,UAAU+G,GAAG,EAAE;MAC/B,IAAIC,IAAI,GAAGD,GAAG,GAAGhkB,QAAQ,CAACgkB,GAAG,CAAC,GAAG,CAAC;MAClC,IAAIC,IAAI,GAAG,CAAC,EAAEA,IAAI,EAAE;MACpB,OAAO7B,IAAI,CAACtzB,SAAS,CAACo1B,QAAQ,CAACj0B,IAAI,CAAC,IAAI,EAAEg0B,IAAI,CAAC;IACnD,CAAC,EAAE,OAAO,EAAE,YAAY;MACpB,OAAO7B,IAAI,CAACtzB,SAAS,CAACq1B,QAAQ,CAACl0B,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;IACjD,CAAC,CAAC;IAAE;IACJm0B,EAAE,EAAE,CAAC,eAAe,EAAE,UAAUJ,GAAG,EAAE;MACjC,IAAIC,IAAI,GAAGD,GAAG,GAAGhkB,QAAQ,CAACgkB,GAAG,CAAC,GAAG,CAAC;MAClC,IAAIC,IAAI,GAAG,CAAC,EAAEA,IAAI,EAAE;MACpB,OAAO7B,IAAI,CAACtzB,SAAS,CAACo1B,QAAQ,CAACj0B,IAAI,CAAC,IAAI,EAAEg0B,IAAI,CAAC;IACnD,CAAC,EAAE,OAAO,EAAE,YAAY;MACpB,OAAOX,GAAG,CAAClB,IAAI,CAACtzB,SAAS,CAACq1B,QAAQ,CAACl0B,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;IACzD,CAAC,CAAC;IAAE;IACJo0B,GAAG,EAAE,CAAC,EAAE,CAAC;IAAE;IACXC,IAAI,EAAE,CAAC,EAAE,CAAC;IAAE;IACZC,EAAE,EAAE,CAAC,UAAU,EAAEnC,IAAI,CAACtzB,SAAS,CAACs0B,WAAW,EAAE,MAAM,EAAE,YAAY;MAC7D,OAAOE,GAAG,CAAClB,IAAI,CAACtzB,SAAS,CAAC20B,WAAW,CAACxzB,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IACxD,CAAC,CAAC;IAAE;IACJu0B,IAAI,EAAE,CAAC,UAAU,EAAEpC,IAAI,CAACtzB,SAAS,CAACs0B,WAAW,EAAE,MAAM,EAAE,YAAY;MAC/D,OAAOE,GAAG,CAAClB,IAAI,CAACtzB,SAAS,CAAC20B,WAAW,CAACxzB,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IACxD,CAAC,CAAC;IACFw0B,CAAC,EAAE,CAAC,cAAc,EAAErC,IAAI,CAACtzB,SAAS,CAAC41B,QAAQ,EAAE,OAAO,EAAEtC,IAAI,CAACtzB,SAAS,CAAC61B,QAAQ,CAAC;IAAE;IAChFC,EAAE,EAAE,CAAC,eAAe,EAAExC,IAAI,CAACtzB,SAAS,CAAC41B,QAAQ,EAAE,OAAO,EAAE,YAAY;MAChE,OAAOpB,GAAG,CAAClB,IAAI,CAACtzB,SAAS,CAAC61B,QAAQ,CAAC10B,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IACrD,CAAC,CAAC;IAAE;IACJ40B,EAAE,EAAE,CAAC,UAAUzR,CAAC,EAAE;MACd,uBAAgBA,CAAC;IACrB,CAAC,EAAEgP,IAAI,CAACtzB,SAAS,CAAC41B,QAAQ,EAAE,OAAO,EAAE,UAAUtR,CAAC,EAAE;MAC9C,OAAOgP,IAAI,CAACtzB,SAAS,CAAC61B,QAAQ;IAClC,CAAC,CAAC;IAAE;IACJG,CAAC,EAAE,CAAC,gBAAgB,EAAE1C,IAAI,CAACtzB,SAAS,CAAC41B,QAAQ,EAAE,OAAO,EAAEtC,IAAI,CAACtzB,SAAS,CAAC61B,QAAQ,CAAC;IAAE;IAClFI,EAAE,EAAE,CAAC,sBAAsB,EAAE3C,IAAI,CAACtzB,SAAS,CAAC41B,QAAQ,EAAE,OAAO,EAAE,YAAY;MACvE,OAAOpB,GAAG,CAAClB,IAAI,CAACtzB,SAAS,CAAC61B,QAAQ,CAAC10B,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IACrD,CAAC,CAAC;IAAE;IACJ+0B,EAAE,EAAE,CAAC,UAAU5R,CAAC,EAAE;MACd,uBAAgBA,CAAC;IACrB,CAAC,EAAEgP,IAAI,CAACtzB,SAAS,CAAC41B,QAAQ,EAAE,OAAO,EAAE,UAAUtR,CAAC,EAAE;MAC9C,OAAO,YAAY;QACf,OAAOkQ,GAAG,CAAClB,IAAI,CAACtzB,SAAS,CAAC61B,QAAQ,CAAC10B,IAAI,CAAC,IAAI,CAAC,EAAEmjB,CAAC,CAAC;MACrD,CAAC;IACL,CAAC,CAAC;IAAE;IACJ6R,CAAC,EAAE,CAAC,aAAa,EAAE7C,IAAI,CAACtzB,SAAS,CAACo2B,UAAU,EAAE,SAAS,EAAE9C,IAAI,CAACtzB,SAAS,CAACq2B,UAAU,CAAC;IAAE;IACrFC,EAAE,EAAE,CAAC,2CAA2C,EAAEhD,IAAI,CAACtzB,SAAS,CAACo2B,UAAU,EAAE,SAAS,EAAE,YAAY;MAChG,OAAO5B,GAAG,CAAClB,IAAI,CAACtzB,SAAS,CAACq2B,UAAU,CAACl1B,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IACvD,CAAC,CAAC;IAAE;IACJo1B,CAAC,EAAE,CAAC,aAAa,EAAEjD,IAAI,CAACtzB,SAAS,CAACw2B,UAAU,EAAE,SAAS,EAAElD,IAAI,CAACtzB,SAAS,CAACy2B,UAAU,CAAC;IAAE;IACrFC,EAAE,EAAE,CAAC,2CAA2C,EAAEpD,IAAI,CAACtzB,SAAS,CAACw2B,UAAU,EAAE,SAAS,EAAE,YAAY;MAChG,OAAOhC,GAAG,CAAClB,IAAI,CAACtzB,SAAS,CAACy2B,UAAU,CAACt1B,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IACvD,CAAC,CAAC;IAAE;IACJkY,CAAC,EAAE,CAAC,UAAU,EAAEia,IAAI,CAACtzB,SAAS,CAAC22B,eAAe,EAAE,cAAc,EAAE,YAAY;MACxE,OAAOnC,GAAG,CAAClB,IAAI,CAACtzB,SAAS,CAAC42B,eAAe,CAACz1B,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IAC5D,CAAC,EAAE,CAAC,CAAC;IAAE;IACP01B,CAAC,EAAE,CAAC,UAAU,EAAEvD,IAAI,CAACtzB,SAAS,CAAC22B,eAAe,EAAE,cAAc,EAAE,YAAY;MACxE,OAAOnC,GAAG,CAAClB,IAAI,CAACtzB,SAAS,CAAC42B,eAAe,CAACz1B,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IAC5D,CAAC,EAAE,CAAC,CAAC;IAAE;IACPkd,CAAC,EAAE,CAAC,MAAM,EAAEyY,OAAO,EAAE,MAAM,EAAEC,OAAO,EAAE,CAAC,CAAC;IAAE;IAC1CvhB,EAAE,EAAE,CAAC,OAAO,EAAEshB,OAAO,EAAE,MAAM,EAAEC,OAAO,EAAE,CAAC,CAAC;IAAE;IAC5CC,CAAC,EAAE,CAAC,MAAM,EAAEF,OAAO,EAAE,MAAM,EAAEC,OAAO,EAAE,CAAC,CAAC;IAAE;IAC1CE,EAAE,EAAE,CAAC,OAAO,EAAEH,OAAO,EAAE,MAAM,EAAEC,OAAO,EAAE,CAAC,CAAC;IAAE;IAC5CG,CAAC,EAAE,CAAC,IAAI,EAAE7xB,SAAS,EAAE,GAAG,EAAE8xB,sBAAsB,CAAC;IAAE;IACnD32B,CAAC,EAAE,CAAC,EAAE,CAAC;IAAE;IACT42B,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EACZ,CAAC;EACDC,WAAW,GAAG;IACVC,OAAO,EAAE,YAAY;IAAE;IACvBC,OAAO,EAAE,UAAU;IAAE;IACrBC,WAAW,EAAE,uBAAuB;IAAE;IACtCC,cAAc,EAAE,8BAA8B,CAAC;EACnD,CAAC;;AAEL,SAASX,OAAO,CAAC12B,KAAK,EAAE;EACpB,IAAMs3B,KAAK,GAAG,IAAI,CAAC7B,QAAQ,EAAE;EAC7B,IAAIz1B,KAAK,CAAC6D,WAAW,EAAE,CAAC/D,QAAQ,CAAC,GAAG,CAAC,EAAE;IACnC,IAAI,CAAC01B,QAAQ,CAAC8B,KAAK,GAAG,EAAE,CAAC;IACzB;EACJ,CAAC,MAAM,IAAIt3B,KAAK,CAAC6D,WAAW,EAAE,CAAC/D,QAAQ,CAAC,GAAG,CAAC,IAAIw3B,KAAK,IAAI,EAAE,EAAE;IACzD,IAAI,CAAC9B,QAAQ,CAAC8B,KAAK,GAAG,EAAE,CAAC;EAC7B;AACJ;AAEA,SAASX,OAAO,GAAG;EACf,IAAItC,IAAI,GAAG,IAAI;IACXiD,KAAK,GAAGjD,IAAI,CAACoB,QAAQ,EAAE;EAC3B6B,KAAK,GAAGA,KAAK,IAAI,EAAE;EACnB,OAAOA,KAAK,IAAI,EAAE,GAAG,IAAI,GAAG,IAAI;AACpC;AAEA,SAASP,sBAAsB,GAAG;EAC9B;EACI,IAAA1C,IAAI,GAAG,IAAI;IAAA,uBAAYA,IAAI,CAAClvB,QAAQ,EAAE,CAAC0O,KAAK,CAAC,UAAU,CAAC;IAAvC0jB,EAAE,wBAAL,CAAC;EACnB,IAAIA,EAAE,CAACz3B,QAAQ,CAAC,GAAG,CAAC,EAAE;IAClBy3B,EAAE,GAAGA,EAAE,CAACzzB,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,CAACsb,WAAW,EAAE;IACvCmY,EAAE,GAAGA,EAAE,CAACzvB,KAAK,CAAC,GAAG,CAAC,CAAC0vB,GAAG,CAAC;MAAA;QAAEC,KAAK;MAAA,OAAMA,KAAK;IAAA,EAAC,CAACnzB,IAAI,CAAC,EAAE,CAAC;EACvD;EACA,OAAOizB,EAAE;AACb;AAEA,SAASG,UAAU,CAAC7jB,KAAK,EAAE;EACvB,IAAIyf,UAAU,GAAG,IAAItxB,MAAM,CAAC,OAAO,CAAC,CAAC+uB,IAAI,CAACld,KAAK,CAAC,CAAC,CAAC,CAAC;EACnD,IAAIyf,UAAU,IAAIA,UAAU,CAAC,CAAC,CAAC,KAAKruB,SAAS,EAAE;IAC3C,IAAIsuB,KAAK,GAAGG,UAAU,CAAC7f,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC7M,KAAK,CAAC,EAAE,CAAC;IACnDusB,KAAK,CAAC,CAAC,CAAC,GAAGA,KAAK,CAAC,CAAC,CAAC,CAACD,UAAU,CAAC,CAAC,CAAC,CAAC;IAClCC,KAAK,CAAC,CAAC,CAAC,GAAGA,KAAK,CAAC,CAAC,CAAC,CAACD,UAAU,CAAC,CAAC,CAAC,CAAC;IAElC,OAAOC,KAAK;EAChB,CAAC,MAAM,IAAIG,UAAU,CAAC7f,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE;IAC7B,OAAO6f,UAAU,CAAC7f,KAAK,CAAC,CAAC,CAAC,CAAC;EAC/B;AACJ;AAEA,SAASuf,YAAY,CAAC9wB,IAAI,EAAE;EACxB,IAAI,CAACA,IAAI,CAACosB,SAAS,EAAE;IACjB,IAAIiJ,MAAM,GAAG,EAAE;MAAEC,SAAS,GAAG,EAAE;IAC/B,KAAK,IAAI1wB,GAAG,IAAIwsB,UAAU,EAAE;MACxB,IAAI,OAAO,CAAClxB,IAAI,CAAC0E,GAAG,CAAC,EAAE;QACnB,IAAI2wB,QAAQ,GAAG3wB,GAAG,CAAC,CAAC,CAAC,GAAG,MAAM;QAC9B,IAAI0wB,SAAS,CAACl2B,OAAO,CAACm2B,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE;UACpCD,SAAS,CAAClqB,IAAI,CAACmqB,QAAQ,CAAC;QAC5B;MACJ,CAAC,MAAM,IAAIF,MAAM,CAACj2B,OAAO,CAACwF,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE;QACtCywB,MAAM,CAACjqB,IAAI,CAACxG,GAAG,CAAC,CAAC,CAAC,CAAC;MACvB;IACJ;IACA5E,IAAI,CAACosB,SAAS,GAAG,GAAG,IAAIkJ,SAAS,CAACt3B,MAAM,GAAG,CAAC,GAAGs3B,SAAS,CAACtzB,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC,GAAGqzB,MAAM,CAACrzB,IAAI,CAAC,IAAI,CAAC,GAAG,OAAO;IAC5GhC,IAAI,CAACosB,SAAS,GAAG,IAAI1sB,MAAM,CAACM,IAAI,CAACosB,SAAS,EAAE,GAAG,CAAC;EACpD;EAEA,OAAOpsB,IAAI,CAACosB,SAAS;AACzB;AAEA,SAASoJ,WAAW,CAACC,SAAS,EAAE7zB,aAAa,EAAE5B,IAAI,EAAE;EACjD,IAAIy1B,SAAS,CAAC9D,IAAI,KAAK8D,SAAS,CAACC,OAAO,EAAE;IACtC,IAAIC,SAAS,GAAG3D,WAAW,CAACnvB,QAAQ,EAAE;MAClC+yB,WAAW,GAAGH,SAAS,CAACC,OAAO,CAACl0B,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC;MACtDq0B,eAAe,GAAGF,SAAS,CAACjxB,KAAK,CAAC,CAAC,EAAEkxB,WAAW,CAAC53B,MAAM,CAAC;MACxD83B,mBAAmB,GAAGH,SAAS,CAACjxB,KAAK,CAACkxB,WAAW,CAAC53B,MAAM,CAAC;IAC7D,IAAI43B,WAAW,CAAC53B,MAAM,KAAK,CAAC,IAAI43B,WAAW,KAAKC,eAAe,EAAE;MAC7D,IAAME,gBAAgB,GAAG,IAAInF,IAAI,CAACoB,WAAW,EAAEyD,SAAS,CAAC/D,KAAK,GAAG,CAAC,EAAE+D,SAAS,CAAChE,GAAG,CAAC;MAClF,IAAIgE,SAAS,CAAChE,GAAG,IAAIsE,gBAAgB,CAAC3D,OAAO,EAAE,KAAK,CAACpyB,IAAI,CAAC5B,GAAG,IAAI4B,IAAI,CAAC5B,GAAG,CAAC2zB,IAAI,CAACiE,OAAO,EAAE,IAAID,gBAAgB,CAACC,OAAO,EAAE,CAAC,EAAE;QACrH;QACAP,SAAS,CAAC1D,IAAI,CAACH,WAAW,CAACI,WAAW,CAAC;QACvCyD,SAAS,CAAC9D,IAAI,GAAGgE,SAAS;QAC1B;QACA/zB,aAAa,CAACod,MAAM,GAAG,CAAC;UACpBlf,GAAG,EAAE8B,aAAa,CAAC9B,GAAG,GAAG,CAAC;UAC1B6B,CAAC,EAAEm0B,mBAAmB,CAAC,CAAC;QAC5B,CAAC,EAAE;UACCh2B,GAAG,EAAE8B,aAAa,CAAC9B,GAAG,GAAG,CAAC;UAC1B6B,CAAC,EAAEm0B,mBAAmB,CAAC,CAAC;QAC5B,CAAC,CAAC;MACN;IACJ;EACJ;EAEA,OAAOl0B,aAAa;AACxB;AAEA,SAASq0B,WAAW,CAACR,SAAS,EAAE7zB,aAAa,EAAE5B,IAAI,EAAE;EACjD,IAAI,CAAC6xB,aAAa,EAAE,OAAO,IAAI;EAC/B,IAAI4D,SAAS,CAACS,MAAM,KAAKvzB,SAAS,IAC1B,CAAC4S,QAAQ,CAACkgB,SAAS,CAACS,MAAM,CAAC,IAAI,IAAItF,IAAI,CAAC6E,SAAS,CAAC1D,IAAI,CAACE,WAAW,EAAE,EAAE1c,QAAQ,CAACkgB,SAAS,CAACU,QAAQ,CAAC,GAAGV,SAAS,CAAC/D,KAAK,GAAG+D,SAAS,CAAC1D,IAAI,CAACY,QAAQ,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,CAACP,OAAO,EAAE,IAAIqD,SAAS,CAAChE,GAAI,IACpLgE,SAAS,CAAChE,GAAG,IAAI,IAAI,KAAK,CAAClc,QAAQ,CAACkgB,SAAS,CAACC,OAAO,CAAC,IAAID,SAAS,CAACC,OAAO,KAAK/yB,SAAS,IAAI8yB,SAAS,CAACC,OAAO,KAAK,EAAE,CAAE,IACxH,IAAI9E,IAAI,CAAC6E,SAAS,CAAC1D,IAAI,CAACE,WAAW,EAAE,EAAE1c,QAAQ,CAACkgB,SAAS,CAACU,QAAQ,CAAC,GAAGV,SAAS,CAAC/D,KAAK,GAAG+D,SAAS,CAAC1D,IAAI,CAACY,QAAQ,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,CAACP,OAAO,EAAE,IAAIqD,SAAS,CAAChE,GAAG,EAAE;IACzJ,OAAO7vB,aAAa;EACxB,CAAC,MAAM;IAAE;IACL,IAAI6zB,SAAS,CAAChE,GAAG,IAAI,IAAI,EAAE;MACvB,IAAItX,UAAU,GAAG+W,aAAa,CAACtvB,aAAa,CAAC9B,GAAG,EAAEE,IAAI,CAAC;MACvD,IAAIma,UAAU,CAAC5B,WAAW,CAAC,CAAC,CAAC,KAAK,MAAM,IAAI3W,aAAa,CAAC9B,GAAG,GAAGqa,UAAU,CAACic,gBAAgB,KAAK,CAAC,EAAE;QAC/Fx0B,aAAa,CAACqD,MAAM,GAAGrD,aAAa,CAAC9B,GAAG,GAAG,CAAC;QAC5C,OAAO8B,aAAa;MACxB;IACJ,CAAC,MAAM,IAAI6zB,SAAS,CAAC/D,KAAK,IAAI,IAAI,IAAI+D,SAAS,CAAChE,GAAG,IAAI,IAAI,IAAI7vB,aAAa,CAACD,CAAC,KAAKgB,SAAS,EAAE;MAC1F8yB,SAAS,CAAChE,GAAG,GAAG,IAAI;MACpBgE,SAAS,CAAC1D,IAAI,CAACI,OAAO,CAAC,CAAC,CAAC;MACzBsD,SAAS,CAAC1D,IAAI,CAACW,QAAQ,CAAC,CAAC,CAAC;MAC1B9wB,aAAa,CAACod,MAAM,GAAG,CAAC;QAAClf,GAAG,EAAE8B,aAAa,CAAC9B,GAAG;QAAE6B,CAAC,EAAE;MAAG,CAAC,EAAE;QAAC7B,GAAG,EAAE8B,aAAa,CAAC9B,GAAG,GAAG,CAAC;QAAE6B,CAAC,EAAEC,aAAa,CAACD;MAAC,CAAC,CAAC;MAC3GC,aAAa,CAAC2L,KAAK,GAAGC,qBAAQ,CAAC/O,IAAI,CAAC,IAAI,EAAEmD,aAAa,CAAC9B,GAAG,GAAG,CAAC,CAAC;MAChE,OAAO8B,aAAa;IACxB;IACA,OAAO,KAAK;EAChB;AACJ;AAEA,SAASy0B,aAAa,CAACZ,SAAS,EAAEzrB,MAAM,EAAEhK,IAAI,EAAEH,OAAO,EAAE6e,YAAY,EAAE;EACnE,IAAI,CAAC1U,MAAM,EAAE,OAAOA,MAAM;EAC1B,IAAIA,MAAM,IAAIhK,IAAI,CAAC8a,GAAG,EAAE;IACpB,KAAI,kFAAkF,CAACF,KAAK,CAAC5a,IAAI,CAAC8a,GAAG,CAACiX,IAAI,CAACiE,OAAO,EAAE,CAAC,EAAE;MACnH,IAAIzkB,KAAK;MACTkkB,SAAS,CAACa,KAAK,EAAE;MACjBxF,YAAY,CAAC9wB,IAAI,CAAC,CAAC+wB,SAAS,GAAG,CAAC;MAChC,OAAQxf,KAAK,GAAGuf,YAAY,CAAC9wB,IAAI,CAAC,CAACyuB,IAAI,CAACzuB,IAAI,CAACu2B,WAAW,CAAC,EAAG;QACxD,IAAItF,KAAK;QACT,IAAKA,KAAK,GAAGmE,UAAU,CAAC7jB,KAAK,CAAC,EAAG;UAC7B,IAAI0f,KAAK,CAAC,CAAC,CAAC,EAAE;YACV,IAAIuF,KAAK,GAAGvF,KAAK,CAAC,CAAC,CAAC;YACpB,IAAIwF,OAAO,GAAGhB,SAAS,CAACxE,KAAK,CAAC,CAAC,CAAC,CAAC;cAC7ByF,MAAM,GAAG12B,IAAI,CAAC8a,GAAG,CAACmW,KAAK,CAAC,CAAC,CAAC,CAAC;cAC3B0F,MAAM,GAAG32B,IAAI,CAAC5B,GAAG,GAAG4B,IAAI,CAAC5B,GAAG,CAAC6yB,KAAK,CAAC,CAAC,CAAC,CAAC,GAAGyF,MAAM;cAC/CE,MAAM,GAAG,EAAE;YAEf,IAAIC,iBAAiB,GAAG,KAAK;YAC7B,KAAK,IAAI31B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGw1B,MAAM,CAAC14B,MAAM,EAAEkD,CAAC,EAAE,EAAE;cACpC,IAAIrB,OAAO,CAACoK,cAAc,CAAC/I,CAAC,GAAGqQ,KAAK,CAAC4f,KAAK,CAAC,KAAKxuB,SAAS,IAAI,CAACk0B,iBAAiB,EAAE;gBAC7ED,MAAM,CAAC11B,CAAC,CAAC,GAAGw1B,MAAM,CAACx1B,CAAC,CAAC;gBACrB;gBACA,IAAI+vB,KAAK,CAAC,CAAC,CAAC,KAAK,MAAM,IAAIwF,OAAO,CAACz4B,MAAM,GAAG,CAAC,IAAIkD,CAAC,IAAIw1B,MAAM,IAAIC,MAAM,EAClEC,MAAM,GAAG,CAACpoB,QAAQ,CAACooB,MAAM,CAAC50B,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAEa,QAAQ,EAAE,CAAC2C,KAAK,CAAC,EAAE,CAAC;gBACjE,IAAIyrB,KAAK,CAAC,CAAC,CAAC,KAAK,MAAM,IAAIyF,MAAM,IAAIC,MAAM,IAAI32B,IAAI,CAAC8a,GAAG,CAACiX,IAAI,CAACiE,OAAO,EAAE,GAAGP,SAAS,CAAC1D,IAAI,CAACiE,OAAO,EAAE,EAC7FY,MAAM,CAAC11B,CAAC,CAAC,GAAGy1B,MAAM,CAACz1B,CAAC,CAAC;cAC7B,CAAC,MAAM;gBACH01B,MAAM,CAAC11B,CAAC,CAAC,GAAGu1B,OAAO,CAACv1B,CAAC,CAAC;gBACtB21B,iBAAiB,GAAGA,iBAAiB,IAAIJ,OAAO,CAACv1B,CAAC,CAAC,GAAGw1B,MAAM,CAACx1B,CAAC,CAAC;cACnE;YACJ;YAEAs1B,KAAK,CAAC/3B,IAAI,CAACg3B,SAAS,CAAC9E,KAAK,EAAEiG,MAAM,CAAC50B,IAAI,CAAC,EAAE,CAAC,CAAC;UAChD;QACJ;MACJ;MAEAgI,MAAM,GAAGhK,IAAI,CAAC8a,GAAG,CAACiX,IAAI,CAACiE,OAAO,EAAE,IAAIP,SAAS,CAAC1D,IAAI,CAACiE,OAAO,EAAE;MAC5DP,SAAS,CAACqB,MAAM,EAAE;IACtB;EACJ;EAEA,IAAI9sB,MAAM,IAAIhK,IAAI,CAAC5B,GAAG,EAAE;IACpB,IAAI,CAACwc,KAAK,CAAC5a,IAAI,CAAC5B,GAAG,CAAC2zB,IAAI,CAACiE,OAAO,EAAE,CAAC,EAAE;MACjChsB,MAAM,GAAGhK,IAAI,CAAC5B,GAAG,CAAC2zB,IAAI,CAACiE,OAAO,EAAE,IAAIP,SAAS,CAAC1D,IAAI,CAACiE,OAAO,EAAE;IAChE;EACJ;EACA,OAAOhsB,MAAM;AACjB;;AAEA;AACA;AACA,SAASrB,KAAK,CAACjB,MAAM,EAAEqvB,YAAY,EAAE/2B,IAAI,EAAEg3B,GAAG,EAAE;EAC5C;EACA,IAAIx2B,IAAI,GAAG,EAAE;IAAE+Q,KAAK;IAAE0f,KAAK;EAC3BH,YAAY,CAAC9wB,IAAI,CAAC,CAAC+wB,SAAS,GAAG,CAAC;EAChC,OAAQxf,KAAK,GAAGuf,YAAY,CAAC9wB,IAAI,CAAC,CAACyuB,IAAI,CAAC/mB,MAAM,CAAC,EAAG;IAC9C,IAAIqvB,YAAY,KAAKp0B,SAAS,EAAE;MAC5B,IAAKsuB,KAAK,GAAGmE,UAAU,CAAC7jB,KAAK,CAAC,EAAG;QAC7B/Q,IAAI,IAAI,GAAG,GAAGywB,KAAK,CAAC,CAAC,CAAC,GAAG,GAAG;MAChC,CAAC,MAAM;QACH,QAAQ1f,KAAK,CAAC,CAAC,CAAC;UACZ,KAAK,GAAG;YACJ/Q,IAAI,IAAI,GAAG;YACX;UACJ,KAAK,GAAG;YACJA,IAAI,IAAI,IAAI;YACZ;UACJ;YACIA,IAAI,IAAI,IAAAorB,uBAAW,EAACra,KAAK,CAAC,CAAC,CAAC,CAAC;QAAC;MAE1C;IACJ,CAAC,MAAM;MACH,IAAK0f,KAAK,GAAGmE,UAAU,CAAC7jB,KAAK,CAAC,EAAG;QAC7B,IAAIylB,GAAG,KAAK,IAAI,IAAI/F,KAAK,CAAC,CAAC,CAAC,EAAE;UAC1B,IAAIgG,KAAK,GAAGhG,KAAK,CAAC,CAAC,CAAC;UACpBzwB,IAAI,IAAIy2B,KAAK,CAACx4B,IAAI,CAACs4B,YAAY,CAAChF,IAAI,CAAC;QACzC,CAAC,MAAM,IAAId,KAAK,CAAC,CAAC,CAAC,EAAE;UACjBzwB,IAAI,IAAIu2B,YAAY,CAAC,KAAK,GAAG9F,KAAK,CAAC,CAAC,CAAC,CAAC;QAC1C,CAAC,MAAM;UACHzwB,IAAI,IAAI+Q,KAAK,CAAC,CAAC,CAAC;QACpB;MACJ,CAAC,MAAM;QACH/Q,IAAI,IAAI+Q,KAAK,CAAC,CAAC,CAAC;MACpB;IACJ;EACJ;EACA,OAAO/Q,IAAI;AACf;;AAEA;AACA,SAASsxB,GAAG,CAACU,GAAG,EAAEz0B,GAAG,EAAEm5B,KAAK,EAAE;EAC1B1E,GAAG,GAAGvzB,MAAM,CAACuzB,GAAG,CAAC;EACjBz0B,GAAG,GAAGA,GAAG,IAAI,CAAC;EACd,OAAOy0B,GAAG,CAACx0B,MAAM,GAAGD,GAAG;IAAEy0B,GAAG,GAAG0E,KAAK,GAAG1E,GAAG,GAAG,GAAG,GAAG,GAAG,GAAGA,GAAG;EAAC;EAC7D,OAAOA,GAAG;AACd;AAEA,SAAS1qB,WAAW,CAACtH,IAAI,EAAEkH,MAAM,EAAE1H,IAAI,EAAE;EACrC,IAAI,OAAOQ,IAAI,KAAK,QAAQ,EAAE;IAC1B,OAAO,IAAIkwB,UAAU,CAAClwB,IAAI,EAAEkH,MAAM,EAAE1H,IAAI,CAAC;EAC7C,CAAC,MAAM,IAAIQ,IAAI,IAAI,QAAOA,IAAI,MAAK,QAAQ,IAAIvD,MAAM,CAACK,SAAS,CAACua,cAAc,CAACpZ,IAAI,CAAC+B,IAAI,EAAE,MAAM,CAAC,EAAE;IAC/F,OAAOA,IAAI;EACf;EACA,OAAOmC,SAAS;AACpB;AAEA,SAASw0B,UAAU,CAAC9F,OAAO,EAAErxB,IAAI,EAAE;EAC/B,OAAO2I,KAAK,CAAC3I,IAAI,CAACu2B,WAAW,EAAE;IAACxE,IAAI,EAAEV;EAAO,CAAC,EAAErxB,IAAI,CAAC;AACzD;AAEA,SAASkxB,aAAa,CAACpxB,GAAG,EAAEE,IAAI,EAAE;EAC9B,IAAIo3B,OAAO,GAAG,CAAC;IAAE7e,WAAW;IAAEhH,KAAK;IAAE8lB,WAAW,GAAG,CAAC;EACpDvG,YAAY,CAAC9wB,IAAI,CAAC,CAAC+wB,SAAS,GAAG,CAAC;EAChC,OAAQxf,KAAK,GAAGuf,YAAY,CAAC9wB,IAAI,CAAC,CAACyuB,IAAI,CAACzuB,IAAI,CAACu2B,WAAW,CAAC,EAAG;IACxD,IAAIvF,UAAU,GAAG,IAAItxB,MAAM,CAAC,OAAO,CAAC,CAAC+uB,IAAI,CAACld,KAAK,CAAC,CAAC,CAAC,CAAC;IACnD8lB,WAAW,GAAGrG,UAAU,GAAGxiB,QAAQ,CAACwiB,UAAU,CAAC,CAAC,CAAC,CAAC,GAAGzf,KAAK,CAAC,CAAC,CAAC,CAACvT,MAAM;IACpEo5B,OAAO,IAAIC,WAAW;IACtB,IAAID,OAAO,IAAIt3B,GAAG,GAAG,CAAC,EAAE;MACpByY,WAAW,GAAGhH,KAAK;MACnBA,KAAK,GAAGuf,YAAY,CAAC9wB,IAAI,CAAC,CAACyuB,IAAI,CAACzuB,IAAI,CAACu2B,WAAW,CAAC;MACjD;IACJ;EACJ;EACA,OAAO;IACHH,gBAAgB,EAAEgB,OAAO,GAAGC,WAAW;IACvCnW,SAAS,EAAE3P,KAAK;IAChBgH,WAAW,EAAEA;EACjB,CAAC;AACL;AAGAlZ,qBAAS,CAACc,aAAa,CAAC;EACpB,UAAU,EAAE;IACRK,IAAI,EAAE,cAAUR,IAAI,EAAE;MAClB;MACAA,IAAI,CAACmE,YAAY,GAAG,KAAK;;MAEzB;MACAitB,UAAU,CAACsD,CAAC,GAAG10B,IAAI,CAACs3B,IAAI,CAACC,aAAa,CAACv1B,IAAI,CAAC,GAAG,CAAC;MAEhDhC,IAAI,CAACu2B,WAAW,GAAG5B,WAAW,CAAC30B,IAAI,CAACu2B,WAAW,CAAC,IAAIv2B,IAAI,CAACu2B,WAAW,CAAC,CAAC;MACtEv2B,IAAI,CAACw3B,aAAa,GAAG7C,WAAW,CAAC30B,IAAI,CAACw3B,aAAa,CAAC,IAAIx3B,IAAI,CAACw3B,aAAa,IAAIx3B,IAAI,CAACu2B,WAAW,CAAC,CAAC;MAChGv2B,IAAI,CAACy3B,YAAY,GAAG9C,WAAW,CAAC30B,IAAI,CAACy3B,YAAY,CAAC,IAAIz3B,IAAI,CAACy3B,YAAY,IAAIz3B,IAAI,CAACu2B,WAAW,CAAC,CAAC;MAC7Fv2B,IAAI,CAAC4L,WAAW,GAAG5L,IAAI,CAAC4L,WAAW,KAAK,EAAE,GAAG5L,IAAI,CAAC4L,WAAW,GAAG5L,IAAI,CAACu2B,WAAW,CAAC/0B,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC;MACrGxB,IAAI,CAACI,KAAK,GAAGuI,KAAK,CAAC3I,IAAI,CAACu2B,WAAW,EAAE5zB,SAAS,EAAE3C,IAAI,CAAC;MACrDA,IAAI,CAAC8a,GAAG,GAAGhT,WAAW,CAAC9H,IAAI,CAAC8a,GAAG,EAAE9a,IAAI,CAACu2B,WAAW,EAAEv2B,IAAI,CAAC;MACxDA,IAAI,CAAC5B,GAAG,GAAG0J,WAAW,CAAC9H,IAAI,CAAC5B,GAAG,EAAE4B,IAAI,CAACu2B,WAAW,EAAEv2B,IAAI,CAAC;MACxD,OAAO,IAAI,CAAC,CAAC;IACjB,CAAC;;IACD4L,WAAW,EAAE,EAAE;IAAE;IACjB2qB,WAAW,EAAE,aAAa;IAAE;IAC5BiB,aAAa,EAAE,IAAI;IAAE;IACrBC,YAAY,EAAE,IAAI;IAAE;IACpB3c,GAAG,EAAE,IAAI;IAAE;IACX1c,GAAG,EAAE,IAAI;IAAE;IACXgD,yBAAyB,EAAE,EAAE;IAC7B;IACAk2B,IAAI,EAAE;MACFI,QAAQ,EAAE,CACN,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAC/C,QAAQ,EAAE,SAAS,EAAE,WAAW,EAAE,UAAU,EAAE,QAAQ,EAAE,UAAU,EAAE,QAAQ,CAC/E;MACDC,UAAU,EAAE,CACR,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAClF,SAAS,EAAE,UAAU,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,SAAS,EAAE,UAAU,EAAE,UAAU,CAC3H;MACDJ,aAAa,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI;IAC1C,CAAC;IACD/X,aAAa,EAAE,uBAAUvf,MAAM,EAAEH,GAAG,EAAE6B,CAAC,EAAE0c,WAAW,EAAEre,IAAI,EAAEH,OAAO,EAAEkP,QAAQ,EAAEhP,MAAM,EAAE;MACnF,IAAIA,MAAM,EAAE,OAAO,IAAI;MACvB,IAAI6a,KAAK,CAACjZ,CAAC,CAAC,IAAI1B,MAAM,CAACH,GAAG,CAAC,KAAK6B,CAAC,EAAE;QAC/B,IAAIwY,UAAU,GAAG+W,aAAa,CAACpxB,GAAG,EAAEE,IAAI,CAAC;QACzC,IAAIma,UAAU,CAAC+G,SAAS,IAAI/G,UAAU,CAAC+G,SAAS,CAAC,CAAC,CAAC,KAAKvf,CAAC,IAAIwY,UAAU,CAAC5B,WAAW,CAAC,CAAC,CAAC,CAACva,MAAM,GAAG,CAAC,EAAE;UAC/F,IAAIuB,SAAS,GAAG6xB,UAAU,CAACjX,UAAU,CAAC5B,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;UACxD,IAAI,IAAI7Y,MAAM,CAACH,SAAS,CAAC,CAACW,IAAI,CAAC,GAAG,GAAGD,MAAM,CAACH,GAAG,GAAG,CAAC,CAAC,CAAC,EAAE;YACnDG,MAAM,CAACH,GAAG,CAAC,GAAGG,MAAM,CAACH,GAAG,GAAG,CAAC,CAAC;YAC7BG,MAAM,CAACH,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG;YACrB,OAAO;cACH0T,KAAK,EAAE,IAAI;cACXvT,MAAM,EAAEA,MAAM;cACdgf,iBAAiB,EAAE;gBAAC9f,KAAK,EAAEW,GAAG,GAAG,CAAC;gBAAEoO,GAAG,EAAEpO,GAAG,GAAG;cAAC,CAAC;cACjDA,GAAG,EAAEA,GAAG,GAAG;YACf,CAAC;UACL;QACJ;MACJ;MACA,OAAO,IAAI;IACf,CAAC;IACD4B,cAAc,EAAE,wBAAUzB,MAAM,EAAEH,GAAG,EAAE6B,CAAC,EAAEC,aAAa,EAAE5B,IAAI,EAAEH,OAAO,EAAEE,MAAM,EAAE2e,YAAY,EAAE;MAC1F,IAAM1Z,SAAS,GAAG,IAAI;MAEtB,IAAIjF,MAAM,EAAE,OAAO,IAAI;MACvB,IAAIoa,UAAU,EAAE5a,SAAS;MACzB,IAAIqC,aAAa,KAAK,KAAK,EAAE;QAAE;QAC3BuY,UAAU,GAAG+W,aAAa,CAACpxB,GAAG,GAAG,CAAC,EAAEE,IAAI,CAAC;QACzC,IAAIma,UAAU,CAAC5B,WAAW,IAAI4B,UAAU,CAACic,gBAAgB,KAAKt2B,GAAG,IAAIqa,UAAU,CAAC5B,WAAW,CAAC,CAAC,CAAC,CAACva,MAAM,GAAG,CAAC,IAAIozB,UAAU,CAACjX,UAAU,CAAC5B,WAAW,CAAC,CAAC,CAAC,CAAC,KAAK5V,SAAS,EAAE;UAC9JpD,SAAS,GAAG6xB,UAAU,CAACjX,UAAU,CAAC5B,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACxD,CAAC,MAAM;UACH4B,UAAU,GAAG+W,aAAa,CAACpxB,GAAG,GAAG,CAAC,EAAEE,IAAI,CAAC;UACzC,IAAIma,UAAU,CAAC5B,WAAW,IAAI4B,UAAU,CAACic,gBAAgB,KAAKt2B,GAAG,GAAG,CAAC,IAAIqa,UAAU,CAAC5B,WAAW,CAAC,CAAC,CAAC,CAACva,MAAM,GAAG,CAAC,IAAIozB,UAAU,CAACjX,UAAU,CAAC5B,WAAW,CAAC,CAAC,CAAC,CAAC,KAAK5V,SAAS,EAAE;YAClKpD,SAAS,GAAG6xB,UAAU,CAACjX,UAAU,CAAC5B,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;UACxD;QACJ;QACA,IAAIhZ,SAAS,KAAKoD,SAAS,EAAE;UACzB,IAAI9C,OAAO,CAACoK,cAAc,CAACnK,GAAG,GAAG,CAAC,CAAC,KAAK6C,SAAS,IAAI,IAAIjD,MAAM,CAACH,SAAS,CAAC,CAACW,IAAI,CAACyB,CAAC,GAAG,GAAG,CAAC,EAAE;YACtF1B,MAAM,CAACH,GAAG,CAAC,GAAG6B,CAAC;YACf1B,MAAM,CAACH,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG;YACrB8B,aAAa,GAAG;cACZ;cACA9B,GAAG,EAAEA,GAAG,GAAG,CAAC;cAAE;cACdyN,KAAK,EAAEzN;YACX,CAAC;UACL,CAAC,MAAM,IAAI,IAAIJ,MAAM,CAACH,SAAS,CAAC,CAACW,IAAI,CAAC,GAAG,GAAGyB,CAAC,CAAC,EAAE;YAC5C1B,MAAM,CAACH,GAAG,CAAC,GAAG,GAAG;YACjBG,MAAM,CAACH,GAAG,GAAG,CAAC,CAAC,GAAG6B,CAAC;YACnBC,aAAa,GAAG;cACZ;cACA9B,GAAG,EAAEA,GAAG,GAAG,CAAC,CAAC;YACjB,CAAC;UACL;QACJ;;QAEA,IAAI8B,aAAa,KAAK,KAAK,EAAE,OAAOA,aAAa;MACrD;MAEA,IAAIA,aAAa,CAAC4R,KAAK,EAAE;QACrBvT,MAAM,GAAG2B,aAAa,CAAC3B,MAAM;QAC7BH,GAAG,GAAG8B,aAAa,CAAC9B,GAAG;MAC3B;;MAEA;MACAqa,UAAU,GAAG+W,aAAa,CAACpxB,GAAG,EAAEE,IAAI,CAAC;MACrC,IAAIma,UAAU,CAAC5B,WAAW,IAAI4B,UAAU,CAAC5B,WAAW,CAAC,CAAC,CAAC,IAAI6Y,UAAU,CAACjX,UAAU,CAAC5B,WAAW,CAAC,CAAC,CAAC,CAAC,KAAK5V,SAAS,EAAE;QAC5G,IAAIsuB,KAAK,GAAGG,UAAU,CAACjX,UAAU,CAAC5B,WAAW,CAAC,CAAC,CAAC,CAAC;QACjDhZ,SAAS,GAAG0xB,KAAK,CAAC,CAAC,CAAC;QACpB,IAAI2G,IAAI,GAAG33B,MAAM,CAACyE,KAAK,CAACyV,UAAU,CAACic,gBAAgB,EAAEjc,UAAU,CAACic,gBAAgB,GAAGjc,UAAU,CAAC5B,WAAW,CAAC,CAAC,CAAC,CAACva,MAAM,CAAC;QACpH,IAAI,IAAI0B,MAAM,CAACH,SAAS,CAAC,CAACW,IAAI,CAAC03B,IAAI,CAAC51B,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,KAAK,IAAImY,UAAU,CAAC5B,WAAW,CAAC,CAAC,CAAC,CAACva,MAAM,KAAK,CAAC,IAAI6B,OAAO,CAACoK,cAAc,CAACkQ,UAAU,CAACic,gBAAgB,CAAC,IAAIv2B,OAAO,CAACoK,cAAc,CAACkQ,UAAU,CAACic,gBAAgB,GAAG,CAAC,CAAC,EAAE;UACjNv2B,OAAO,CAACoK,cAAc,CAACkQ,UAAU,CAACic,gBAAgB,GAAG,CAAC,CAAC,CAAC/sB,KAAK,GAAG,GAAG;QACvE;QACA,IAAI4nB,KAAK,CAAC,CAAC,CAAC,IAAI,MAAM,EAAE;UACpB,IAAIhe,OAAO,GAAGnR,gCAAe,CAACrD,IAAI,CAACuG,SAAS,EAAE,KAAK,EAAE,CAAC,EAAErC,SAAS,EAAE,IAAI,CAAC;UACxE,KAAK,IAAIzB,CAAC,GAAGpB,GAAG,GAAG,CAAC,EAAEoB,CAAC,GAAGjB,MAAM,CAACjC,MAAM,EAAEkD,CAAC,EAAE,EAAE;YAC1CjB,MAAM,CAACiB,CAAC,CAAC,GAAG+R,OAAO,CAAC/R,CAAC,CAAC;YACtB,OAAOrB,OAAO,CAACoK,cAAc,CAAC/I,CAAC,CAAC;UACpC;QACJ;MACJ;MAEA,IAAI8I,MAAM,GAAGpI,aAAa;QAAE6zB,SAAS,GAAG3tB,WAAW,CAAC7H,MAAM,CAAC+B,IAAI,CAAC,EAAE,CAAC,EAAEhC,IAAI,CAACu2B,WAAW,EAAEv2B,IAAI,CAAC;MAC5F,IAAIgK,MAAM,IAAI,CAAC4Q,KAAK,CAAC6a,SAAS,CAAC1D,IAAI,CAACiE,OAAO,EAAE,CAAC,EAAE;QAAE;QAC9C,IAAIh2B,IAAI,CAACw1B,WAAW,EAAExrB,MAAM,GAAGwrB,WAAW,CAACC,SAAS,EAAEzrB,MAAM,EAAEhK,IAAI,CAAC;QACnEgK,MAAM,GAAGisB,WAAW,CAACx3B,IAAI,CAACuG,SAAS,EAAEywB,SAAS,EAAEzrB,MAAM,EAAEhK,IAAI,CAAC;QAC7DgK,MAAM,GAAGqsB,aAAa,CAACZ,SAAS,EAAEzrB,MAAM,EAAEhK,IAAI,EAAEH,OAAO,EAAE6e,YAAY,CAAC;MAC1E;MAEA,IAAI5e,GAAG,KAAK6C,SAAS,IAAIqH,MAAM,IAAIpI,aAAa,CAAC9B,GAAG,KAAKA,GAAG,EAAE;QAC1D,OAAO;UACHG,MAAM,EAAE0I,KAAK,CAAC3I,IAAI,CAACu2B,WAAW,EAAEd,SAAS,EAAEz1B,IAAI,CAAC,CAACwF,KAAK,CAAC,EAAE,CAAC;UAC1DyZ,iBAAiB,EAAE;YAAC9f,KAAK,EAAEW,GAAG;YAAEoO,GAAG,EAAEtM,aAAa,CAAC9B;UAAG,CAAC;UACvDA,GAAG,EAAE8B,aAAa,CAAC2L,KAAK,IAAI3L,aAAa,CAAC9B,GAAG,CAAC;QAClD,CAAC;MACL;;MAEA,OAAOkK,MAAM;IACjB,CAAC;IACDyX,SAAS,EAAE,mBAAUziB,CAAC,EAAEiB,MAAM,EAAE8O,QAAQ,EAAE/O,IAAI,EAAE;MAC5C,IAAIqJ,KAAK,GAAG,IAAI;MAChB,IAAIrK,CAAC,CAAC2iB,OAAO,IAAI3iB,CAAC,CAAC4O,GAAG,KAAK/O,aAAI,CAAC2jB,UAAU,EAAE;QACxCnZ,KAAK,CAACrE,SAAS,CAACe,SAAS,CAACoxB,UAAU,CAAC,IAAIvG,IAAI,EAAE,EAAE5wB,IAAI,CAAC,CAAC;QACvDyC,CAAC,CAAC4G,KAAK,CAAC,CAACxB,OAAO,CAAC,UAAU,CAAC;MAChC;IACJ,CAAC;IACDnH,QAAQ,EAAE,kBAAUC,WAAW,EAAEC,aAAa,EAAEZ,IAAI,EAAE;MAClD,OAAOY,aAAa,GAAG+H,KAAK,CAAC3I,IAAI,CAACy3B,YAAY,EAAE3vB,WAAW,CAACnH,WAAW,EAAEX,IAAI,CAACu2B,WAAW,EAAEv2B,IAAI,CAAC,EAAEA,IAAI,EAAE,IAAI,CAAC,GAAGY,aAAa;IACjI,CAAC;IACDpB,MAAM,EAAE,gBAAUsK,IAAI,EAAE5J,IAAI,EAAEJ,GAAG,EAAEmK,cAAc,EAAE;MAC/C,IAAI/J,IAAI,CAACiV,SAAS,CAAC/V,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,OAAO0K,IAAI,CAACvI,WAAW,EAAE;MAClE,IAAIrB,IAAI,CAACiV,SAAS,CAAC/V,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,OAAO0K,IAAI,CAACgT,WAAW,EAAE;MAClE,OAAOhT,IAAI;IACf,CAAC;IACDvE,YAAY,EAAE,sBAAUsyB,YAAY,EAAE73B,IAAI,EAAE;MACxC,IAAI/C,MAAM,CAACK,SAAS,CAACuF,QAAQ,CAACpE,IAAI,CAACo5B,YAAY,CAAC,KAAK,eAAe,EAAE;QAClEA,YAAY,GAAGV,UAAU,CAACU,YAAY,EAAE73B,IAAI,CAAC;MACjD;MAEA,OAAO63B,YAAY;IACvB,CAAC;IACD7oB,UAAU,EAAE,KAAK;IACjB/C,gBAAgB,EAAE,KAAK;IACvBkU,cAAc,EAAE,KAAK;IACrB7f,UAAU,EAAE,KAAK;IACjBO,SAAS,EAAE,SAAS;IACpB20B,WAAW,EAAE,IAAI,CAAC;EACtB;AACJ,CAAC,CAAC;;;;;;;;ACtkBF;AACA;AACA;AACA;AAAgC;AAThC;AACA;AACA;AACA;AACA;AACA;;AAMA,IAAM/yB,CAAC,GAAGpD,qBAAS,CAACmD,aAAa;AAEjC,SAASs1B,UAAU,CAACC,GAAG,EAAE/3B,IAAI,EAAE;EAC9B,IAAIg4B,UAAU,GAAG,EAAE;EACnB,KAAK,IAAI92B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG62B,GAAG,CAAC/5B,MAAM,EAAEkD,CAAC,EAAE,EAAE;IACpC,IAAI7B,qBAAS,CAAC/B,SAAS,CAACmD,WAAW,CAACs3B,GAAG,CAACnjB,MAAM,CAAC1T,CAAC,CAAC,CAAC,IACjDlB,IAAI,CAACS,WAAW,CAACs3B,GAAG,CAACnjB,MAAM,CAAC1T,CAAC,CAAC,CAAC,IAC/BlB,IAAI,CAACiuB,cAAc,CAAC,CAAC,CAAC,KAAK8J,GAAG,CAACnjB,MAAM,CAAC1T,CAAC,CAAC,IACxClB,IAAI,CAACiuB,cAAc,CAAC,CAAC,CAAC,KAAK8J,GAAG,CAACnjB,MAAM,CAAC1T,CAAC,CAAC,IACxClB,IAAI,CAACqrB,gBAAgB,CAAC,CAAC,CAAC,KAAK0M,GAAG,CAACnjB,MAAM,CAAC1T,CAAC,CAAC,IAC1ClB,IAAI,CAACqrB,gBAAgB,CAAC,CAAC,CAAC,KAAK0M,GAAG,CAACnjB,MAAM,CAAC1T,CAAC,CAAC,IAC1ClB,IAAI,CAACorB,WAAW,CAAC,CAAC,CAAC,KAAK2M,GAAG,CAACnjB,MAAM,CAAC1T,CAAC,CAAC,IACrClB,IAAI,CAACorB,WAAW,CAAC,CAAC,CAAC,KAAK2M,GAAG,CAACnjB,MAAM,CAAC1T,CAAC,CAAC,IACrClB,IAAI,CAACmsB,gBAAgB,KAAK4L,GAAG,CAACnjB,MAAM,CAAC1T,CAAC,CAAC,EAAE;MACzC82B,UAAU,IAAI,IAAI,GAAGD,GAAG,CAACnjB,MAAM,CAAC1T,CAAC,CAAC;IACnC,CAAC,MAAM;MACN82B,UAAU,IAAID,GAAG,CAACnjB,MAAM,CAAC1T,CAAC,CAAC;IAC5B;EACD;EACA,OAAO82B,UAAU;AAClB;AAEA,SAASC,WAAW,CAACh4B,MAAM,EAAEqS,MAAM,EAAEtS,IAAI,EAAEk4B,KAAK,EAAE;EACjD,IAAIj4B,MAAM,CAACjC,MAAM,GAAG,CAAC,IAAIsU,MAAM,GAAG,CAAC,KAAK,CAACtS,IAAI,CAACm4B,cAAc,IAAID,KAAK,CAAC,EAAE;IACvE,IAAIE,aAAa,GAAGn4B,MAAM,CAACb,OAAO,CAACY,IAAI,CAACqS,UAAU,CAAC;MAAEgmB,YAAY,GAAG,KAAK;IACzE,IAAIr4B,IAAI,CAACs4B,cAAc,CAACC,IAAI,KAAKt4B,MAAM,CAACA,MAAM,CAACjC,MAAM,GAAG,CAAC,CAAC,EAAE;MAC3Dq6B,YAAY,GAAG,IAAI;MACnBp4B,MAAM,CAACjC,MAAM,EAAE;IAChB;IAEA,IAAIo6B,aAAa,KAAK,CAAC,CAAC,EAAE;MACzBn4B,MAAM,CAACmL,IAAI,CAACpL,IAAI,CAACqS,UAAU,CAAC;MAC5B+lB,aAAa,GAAGn4B,MAAM,CAACjC,MAAM,GAAG,CAAC;IAClC;IACA,KAAK,IAAIkD,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAIoR,MAAM,EAAEpR,CAAC,EAAE,EAAE;MACjC,IAAI,CAACqU,QAAQ,CAACtV,MAAM,CAACm4B,aAAa,GAAGl3B,CAAC,CAAC,CAAC,EAAE;QACzCjB,MAAM,CAACm4B,aAAa,GAAGl3B,CAAC,CAAC,GAAG,GAAG;MAChC;IACD;EACD;EAEA,IAAIm3B,YAAY,EACfp4B,MAAM,CAACmL,IAAI,CAACpL,IAAI,CAACs4B,cAAc,CAACC,IAAI,CAAC;EACtC,OAAOt4B,MAAM;AACd;AAEA,SAASu4B,aAAa,CAACC,MAAM,EAAE54B,OAAO,EAAE;EACvC,IAAI64B,MAAM,GAAG,CAAC;EACd,IAAID,MAAM,KAAK,GAAG,EAAE;IACnBC,MAAM,GAAGlrB,qBAAQ,CAAC/O,IAAI,CAAC,IAAI,EAAEoB,OAAO,CAACoK,cAAc,CAACjM,MAAM,GAAG,CAAC,CAAC;EAChE;EACA,KAAK,IAAI26B,MAAM,IAAI94B,OAAO,CAAC8T,KAAK,EAAE;IACjCglB,MAAM,GAAGnqB,QAAQ,CAACmqB,MAAM,CAAC;IACzB,IAAIA,MAAM,IAAID,MAAM,EAAE;MACrB,KAAK,IAAI9zB,GAAG,GAAG,CAAC,EAAEg0B,IAAI,GAAG/4B,OAAO,CAAC8T,KAAK,CAACglB,MAAM,CAAC,CAAC36B,MAAM,EAAE4G,GAAG,GAAGg0B,IAAI,EAAEh0B,GAAG,EAAE,EAAE;QACzE,IAAI,CAAC/E,OAAO,CAACoK,cAAc,CAAC0uB,MAAM,CAAC,KAAKh2B,SAAS,IAAI81B,MAAM,KAAK,GAAG,KAAK54B,OAAO,CAAC8T,KAAK,CAACglB,MAAM,CAAC,CAAC/zB,GAAG,CAAC,CAAC2M,KAAK,CAACM,GAAG,KAAK4mB,MAAM,EAAE;UACxH,OAAOE,MAAM,IAAK94B,OAAO,CAACoK,cAAc,CAAC0uB,MAAM,CAAC,KAAKh2B,SAAS,IAAI81B,MAAM,KAAK,GAAG,GAAI,CAAC,GAAG,CAAC,CAAC;QAC3F;MACD;IACD;EACD;EACA,OAAOC,MAAM;AACd;AAEA,SAASG,SAAS,CAACJ,MAAM,EAAE54B,OAAO,EAAE;EACnC,IAAIi5B,GAAG,GAAG,CAAC,CAAC;EACZ,KAAK,IAAIl0B,GAAG,GAAG,CAAC,EAAE8N,GAAG,GAAG7S,OAAO,CAACoK,cAAc,CAACjM,MAAM,EAAE4G,GAAG,GAAG8N,GAAG,EAAE9N,GAAG,EAAE,EAAE;IACxE,IAAIwP,GAAG,GAAGvU,OAAO,CAACoK,cAAc,CAACrF,GAAG,CAAC;IACrC,IAAIwP,GAAG,IAAIA,GAAG,CAAC7C,KAAK,CAACM,GAAG,KAAK4mB,MAAM,EAAE;MACpCK,GAAG,GAAGl0B,GAAG;MACT;IACD;EACD;EACA,OAAOk0B,GAAG;AACX;AAEA,SAASC,kBAAkB,CAAC/4B,IAAI,EAAE;EACjC,IAAIA,IAAI,CAAC+4B,kBAAkB,KAAKp2B,SAAS,EAAE;IAC1C;IACA,IAAI3C,IAAI,CAAC8a,GAAG,KAAK,IAAI,EAAE;MACtB9a,IAAI,CAAC8a,GAAG,GAAG9a,IAAI,CAAC8a,GAAG,CAACjY,QAAQ,EAAE,CAACrB,OAAO,CAAC,IAAI9B,MAAM,CAAC,IAAAksB,uBAAW,EAAC5rB,IAAI,CAACsV,cAAc,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE,CAAC;MAC7F,IAAItV,IAAI,CAACqS,UAAU,KAAK,GAAG,EAAErS,IAAI,CAAC8a,GAAG,GAAG9a,IAAI,CAAC8a,GAAG,CAACtZ,OAAO,CAACxB,IAAI,CAACqS,UAAU,EAAE,GAAG,CAAC;MAC9ErS,IAAI,CAAC8a,GAAG,GAAGvF,QAAQ,CAACvV,IAAI,CAAC8a,GAAG,CAAC,GAAGke,UAAU,CAACh5B,IAAI,CAAC8a,GAAG,CAAC,GAAGme,GAAG;MAC1D,IAAIre,KAAK,CAAC5a,IAAI,CAAC8a,GAAG,CAAC,EAAE9a,IAAI,CAAC8a,GAAG,GAAGoe,MAAM,CAACC,SAAS;IACjD;IACA,IAAIn5B,IAAI,CAAC5B,GAAG,KAAK,IAAI,EAAE;MACtB4B,IAAI,CAAC5B,GAAG,GAAG4B,IAAI,CAAC5B,GAAG,CAACyE,QAAQ,EAAE,CAACrB,OAAO,CAAC,IAAI9B,MAAM,CAAC,IAAAksB,uBAAW,EAAC5rB,IAAI,CAACsV,cAAc,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE,CAAC;MAC7F,IAAItV,IAAI,CAACqS,UAAU,KAAK,GAAG,EAAErS,IAAI,CAAC5B,GAAG,GAAG4B,IAAI,CAAC5B,GAAG,CAACoD,OAAO,CAACxB,IAAI,CAACqS,UAAU,EAAE,GAAG,CAAC;MAC9ErS,IAAI,CAAC5B,GAAG,GAAGmX,QAAQ,CAACvV,IAAI,CAAC5B,GAAG,CAAC,GAAG46B,UAAU,CAACh5B,IAAI,CAAC5B,GAAG,CAAC,GAAG66B,GAAG;MAC1D,IAAIre,KAAK,CAAC5a,IAAI,CAAC5B,GAAG,CAAC,EAAE4B,IAAI,CAAC5B,GAAG,GAAG86B,MAAM,CAACE,SAAS;IACjD;IACAp5B,IAAI,CAAC+4B,kBAAkB,GAAG,MAAM;EACjC;AACD;AAEA,SAASM,OAAO,CAACr5B,IAAI,EAAE;EACtBA,IAAI,CAACie,MAAM,GAAG,CAAC;EACf;EACA,IAAIje,IAAI,CAACsV,cAAc,KAAKtV,IAAI,CAACqS,UAAU,IAAIrS,IAAI,CAACsS,MAAM,IAAItS,IAAI,CAACsS,MAAM,KAAK,GAAG,EAAE;IAClF,IAAItS,IAAI,CAACqS,UAAU,KAAK,GAAG,EAAE;MAC5BrS,IAAI,CAACsV,cAAc,GAAG,GAAG;IAC1B,CAAC,MAAM,IAAItV,IAAI,CAACqS,UAAU,KAAK,GAAG,EAAE;MACnCrS,IAAI,CAACsV,cAAc,GAAG,GAAG;IAC1B,CAAC,MAAM;MACNtV,IAAI,CAACsV,cAAc,GAAG,EAAE;IACzB;EACD;EACA;EACA,IAAItV,IAAI,CAACsV,cAAc,KAAK,GAAG,EAAE;IAChCtV,IAAI,CAACoB,yBAAyB,GAAGuB,SAAS;EAC3C;;EAEA;EACA,IAAI3C,IAAI,CAAC4L,WAAW,CAAC5N,MAAM,GAAG,CAAC,EAAE;IAChCgC,IAAI,CAAC4L,WAAW,GAAG5L,IAAI,CAAC4L,WAAW,CAACgJ,MAAM,CAAC,CAAC,CAAC;EAC9C;EACA;EACA,IAAI5U,IAAI,CAACkS,oBAAoB,KAAK,YAAY,IAAIlS,IAAI,CAAC4L,WAAW,KAAK,EAAE,EAAE;IAC1E5L,IAAI,CAACkS,oBAAoB,GAAG,KAAK;EAClC;EAEA,IAAIonB,UAAU,GAAG,GAAG;IAAEC,aAAa,GAAGv5B,IAAI,CAACqS,UAAU;EACrD,IAAIrS,IAAI,CAACmE,YAAY,KAAK,IAAI,IAAInE,IAAI,CAACqmB,cAAc,KAAK1jB,SAAS,EAAE;IAAE;IACtE22B,UAAU,GAAG,GAAG;IAChBt5B,IAAI,CAACkS,oBAAoB,GAAGlS,IAAI,CAACkS,oBAAoB,KAAK,YAAY,GAAG,KAAK,GAAGlS,IAAI,CAACkS,oBAAoB;IAC1GlS,IAAI,CAACm4B,cAAc,GAAG,KAAK;IAC3B,IAAIvd,KAAK,CAAC5a,IAAI,CAACsS,MAAM,CAAC,EAAEtS,IAAI,CAACsS,MAAM,GAAG,CAAC;IACvCtS,IAAI,CAACovB,WAAW,GAAG,KAAK;IACxBmK,aAAa,GAAIv5B,IAAI,CAACqS,UAAU,KAAK,GAAG,GAAG,GAAG,GAAG,GAAI;IACrD,IAAIrS,IAAI,CAACqS,UAAU,KAAK,EAAE,IAAIrS,IAAI,CAACS,WAAW,CAAC84B,aAAa,CAAC,KAAK52B,SAAS,EAAE;MAC5E;MACA3C,IAAI,CAACS,WAAW,CAAC84B,aAAa,CAAC,GAAG,CAAC,CAAC;MACpCv5B,IAAI,CAACS,WAAW,CAAC84B,aAAa,CAAC,CAACh6B,SAAS,GAAG,GAAG,GAAGS,IAAI,CAACqS,UAAU,GAAG,GAAG;MACvErS,IAAI,CAACS,WAAW,CAAC84B,aAAa,CAAC,CAAC3tB,WAAW,GAAG5L,IAAI,CAACqS,UAAU;MAC7DrS,IAAI,CAACS,WAAW,CAAC84B,aAAa,CAAC,UAAO,GAAG,IAAI;MAC7Cv5B,IAAI,CAACS,WAAW,CAAC84B,aAAa,CAAC,CAAChM,SAAS,GAAG,IAAI,CAAC,CAAC;IACnD;EACD,CAAC,MAAM;IACNvtB,IAAI,CAACqmB,cAAc,GAAG,KAAK,CAAC,CAAC;IAC7BrmB,IAAI,CAACmE,YAAY,GAAG,IAAI;EACzB;EAEA,IAAI3D,IAAI,GAAG,KAAK;IAAEyrB,OAAO;EACzBzrB,IAAI,IAAIs3B,UAAU,CAAC93B,IAAI,CAACw5B,MAAM,EAAEx5B,IAAI,CAAC;EACrC,IAAIA,IAAI,CAACsV,cAAc,KAAK,EAAE,EAAE;IAC/B,IAAItV,IAAI,CAACS,WAAW,CAACT,IAAI,CAACsV,cAAc,CAAC,KAAK3S,SAAS,EAAE;MACxD;MACA3C,IAAI,CAACS,WAAW,CAACT,IAAI,CAACsV,cAAc,CAAC,GAAG,CAAC,CAAC;MAC1CtV,IAAI,CAACS,WAAW,CAACT,IAAI,CAACsV,cAAc,CAAC,CAAC/V,SAAS,GAAG,GAAG,GAAGS,IAAI,CAACsV,cAAc,GAAG,GAAG;MACjFtV,IAAI,CAACS,WAAW,CAACT,IAAI,CAACsV,cAAc,CAAC,CAAC1J,WAAW,GAAG5L,IAAI,CAACsV,cAAc;MACvEtV,IAAI,CAACS,WAAW,CAACT,IAAI,CAACsV,cAAc,CAAC,UAAO,GAAG,IAAI;MACnDtV,IAAI,CAACS,WAAW,CAACT,IAAI,CAACsV,cAAc,CAAC,CAACiY,SAAS,GAAG,IAAI,CAAC,CAAC;IACzD;;IACA/sB,IAAI,IAAIR,IAAI,CAACy5B,KAAK,CAACz5B,IAAI,CAAC;EACzB,CAAC,MAAM;IACNQ,IAAI,IAAI,MAAM;EACf;EACA,IAAIR,IAAI,CAACsS,MAAM,KAAK3P,SAAS,IAAI3C,IAAI,CAACsS,MAAM,KAAK,CAAC,EAAE;IACnD,IAAIonB,EAAE,GAAG15B,IAAI,CAACsS,MAAM,CAACzP,QAAQ,EAAE,CAAC2C,KAAK,CAAC,GAAG,CAAC;IAC1C,IAAI+P,QAAQ,CAACmkB,EAAE,CAAC,CAAC,CAAC,CAAC,IAAIA,EAAE,CAAC,CAAC,CAAC,IAAInkB,QAAQ,CAACmkB,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE;MAChDl5B,IAAI,IAAI+4B,aAAa,GAAGD,UAAU,GAAG,GAAG,GAAGt5B,IAAI,CAACsS,MAAM,GAAG,GAAG;IAC7D,CAAC,MAAM,IAAIsI,KAAK,CAAC5a,IAAI,CAACsS,MAAM,CAAC,IAAI9D,QAAQ,CAACxO,IAAI,CAACsS,MAAM,CAAC,GAAG,CAAC,EAAE;MAC3D,IAAItS,IAAI,CAACm4B,cAAc,IAAIn4B,IAAI,CAACoV,UAAU,EAAE;QAC3C6W,OAAO,GAAGzrB,IAAI,GAAG+4B,aAAa,GAAGD,UAAU,GAAG,KAAK,GAAGt5B,IAAI,CAACsS,MAAM,GAAG,GAAG;QACvE;QACAtS,IAAI,CAACM,UAAU,GAAG,IAAI;MACvB,CAAC,MAAM;QACNE,IAAI,IAAI+4B,aAAa,GAAGD,UAAU,GAAG,GAAG,GAAGt5B,IAAI,CAACsS,MAAM,GAAG,GAAG;MAC7D;IACD;EACD,CAAC,MAAM;IACNtS,IAAI,CAACa,SAAS,GAAG,SAAS;EAC3B;EACAL,IAAI,IAAIs3B,UAAU,CAAC93B,IAAI,CAAC25B,MAAM,EAAE35B,IAAI,CAAC;EACrCQ,IAAI,IAAI,KAAK;EAEb,IAAIyrB,OAAO,EAAE;IACZzrB,IAAI,GAAG,CAAEyrB,OAAO,GAAG6L,UAAU,CAAC93B,IAAI,CAAC25B,MAAM,EAAE35B,IAAI,CAAC,GAAG,KAAK,EAAGQ,IAAI,CAAC;EACjE;EAGAR,IAAI,CAACmB,MAAM,GAAG,KAAK,CAAC,CAAC;;EAErB43B,kBAAkB,CAAC/4B,IAAI,CAAC;EACxB,IAAIA,IAAI,CAACqS,UAAU,KAAK,EAAE,IAAIrS,IAAI,CAAC45B,oBAAoB,EACtD55B,IAAI,CAACc,WAAW,CAACd,IAAI,CAACqS,UAAU,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,GAAGrS,IAAI,CAACqS,UAAU;EACvE;EACA,OAAO7R,IAAI;AACZ;AAEA,SAASq5B,iBAAiB,CAAC/5B,GAAG,EAAE6B,CAAC,EAAE6Q,QAAQ,EAAE3S,OAAO,EAAEG,IAAI,EAAE;EAC3D,IAAIA,IAAI,CAACovB,WAAW,IAAIpvB,IAAI,CAACmE,YAAY,IAAIxC,CAAC,KAAK3B,IAAI,CAACs4B,cAAc,CAACC,IAAI,EAAE;IAC5E,IAAIz4B,GAAG,IAAI0S,QAAQ,KAAKA,QAAQ,GAAG,CAAC,IAAI7Q,CAAC,IAAI3B,IAAI,CAACqS,UAAU,CAAC,KAAKxS,OAAO,CAACoK,cAAc,CAACnK,GAAG,GAAG,CAAC,CAAC,KAAK6C,SAAS,IAAI9C,OAAO,CAACoK,cAAc,CAACnK,GAAG,GAAG,CAAC,CAAC,CAACuJ,KAAK,KAAKrJ,IAAI,CAACs4B,cAAc,CAACC,IAAI,CAAC,EAAE;MACvLz4B,GAAG,IAAI,CAAC;IACT;EACD;EACA,OAAOA,GAAG;AACX;AAEA,SAASg6B,gBAAgB,CAACl6B,IAAI,EAAEC,OAAO,EAAEC,GAAG,EAAEC,MAAM,EAAEC,IAAI,EAAE;EAC3D,IAAIwS,QAAQ,GAAG3S,OAAO,CAACI,MAAM,GAAGJ,OAAO,CAACI,MAAM,CAACb,OAAO,CAACY,IAAI,CAACqS,UAAU,CAAC,GAAG,CAAC,CAAC;IAC3ErI,MAAM,GAAG,CAACwI,QAAQ,KAAK,CAAC,CAAC,IAAKzS,MAAM,IAAIC,IAAI,CAACoV,UAAW,KAAK,IAAI1V,MAAM,CAACM,IAAI,CAACS,WAAW,CAAC,GAAG,CAAC,CAAClB,SAAS,CAAC,CAACW,IAAI,CAACN,IAAI,CAAC;EACpH,IAAII,IAAI,CAACovB,WAAW,IAAI5c,QAAQ,KAAK,CAAC,CAAC,IAAIxI,MAAM,IAAInK,OAAO,CAACoK,cAAc,CAACuI,QAAQ,CAAC,IAAI7P,SAAS,EAAE;IACnG,OAAO;MACNqc,MAAM,EAAE;QACPlf,GAAG,EAAE0S,QAAQ,KAAK1S,GAAG,GAAG0S,QAAQ,GAAG,CAAC,GAAGA,QAAQ;QAC/C7Q,CAAC,EAAE3B,IAAI,CAACqS;MACT,CAAC;MACDvS,GAAG,EAAEA;IACN,CAAC;EACF;EAEA,OAAOkK,MAAM;AACd;AAEA,SAAS+vB,qBAAqB,CAAC95B,MAAM,EAAED,IAAI,EAAE;EAC5C;EACA,IAAIg6B,aAAa,GAAG,IAAIt6B,MAAM,CAAC,IAAI,IAAIM,IAAI,CAACs4B,cAAc,CAAC2B,KAAK,KAAK,EAAE,GAAG,IAAArO,uBAAW,EAAC5rB,IAAI,CAACs4B,cAAc,CAAC2B,KAAK,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC,GAAG,IAAArO,uBAAW,EAAC5rB,IAAI,CAACw5B,MAAM,CAAC,GAAG,QAAQ,GAAG,IAAA5N,uBAAW,EAAC5rB,IAAI,CAAC25B,MAAM,CAAC,IAAI35B,IAAI,CAACs4B,cAAc,CAACC,IAAI,IAAI,EAAE,GAAG,IAAA3M,uBAAW,EAAC5rB,IAAI,CAACs4B,cAAc,CAACC,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC,GAAG,IAAI,CAAC,CAAC9J,IAAI,CAACxuB,MAAM,CAACyE,KAAK,EAAE,CAACmC,OAAO,EAAE,CAAC7E,IAAI,CAAC,EAAE,CAAC,CAAC;IAClUk4B,MAAM,GAAGF,aAAa,GAAGA,aAAa,CAAC,CAAC,CAAC,GAAG,EAAE;IAAEG,aAAa,GAAG,KAAK;EACtE,IAAID,MAAM,EAAE;IACXA,MAAM,GAAGA,MAAM,CAAC10B,KAAK,CAACxF,IAAI,CAACqS,UAAU,CAACuC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACnDulB,aAAa,GAAG,IAAIz6B,MAAM,CAAC,KAAK,GAAGM,IAAI,CAACsV,cAAc,GAAG,IAAI,CAAC,CAACmZ,IAAI,CAACyL,MAAM,CAAC;EAC5E;EACA,OAAOC,aAAa,KAAKA,aAAa,CAAC,CAAC,CAAC,CAACn8B,MAAM,GAAG,CAAC,IAAIm8B,aAAa,CAAC,CAAC,CAAC,CAACn8B,MAAM,GAAG,CAAC,IAAIm8B,aAAa,CAAC,CAAC,CAAC,CAACn8B,MAAM,GAAGk8B,MAAM,CAACl8B,MAAM,CAAC,GAAGm8B,aAAa,GAAG,KAAK;AACxJ;;AAEA;AACA96B,qBAAS,CAACc,aAAa,CAAC;EACvB,SAAS,EAAE;IACVK,IAAI,EAAE64B,OAAO;IACbI,KAAK,EAAE,eAAUz5B,IAAI,EAAE;MACtB,OAAO,GAAG,GAAGA,IAAI,CAACsV,cAAc,GAAG,WAAW;IAC/C,CAAC;IACDhD,MAAM,EAAE,GAAG;IAAE;IACb6lB,cAAc,EAAE,IAAI;IACpBiC,mBAAmB,EAAE,KAAK;IAC1B/nB,UAAU,EAAE,GAAG;IACfH,oBAAoB,EAAE,YAAY;IAClCkd,WAAW,EAAE,IAAI;IACjB9Z,cAAc,EAAE,EAAE;IAClB+kB,UAAU,EAAE,IAAI;IAChB/B,cAAc,EAAE;MACf2B,KAAK,EAAE,GAAG;MAAE;MACZ1B,IAAI,EAAE,EAAE,CAAC;IACV,CAAC;;IACDiB,MAAM,EAAE,EAAE;IACVG,MAAM,EAAE,EAAE;IACV7e,GAAG,EAAE,IAAI;IAAE;IACX1c,GAAG,EAAE,IAAI;IAAE;IACXk8B,gBAAgB,EAAE,KAAK;IACvBC,IAAI,EAAE,CAAC;IACPhW,SAAS,EAAE,MAAM;IAAE;IACnBiW,cAAc,EAAE,KAAK;IACrBC,UAAU,EAAEt8B,IAAI,CAACu8B,KAAK;IAAE;IACxB75B,SAAS,EAAE,SAAS;IACpB85B,SAAS,EAAE;MAACz8B,CAAC,EAAE,MAAM;MAAEutB,CAAC,EAAE;IAAS,CAAC;IACpC;IACA7f,WAAW,EAAE,GAAG;IAChBzK,MAAM,EAAE,KAAK;IACb0H,UAAU,EAAE,IAAI;IAChBmG,UAAU,EAAE,IAAI;IAChB3O,UAAU,EAAE,KAAK;IACjBe,yBAAyB,EAAE,EAAE;IAC7BisB,uBAAuB,EAAE,KAAK;IAC9BuN,kBAAkB,EAAE,IAAI;IACxBhB,oBAAoB,EAAE,IAAI;IAC1Bn5B,WAAW,EAAE;MACZ,GAAG,EAAE;QACJlB,SAAS,EAAEu6B;MACZ,CAAC;MACD,GAAG,EAAE;QACJv6B,SAAS,EAAEu6B,gBAAgB;QAC3BxM,gBAAgB,EAAE;MACnB,CAAC;MACD,GAAG,EAAE;QAAE;QACN/tB,SAAS,EAAE,8CAA8C;QACzD+tB,gBAAgB,EAAE;MACnB,CAAC;MACD,GAAG,EAAE;QACJ/tB,SAAS,EAAE,mBAAUK,IAAI,EAAEC,OAAO,EAAEC,GAAG,EAAEC,MAAM,EAAEC,IAAI,EAAE;UACtD,OAAQA,IAAI,CAACq6B,UAAU,KAAKz6B,IAAI,KAAK,GAAG,IAAIA,IAAI,KAAKI,IAAI,CAACs4B,cAAc,CAAC2B,KAAK,CAAC;QAEhF;MACD,CAAC;MACD,GAAG,EAAE;QACJ16B,SAAS,EAAE,mBAAUK,IAAI,EAAEC,OAAO,EAAEC,GAAG,EAAEC,MAAM,EAAEC,IAAI,EAAE;UACtD,OAAQA,IAAI,CAACq6B,UAAU,IAAIz6B,IAAI,KAAKI,IAAI,CAACs4B,cAAc,CAACC,IAAI;QAC7D;MACD;IACD,CAAC;IACD/Y,aAAa,EAAE,uBAAUvf,MAAM,EAAEH,GAAG,EAAE6B,CAAC,EAAE0c,WAAW,EAAEre,IAAI,EAAEH,OAAO,EAAEkP,QAAQ,EAAEhP,MAAM,EAAE;MACtF,IAAMiF,SAAS,GAAG,IAAI;MAEtB,IAAIhF,IAAI,CAACqmB,cAAc,KAAK,KAAK,IAAI1kB,CAAC,KAAK3B,IAAI,CAACqS,UAAU,EAAE,OAAO,KAAK;MACxE,IAAIG,QAAQ,GAAGvS,MAAM,CAACb,OAAO,CAACY,IAAI,CAACqS,UAAU,CAAC;QAAEwoB,OAAO,GAAG/6B,GAAG;MAC7DA,GAAG,GAAG+5B,iBAAiB,CAAC/5B,GAAG,EAAE6B,CAAC,EAAE6Q,QAAQ,EAAE3S,OAAO,EAAEG,IAAI,CAAC;MACxD,IAAI2B,CAAC,KAAK,GAAG,IAAIA,CAAC,KAAK3B,IAAI,CAACs4B,cAAc,CAAC2B,KAAK,EAAE;QACjD,IAAIj6B,IAAI,CAACq6B,UAAU,KAAK,IAAI,EAAE,OAAO,KAAK;QAC1C,IAAIS,UAAU,GAAG,KAAK;UACrBb,KAAK,GAAGpB,SAAS,CAAC,GAAG,EAAEh5B,OAAO,CAAC;UAAE04B,IAAI,GAAGM,SAAS,CAAC,GAAG,EAAEh5B,OAAO,CAAC;QAChE,IAAIo6B,KAAK,KAAK,CAAC,CAAC,EAAE;UACjBa,UAAU,GAAG,CAACb,KAAK,EAAE1B,IAAI,CAAC;QAC3B;QAEA,OAAOuC,UAAU,KAAK,KAAK,GAAG;UAC7B71B,MAAM,EAAE61B,UAAU;UAClBvtB,KAAK,EAAEstB,OAAO,GAAG76B,IAAI,CAACs4B,cAAc,CAACC,IAAI,CAACv6B;QAC3C,CAAC,GAAG;UACHghB,MAAM,EAAE,CACP;YACClf,GAAG,EAAE04B,aAAa,CAAC/5B,IAAI,CAACuG,SAAS,EAAE,GAAG,EAAEnF,OAAO,CAAC;YAChD8B,CAAC,EAAE3B,IAAI,CAACs4B,cAAc,CAAC2B,KAAK;YAC5Ble,WAAW,EAAE;UACd,CAAC,EACD;YACCjc,GAAG,EAAE04B,aAAa,CAAC/5B,IAAI,CAACuG,SAAS,EAAE,GAAG,EAAEnF,OAAO,CAAC;YAChD8B,CAAC,EAAE3B,IAAI,CAACs4B,cAAc,CAACC,IAAI;YAC3Bxc,WAAW,EAAEpZ;UACd,CAAC,CAAC;UACH4K,KAAK,EAAEstB,OAAO,GAAG76B,IAAI,CAACs4B,cAAc,CAACC,IAAI,CAACv6B;QAC3C,CAAC;MACF;MAEA,IAAI2D,CAAC,KAAK3B,IAAI,CAACsV,cAAc,EAAE;QAC9B,OAAO;UAAC/H,KAAK,EAAEstB;QAAO,CAAC;MACxB;MAEA,IAAI96B,MAAM,EAAE,OAAO,IAAI;MACvB,IAAIyS,QAAQ,KAAK,CAAC,CAAC,IAAKxS,IAAI,CAACovB,WAAW,KAAK,IAAI,IAAI/Q,WAAW,KAAK,KAAK,IAAI1c,CAAC,KAAK3B,IAAI,CAACqS,UAAU,IAAKrS,IAAI,CAACsS,MAAM,KAAK3P,SAAS,KAAKiY,KAAK,CAAC5a,IAAI,CAACsS,MAAM,CAAC,IAAI9D,QAAQ,CAACxO,IAAI,CAACsS,MAAM,CAAC,GAAG,CAAC,CAAE,IAAIE,QAAQ,KAAK1S,GAAI,EAAE;QAC7M,OAAO;UACN,OAAO,EAAEE,IAAI,CAACovB,WAAW,IAAItvB,GAAG,KAAK0S,QAAQ,GAAG,CAAC,GAAGA,QAAQ,GAAG,CAAC,GAAGA;QACpE,CAAC;MACF;MACA,IAAIxS,IAAI,CAACqmB,cAAc,KAAK,KAAK,EAAE;QAClC,IAAIhI,WAAW,EAAE;UAChB,IAAIre,IAAI,CAACm4B,cAAc,EAAE;YACxB,OAAO;cAAChZ,eAAe,EAAEpQ,QAAQ,CAACb;YAAG,CAAC;UACvC,CAAC,MAAM,IAAI,CAAClO,IAAI,CAACm4B,cAAc,EAAE;YAChC,IAAIppB,QAAQ,CAACd,KAAK,GAAGuE,QAAQ,IAAIzD,QAAQ,CAACb,GAAG,IAAIsE,QAAQ,EAAE;cAC1D,IAAI7Q,CAAC,KAAK3B,IAAI,CAACqS,UAAU,EAAE;gBAC1B,OAAO;kBACN2M,MAAM,EAAE;oBAAClf,GAAG,EAAE0S,QAAQ,GAAG,CAAC;oBAAE7Q,CAAC,EAAE,GAAG;oBAAEoa,WAAW,EAAE;kBAAI,CAAC;kBACtDoD,eAAe,EAAE3M;gBAClB,CAAC;cACF,CAAC,MAAM;gBACN,OAAO;kBAAC2M,eAAe,EAAE3M,QAAQ,GAAG;gBAAC,CAAC;cACvC;YACD,CAAC,MAAM,IAAIzD,QAAQ,CAACd,KAAK,GAAGuE,QAAQ,EAAE;cACrC,OAAO;gBAAC2M,eAAe,EAAEpQ,QAAQ,CAACd,KAAK,GAAG;cAAC,CAAC;YAC7C;UACD;QACD,CAAC,MAAM,IAAI,CAACjO,IAAI,CAACqlB,eAAe,IAAI,CAACrlB,IAAI,CAAC8L,eAAe,IAAI,CAAC9L,IAAI,CAACm4B,cAAc,IAAIn4B,IAAI,CAACsS,MAAM,GAAG,CAAC,IAAI,IAAI,CAAClM,UAAU,CAAC3H,IAAI,CAAC,IAAI,CAACiE,EAAE,CAAC,KAAK,EAAE,EAAE;UAC7I,OAAO;YAACyc,eAAe,EAAE3M;UAAQ,CAAC;QACnC;MACD;MACA,OAAO;QAAC2M,eAAe,EAAErf;MAAG,CAAC;IAC9B,CAAC;IACD4B,cAAc,EAAE,wBAAUzB,MAAM,EAAEH,GAAG,EAAE6B,CAAC,EAAEC,aAAa,EAAE5B,IAAI,EAAEH,OAAO,EAAEE,MAAM,EAAE;MAC/E,IAAI6B,aAAa,KAAK,KAAK,EAAE,OAAOA,aAAa;MACjD,IAAI7B,MAAM,EAAE,OAAO,IAAI;MACvB,IAAIC,IAAI,CAAC8a,GAAG,KAAK,IAAI,IAAI9a,IAAI,CAAC5B,GAAG,KAAK,IAAI,EAAE;QAC3C,IAAI28B,QAAQ,GAAG/6B,IAAI,CAACU,QAAQ,CAACT,MAAM,CAACyE,KAAK,EAAE,CAACmC,OAAO,EAAE,CAAC7E,IAAI,CAAC,EAAE,CAAC,EAAEW,SAAS,EAAEF,CAAC,CAACK,MAAM,CAAC,CAAC,CAAC,EAAE9C,IAAI,EAAE;UAC7Fw6B,cAAc,EAAE;QACjB,CAAC,CAAC,CAAC;QACH,IAAIx6B,IAAI,CAAC8a,GAAG,KAAK,IAAI,IAAIigB,QAAQ,GAAG/6B,IAAI,CAAC8a,GAAG,KAAKigB,QAAQ,CAACl4B,QAAQ,EAAE,CAAC7E,MAAM,GAAGgC,IAAI,CAAC8a,GAAG,CAACjY,QAAQ,EAAE,CAAC7E,MAAM,IAAI+8B,QAAQ,GAAG,CAAC,CAAC,EAAE;UAC1H,OAAO,KAAK;UACZ;UACA;UACA;UACA;QACD;;QAEA,IAAI/6B,IAAI,CAAC5B,GAAG,KAAK,IAAI,IAAI28B,QAAQ,GAAG/6B,IAAI,CAAC5B,GAAG,EAAE;UAC7C,OAAO4B,IAAI,CAACs6B,gBAAgB,GAAG;YAC9Brb,iBAAiB,EAAE,IAAI;YACvBhf,MAAM,EAAEg4B,WAAW,CAACj4B,IAAI,CAAC5B,GAAG,CAACyE,QAAQ,EAAE,CAACrB,OAAO,CAAC,GAAG,EAAExB,IAAI,CAACqS,UAAU,CAAC,CAAC7M,KAAK,CAAC,EAAE,CAAC,EAAExF,IAAI,CAACsS,MAAM,EAAEtS,IAAI,CAAC,CAAC6G,OAAO;UAC5G,CAAC,GAAG,KAAK;QACV;MACD;MAEA,OAAOjF,aAAa;IACrB,CAAC;IACDlB,QAAQ,EAAE,kBAAUC,WAAW,EAAEC,aAAa,EAAEZ,IAAI,EAAE;MACrD,IAAIY,aAAa,KAAK,EAAE,IAAIZ,IAAI,CAACkK,QAAQ,KAAK,IAAI,EAAE;QACnD,OAAOtJ,aAAa;MACrB;MACA,IAAIo6B,YAAY,GAAGr6B,WAAW,CAACa,OAAO,CAACxB,IAAI,CAACw5B,MAAM,EAAE,EAAE,CAAC;MACvDwB,YAAY,GAAGA,YAAY,CAACx5B,OAAO,CAACxB,IAAI,CAAC25B,MAAM,EAAE,EAAE,CAAC;MACpDqB,YAAY,GAAGA,YAAY,CAACx5B,OAAO,CAAC,IAAI9B,MAAM,CAAC,IAAAksB,uBAAW,EAAC5rB,IAAI,CAACsV,cAAc,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE,CAAC;MAC1F,IAAItV,IAAI,CAAC4L,WAAW,CAACgJ,MAAM,CAAC,CAAC,CAAC,KAAK,EAAE,EAAE;QACtComB,YAAY,GAAGA,YAAY,CAACx5B,OAAO,CAAC,IAAI9B,MAAM,CAACM,IAAI,CAAC4L,WAAW,CAACgJ,MAAM,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,GAAG,CAAC;MACtF;MACA,IAAI5U,IAAI,CAACw6B,cAAc,EAAE;QACxB,IAAIx6B,IAAI,CAACqS,UAAU,KAAK,EAAE,IAAI2oB,YAAY,CAAC57B,OAAO,CAACY,IAAI,CAACqS,UAAU,CAAC,KAAK,CAAC,CAAC,EAAE2oB,YAAY,GAAGA,YAAY,CAACx5B,OAAO,CAACoqB,uBAAW,CAACntB,IAAI,CAAC,IAAI,EAAEuB,IAAI,CAACqS,UAAU,CAAC,EAAE,GAAG,CAAC;QAC7J2oB,YAAY,GAAGA,YAAY,CAACx5B,OAAO,CAAC,IAAI9B,MAAM,CAAC,GAAG,GAAG,IAAAksB,uBAAW,EAAC5rB,IAAI,CAACs4B,cAAc,CAAC2B,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC;QAClGe,YAAY,GAAGA,YAAY,CAACx5B,OAAO,CAAC,IAAI9B,MAAM,CAAC,IAAAksB,uBAAW,EAAC5rB,IAAI,CAACs4B,cAAc,CAACC,IAAI,CAAC,GAAG,GAAG,CAAC,EAAE,EAAE,CAAC;QAChG,OAAOW,MAAM,CAAC8B,YAAY,CAAC;MAC5B;MACA,OAAOA,YAAY;IACpB,CAAC;IAEDj0B,UAAU,EAAE,oBAAU9G,MAAM,EAAED,IAAI,EAAE;MACnC,IAAIW,WAAW,GAAG,CAACX,IAAI,CAACmE,YAAY,GAAGlE,MAAM,CAACyE,KAAK,EAAE,CAACmC,OAAO,EAAE,GAAG5G,MAAM,EAAE+B,IAAI,CAAC,EAAE,CAAC;MAClFrB,WAAW,GAAGA,WAAW,CAACa,OAAO,CAAC,IAAI9B,MAAM,CAAC,GAAG,GAAG,IAAAksB,uBAAW,EAAC5rB,IAAI,CAACs4B,cAAc,CAAC2B,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC;MAChGt5B,WAAW,GAAGA,WAAW,CAACa,OAAO,CAAC,IAAI9B,MAAM,CAAC,IAAAksB,uBAAW,EAAC5rB,IAAI,CAACs4B,cAAc,CAACC,IAAI,CAAC,GAAG,GAAG,CAAC,EAAE,EAAE,CAAC;MAC9F53B,WAAW,GAAGA,WAAW,CAACa,OAAO,CAACxB,IAAI,CAACw5B,MAAM,EAAE,EAAE,CAAC;MAClD74B,WAAW,GAAGA,WAAW,CAACa,OAAO,CAACxB,IAAI,CAAC25B,MAAM,EAAE,EAAE,CAAC;MAClDh5B,WAAW,GAAGA,WAAW,CAACa,OAAO,CAAC,IAAI9B,MAAM,CAAC,IAAAksB,uBAAW,EAAC5rB,IAAI,CAACsV,cAAc,CAAC,GAAG,YAAY,EAAE,GAAG,CAAC,EAAE,IAAI,CAAC;MACzG,IAAItV,IAAI,CAACqS,UAAU,KAAK,GAAG,EAAE1R,WAAW,GAAGA,WAAW,CAACa,OAAO,CAAC,IAAAoqB,uBAAW,EAAC5rB,IAAI,CAACqS,UAAU,CAAC,EAAE,GAAG,CAAC;MACjG,OAAOkD,QAAQ,CAAC5U,WAAW,CAAC;IAC7B,CAAC;IACD4E,YAAY,EAAE,sBAAUsyB,YAAY,EAAE73B,IAAI,EAAE;MAC3C,IAAIqS,UAAU,GAAGrS,IAAI,CAACqS,UAAU,IAAI,GAAG;MACvC,IAAIkD,QAAQ,CAACvV,IAAI,CAACsS,MAAM,CAAC,EAAEtS,IAAI,CAACsS,MAAM,GAAG9D,QAAQ,CAACxO,IAAI,CAACsS,MAAM,CAAC;MAE9D,IAAI,CAAC,OAAOulB,YAAY,IAAI,QAAQ,IAAI73B,IAAI,CAACukB,SAAS,KAAK,QAAQ,KAAKlS,UAAU,KAAK,EAAE,EAAE;QAC1FwlB,YAAY,GAAGA,YAAY,CAACh1B,QAAQ,EAAE,CAACrB,OAAO,CAAC,GAAG,EAAE6Q,UAAU,CAAC;MAChE;MACA,IAAI4oB,SAAS,GAAGpD,YAAY,CAACjjB,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,IAAIijB,YAAY,CAACjjB,MAAM,CAAC,CAAC,CAAC,KAAK5U,IAAI,CAACs4B,cAAc,CAAC2B,KAAK;MACtG,IAAIiB,UAAU,GAAGrD,YAAY,CAACryB,KAAK,CAAC6M,UAAU,CAAC;QAC9C8oB,WAAW,GAAGD,UAAU,CAAC,CAAC,CAAC,CAAC15B,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC;QACpD45B,WAAW,GAAGF,UAAU,CAACl9B,MAAM,GAAG,CAAC,GAAGk9B,UAAU,CAAC,CAAC,CAAC,CAAC15B,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC,GAAG,EAAE;QAC/E65B,WAAW,GAAGH,UAAU,CAACl9B,MAAM,GAAG,CAAC;MAEpC65B,YAAY,GAAGsD,WAAW,IAAIC,WAAW,KAAK,EAAE,GAAG/oB,UAAU,GAAG+oB,WAAW,GAAGA,WAAW,CAAC;MAE1F,IAAI9oB,MAAM,GAAG,CAAC;MACd,IAAID,UAAU,KAAK,EAAE,EAAE;QACtBC,MAAM,GAAG,CAACtS,IAAI,CAACm4B,cAAc,GAAGn4B,IAAI,CAACsS,MAAM,GAAItS,IAAI,CAACsS,MAAM,GAAG8oB,WAAW,CAACp9B,MAAM,GAAGgC,IAAI,CAACsS,MAAM,GAAG8oB,WAAW,CAACp9B,MAAO;QACnH,IAAIo9B,WAAW,KAAK,EAAE,IAAI,CAACp7B,IAAI,CAACm4B,cAAc,EAAE;UAC/C,IAAImD,YAAY,GAAGn9B,IAAI,CAACo9B,GAAG,CAAC,EAAE,EAAEjpB,MAAM,IAAI,CAAC,CAAC;;UAE5C;UACAulB,YAAY,GAAGA,YAAY,CAACr2B,OAAO,CAAC,IAAAoqB,uBAAW,EAACvZ,UAAU,CAAC,EAAE,GAAG,CAAC;UACjE,IAAI,CAACuI,KAAK,CAACoe,UAAU,CAACnB,YAAY,CAAC,CAAC,EAAE;YACrCA,YAAY,GAAG,CAAC73B,IAAI,CAACy6B,UAAU,CAACzB,UAAU,CAACnB,YAAY,CAAC,GAAGyD,YAAY,CAAC,GAAGA,YAAY,EAAEE,OAAO,CAAClpB,MAAM,CAAC;UACzG;UACAulB,YAAY,GAAGA,YAAY,CAACh1B,QAAQ,EAAE,CAACrB,OAAO,CAAC,GAAG,EAAE6Q,UAAU,CAAC;QAChE;MACD;MACA;MACA,IAAIrS,IAAI,CAACsS,MAAM,KAAK,CAAC,IAAIulB,YAAY,CAACz4B,OAAO,CAACiT,UAAU,CAAC,KAAK,CAAC,CAAC,EAAE;QACjEwlB,YAAY,GAAGA,YAAY,CAAC4D,SAAS,CAAC,CAAC,EAAE5D,YAAY,CAACz4B,OAAO,CAACiT,UAAU,CAAC,CAAC;MAC3E;MAEA,IAAIrS,IAAI,CAAC8a,GAAG,KAAK,IAAI,IAAI9a,IAAI,CAAC5B,GAAG,KAAK,IAAI,EAAE;QAC3C,IAAIs9B,WAAW,GAAG7D,YAAY,CAACh1B,QAAQ,EAAE,CAACrB,OAAO,CAAC6Q,UAAU,EAAE,GAAG,CAAC;QAClE,IAAIrS,IAAI,CAAC8a,GAAG,KAAK,IAAI,IAAI4gB,WAAW,GAAG17B,IAAI,CAAC8a,GAAG,EAAE;UAChD+c,YAAY,GAAG73B,IAAI,CAAC8a,GAAG,CAACjY,QAAQ,EAAE,CAACrB,OAAO,CAAC,GAAG,EAAE6Q,UAAU,CAAC;QAC5D,CAAC,MAAM,IAAIrS,IAAI,CAAC5B,GAAG,KAAK,IAAI,IAAIs9B,WAAW,GAAG17B,IAAI,CAAC5B,GAAG,EAAE;UACvDy5B,YAAY,GAAG73B,IAAI,CAAC5B,GAAG,CAACyE,QAAQ,EAAE,CAACrB,OAAO,CAAC,GAAG,EAAE6Q,UAAU,CAAC;QAC5D;MACD;MAEA,IAAI4oB,SAAS,IAAIpD,YAAY,CAACjjB,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;QAChDijB,YAAY,GAAG,GAAG,GAAGA,YAAY;MAClC;MACA,OAAOI,WAAW,CAACJ,YAAY,CAACh1B,QAAQ,EAAE,CAAC2C,KAAK,CAAC,EAAE,CAAC,EAAE8M,MAAM,EAAEtS,IAAI,EAAEq7B,WAAW,CAAC,CAACr5B,IAAI,CAAC,EAAE,CAAC;IAC1F,CAAC;IAED0D,aAAa,EAAE,uBAAU1G,CAAC,EAAEiB,MAAM,EAAE8O,QAAQ,EAAE/O,IAAI,EAAE;MACnD,SAAS27B,WAAW,CAAC17B,MAAM,EAAE27B,UAAU,EAAE;QACxC,IAAI57B,IAAI,CAACqmB,cAAc,KAAK,KAAK,IAAIuV,UAAU,EAAE;UAChD,IAAI3nB,QAAQ,GAAGhU,MAAM,CAACb,OAAO,CAACY,IAAI,CAACqS,UAAU,CAAC;UAC9C,IAAI4B,QAAQ,KAAK,CAAC,CAAC,EAAE;YACpBhU,MAAM,CAACwH,MAAM,CAACwM,QAAQ,EAAE,CAAC,CAAC;UAC3B;QACD;QACA,IAAIjU,IAAI,CAACsV,cAAc,KAAK,EAAE,EAAE;UAC/B,OAAO,CAACrB,QAAQ,GAAGhU,MAAM,CAACb,OAAO,CAACY,IAAI,CAACsV,cAAc,CAAC,MAAM,CAAC,CAAC,EAAE;YAC/DrV,MAAM,CAACwH,MAAM,CAACwM,QAAQ,EAAE,CAAC,CAAC;UAC3B;QACD;QAEA,OAAOhU,MAAM;MACd;MAEA,IAAI+J,MAAM,EAAEmwB,aAAa;MACzB,IAAIn6B,IAAI,CAAC46B,kBAAkB,KAAKT,aAAa,GAAGJ,qBAAqB,CAAC95B,MAAM,EAAED,IAAI,CAAC,CAAC,EAAE;QACrF,IAAM67B,QAAQ,GAAG57B,MAAM,CAAC+B,IAAI,CAAC,EAAE,CAAC,CAAC85B,WAAW,CAAC3B,aAAa,CAAC,CAAC,CAAC,CAAC30B,KAAK,CAAC,EAAE,CAAC,CAACqB,OAAO,EAAE,CAAC7E,IAAI,CAAC,EAAE,CAAC,CAAC,IAAIm4B,aAAa,CAAC,CAAC,CAAC,IAAIA,aAAa,CAAC9wB,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC;UAC9I0U,MAAM,GAAIoc,aAAa,CAAC,CAAC,CAAC,IAAIA,aAAa,CAAC9wB,KAAK,GAAG,CAAC,GAAG,CAAE;QAC3D,KAAK,IAAInI,CAAC,GAAGi5B,aAAa,CAAC,CAAC,CAAC,CAACn8B,MAAM,GAAG+f,MAAM,EAAE7c,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;UAC1D,OAAO,IAAI,CAACrB,OAAO,CAACoK,cAAc,CAAC4xB,QAAQ,GAAG36B,CAAC,CAAC;UAChD,OAAOjB,MAAM,CAAC47B,QAAQ,GAAG36B,CAAC,CAAC;QAC5B;MACD;MAEA,IAAIlC,CAAC,EAAE;QACN,QAAQA,CAAC,CAAC0K,IAAI;UACb,KAAK,MAAM;UACX,KAAK,UAAU;YACd,IAAI1J,IAAI,CAAC8a,GAAG,KAAK,IAAI,EAAE;cACtB,IAAIigB,QAAQ,GAAG/6B,IAAI,CAACU,QAAQ,CAACT,MAAM,CAACyE,KAAK,EAAE,CAACmC,OAAO,EAAE,CAAC7E,IAAI,CAAC,EAAE,CAAC,EAAEW,SAAS,EAAEF,CAAC,CAACK,MAAM,CAAC,CAAC,CAAC,EAAE9C,IAAI,EAAE;gBAC7Fw6B,cAAc,EAAE;cACjB,CAAC,CAAC,CAAC;cACH,IAAIx6B,IAAI,CAAC8a,GAAG,KAAK,IAAI,IAAIigB,QAAQ,GAAG/6B,IAAI,CAAC8a,GAAG,EAAE;gBAC7C,OAAO;kBACNmE,iBAAiB,EAAE,IAAI;kBACvBhf,MAAM,EAAEg4B,WAAW,CAACj4B,IAAI,CAAC8a,GAAG,CAACjY,QAAQ,EAAE,CAACrB,OAAO,CAAC,GAAG,EAAExB,IAAI,CAACqS,UAAU,CAAC,CAAC7M,KAAK,CAAC,EAAE,CAAC,EAAExF,IAAI,CAACsS,MAAM,EAAEtS,IAAI,CAAC,CAAC6G,OAAO;gBAC5G,CAAC;cACF;YACD;YACA,IAAI5G,MAAM,CAACA,MAAM,CAACjC,MAAM,GAAG,CAAC,CAAC,KAAKgC,IAAI,CAACs4B,cAAc,CAAC2B,KAAK,EAAE;cAAG;cAC/D,IAAI8B,SAAS,GAAG,IAAIr8B,MAAM,CAAC,IAAI,IAAIM,IAAI,CAACs4B,cAAc,CAAC2B,KAAK,IAAI,EAAE,GAAG,IAAArO,uBAAW,EAAC5rB,IAAI,CAACs4B,cAAc,CAAC2B,KAAK,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC,GAAG,IAAArO,uBAAW,EAAC5rB,IAAI,CAACw5B,MAAM,CAAC,GAAG,QAAQ,GAAG,IAAA5N,uBAAW,EAAC5rB,IAAI,CAAC25B,MAAM,CAAC,IAAI35B,IAAI,CAACs4B,cAAc,CAACC,IAAI,IAAI,EAAE,GAAG,IAAA3M,uBAAW,EAAC5rB,IAAI,CAACs4B,cAAc,CAACC,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC,GAAG,IAAI,CAAC,CAAC9J,IAAI,CAACkN,WAAW,CAAC17B,MAAM,CAACyE,KAAK,EAAE,EAAE,IAAI,CAAC,CAACmC,OAAO,EAAE,CAAC7E,IAAI,CAAC,EAAE,CAAC,CAAC;gBAChVk4B,MAAM,GAAG6B,SAAS,GAAGA,SAAS,CAAC,CAAC,CAAC,GAAG,EAAE;cACvC,IAAI7B,MAAM,IAAI,CAAC,EAAE;gBAChBlwB,MAAM,GAAG;kBAACiV,iBAAiB,EAAE,IAAI;kBAAEhf,MAAM,EAAE,CAAC,CAAC;gBAAC,CAAC;cAChD;YACD,CAAC,MAAM,IAAID,IAAI,CAACqS,UAAU,KAAK,EAAE,EAAE;cAAE;cACpC,IAAI2pB,QAAQ,GAAG/7B,MAAM,CAACb,OAAO,CAACY,IAAI,CAACqS,UAAU,CAAC;cAC9C,IAAI2pB,QAAQ,KAAKh8B,IAAI,CAAC25B,MAAM,CAAC37B,MAAM,EAAE;gBACpC,IAAIgM,MAAM,IAAIA,MAAM,CAAC/J,MAAM,EAAE;kBAC5B+J,MAAM,CAAC/J,MAAM,CAACwH,MAAM,CAAC,CAAC,EAAE,CAAC,GAAGzH,IAAI,CAAC25B,MAAM,CAAC37B,MAAM,CAAC;gBAChD,CAAC,MAAM;kBACNiC,MAAM,CAACwH,MAAM,CAAC,CAAC,EAAE,CAAC,GAAGzH,IAAI,CAAC25B,MAAM,CAAC37B,MAAM,CAAC;kBACxCgM,MAAM,GACL;oBAACiV,iBAAiB,EAAE,IAAI;oBAAEhf,MAAM,EAAE07B,WAAW,CAAC17B,MAAM;kBAAC,CAAC;gBACxD;cACD;YACD;YAEA,IAAID,IAAI,CAACo6B,mBAAmB,EAAE;cAC7BpwB,MAAM,GAAGA,MAAM,IAAI,CAAC,CAAC;cACrB,IAAInI,IAAI,GAAImI,MAAM,IAAIA,MAAM,CAAC/J,MAAM,IAAKA,MAAM,CAACyE,KAAK,EAAE,CAACmC,OAAO,EAAE;cAChEmD,MAAM,CAACiV,iBAAiB,GAAG,IAAI;cAC/BjV,MAAM,CAAC/J,MAAM,GAAGg4B,WAAW,CAACp2B,IAAI,EAAE7B,IAAI,CAACsS,MAAM,EAAEtS,IAAI,EAAE,IAAI,CAAC,CAAC6G,OAAO,EAAE;YACrE;QAAC;MAEJ;MAEA,OAAOmD,MAAM;IACd,CAAC;IACDyX,SAAS,EAAE,mBAAUziB,CAAC,EAAEiB,MAAM,EAAE8O,QAAQ,EAAE/O,IAAI,EAAE;MAC/C,IAAIuhB,MAAM,GAAG9e,CAAC,CAAC,IAAI,CAAC;QAAEZ,IAAI;MAC1B,IAAI7C,CAAC,CAACi9B,QAAQ,IAAI,CAAC,EAAE;QACpB,IAAIxlB,OAAO;UAAE9U,CAAC,GAAG3C,CAAC,CAAC4O,GAAG;QACtB,IAAK6I,OAAO,GAAIzW,IAAI,CAAC26B,SAAS,IAAI36B,IAAI,CAAC26B,SAAS,CAACh5B,CAAC,CAAE,EAAG;UACtD,IAAI8U,OAAO,CAACzY,MAAM,GAAG,CAAC,EAAE;YACvB,IAAI,CAACgH,SAAS,CAACuB,UAAU,CAAC9H,IAAI,CAAC,IAAI,EAAEu6B,UAAU,CAAC,IAAI,CAACh0B,SAAS,CAACK,aAAa,EAAE,CAAC,GAAGmJ,QAAQ,CAACiI,OAAO,CAAC,CAAC;YACpG8K,MAAM,CAAC1Z,OAAO,CAAC,UAAU,CAAC;YAC1B,OAAO,KAAK;UACb;QACD;MACD;MACA,IAAI7I,CAAC,CAAC2iB,OAAO,EAAE;QACd,QAAQ3iB,CAAC,CAAC4O,GAAG;UACZ,KAAK/O,aAAI,CAACywB,OAAO;YAChB,IAAI,CAACtqB,SAAS,CAACuB,UAAU,CAAC9H,IAAI,CAAC,IAAI,EAAEu6B,UAAU,CAAC,IAAI,CAACh0B,SAAS,CAACK,aAAa,EAAE,CAAC,GAAGmJ,QAAQ,CAACxO,IAAI,CAACu6B,IAAI,CAAC,CAAC;YACtGhZ,MAAM,CAAC1Z,OAAO,CAAC,UAAU,CAAC;YAC1B,OAAO,KAAK;UACb,KAAKhJ,aAAI,CAAC0wB,SAAS;YAClB,IAAI,CAACvqB,SAAS,CAACuB,UAAU,CAAC9H,IAAI,CAAC,IAAI,EAAEu6B,UAAU,CAAC,IAAI,CAACh0B,SAAS,CAACK,aAAa,EAAE,CAAC,GAAGmJ,QAAQ,CAACxO,IAAI,CAACu6B,IAAI,CAAC,CAAC;YACtGhZ,MAAM,CAAC1Z,OAAO,CAAC,UAAU,CAAC;YAC1B,OAAO,KAAK;QAAC;MAEhB;MACA,IAAI,CAAC7I,CAAC,CAAC8O,QAAQ,KAAK9O,CAAC,CAAC4O,GAAG,KAAK/O,aAAI,CAACgf,MAAM,IAAI7e,CAAC,CAAC4O,GAAG,KAAK/O,aAAI,CAAC+e,SAAS,IAAI5e,CAAC,CAAC4O,GAAG,KAAK/O,aAAI,CAAC6iB,gBAAgB,CAAC,IAAI3S,QAAQ,CAACd,KAAK,KAAKhO,MAAM,CAACjC,MAAM,EAAE;QAC9I,IAAIiC,MAAM,CAACjB,CAAC,CAAC4O,GAAG,KAAK/O,aAAI,CAACgf,MAAM,GAAG9O,QAAQ,CAACd,KAAK,GAAG,CAAC,GAAGc,QAAQ,CAACb,GAAG,CAAC,KAAKlO,IAAI,CAACs4B,cAAc,CAAC2B,KAAK,EAAE;UACpGp4B,IAAI,GAAG5B,MAAM,CAACyE,KAAK,EAAE,CAACmC,OAAO,EAAE;UAC/B,IAAI7G,IAAI,CAACs4B,cAAc,CAAC2B,KAAK,KAAK,EAAE,EAAEp4B,IAAI,CAAC6X,KAAK,EAAE;UAClD,IAAI1Z,IAAI,CAACs4B,cAAc,CAACC,IAAI,KAAK,EAAE,EAAE12B,IAAI,CAAC2T,GAAG,EAAE;UAC/C+L,MAAM,CAAC1Z,OAAO,CAAC,UAAU,EAAE,CAAChG,IAAI,CAACG,IAAI,CAAC,EAAE,CAAC,EAAE+M,QAAQ,CAACd,KAAK,CAAC,CAAC;UAC3D,OAAO,KAAK;QACb,CAAC,MAAM,IAAIjO,IAAI,CAACovB,WAAW,KAAK,IAAI,EAAE;UACrC,IAAI5c,QAAQ,GAAGvS,MAAM,CAACb,OAAO,CAACY,IAAI,CAACqS,UAAU,CAAC;UAC9C,IAAI,CAACrS,IAAI,CAACm4B,cAAc,EAAE;YACzB,IAAI3lB,QAAQ,KAAK,CAAC,CAAC,KAAKzD,QAAQ,CAACd,KAAK,GAAGuE,QAAQ,IAAIzD,QAAQ,CAACb,GAAG,GAAGsE,QAAQ,IAAKxT,CAAC,CAAC4O,GAAG,KAAK/O,aAAI,CAACgf,MAAM,KAAK9O,QAAQ,CAACd,KAAK,KAAKuE,QAAQ,IAAIzD,QAAQ,CAACd,KAAK,GAAG,CAAC,KAAKuE,QAAQ,CAAE,CAAC,EAAE;cAC7K,IAAI0pB,eAAe,GAAGv5B,SAAS;cAC/B,IAAIoM,QAAQ,CAACd,KAAK,KAAKc,QAAQ,CAACb,GAAG,EAAE;gBAAE;gBACtC,IAAIlP,CAAC,CAAC4O,GAAG,KAAK/O,aAAI,CAAC+e,SAAS,IAAI5e,CAAC,CAAC4O,GAAG,KAAK/O,aAAI,CAAC6iB,gBAAgB,EAC9D3S,QAAQ,CAACd,KAAK,EAAE,CAAC,KACb,IAAIjP,CAAC,CAAC4O,GAAG,KAAK/O,aAAI,CAACgf,MAAM,IAAI9O,QAAQ,CAACd,KAAK,GAAG,CAAC,KAAKuE,QAAQ,EAAE;kBAClE0pB,eAAe,GAAGz5B,CAAC,CAACK,MAAM,CAAC,CAAC,CAAC,EAAEiM,QAAQ,CAAC;kBACxCA,QAAQ,CAACd,KAAK,EAAE;kBAChBc,QAAQ,CAACb,GAAG,EAAE;gBAEf;cACD;cACArM,IAAI,GAAG5B,MAAM,CAACyE,KAAK,EAAE,CAACmC,OAAO,EAAE;cAC/BhF,IAAI,CAAC4F,MAAM,CAAC5F,IAAI,CAAC7D,MAAM,GAAG+Q,QAAQ,CAACd,KAAK,EAAEc,QAAQ,CAACd,KAAK,GAAGc,QAAQ,CAACb,GAAG,GAAG,CAAC,CAAC;cAC5E;cACArM,IAAI,GAAGo2B,WAAW,CAACp2B,IAAI,EAAE7B,IAAI,CAACsS,MAAM,EAAEtS,IAAI,CAAC,CAACgC,IAAI,CAAC,EAAE,CAAC;cACpD,IAAIk6B,eAAe,EAAE;gBACpBntB,QAAQ,GAAGmtB,eAAe;cAC3B;cACA3a,MAAM,CAAC1Z,OAAO,CAAC,UAAU,EAAE,CAAChG,IAAI,EAAEkN,QAAQ,CAACd,KAAK,IAAIpM,IAAI,CAAC7D,MAAM,GAAGwU,QAAQ,GAAG,CAAC,GAAGzD,QAAQ,CAACd,KAAK,CAAC,CAAC;cACjG,OAAO,KAAK;YACb;UACD,CAAC,MAAM,IAAIuE,QAAQ,KAAK,CAAC,EAAE;YAC1B3Q,IAAI,GAAG5B,MAAM,CAACyE,KAAK,EAAE,CAACmC,OAAO,EAAE;YAC/BhF,IAAI,CAAC2T,GAAG,EAAE;YACV+L,MAAM,CAAC1Z,OAAO,CAAC,UAAU,EAAE,CAAChG,IAAI,CAACG,IAAI,CAAC,EAAE,CAAC,EAAE+M,QAAQ,CAACd,KAAK,IAAIpM,IAAI,CAAC7D,MAAM,GAAG6D,IAAI,CAAC7D,MAAM,GAAG+Q,QAAQ,CAACd,KAAK,CAAC,CAAC;YACzG,OAAO,KAAK;UACb;QACD;MACD;IACD;EACD,CAAC;EACD,UAAU,EAAE;IACXurB,MAAM,EAAE,EAAE;IAAE;IACZlkB,cAAc,EAAE,GAAG;IACnBlT,KAAK,EAAE,SAAS;IAChBkQ,MAAM,EAAE,CAAC;IACT6lB,cAAc,EAAE;EACjB,CAAC;EACD,SAAS,EAAE;IACV/1B,KAAK,EAAE;EACR,CAAC;EACD,SAAS,EAAE;IACVA,KAAK,EAAE,SAAS;IAChBvB,SAAS,EAAE,SAAS;IACpByR,MAAM,EAAE;EACT,CAAC;EACD,YAAY,EAAE;IACblQ,KAAK,EAAE,SAAS;IAChB0Y,GAAG,EAAE,CAAC;IACN1c,GAAG,EAAE,GAAG;IACRu7B,MAAM,EAAE,IAAI;IACZrnB,MAAM,EAAE,CAAC;IACT+nB,UAAU,EAAE;EACb,CAAC;EACD,UAAU,EAAE;IAAE;IACbj4B,KAAK,EAAE,SAAS;IAChBq3B,KAAK,EAAE,eAAUz5B,IAAI,EAAE;MACtB,OAAO,GAAG,GAAGA,IAAI,CAACsV,cAAc,GAAG,WAAW,GAAGtV,IAAI,CAACsV,cAAc,GAAG,WAAW;IACnF,CAAC;IACDA,cAAc,EAAE,GAAG;IACnBjD,UAAU,EAAE,GAAG;IACfzG,WAAW,EAAE,GAAG;IAChB0G,MAAM,EAAE,CAAC;IACT6lB,cAAc,EAAE;EACjB;AACD,CAAC,CAAC;;;;;;;;;ACnoBF;AACA;AACA;AAAoC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEpC,IAAMl2B,QAAQ,GAAGC,kBAAM,CAACD,QAAQ;;AAEhC;AACA;AACA,IAAIM,qBAAS,IAAIN,QAAQ,IAAIA,QAAQ,CAACk6B,IAAI,IAAIl6B,QAAQ,CAACk6B,IAAI,CAACC,YAAY,IAAIl6B,kBAAM,CAACm6B,cAAc,IAAIn6B,kBAAM,CAACm6B,cAAc,CAACh2B,GAAG,CAAC,YAAY,CAAC,KAAK1D,SAAS,EAAE;EAAA,IACrJ25B,gBAAgB;IAAA;IAAA;IACrB,4BAAc;MAAA;MAAA;MACb;MACA,IAAIC,cAAc,GAAG,MAAKC,iBAAiB,EAAE;QAC5CC,MAAM,GAAG,MAAKL,YAAY,CAAC;UAACM,IAAI,EAAE;QAAQ,CAAC,CAAC;QAC5CrzB,KAAK,GAAGpH,QAAQ,CAACyJ,aAAa,CAAC,OAAO,CAAC;MACxCrC,KAAK,CAACK,IAAI,GAAG,MAAM;MACnB+yB,MAAM,CAACltB,WAAW,CAAClG,KAAK,CAAC;MAEzB,KAAK,IAAIszB,IAAI,IAAIJ,cAAc,EAAE;QAChC,IAAIt/B,MAAM,CAACK,SAAS,CAACua,cAAc,CAACpZ,IAAI,CAAC89B,cAAc,EAAEI,IAAI,CAAC,EAAE;UAC/DtzB,KAAK,CAACsC,YAAY,CAAC4wB,cAAc,CAACI,IAAI,CAAC,EAAE,MAAKt0B,YAAY,CAACk0B,cAAc,CAACI,IAAI,CAAC,CAAC,CAAC;QAClF;MACD;MAEA,IAAIC,EAAE,GAAG,IAAIv9B,qBAAS,EAAE;MACxBu9B,EAAE,CAAC74B,aAAa,GAAG,EAAE;MACrB64B,EAAE,CAACp8B,IAAI,CAAC6I,KAAK,CAAC;MACdA,KAAK,CAACrE,SAAS,CAACqF,UAAU,GAAGoyB,MAAM,CAAC,CAAC;MAAA;IACtC;IAAC;EAAA,iCAnB6BI,WAAW;EAsB1C36B,kBAAM,CAACm6B,cAAc,CAACS,MAAM,CAAC,YAAY,EAAER,gBAAgB,CAAC;AAC7D;;;;;UChCA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;;;;;;;;;ACtBA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAwC;AAAA,eACzBj9B,sBAAS;AAAA","sources":["webpack://inputmask/webpack/universalModuleDefinition","webpack://inputmask/./lib/polyfills/Object.getPrototypeOf.js","webpack://inputmask/./lib/polyfills/Array.includes.js","webpack://inputmask/./lib/polyfills/Object.entries.js","webpack://inputmask/./lib/polyfills/String.includes.js","webpack://inputmask/./lib/extensions/inputmask.extensions.js","webpack://inputmask/./lib/inputmask.js","webpack://inputmask/./lib/mask.js","webpack://inputmask/./lib/keycode.js","webpack://inputmask/./lib/positioning.js","webpack://inputmask/./lib/validation-tests.js","webpack://inputmask/./lib/validation.js","webpack://inputmask/./lib/eventhandlers.js","webpack://inputmask/./lib/environment.js","webpack://inputmask/./lib/global/window.js","webpack://inputmask/./lib/canUseDOM.js","webpack://inputmask/./lib/inputHandling.js","webpack://inputmask/./lib/eventruler.js","webpack://inputmask/./lib/dependencyLibs/inputmask.dependencyLib.js","webpack://inputmask/./lib/dependencyLibs/extend.js","webpack://inputmask/./lib/dependencyLibs/data.js","webpack://inputmask/./lib/dependencyLibs/events.js","webpack://inputmask/./lib/mask-lexer.js","webpack://inputmask/./lib/masktoken.js","webpack://inputmask/./lib/escapeRegex.js","webpack://inputmask/./lib/definitions.js","webpack://inputmask/./lib/defaults.js","webpack://inputmask/./lib/extensions/inputmask.date.extensions.js","webpack://inputmask/./lib/extensions/inputmask.numeric.extensions.js","webpack://inputmask/./lib/inputmaskElement.js","webpack://inputmask/webpack/bootstrap","webpack://inputmask/./bundle.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn ","if (typeof Object.getPrototypeOf !== \"function\") {\r\n\tObject.getPrototypeOf = typeof \"test\".__proto__ === \"object\" ? function (object) {\r\n\t\treturn object.__proto__;\r\n\t} : function (object) {\r\n\t\treturn object.constructor.prototype;\r\n\t};\r\n}","// https://tc39.github.io/ecma262/#sec-array.prototype.includes\r\nif (!Array.prototype.includes) {\r\n\tObject.defineProperty(Array.prototype, \"includes\", {\r\n\t\tvalue: function(searchElement, fromIndex) {\r\n\r\n\t\t\t// 1. Let O be ? ToObject(this value).\r\n\t\t\tif (this == null) {\r\n\t\t\t\tthrow new TypeError(\"\\\"this\\\" is null or not defined\");\r\n\t\t\t}\r\n\r\n\t\t\tvar o = Object(this);\r\n\r\n\t\t\t// 2. Let len be ? ToLength(? Get(O, \"length\")).\r\n\t\t\tvar len = o.length >>> 0;\r\n\r\n\t\t\t// 3. If len is 0, return false.\r\n\t\t\tif (len === 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t// 4. Let n be ? ToInteger(fromIndex).\r\n\t\t\t//    (If fromIndex is undefined, this step produces the value 0.)\r\n\t\t\tvar n = fromIndex | 0;\r\n\r\n\t\t\t// 5. If n ≥ 0, then\r\n\t\t\t//  a. Let k be n.\r\n\t\t\t// 6. Else n < 0,\r\n\t\t\t//  a. Let k be len + n.\r\n\t\t\t//  b. If k < 0, let k be 0.\r\n\t\t\tvar k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);\r\n\r\n\t\t\t// 7. Repeat, while k < len\r\n\t\t\twhile (k < len) {\r\n\t\t\t\t// a. Let elementK be the result of ? Get(O, ! ToString(k)).\r\n\t\t\t\t// b. If SameValueZero(searchElement, elementK) is true, return true.\r\n\t\t\t\t// c. Increase k by 1.\r\n\t\t\t\t// NOTE: === provides the correct \"SameValueZero\" comparison needed here.\r\n\t\t\t\tif (o[k] === searchElement) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tk++;\r\n\t\t\t}\r\n\r\n\t\t\t// 8. Return false\r\n\t\t\treturn false;\r\n\t\t}\r\n\t});\r\n}","const reduce = Function.bind.call(Function.call, Array.prototype.reduce);\r\nconst isEnumerable = Function.bind.call(Function.call, Object.prototype.propertyIsEnumerable);\r\nconst concat = Function.bind.call(Function.call, Array.prototype.concat);\r\nconst keys = Object.keys;\r\n\r\nif (!Object.entries) {\r\n\tObject.entries = function entries(O) {\r\n\t\treturn reduce(keys(O), (e, k) => concat(e, typeof k === 'string' && isEnumerable(O, k) ? [[k, O[k]]] : []), []);\r\n\t};\r\n}","if (!String.prototype.includes) {\r\n\tString.prototype.includes = function(search, start) {\r\n\t\tif (typeof start !== 'number') {\r\n\t\t\tstart = 0;\r\n\t\t}\r\n\r\n\t\tif (start + search.length > this.length) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn this.indexOf(search, start) !== -1;\r\n\t\t}\r\n\t};\r\n}","/*\r\n Input Mask plugin extensions\r\n http://github.com/RobinHerbots/jquery.inputmask\r\n Copyright (c) Robin Herbots\r\n Licensed under the MIT license\r\n */\r\nimport Inputmask from \"../inputmask\";\r\nimport {getLastValidPosition} from \"../positioning\";\r\nimport {getMaskTemplate} from \"../validation-tests\";\r\n//extra definitions\r\nInputmask.extendDefinitions({\r\n    \"A\": {\r\n        validator: \"[A-Za-z\\u0410-\\u044F\\u0401\\u0451\\u00C0-\\u00FF\\u00B5]\",\r\n        casing: \"upper\" //auto uppercasing\r\n    },\r\n    \"&\": { //alfanumeric uppercasing\r\n        validator: \"[0-9A-Za-z\\u0410-\\u044F\\u0401\\u0451\\u00C0-\\u00FF\\u00B5]\",\r\n        casing: \"upper\"\r\n    },\r\n    \"#\": { //hexadecimal\r\n        validator: \"[0-9A-Fa-f]\",\r\n        casing: \"upper\"\r\n    }\r\n});\r\n\r\nvar ipValidatorRegex = new RegExp(\"25[0-5]|2[0-4][0-9]|[01][0-9][0-9]\");\r\n\r\nfunction ipValidator(chrs, maskset, pos, strict, opts) {\r\n    if (pos - 1 > -1 && maskset.buffer[pos - 1] !== \".\") {\r\n        chrs = maskset.buffer[pos - 1] + chrs;\r\n        if (pos - 2 > -1 && maskset.buffer[pos - 2] !== \".\") {\r\n            chrs = maskset.buffer[pos - 2] + chrs;\r\n        } else chrs = \"0\" + chrs;\r\n    } else chrs = \"00\" + chrs;\r\n    return ipValidatorRegex.test(chrs);\r\n}\r\n\r\n\r\nInputmask.extendAliases({\r\n    \"cssunit\": {\r\n        regex: \"[+-]?[0-9]+\\\\.?([0-9]+)?(px|em|rem|ex|%|in|cm|mm|pt|pc)\"\r\n    },\r\n    \"url\": { //needs update => https://en.wikipedia.org/wiki/URL\r\n        regex: \"(https?|ftp)://.*\",\r\n        autoUnmask: false,\r\n        keepStatic: false,\r\n        tabThrough: true\r\n    },\r\n    \"ip\": { //ip-address mask\r\n        mask: \"i{1,3}.j{1,3}.k{1,3}.l{1,3}\",\r\n        definitions: {\r\n            \"i\": {\r\n                validator: ipValidator\r\n            },\r\n            \"j\": {\r\n                validator: ipValidator\r\n            },\r\n            \"k\": {\r\n                validator: ipValidator\r\n            },\r\n            \"l\": {\r\n                validator: ipValidator\r\n            }\r\n        },\r\n        onUnMask: function (maskedValue, unmaskedValue, opts) {\r\n            return maskedValue;\r\n        },\r\n        inputmode: \"decimal\",\r\n        substitutes: {\",\": \".\"}\r\n    },\r\n    \"email\": {\r\n        //https://en.wikipedia.org/wiki/Domain_name#Domain_name_space\r\n        //https://en.wikipedia.org/wiki/Hostname#Restrictions_on_valid_host_names\r\n        //should be extended with the toplevel domains at the end\r\n        mask: function ({separator, quantifier}) {\r\n            var emailMask = \"*{1,64}[.*{1,64}][.*{1,64}][.*{1,63}]@-{1,63}.-{1,63}[.-{1,63}][.-{1,63}]\";\r\n            var mask = emailMask;\r\n            if (separator) {\r\n                for (let i = 0; i < quantifier; i++) {\r\n                    mask += `[${separator}${emailMask}]`;\r\n                }\r\n            }\r\n            return mask;\r\n        },\r\n        greedy: false,\r\n        casing: \"lower\",\r\n        separator: null,\r\n        quantifier: 5,\r\n        skipOptionalPartCharacter: \"\",\r\n        onBeforePaste: function (pastedValue, opts) {\r\n            pastedValue = pastedValue.toLowerCase();\r\n            return pastedValue.replace(\"mailto:\", \"\");\r\n        },\r\n        definitions: {\r\n            \"*\": {\r\n                validator: \"[0-9\\uFF11-\\uFF19A-Za-z\\u0410-\\u044F\\u0401\\u0451\\u00C0-\\u00FF\\u00B5!#$%&'*+/=?^_`{|}~-]\"\r\n            },\r\n            \"-\": {\r\n                validator: \"[0-9A-Za-z-]\"\r\n            }\r\n        },\r\n        onUnMask: function (maskedValue, unmaskedValue, opts) {\r\n            return maskedValue;\r\n        },\r\n        inputmode: \"email\"\r\n    },\r\n    \"mac\": {\r\n        mask: \"##:##:##:##:##:##\"\r\n    },\r\n    //https://en.wikipedia.org/wiki/Vehicle_identification_number\r\n    // see issue #1199\r\n    \"vin\": {\r\n        mask: \"V{13}9{4}\",\r\n        definitions: {\r\n            \"V\": {\r\n                validator: \"[A-HJ-NPR-Za-hj-npr-z\\\\d]\",\r\n                casing: \"upper\"\r\n            }\r\n        },\r\n        clearIncomplete: true,\r\n        autoUnmask: true\r\n    },\r\n    //http://rion.io/2013/09/10/validating-social-security-numbers-through-regular-expressions-2/\r\n    //https://en.wikipedia.org/wiki/Social_Security_number\r\n    \"ssn\": {\r\n        mask: \"999-99-9999\",\r\n        postValidation: function (buffer, pos, c, currentResult, opts, maskset, strict) {\r\n            var bffr = getMaskTemplate.call(this, true, getLastValidPosition.call(this), true, true);\r\n            return /^(?!219-09-9999|078-05-1120)(?!666|000|9.{2}).{3}-(?!00).{2}-(?!0{4}).{4}$/.test(bffr.join(\"\"));\r\n        }\r\n    },\r\n});\r\n","/*\r\n * Input Mask Core\r\n * http://github.com/RobinHerbots/jquery.inputmask\r\n * Copyright (c) Robin Herbots\r\n * Licensed under the MIT license\r\n */\r\n\r\nimport {mask} from \"./mask\";\r\nimport $ from \"./dependencyLibs/inputmask.dependencyLib\";\r\nimport window from \"./global/window\";\r\nimport {generateMaskSet, analyseMask} from \"./mask-lexer\";\r\nimport {getMaskTemplate} from \"./validation-tests\";\r\nimport {determineLastRequiredPosition, getBuffer, getBufferTemplate, isMask} from \"./positioning\";\r\nimport {isComplete} from \"./validation\";\r\nimport {checkVal, unmaskedvalue} from \"./inputHandling\";\r\nimport {EventRuler} from \"./eventruler\";\r\nimport definitions from \"./definitions\";\r\nimport defaults from \"./defaults\";\r\nimport canUseDOM from \"./canUseDOM\";\r\n\r\nconst document = window.document, dataKey = \"_inputmask_opts\";\r\n\r\nfunction Inputmask(alias, options, internal) {\r\n    if (!canUseDOM) {\r\n        return;\r\n    }\r\n\r\n    //allow instanciating without new\r\n    if (!(this instanceof Inputmask)) {\r\n        return new Inputmask(alias, options, internal);\r\n    }\r\n\r\n    this.dependencyLib = $;\r\n    this.el = undefined;\r\n    this.events = {};\r\n    this.maskset = undefined;\r\n\r\n    if (internal !== true) {\r\n        //init options\r\n        if (Object.prototype.toString.call(alias) === \"[object Object]\") {\r\n            options = alias;\r\n        } else {\r\n            options = options || {};\r\n            if (alias) options.alias = alias;\r\n        }\r\n        this.opts = $.extend(true, {}, this.defaults, options);\r\n        this.noMasksCache = options && options.definitions !== undefined;\r\n        this.userOptions = options || {}; //user passed options\r\n        resolveAlias(this.opts.alias, options, this.opts);\r\n    }\r\n\r\n    //maskscope properties\r\n    this.refreshValue = false; //indicate a refresh from the inputvalue is needed (form.reset)\r\n    this.undoValue = undefined;\r\n    this.$el = undefined;\r\n    this.skipInputEvent = false; //skip when triggered from within inputmask\r\n    this.validationEvent = false;\r\n    this.ignorable = false;\r\n    this.maxLength;\r\n    this.mouseEnter = false;\r\n    this.clicked = 0;\r\n    this.originalPlaceholder = undefined; //needed for FF\r\n    this.isComposing = false, //keydowncode == 229  compositionevent fallback\r\n    this.hasAlternator = false;\r\n}\r\n\r\nInputmask.prototype = {\r\n    dataAttribute: \"data-inputmask\", //data attribute prefix used for attribute binding\r\n    //options default\r\n    defaults: defaults,\r\n    definitions: definitions,\r\n    aliases: {}, //aliases definitions\r\n    masksCache: {},\r\n    get isRTL() {\r\n        return this.opts.isRTL || this.opts.numericInput;\r\n    },\r\n    mask: function (elems) {\r\n        var that = this;\r\n        if (typeof elems === \"string\") {\r\n            elems = (document.getElementById(elems) || document.querySelectorAll(elems));\r\n        }\r\n        elems = elems.nodeName ? [elems] : (Array.isArray(elems) ? elems : [].slice.call(elems)); //[].slice as alternate for Array.from (Yandex browser)\r\n        elems.forEach(function (el, ndx) {\r\n            var scopedOpts = $.extend(true, {}, that.opts);\r\n            if (importAttributeOptions(el, scopedOpts, $.extend(true, {}, that.userOptions), that.dataAttribute)) {\r\n                var maskset = generateMaskSet(scopedOpts, that.noMasksCache);\r\n                if (maskset !== undefined) {\r\n                    if (el.inputmask !== undefined) {\r\n                        el.inputmask.opts.autoUnmask = true; //force autounmasking when remasking\r\n                        el.inputmask.remove();\r\n                    }\r\n                    //store inputmask instance on the input with element reference\r\n                    el.inputmask = new Inputmask(undefined, undefined, true);\r\n                    el.inputmask.opts = scopedOpts;\r\n                    el.inputmask.noMasksCache = that.noMasksCache;\r\n                    el.inputmask.userOptions = $.extend(true, {}, that.userOptions);\r\n                    // el.inputmask.isRTL = scopedOpts.isRTL || scopedOpts.numericInput;\r\n                    el.inputmask.el = el;\r\n                    el.inputmask.$el = $(el);\r\n                    el.inputmask.maskset = maskset;\r\n\r\n                    $.data(el, dataKey, that.userOptions);\r\n                    mask.call(el.inputmask);\r\n                }\r\n            }\r\n        });\r\n        return elems && elems[0] ? (elems[0].inputmask || this) : this;\r\n    },\r\n    option: function (options, noremask) { //set extra options || retrieve value of a current option\r\n        if (typeof options === \"string\") {\r\n            return this.opts[options];\r\n        } else if (typeof options === \"object\") {\r\n            $.extend(this.userOptions, options); //user passed options\r\n            //remask\r\n            if (this.el && noremask !== true) {\r\n                this.mask(this.el);\r\n            }\r\n            return this;\r\n        }\r\n    },\r\n    unmaskedvalue: function (value) {\r\n        this.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\r\n        if (this.el === undefined || value !== undefined) {\r\n            var valueBuffer = (typeof this.opts.onBeforeMask === \"function\" ? (this.opts.onBeforeMask.call(this, value, this.opts) || value) : value).split(\"\");\r\n            checkVal.call(this, undefined, false, false, valueBuffer);\r\n            if (typeof this.opts.onBeforeWrite === \"function\") this.opts.onBeforeWrite.call(this, undefined, getBuffer.call(this), 0, this.opts);\r\n        }\r\n        return unmaskedvalue.call(this, this.el);\r\n    },\r\n    remove: function () {\r\n        if (this.el) {\r\n            $.data(this.el, dataKey, null); //invalidate\r\n            //writeout the value\r\n            var cv = this.opts.autoUnmask ? unmaskedvalue(this.el) : this._valueGet(this.opts.autoUnmask);\r\n            if (cv !== getBufferTemplate.call(this).join(\"\")) this._valueSet(cv, this.opts.autoUnmask); else this._valueSet(\"\");\r\n            //unbind all events\r\n            EventRuler.off(this.el);\r\n\r\n            //restore the value property\r\n            var valueProperty;\r\n            if (Object.getOwnPropertyDescriptor && Object.getPrototypeOf) {\r\n                valueProperty = Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this.el), \"value\");\r\n                if (valueProperty) {\r\n                    if (this.__valueGet) {\r\n                        Object.defineProperty(this.el, \"value\", {\r\n                            get: this.__valueGet,\r\n                            set: this.__valueSet,\r\n                            configurable: true\r\n                        });\r\n                    }\r\n                }\r\n            } else if (document.__lookupGetter__ && this.el.__lookupGetter__(\"value\")) {\r\n                if (this.__valueGet) {\r\n                    this.el.__defineGetter__(\"value\", this.__valueGet);\r\n                    this.el.__defineSetter__(\"value\", this.__valueSet);\r\n                }\r\n            }\r\n            //clear data\r\n            this.el.inputmask = undefined;\r\n        }\r\n        return this.el;\r\n    },\r\n    getemptymask: function () { //return the default (empty) mask value, usefull for setting the default value in validation\r\n        this.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\r\n        return (this.isRTL ? getBufferTemplate.call(this).reverse() : getBufferTemplate.call(this)).join(\"\");\r\n    },\r\n    hasMaskedValue: function () { //check wheter the returned value is masked or not; currently only works reliable when using jquery.val fn to retrieve the value\r\n        return !this.opts.autoUnmask;\r\n    },\r\n    isComplete: function () {\r\n        this.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\r\n        return isComplete.call(this, getBuffer.call(this));\r\n    },\r\n    getmetadata: function () { //return mask metadata if exists\r\n        this.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\r\n        if (Array.isArray(this.maskset.metadata)) {\r\n            var maskTarget = getMaskTemplate.call(this, true, 0, false).join(\"\");\r\n            this.maskset.metadata.forEach(function (mtdt) {\r\n                if (mtdt.mask === maskTarget) {\r\n                    maskTarget = mtdt;\r\n                    return false;\r\n                }\r\n\r\n                return true;\r\n            });\r\n            return maskTarget;\r\n        }\r\n        return this.maskset.metadata;\r\n    },\r\n    isValid: function (value) {\r\n        this.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\r\n        if (value) {\r\n            var valueBuffer = (typeof this.opts.onBeforeMask === \"function\" ? (this.opts.onBeforeMask.call(this, value, this.opts) || value) : value).split(\"\");\r\n            checkVal.call(this, undefined, true, false, valueBuffer);\r\n        } else {\r\n            value = this.isRTL ? getBuffer.call(this).slice().reverse().join(\"\") : getBuffer.call(this).join(\"\");\r\n        }\r\n        var buffer = getBuffer.call(this);\r\n        var rl = determineLastRequiredPosition.call(this),\r\n            lmib = buffer.length - 1;\r\n        for (; lmib > rl; lmib--) {\r\n            if (isMask.call(this, lmib)) break;\r\n        }\r\n        buffer.splice(rl, lmib + 1 - rl);\r\n\r\n        return isComplete.call(this, buffer) && value === (this.isRTL ? getBuffer.call(this).slice().reverse().join(\"\") : getBuffer.call(this).join(\"\"));\r\n\r\n    },\r\n    format: function (value, metadata) {\r\n        this.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\r\n        let valueBuffer = (typeof this.opts.onBeforeMask === \"function\" ? (this.opts.onBeforeMask.call(this, value, this.opts) || value) : value).split(\"\");\r\n        checkVal.call(this, undefined, true, false, valueBuffer);\r\n        let formattedValue = this.isRTL ? getBuffer.call(this).slice().reverse().join(\"\") : getBuffer.call(this).join(\"\");\r\n        return metadata ? {\r\n            value: formattedValue,\r\n            metadata: this.getmetadata()\r\n        } : formattedValue;\r\n    },\r\n    setValue: function (value) {\r\n        if (this.el) {\r\n            $(this.el).trigger(\"setvalue\", [value]);\r\n        }\r\n    },\r\n    analyseMask: analyseMask\r\n};\r\n\r\nfunction resolveAlias(aliasStr, options, opts) {\r\n    var aliasDefinition = Inputmask.prototype.aliases[aliasStr];\r\n    if (aliasDefinition) {\r\n        if (aliasDefinition.alias) resolveAlias(aliasDefinition.alias, undefined, opts); //alias is another alias\r\n        $.extend(true, opts, aliasDefinition); //merge alias definition in the options\r\n        $.extend(true, opts, options); //reapply extra given options\r\n        return true;\r\n    } else //alias not found - try as mask\r\n    if (opts.mask === null) {\r\n        opts.mask = aliasStr;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nfunction importAttributeOptions(npt, opts, userOptions, dataAttribute) {\r\n    function importOption(option, optionData) {\r\n        const attrOption = dataAttribute === \"\" ? option : dataAttribute + \"-\" + option;\r\n        optionData = optionData !== undefined ? optionData : npt.getAttribute(attrOption);\r\n        if (optionData !== null) {\r\n            if (typeof optionData === \"string\") {\r\n                if (option.indexOf(\"on\") === 0) {\r\n                    optionData = window[optionData];\r\n                }//get function definition\r\n                else if (optionData === \"false\") {\r\n                    optionData = false;\r\n                } else if (optionData === \"true\") optionData = true;\r\n            }\r\n            userOptions[option] = optionData;\r\n        }\r\n    }\r\n\r\n    if (opts.importDataAttributes === true) {\r\n        var attrOptions = npt.getAttribute(dataAttribute), option, dataoptions, optionData, p;\r\n\r\n        if (attrOptions && attrOptions !== \"\") {\r\n            attrOptions = attrOptions.replace(/'/g, \"\\\"\");\r\n            dataoptions = JSON.parse(\"{\" + attrOptions + \"}\");\r\n        }\r\n\r\n        //resolve aliases\r\n        if (dataoptions) { //pickup alias from dataAttribute\r\n            optionData = undefined;\r\n            for (p in dataoptions) {\r\n                if (p.toLowerCase() === \"alias\") {\r\n                    optionData = dataoptions[p];\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        importOption(\"alias\", optionData); //pickup alias from dataAttribute-alias\r\n        if (userOptions.alias) {\r\n            resolveAlias(userOptions.alias, userOptions, opts);\r\n        }\r\n\r\n        for (option in opts) {\r\n            if (dataoptions) {\r\n                optionData = undefined;\r\n                for (p in dataoptions) {\r\n                    if (p.toLowerCase() === option.toLowerCase()) {\r\n                        optionData = dataoptions[p];\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            importOption(option, optionData);\r\n        }\r\n    }\r\n    $.extend(true, opts, userOptions);\r\n\r\n    //handle dir=rtl\r\n    if (npt.dir === \"rtl\" || opts.rightAlign) {\r\n        npt.style.textAlign = \"right\";\r\n    }\r\n\r\n    if (npt.dir === \"rtl\" || opts.numericInput) {\r\n        npt.dir = \"ltr\";\r\n        npt.removeAttribute(\"dir\");\r\n        opts.isRTL = true;\r\n    }\r\n\r\n    return Object.keys(userOptions).length;\r\n}\r\n\r\n//apply defaults, definitions, aliases\r\nInputmask.extendDefaults = function (options) {\r\n    $.extend(true, Inputmask.prototype.defaults, options);\r\n};\r\nInputmask.extendDefinitions = function (definition) {\r\n    $.extend(true, Inputmask.prototype.definitions, definition);\r\n};\r\nInputmask.extendAliases = function (alias) {\r\n    $.extend(true, Inputmask.prototype.aliases, alias);\r\n};\r\n//static fn on inputmask\r\nInputmask.format = function (value, options, metadata) {\r\n    return Inputmask(options).format(value, metadata);\r\n};\r\nInputmask.unmask = function (value, options) {\r\n    return Inputmask(options).unmaskedvalue(value);\r\n};\r\nInputmask.isValid = function (value, options) {\r\n    return Inputmask(options).isValid(value);\r\n};\r\nInputmask.remove = function (elems) {\r\n    if (typeof elems === \"string\") {\r\n        elems = document.getElementById(elems) || document.querySelectorAll(elems);\r\n    }\r\n    elems = elems.nodeName ? [elems] : elems;\r\n    elems.forEach(function (el) {\r\n        if (el.inputmask) el.inputmask.remove();\r\n    });\r\n};\r\nInputmask.setValue = function (elems, value) {\r\n    if (typeof elems === \"string\") {\r\n        elems = document.getElementById(elems) || document.querySelectorAll(elems);\r\n    }\r\n    elems = elems.nodeName ? [elems] : elems;\r\n    elems.forEach(function (el) {\r\n        if (el.inputmask) el.inputmask.setValue(value); else $(el).trigger(\"setvalue\", [value]);\r\n    });\r\n};\r\n\r\nInputmask.dependencyLib = $;\r\n\r\n//make inputmask available\r\nwindow.Inputmask = Inputmask;\r\nexport default Inputmask;\r\n","import {keys} from \"./keycode.js\";\r\nimport {caret, getBuffer, getBufferTemplate, getLastValidPosition, resetMaskSet, seekNext} from \"./positioning\";\r\nimport {applyInputValue, clearOptionalTail, writeBuffer} from \"./inputHandling\";\r\nimport {EventRuler} from \"./eventruler\";\r\nimport {iphone, mobile} from \"./environment\";\r\nimport {isComplete} from \"./validation\";\r\nimport {EventHandlers} from \"./eventhandlers\";\r\n\r\nexport {mask};\r\n\r\n//todo put on the prototype?\r\nfunction mask() {\r\n    const inputmask = this,\r\n        opts = this.opts,\r\n        el = this.el, $ = this.dependencyLib;\r\n\r\n\r\n    function isElementTypeSupported(input, opts) {\r\n        function patchValueProperty(npt) {\r\n            var valueGet;\r\n            var valueSet;\r\n\r\n            function patchValhook(type) {\r\n                if ($.valHooks && ($.valHooks[type] === undefined || $.valHooks[type].inputmaskpatch !== true)) {\r\n                    var valhookGet = $.valHooks[type] && $.valHooks[type].get ? $.valHooks[type].get : function (elem) {\r\n                        return elem.value;\r\n                    };\r\n                    var valhookSet = $.valHooks[type] && $.valHooks[type].set ? $.valHooks[type].set : function (elem, value) {\r\n                        elem.value = value;\r\n                        return elem;\r\n                    };\r\n\r\n                    $.valHooks[type] = {\r\n                        get: function (elem) {\r\n                            if (elem.inputmask) {\r\n                                if (elem.inputmask.opts.autoUnmask) {\r\n                                    return elem.inputmask.unmaskedvalue();\r\n                                } else {\r\n                                    var result = valhookGet(elem);\r\n                                    return getLastValidPosition.call(inputmask, undefined, undefined, elem.inputmask.maskset.validPositions) !== -1 || opts.nullable !== true ? result : \"\";\r\n                                }\r\n                            } else {\r\n                                return valhookGet(elem);\r\n                            }\r\n                        },\r\n                        set: function (elem, value) {\r\n                            var result = valhookSet(elem, value);\r\n                            if (elem.inputmask) {\r\n                                applyInputValue(elem, value);\r\n                            }\r\n                            return result;\r\n                        },\r\n                        inputmaskpatch: true\r\n                    };\r\n                }\r\n            }\r\n\r\n            function getter() {\r\n                if (this.inputmask) {\r\n                    return this.inputmask.opts.autoUnmask ?\r\n                        this.inputmask.unmaskedvalue() :\r\n                        (getLastValidPosition.call(inputmask) !== -1 || opts.nullable !== true ?\r\n                            (((this.inputmask.shadowRoot || this.ownerDocument).activeElement) === this && opts.clearMaskOnLostFocus ?\r\n                                (inputmask.isRTL ? clearOptionalTail.call(inputmask, getBuffer.call(inputmask).slice()).reverse() : clearOptionalTail.call(inputmask, getBuffer.call(inputmask).slice())).join(\"\") :\r\n                                valueGet.call(this)) :\r\n                            \"\");\r\n                } else {\r\n                    return valueGet.call(this);\r\n                }\r\n            }\r\n\r\n            function setter(value) {\r\n                valueSet.call(this, value);\r\n                if (this.inputmask) {\r\n                    applyInputValue(this, value);\r\n                }\r\n            }\r\n\r\n            function installNativeValueSetFallback(npt) {\r\n                EventRuler.on(npt, \"mouseenter\", function () {\r\n                    let input = this,\r\n                        value = input.inputmask._valueGet(true),\r\n                        bufferValue = (input.inputmask.isRTL ? getBuffer.call(input.inputmask).slice().reverse() : getBuffer.call(input.inputmask)).join(\"\");\r\n                    if (value != bufferValue) {\r\n                        applyInputValue(input, value);\r\n                    }\r\n                });\r\n            }\r\n\r\n            if (!npt.inputmask.__valueGet) {\r\n                if (opts.noValuePatching !== true) {\r\n                    if (Object.getOwnPropertyDescriptor) {\r\n                        var valueProperty = Object.getPrototypeOf ? Object.getOwnPropertyDescriptor(Object.getPrototypeOf(npt), \"value\") : undefined;\r\n                        if (valueProperty && valueProperty.get && valueProperty.set) {\r\n                            valueGet = valueProperty.get;\r\n                            valueSet = valueProperty.set;\r\n                            Object.defineProperty(npt, \"value\", {\r\n                                get: getter,\r\n                                set: setter,\r\n                                configurable: true\r\n                            });\r\n                        } else if (npt.tagName.toLowerCase() !== \"input\") {\r\n                            valueGet = function () {\r\n                                return this.textContent;\r\n                            };\r\n                            valueSet = function (value) {\r\n                                this.textContent = value;\r\n                            };\r\n                            Object.defineProperty(npt, \"value\", {\r\n                                get: getter,\r\n                                set: setter,\r\n                                configurable: true\r\n                            });\r\n                        }\r\n                    } else if (document.__lookupGetter__ && npt.__lookupGetter__(\"value\")) {\r\n                        valueGet = npt.__lookupGetter__(\"value\");\r\n                        valueSet = npt.__lookupSetter__(\"value\");\r\n\r\n                        npt.__defineGetter__(\"value\", getter);\r\n                        npt.__defineSetter__(\"value\", setter);\r\n                    }\r\n                    npt.inputmask.__valueGet = valueGet; //store native property getter\r\n                    npt.inputmask.__valueSet = valueSet; //store native property setter\r\n                }\r\n                npt.inputmask._valueGet = function (overruleRTL) {\r\n                    return inputmask.isRTL && overruleRTL !== true ? valueGet.call(this.el).split(\"\").reverse().join(\"\") : valueGet.call(this.el);\r\n                };\r\n                npt.inputmask._valueSet = function (value, overruleRTL) { //null check is needed for IE8 => otherwise converts to \"null\"\r\n                    valueSet.call(this.el, (value === null || value === undefined) ? \"\" : ((overruleRTL !== true && inputmask.isRTL) ? value.split(\"\").reverse().join(\"\") : value));\r\n                };\r\n\r\n                if (valueGet === undefined) { //jquery.val fallback\r\n                    valueGet = function () {\r\n                        return this.value;\r\n                    };\r\n                    valueSet = function (value) {\r\n                        this.value = value;\r\n                    };\r\n                    patchValhook(npt.type);\r\n                    installNativeValueSetFallback(npt);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (input.tagName.toLowerCase() !== \"textarea\") {\r\n            opts.ignorables.push(keys.Enter);\r\n        }\r\n\r\n        var elementType = input.getAttribute(\"type\");\r\n        var isSupported = (input.tagName.toLowerCase() === \"input\" && opts.supportsInputType.includes(elementType)) || input.isContentEditable || input.tagName.toLowerCase() === \"textarea\";\r\n        if (!isSupported) {\r\n            if (input.tagName.toLowerCase() === \"input\") {\r\n                var el = document.createElement(\"input\");\r\n                el.setAttribute(\"type\", elementType);\r\n                isSupported = el.type === \"text\"; //apply mask only if the type is not natively supported\r\n                el = null;\r\n            } else {\r\n                isSupported = \"partial\";\r\n            }\r\n        }\r\n        if (isSupported !== false) {\r\n            patchValueProperty(input);\r\n        } else {\r\n            input.inputmask = undefined;\r\n        }\r\n        return isSupported;\r\n    }\r\n\r\n    //unbind all events - to make sure that no other mask will interfere when re-masking\r\n    EventRuler.off(el);\r\n    var isSupported = isElementTypeSupported(el, opts);\r\n    if (isSupported !== false) {\r\n        inputmask.originalPlaceholder = el.placeholder;\r\n\r\n        //read maxlength prop from el\r\n        inputmask.maxLength = el !== undefined ? el.maxLength : undefined;\r\n        if (inputmask.maxLength === -1) inputmask.maxLength = undefined;\r\n        if (\"inputMode\" in el && el.getAttribute(\"inputmode\") === null) {\r\n            el.inputMode = opts.inputmode;\r\n            el.setAttribute(\"inputmode\", opts.inputmode);\r\n        }\r\n\r\n\r\n        if (isSupported === true) {\r\n            opts.showMaskOnFocus = opts.showMaskOnFocus && [\"cc-number\", \"cc-exp\"].indexOf(el.autocomplete) === -1;\r\n            if (iphone) {\r\n                //selecting the caret shows as a selection on iphone\r\n                opts.insertModeVisual = false;\r\n                //disable autocorrect\r\n                el.setAttribute(\"autocorrect\", \"off\");\r\n            }\r\n\r\n            //bind events\r\n            EventRuler.on(el, \"submit\", EventHandlers.submitEvent);\r\n            EventRuler.on(el, \"reset\", EventHandlers.resetEvent);\r\n            EventRuler.on(el, \"blur\", EventHandlers.blurEvent);\r\n            EventRuler.on(el, \"focus\", EventHandlers.focusEvent);\r\n            EventRuler.on(el, \"invalid\", EventHandlers.invalidEvent);\r\n            EventRuler.on(el, \"click\", EventHandlers.clickEvent);\r\n            EventRuler.on(el, \"mouseleave\", EventHandlers.mouseleaveEvent);\r\n            EventRuler.on(el, \"mouseenter\", EventHandlers.mouseenterEvent);\r\n            EventRuler.on(el, \"paste\", EventHandlers.pasteEvent);\r\n            EventRuler.on(el, \"cut\", EventHandlers.cutEvent);\r\n            EventRuler.on(el, \"complete\", opts.oncomplete);\r\n            EventRuler.on(el, \"incomplete\", opts.onincomplete);\r\n            EventRuler.on(el, \"cleared\", opts.oncleared);\r\n            if (opts.inputEventOnly !== true) {\r\n                EventRuler.on(el, \"keydown\", EventHandlers.keyEvent);\r\n            }\r\n            if (mobile || opts.inputEventOnly) {\r\n                el.removeAttribute(\"maxLength\");\r\n            }\r\n            EventRuler.on(el, \"input\", EventHandlers.inputFallBackEvent);\r\n            // EventRuler.on(el, \"beforeinput\", EventHandlers.beforeInputEvent); //https://github.com/w3c/input-events - to implement\r\n        }\r\n        EventRuler.on(el, \"setvalue\", EventHandlers.setValueEvent);\r\n\r\n        //apply mask\r\n        getBufferTemplate.call(inputmask).join(\"\"); //initialize the buffer and getmasklength\r\n        inputmask.undoValue = inputmask._valueGet(true);\r\n        var activeElement = (el.inputmask.shadowRoot || el.ownerDocument).activeElement;\r\n        if (el.inputmask._valueGet(true) !== \"\" || opts.clearMaskOnLostFocus === false || activeElement === el) {\r\n            applyInputValue(el, el.inputmask._valueGet(true), opts);\r\n            var buffer = getBuffer.call(inputmask).slice();\r\n            if (isComplete.call(inputmask, buffer) === false) {\r\n                if (opts.clearIncomplete) {\r\n                    resetMaskSet.call(inputmask);\r\n                }\r\n            }\r\n            if (opts.clearMaskOnLostFocus && activeElement !== el) {\r\n                if (getLastValidPosition.call(inputmask) === -1) {\r\n                    buffer = [];\r\n                } else {\r\n                    clearOptionalTail.call(inputmask, buffer);\r\n                }\r\n            }\r\n            if (opts.clearMaskOnLostFocus === false || (opts.showMaskOnFocus && activeElement === el) || el.inputmask._valueGet(true) !== \"\") {\r\n                writeBuffer(el, buffer);\r\n            }\r\n            if (activeElement === el) { //position the caret when in focus\r\n                caret.call(inputmask, el, seekNext.call(inputmask, getLastValidPosition.call(inputmask)));\r\n            }\r\n        }\r\n    }\r\n}\r\n","export {keyCode, toKey, toKeyCode, keys};\r\n\r\nconst keyCode = {\r\n    \"AltGraph\": 18,\r\n    \"ArrowDown\": 40,\r\n    \"ArrowLeft\": 37,\r\n    \"ArrowRight\": 39,\r\n    \"ArrowUp\": 38,\r\n    \"Backspace\": 8,\r\n    \"BACKSPACE_SAFARI\": 127,\r\n    \"CapsLock\": 20,\r\n    \"Delete\": 46,\r\n    \"End\": 35,\r\n    \"Enter\": 13,\r\n    \"Escape\": 27,\r\n    \"Home\": 36,\r\n    \"Insert\": 45,\r\n    \"PageDown\": 34,\r\n    \"PageUp\": 33,\r\n    \"Space\": 32,\r\n    \"Tab\": 9,\r\n    \"c\": 67,\r\n    \"x\": 88,\r\n    \"z\": 90,\r\n    \"Shift\": 16,\r\n    \"Control\": 17,\r\n    \"Alt\": 18,\r\n    \"Pause\": 19,\r\n    \"Meta_LEFT\": 91,\r\n    \"Meta_RIGHT\": 92,\r\n    \"ContextMenu\": 93,\r\n    \"Process\": 229,\r\n    \"Unidentified\": 229,\r\n    \"F1\": 112,\r\n    \"F2\": 113,\r\n    \"F3\": 114,\r\n    \"F4\": 115,\r\n    \"F5\": 116,\r\n    \"F6\": 117,\r\n    \"F7\": 118,\r\n    \"F8\": 119,\r\n    \"F9\": 120,\r\n    \"F10\": 121,\r\n    \"F11\": 122,\r\n    \"F12\": 123\r\n};\r\n\r\nconst keyCodeRev = Object.entries(keyCode).reduce((acc, [key, value]) => (acc[value] = acc[value] === undefined ? key : acc[value] , acc), {});\r\nconst keys = Object.entries(keyCode).reduce((acc, [key, value]) => (acc[key] = key === \"Space\" ? \" \" : key, acc), {});\r\n\r\nfunction toKey(keyCode, shiftKey) {\r\n    return keyCodeRev[keyCode] || (shiftKey ? String.fromCharCode(keyCode) : String.fromCharCode(keyCode).toLowerCase());\r\n}\r\n\r\nfunction toKeyCode(key) {\r\n    return keyCode[key];\r\n}\r\n","import {\r\n    determineTestTemplate,\r\n    getMaskTemplate,\r\n    getPlaceholder,\r\n    getTest,\r\n    getTests,\r\n    getTestTemplate\r\n} from \"./validation-tests\";\r\nimport {checkAlternationMatch} from \"./validation\";\r\n\r\nexport {\r\n    caret,\r\n    determineLastRequiredPosition,\r\n    determineNewCaretPosition,\r\n    getBuffer,\r\n    getBufferTemplate,\r\n    getLastValidPosition,\r\n    isMask,\r\n    resetMaskSet,\r\n    seekNext,\r\n    seekPrevious,\r\n    translatePosition\r\n};\r\n\r\n//tobe put on prototype?\r\nfunction caret(input, begin, end, notranslate, isDelete) {\r\n    const inputmask = this,\r\n        opts = this.opts;\r\n\r\n    var range;\r\n    if (begin !== undefined) {\r\n        if (Array.isArray(begin)) {\r\n            end = inputmask.isRTL ? begin[0] : begin[1];\r\n            begin = inputmask.isRTL ? begin[1] : begin[0];\r\n        }\r\n        if (begin.begin !== undefined) {\r\n            end = inputmask.isRTL ? begin.begin : begin.end;\r\n            begin = inputmask.isRTL ? begin.end : begin.begin;\r\n        }\r\n        if (typeof begin === \"number\") {\r\n            begin = notranslate ? begin : translatePosition.call(inputmask, begin);\r\n            end = notranslate ? end : translatePosition.call(inputmask, end);\r\n            end = (typeof end == \"number\") ? end : begin;\r\n            // if (!$(input).is(\":visible\")) {\r\n            // \treturn;\r\n            // }\r\n\r\n            var scrollCalc = parseInt(((input.ownerDocument.defaultView || window).getComputedStyle ? (input.ownerDocument.defaultView || window).getComputedStyle(input, null) : input.currentStyle).fontSize) * end;\r\n            input.scrollLeft = scrollCalc > input.scrollWidth ? scrollCalc : 0;\r\n            input.inputmask.caretPos = {begin: begin, end: end}; //track caret internally\r\n            if (opts.insertModeVisual && opts.insertMode === false && begin === end) {\r\n                if (!isDelete) {\r\n                    end++; //set visualization for insert/overwrite mode\r\n                }\r\n            }\r\n            if (input === (input.inputmask.shadowRoot || input.ownerDocument).activeElement) {\r\n                if (\"setSelectionRange\" in input) {\r\n                    input.setSelectionRange(begin, end);\r\n                } else if (window.getSelection) {\r\n                    range = document.createRange();\r\n                    if (input.firstChild === undefined || input.firstChild === null) {\r\n                        var textNode = document.createTextNode(\"\");\r\n                        input.appendChild(textNode);\r\n                    }\r\n                    range.setStart(input.firstChild, begin < input.inputmask._valueGet().length ? begin : input.inputmask._valueGet().length);\r\n                    range.setEnd(input.firstChild, end < input.inputmask._valueGet().length ? end : input.inputmask._valueGet().length);\r\n                    range.collapse(true);\r\n                    var sel = window.getSelection();\r\n                    sel.removeAllRanges();\r\n                    sel.addRange(range);\r\n                    //input.focus();\r\n                } else if (input.createTextRange) {\r\n                    range = input.createTextRange();\r\n                    range.collapse(true);\r\n                    range.moveEnd(\"character\", end);\r\n                    range.moveStart(\"character\", begin);\r\n                    range.select();\r\n                }\r\n            }\r\n        }\r\n    } else {\r\n        if (\"selectionStart\" in input && \"selectionEnd\" in input) {\r\n            begin = input.selectionStart;\r\n            end = input.selectionEnd;\r\n        } else if (window.getSelection) {\r\n            range = window.getSelection().getRangeAt(0);\r\n            if (range.commonAncestorContainer.parentNode === input || range.commonAncestorContainer === input) {\r\n                begin = range.startOffset;\r\n                end = range.endOffset;\r\n            }\r\n        } else if (document.selection && document.selection.createRange) {\r\n            range = document.selection.createRange();\r\n            begin = 0 - range.duplicate().moveStart(\"character\", -input.inputmask._valueGet().length);\r\n            end = begin + range.text.length;\r\n        }\r\n\r\n        // if (opts.insertModeVisual && opts.insertMode === false && begin === (end - 1)) end--; //correct caret for insert/overwrite mode\r\n\r\n        /*eslint-disable consistent-return */\r\n        return {\r\n            \"begin\": notranslate ? begin : translatePosition.call(inputmask, begin),\r\n            \"end\": notranslate ? end : translatePosition.call(inputmask, end)\r\n        };\r\n        /*eslint-enable consistent-return */\r\n    }\r\n}\r\n\r\n//tobe put on prototype?\r\nfunction determineLastRequiredPosition(returnDefinition) {\r\n    const inputmask = this, {maskset, dependencyLib: $} = inputmask;\r\n\r\n    var buffer = getMaskTemplate.call(inputmask, true, getLastValidPosition.call(inputmask), true, true),\r\n        bl = buffer.length,\r\n        pos, lvp = getLastValidPosition.call(inputmask),\r\n        positions = {},\r\n        lvTest = maskset.validPositions[lvp],\r\n        ndxIntlzr = lvTest !== undefined ? lvTest.locator.slice() : undefined,\r\n        testPos;\r\n    for (pos = lvp + 1; pos < buffer.length; pos++) {\r\n        testPos = getTestTemplate.call(inputmask, pos, ndxIntlzr, pos - 1);\r\n        ndxIntlzr = testPos.locator.slice();\r\n        positions[pos] = $.extend(true, {}, testPos);\r\n    }\r\n\r\n    var lvTestAlt = lvTest && lvTest.alternation !== undefined ? lvTest.locator[lvTest.alternation] : undefined;\r\n    for (pos = bl - 1; pos > lvp; pos--) {\r\n        testPos = positions[pos];\r\n        if ((testPos.match.optionality ||\r\n                (testPos.match.optionalQuantifier && testPos.match.newBlockMarker) ||\r\n                (lvTestAlt &&\r\n                    (\r\n                        (lvTestAlt !== positions[pos].locator[lvTest.alternation] && testPos.match.static != true) ||\r\n                        (testPos.match.static === true &&\r\n                            testPos.locator[lvTest.alternation] &&\r\n                            checkAlternationMatch.call(inputmask, testPos.locator[lvTest.alternation].toString().split(\",\"), lvTestAlt.toString().split(\",\")) &&\r\n                            getTests.call(inputmask, pos)[0].def !== \"\")\r\n                    )\r\n                )) &&\r\n            buffer[pos] === getPlaceholder.call(inputmask, pos, testPos.match)) {\r\n            bl--;\r\n        } else {\r\n            break;\r\n        }\r\n    }\r\n    return returnDefinition ? {\r\n        \"l\": bl,\r\n        \"def\": positions[bl] ? positions[bl].match : undefined\r\n    } : bl;\r\n}\r\n\r\n//tobe put on prototype?\r\nfunction determineNewCaretPosition(selectedCaret, tabbed, positionCaretOnClick) {\r\n    const inputmask = this, {maskset, opts} = inputmask;\r\n\r\n    function doRadixFocus(clickPos) {\r\n        if (opts.radixPoint !== \"\" && opts.digits !== 0) {\r\n            var vps = maskset.validPositions;\r\n            if (vps[clickPos] === undefined || (vps[clickPos].input === getPlaceholder.call(inputmask, clickPos))) {\r\n                if (clickPos < seekNext.call(inputmask, -1)) return true;\r\n                var radixPos = getBuffer.call(inputmask).indexOf(opts.radixPoint);\r\n                if (radixPos !== -1) {\r\n                    for (let vp = 0, vpl = vps.length; vp < vpl; vp++) {\r\n                        if (vps[vp] && radixPos < vp && vps[vp].input !== getPlaceholder.call(inputmask, vp)) {\r\n                            return false;\r\n                        }\r\n                    }\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    if (tabbed) {\r\n        if (inputmask.isRTL) {\r\n            selectedCaret.end = selectedCaret.begin;\r\n        } else {\r\n            selectedCaret.begin = selectedCaret.end;\r\n        }\r\n    }\r\n    if (selectedCaret.begin === selectedCaret.end) {\r\n        positionCaretOnClick = positionCaretOnClick || opts.positionCaretOnClick;\r\n        switch (positionCaretOnClick) {\r\n            case \"none\":\r\n                break;\r\n            case \"select\":\r\n                selectedCaret = {begin: 0, end: getBuffer.call(inputmask).length};\r\n                break;\r\n            case \"ignore\":\r\n                selectedCaret.end = selectedCaret.begin = seekNext.call(inputmask, getLastValidPosition.call(inputmask));\r\n                break;\r\n            case \"radixFocus\":\r\n                if (inputmask.clicked > 1 && maskset.validPositions.length == 0)\r\n                    break;\r\n                if (doRadixFocus(selectedCaret.begin)) {\r\n                    var radixPos = getBuffer.call(inputmask).join(\"\").indexOf(opts.radixPoint);\r\n                    selectedCaret.end = selectedCaret.begin = opts.numericInput ? seekNext.call(inputmask, radixPos) : radixPos;\r\n                    break;\r\n                } //fallback to lvp\r\n            // eslint-disable-next-line no-fallthrough\r\n            default: //lvp:\r\n                var clickPosition = selectedCaret.begin,\r\n                    lvclickPosition = getLastValidPosition.call(inputmask, clickPosition, true),\r\n                    lastPosition = seekNext.call(inputmask, (lvclickPosition === -1 && !isMask.call(inputmask, 0)) ? -1 : lvclickPosition);\r\n\r\n                if (clickPosition <= lastPosition) {\r\n                    selectedCaret.end = selectedCaret.begin = !isMask.call(inputmask, clickPosition, false, true) ? seekNext.call(inputmask, clickPosition) : clickPosition;\r\n                } else {\r\n                    var lvp = maskset.validPositions[lvclickPosition],\r\n                        tt = getTestTemplate.call(inputmask, lastPosition, lvp ? lvp.match.locator : undefined, lvp),\r\n                        placeholder = getPlaceholder.call(inputmask, lastPosition, tt.match);\r\n                    if ((placeholder !== \"\" && getBuffer.call(inputmask)[lastPosition] !== placeholder && tt.match.optionalQuantifier !== true && tt.match.newBlockMarker !== true) || (!isMask.call(inputmask, lastPosition, opts.keepStatic, true) && tt.match.def === placeholder)) {\r\n                        var newPos = seekNext.call(inputmask, lastPosition);\r\n                        if (clickPosition >= newPos || clickPosition === lastPosition) {\r\n                            lastPosition = newPos;\r\n                        }\r\n                    }\r\n                    selectedCaret.end = selectedCaret.begin = lastPosition;\r\n                }\r\n        }\r\n\r\n        return selectedCaret;\r\n    }\r\n}\r\n\r\n\r\n//tobe put on prototype?\r\nfunction getBuffer(noCache) {\r\n    const inputmask = this, {maskset} = inputmask;\r\n\r\n    if (maskset.buffer === undefined || noCache === true) {\r\n        maskset.buffer = getMaskTemplate.call(inputmask, true, getLastValidPosition.call(inputmask), true);\r\n        if (maskset._buffer === undefined) maskset._buffer = maskset.buffer.slice();\r\n    }\r\n    return maskset.buffer;\r\n}\r\n\r\n//tobe put on prototype?\r\nfunction getBufferTemplate() {\r\n    const inputmask = this, maskset = this.maskset;\r\n\r\n    if (maskset._buffer === undefined) {\r\n        //generate template\r\n        maskset._buffer = getMaskTemplate.call(inputmask, false, 1);\r\n        if (maskset.buffer === undefined) maskset.buffer = maskset._buffer.slice();\r\n    }\r\n    return maskset._buffer;\r\n}\r\n\r\n//tobe put on prototype?\r\nfunction getLastValidPosition(closestTo, strict, validPositions) {\r\n    const maskset = this.maskset;\r\n\r\n    var before = -1,\r\n        after = -1,\r\n        valids = validPositions || maskset.validPositions; //for use in valhook ~ context switch\r\n    if (closestTo === undefined) closestTo = -1;\r\n    for (var psNdx = 0, vpl = valids.length; psNdx < vpl; psNdx++) {\r\n        if (valids[psNdx] && (strict || valids[psNdx].generatedInput !== true)) {\r\n            if (psNdx <= closestTo) before = psNdx;\r\n            if (psNdx >= closestTo) after = psNdx;\r\n        }\r\n    }\r\n    return (before === -1 || before == closestTo) ? after : after == -1 ? before : (closestTo - before) < (after - closestTo) ? before : after;\r\n}\r\n\r\n//tobe put on prototype?\r\nfunction isMask(pos, strict, fuzzy) {\r\n    const inputmask = this, maskset = this.maskset;\r\n\r\n    var test = getTestTemplate.call(inputmask, pos).match;\r\n    if (test.def === \"\") test = getTest.call(inputmask, pos).match;\r\n\r\n    if (test.static !== true) {\r\n        return test.fn;\r\n    }\r\n    if (fuzzy === true && (maskset.validPositions[pos] !== undefined && maskset.validPositions[pos].generatedInput !== true)) {\r\n        return true;\r\n    }\r\n\r\n    if (strict !== true && pos > -1) {\r\n        if (fuzzy) { //check on the number of tests\r\n            var tests = getTests.call(inputmask, pos);\r\n            return tests.length > (1 + (tests[tests.length - 1].match.def === \"\" ? 1 : 0));\r\n        }\r\n        //else based on the template\r\n        var testTemplate = determineTestTemplate.call(inputmask, pos, getTests.call(inputmask, pos));\r\n        var testPlaceHolder = getPlaceholder.call(inputmask, pos, testTemplate.match);\r\n        return testTemplate.match.def !== testPlaceHolder;\r\n\r\n    }\r\n    return false;\r\n}\r\n\r\n//tobe put on prototype?\r\nfunction resetMaskSet(soft) {\r\n    const maskset = this.maskset;\r\n\r\n    maskset.buffer = undefined;\r\n    if (soft !== true) {\r\n        maskset.validPositions = [];\r\n        maskset.p = 0;\r\n    }\r\n}\r\n\r\n//tobe put on prototype?\r\nfunction seekNext(pos, newBlock, fuzzy) {\r\n    const inputmask = this;\r\n\r\n    if (fuzzy === undefined) fuzzy = true;\r\n    var position = pos + 1;\r\n    while (getTest.call(inputmask, position).match.def !== \"\" &&\r\n    ((newBlock === true && (getTest.call(inputmask, position).match.newBlockMarker !== true || !isMask.call(inputmask, position, undefined, true))) ||\r\n        (newBlock !== true && !isMask.call(inputmask, position, undefined, fuzzy)))) {\r\n        position++;\r\n    }\r\n    return position;\r\n}\r\n\r\n//tobe put on prototype?\r\nfunction seekPrevious(pos, newBlock) {\r\n    const inputmask = this;\r\n\r\n    var position = pos - 1;\r\n    if (pos <= 0) return 0;\r\n\r\n    while (position > 0 &&\r\n    ((newBlock === true && (getTest.call(inputmask, position).match.newBlockMarker !== true || !isMask.call(inputmask, position, undefined, true))) ||\r\n        (newBlock !== true && !isMask.call(inputmask, position, undefined, true)))) {\r\n        position--;\r\n    }\r\n    return position;\r\n}\r\n\r\n//tobe put on prototype?\r\nfunction translatePosition(pos) {\r\n    const inputmask = this,\r\n        opts = this.opts,\r\n        el = this.el;\r\n\r\n    if (inputmask.isRTL && typeof pos === \"number\" && (!opts.greedy || opts.placeholder !== \"\") && el) {\r\n        pos = inputmask._valueGet().length - pos;\r\n        if (pos < 0) pos = 0;\r\n    }\r\n    return pos;\r\n}\r\n","export {\r\n    determineTestTemplate,\r\n    getDecisionTaker,\r\n    getMaskTemplate,\r\n    getPlaceholder,\r\n    getTest,\r\n    getTests,\r\n    getTestTemplate,\r\n    isSubsetOf\r\n};\r\nimport Inputmask from \"./inputmask\";\r\n\r\nfunction getLocator(tst, align) { //need to align the locators to be correct\r\n    var locator = (tst.alternation != undefined ? tst.mloc[getDecisionTaker(tst)] : tst.locator).join(\"\");\r\n    if (locator !== \"\") while (locator.length < align) locator += \"0\";\r\n    return locator;\r\n}\r\n\r\nfunction getDecisionTaker(tst) {\r\n    var decisionTaker = tst.locator[tst.alternation];\r\n    if (typeof decisionTaker == \"string\" && decisionTaker.length > 0) { //no decision taken ~ take first one as decider\r\n        decisionTaker = decisionTaker.split(\",\")[0];\r\n    }\r\n    return decisionTaker !== undefined ? decisionTaker.toString() : \"\";\r\n}\r\n\r\n//tobe put on prototype?\r\nfunction getPlaceholder(pos, test, returnPL) {\r\n    const inputmask = this,\r\n        opts = this.opts,\r\n        maskset = this.maskset;\r\n\r\n    test = test || getTest.call(inputmask, pos).match;\r\n    if (test.placeholder !== undefined || returnPL === true) {\r\n        return typeof test.placeholder === \"function\" ? test.placeholder(opts) : test.placeholder;\r\n    } else if (test.static === true) {\r\n        if (pos > -1 && maskset.validPositions[pos] === undefined) {\r\n            var tests = getTests.call(inputmask, pos),\r\n                staticAlternations = [],\r\n                prevTest;\r\n            if (tests.length > 1 + (tests[tests.length - 1].match.def === \"\" ? 1 : 0)) {\r\n                for (var i = 0; i < tests.length; i++) {\r\n                    if (tests[i].match.def !== \"\" && tests[i].match.optionality !== true && tests[i].match.optionalQuantifier !== true &&\r\n                        (tests[i].match.static === true || (prevTest === undefined || tests[i].match.fn.test(prevTest.match.def, maskset, pos, true, opts) !== false))) {\r\n                        staticAlternations.push(tests[i]);\r\n                        if (tests[i].match.static === true) prevTest = tests[i];\r\n                        if (staticAlternations.length > 1) {\r\n                            if (/[0-9a-bA-Z]/.test(staticAlternations[0].match.def)) {\r\n                                return opts.placeholder.charAt(pos % opts.placeholder.length);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return test.def;\r\n    }\r\n\r\n    return opts.placeholder.charAt(pos % opts.placeholder.length);\r\n}\r\n\r\n//tobe put on prototype?\r\nfunction getMaskTemplate(baseOnInput, minimalPos, includeMode, noJit, clearOptionalTail) {\r\n    //includeMode true => input, undefined => placeholder, false => mask\r\n\r\n    var inputmask = this,\r\n        opts = this.opts,\r\n        maskset = this.maskset;\r\n\r\n\r\n    var greedy = opts.greedy;\r\n    if (clearOptionalTail && opts.greedy) {\r\n        opts.greedy = false;\r\n        inputmask.maskset.tests = {};\r\n    }\r\n    minimalPos = minimalPos || 0;\r\n    var maskTemplate = [],\r\n        ndxIntlzr, pos = 0,\r\n        test, testPos, jitRenderStatic;\r\n    do {\r\n        if (baseOnInput === true && maskset.validPositions[pos]) {\r\n            testPos = (clearOptionalTail && maskset.validPositions[pos].match.optionality\r\n                && maskset.validPositions[pos + 1] === undefined\r\n                && (maskset.validPositions[pos].generatedInput === true || (maskset.validPositions[pos].input == opts.skipOptionalPartCharacter && pos > 0)))\r\n                ? determineTestTemplate.call(inputmask, pos, getTests.call(inputmask, pos, ndxIntlzr, pos - 1))\r\n                : maskset.validPositions[pos];\r\n            test = testPos.match;\r\n            ndxIntlzr = testPos.locator.slice();\r\n            maskTemplate.push(includeMode === true ? testPos.input : includeMode === false ? test.nativeDef : getPlaceholder.call(inputmask, pos, test));\r\n        } else {\r\n            testPos = getTestTemplate.call(inputmask, pos, ndxIntlzr, pos - 1);\r\n            test = testPos.match;\r\n            ndxIntlzr = testPos.locator.slice();\r\n            var jitMasking = noJit === true ? false : (opts.jitMasking !== false ? opts.jitMasking : test.jit);\r\n            //check for groupSeparator is a hack for the numerics as we don't want the render of the groupSeparator beforehand\r\n            jitRenderStatic = ((jitRenderStatic && test.static && test.def !== opts.groupSeparator && test.fn === null) || (maskset.validPositions[pos - 1] && test.static && test.def !== opts.groupSeparator && test.fn === null)) && maskset.tests[pos] && maskset.tests[pos].length === 1;\r\n            if (jitRenderStatic || jitMasking === false || jitMasking === undefined /*|| pos < lvp*/ || (typeof jitMasking === \"number\" && isFinite(jitMasking) && jitMasking > pos)) {\r\n                maskTemplate.push(includeMode === false ? test.nativeDef : getPlaceholder.call(inputmask, maskTemplate.length, test));\r\n            } else {\r\n                jitRenderStatic = false;\r\n            }\r\n        }\r\n\r\n        pos++;\r\n    } while ((test.static !== true || test.def !== \"\") || minimalPos > pos);\r\n    if (maskTemplate[maskTemplate.length - 1] === \"\") {\r\n        maskTemplate.pop(); //drop the last one which is empty\r\n    }\r\n    if (includeMode !== false || //do not alter the masklength when just retrieving the maskdefinition\r\n        maskset.maskLength === undefined) //just make sure the maskLength gets initialized in all cases (needed for isValid)\r\n    {\r\n        maskset.maskLength = pos - 1;\r\n    }\r\n\r\n    opts.greedy = greedy;\r\n    return maskTemplate;\r\n}\r\n\r\n//tobe put on prototype?\r\nfunction getTestTemplate(pos, ndxIntlzr, tstPs) {\r\n    var inputmask = this,\r\n        maskset = this.maskset;\r\n\r\n    return maskset.validPositions[pos] || determineTestTemplate.call(inputmask, pos, getTests.call(inputmask, pos, ndxIntlzr ? ndxIntlzr.slice() : ndxIntlzr, tstPs));\r\n}\r\n\r\n//tobe put on prototype?\r\nfunction determineTestTemplate(pos, tests) {\r\n    var inputmask = this,\r\n        opts = this.opts,\r\n        lenghtOffset = 0;\r\n    var optionalityLevel = determineOptionalityLevel(pos, tests);\r\n    pos = pos > 0 ? pos - 1 : 0;\r\n    var altTest = getTest.call(inputmask, pos), targetLocator = getLocator(altTest), tstLocator, closest, bestMatch;\r\n    if (opts.greedy && tests.length > 1 && tests[tests.length - 1].match.def === \"\")\r\n        lenghtOffset = 1;\r\n    // console.log(\" optionality = \" + optionalityLevel);\r\n    // console.log(\" - \" + JSON.stringify(tests));\r\n    for (var ndx = 0; ndx < tests.length - lenghtOffset; ndx++) { //find best matching\r\n        var tst = tests[ndx];\r\n        tstLocator = getLocator(tst, targetLocator.length);\r\n        var distance = Math.abs(tstLocator - targetLocator);\r\n\r\n        if (closest === undefined\r\n            || (tstLocator !== \"\" && distance < closest)\r\n            || (bestMatch && !opts.greedy &&\r\n                (bestMatch.match.optionality && bestMatch.match.optionality - optionalityLevel > 0) &&\r\n                bestMatch.match.newBlockMarker === \"master\" &&\r\n                ((!tst.match.optionality || tst.match.optionality - optionalityLevel < 1) || !tst.match.newBlockMarker))\r\n            || (bestMatch && !opts.greedy && bestMatch.match.optionalQuantifier && !tst.match.optionalQuantifier)) {\r\n            closest = distance;\r\n            bestMatch = tst;\r\n        }\r\n    }\r\n    return bestMatch;\r\n}\r\n\r\nfunction determineOptionalityLevel(pos, tests) {\r\n    let optionalityLevel = 0, differentOptionalLevels = false;\r\n    tests.forEach(test => {\r\n        if (test.match.optionality) {\r\n            if (optionalityLevel !== 0 && optionalityLevel !== test.match.optionality)\r\n                differentOptionalLevels = true;\r\n            if (optionalityLevel === 0 || optionalityLevel > test.match.optionality) {\r\n                optionalityLevel = test.match.optionality;\r\n            }\r\n        }\r\n    });\r\n    if (optionalityLevel) {\r\n        if (pos == 0) optionalityLevel = 0;\r\n        else if (tests.length == 1) optionalityLevel = 0;\r\n        else if (!differentOptionalLevels) optionalityLevel = 0;\r\n    }\r\n    return optionalityLevel;\r\n}\r\n\r\n//tobe put on prototype?\r\nfunction getTest(pos, tests) {\r\n    var inputmask = this,\r\n        maskset = this.maskset;\r\n\r\n    if (maskset.validPositions[pos]) {\r\n        return maskset.validPositions[pos];\r\n    }\r\n    return (tests || getTests.call(inputmask, pos))[0];\r\n}\r\n\r\nfunction isSubsetOf(source, target, opts) {\r\n    function expand(pattern) {\r\n        var expanded = [], start = -1, end;\r\n        for (var i = 0, l = pattern.length; i < l; i++) {\r\n            if (pattern.charAt(i) === \"-\") {\r\n                end = pattern.charCodeAt(i + 1);\r\n                while (++start < end) expanded.push(String.fromCharCode(start));\r\n            } else {\r\n                start = pattern.charCodeAt(i);\r\n                expanded.push(pattern.charAt(i));\r\n            }\r\n        }\r\n        return expanded.join(\"\");\r\n    }\r\n\r\n    if (source.match.def === target.match.nativeDef) return true;\r\n    if ((opts.regex || (source.match.fn instanceof RegExp && target.match.fn instanceof RegExp)) && source.match.static !== true && target.match.static !== true) { //is regex a subset\r\n        return expand(target.match.fn.toString().replace(/[[\\]/]/g, \"\")).indexOf(expand(source.match.fn.toString().replace(/[[\\]/]/g, \"\"))) !== -1;\r\n    }\r\n    return false;\r\n}\r\n\r\n//tobe put on prototype?\r\nfunction getTests(pos, ndxIntlzr, tstPs) {\r\n    var inputmask = this,\r\n        $ = this.dependencyLib,\r\n        maskset = this.maskset,\r\n        opts = this.opts,\r\n        el = this.el,\r\n        maskTokens = maskset.maskToken,\r\n        testPos = ndxIntlzr ? tstPs : 0,\r\n        ndxInitializer = ndxIntlzr ? ndxIntlzr.slice() : [0],\r\n        matches = [],\r\n        insertStop = false,\r\n        latestMatch,\r\n        cacheDependency = ndxIntlzr ? ndxIntlzr.join(\"\") : \"\";\r\n\r\n    function resolveTestFromToken(maskToken, ndxInitializer, loopNdx, quantifierRecurse) { //ndxInitializer contains a set of indexes to speedup searches in the mtokens\r\n        function handleMatch(match, loopNdx, quantifierRecurse) {\r\n            function isFirstMatch(latestMatch, tokenGroup) {\r\n                var firstMatch = tokenGroup.matches.indexOf(latestMatch) === 0;\r\n                if (!firstMatch) {\r\n                    tokenGroup.matches.every(function (match, ndx) {\r\n                        if (match.isQuantifier === true) {\r\n                            firstMatch = isFirstMatch(latestMatch, tokenGroup.matches[ndx - 1]);\r\n                        } else if (Object.prototype.hasOwnProperty.call(match, \"matches\")) firstMatch = isFirstMatch(latestMatch, match);\r\n                        if (firstMatch) return false;\r\n\r\n                        return true;\r\n                    });\r\n                }\r\n                return firstMatch;\r\n            }\r\n\r\n            function resolveNdxInitializer(pos, alternateNdx, targetAlternation) {\r\n                var bestMatch, indexPos;\r\n\r\n                if (maskset.tests[pos] || maskset.validPositions[pos]) {\r\n                    (maskset.tests[pos] || [maskset.validPositions[pos]]).every(function (lmnt, ndx) {\r\n                        if (lmnt.mloc[alternateNdx]) {\r\n                            bestMatch = lmnt;\r\n                            return false; //break\r\n                        }\r\n                        var alternation = targetAlternation !== undefined ? targetAlternation : lmnt.alternation,\r\n                            ndxPos = lmnt.locator[alternation] !== undefined ? lmnt.locator[alternation].toString().indexOf(alternateNdx) : -1;\r\n                        if ((indexPos === undefined || ndxPos < indexPos) && ndxPos !== -1) {\r\n                            bestMatch = lmnt;\r\n                            indexPos = ndxPos;\r\n                        }\r\n\r\n                        return true;\r\n                    });\r\n                }\r\n                if (bestMatch) {\r\n                    var bestMatchAltIndex = bestMatch.locator[bestMatch.alternation];\r\n                    var locator = bestMatch.mloc[alternateNdx] || bestMatch.mloc[bestMatchAltIndex] || bestMatch.locator;\r\n                    return locator.slice((targetAlternation !== undefined ? targetAlternation : bestMatch.alternation) + 1);\r\n                } else {\r\n                    return targetAlternation !== undefined ? resolveNdxInitializer(pos, alternateNdx) : undefined;\r\n                }\r\n            }\r\n\r\n            function staticCanMatchDefinition(source, target) {\r\n                return source.match.static === true && target.match.static !== true ? target.match.fn.test(source.match.def, maskset, pos, false, opts, false) : false;\r\n            }\r\n\r\n            //mergelocators for retrieving the correct locator match when merging\r\n            function setMergeLocators(targetMatch, altMatch) {\r\n                var alternationNdx = targetMatch.alternation,\r\n                    shouldMerge = altMatch === undefined || (alternationNdx === altMatch.alternation &&\r\n                        targetMatch.locator[alternationNdx].toString().indexOf(altMatch.locator[alternationNdx]) === -1);\r\n                if (!shouldMerge && alternationNdx > altMatch.alternation) {\r\n                    for (var i = altMatch.alternation; i < alternationNdx; i++) {\r\n                        if (targetMatch.locator[i] !== altMatch.locator[i]) {\r\n                            alternationNdx = i;\r\n                            shouldMerge = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (shouldMerge) {\r\n                    targetMatch.mloc = targetMatch.mloc || {};\r\n                    var locNdx = targetMatch.locator[alternationNdx];\r\n                    if (locNdx === undefined) {\r\n                        targetMatch.alternation = undefined;\r\n                    } else {\r\n                        if (typeof locNdx === \"string\") locNdx = locNdx.split(\",\")[0];\r\n                        if (targetMatch.mloc[locNdx] === undefined) targetMatch.mloc[locNdx] = targetMatch.locator.slice();\r\n                        if (altMatch !== undefined) {\r\n                            for (var ndx in altMatch.mloc) {\r\n                                if (typeof ndx === \"string\") ndx = ndx.split(\",\")[0];\r\n                                if (targetMatch.mloc[ndx] === undefined) targetMatch.mloc[ndx] = altMatch.mloc[ndx];\r\n                            }\r\n                            targetMatch.locator[alternationNdx] = Object.keys(targetMatch.mloc).join(\",\");\r\n                        }\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n\r\n            function isSameLevel(targetMatch, altMatch) {\r\n                if (targetMatch.locator.length !== altMatch.locator.length) {\r\n                    return false;\r\n                }\r\n                for (let locNdx = targetMatch.alternation + 1; locNdx < targetMatch.locator.length; locNdx++) {\r\n                    if (targetMatch.locator[locNdx] !== altMatch.locator[locNdx]) {\r\n                        return false;\r\n                    }\r\n                }\r\n                return true;\r\n            }\r\n\r\n            function handleGroup() {\r\n                match = handleMatch(maskToken.matches[maskToken.matches.indexOf(match) + 1], loopNdx, quantifierRecurse);\r\n                if (match) return true;\r\n            }\r\n\r\n            function handleOptional() {\r\n                var optionalToken = match, mtchsNdx = matches.length;\r\n                match = resolveTestFromToken(match, ndxInitializer, loopNdx, quantifierRecurse);\r\n                if (matches.length > 0) { //check on matches.length instead of match to handle quantifier in a recursive call\r\n                    //mark optionality in matches\r\n                    matches.forEach(function (mtch, ndx) {\r\n                        if (ndx >= mtchsNdx) {\r\n                            mtch.match.optionality = mtch.match.optionality ? mtch.match.optionality + 1 : 1;\r\n                        }\r\n                    });\r\n                    latestMatch = matches[matches.length - 1].match;\r\n\r\n                    if (quantifierRecurse === undefined && isFirstMatch(latestMatch, optionalToken)) { //prevent loop see #698\r\n                        insertStop = true; //insert a stop\r\n                        testPos = pos; //match the position after the group\r\n                    } else {\r\n                        return match; //make the loop continue when it is deliberately by a quantifier\r\n                    }\r\n                }\r\n            }\r\n\r\n            function handleAlternator() {\r\n                inputmask.hasAlternator = true;\r\n                var alternateToken = match,\r\n                    malternateMatches = [],\r\n                    maltMatches,\r\n                    currentMatches = matches.slice(),\r\n                    loopNdxCnt = loopNdx.length,\r\n                    unMatchedAlternation = false;\r\n                var altIndex = ndxInitializer.length > 0 ? ndxInitializer.shift() : -1;\r\n                if (altIndex === -1 || typeof altIndex === \"string\") {\r\n                    var currentPos = testPos,\r\n                        ndxInitializerClone = ndxInitializer.slice(),\r\n                        altIndexArr = [],\r\n                        amndx;\r\n                    if (typeof altIndex == \"string\") {\r\n                        altIndexArr = altIndex.split(\",\");\r\n                    } else {\r\n                        for (amndx = 0; amndx < alternateToken.matches.length; amndx++) {\r\n                            altIndexArr.push(amndx.toString());\r\n                        }\r\n                    }\r\n\r\n                    if (maskset.excludes[pos] !== undefined) {\r\n                        var altIndexArrClone = altIndexArr.slice();\r\n                        for (var i = 0, exl = maskset.excludes[pos].length; i < exl; i++) {\r\n                            var excludeSet = maskset.excludes[pos][i].toString().split(\":\");\r\n                            if (loopNdx.length == excludeSet[1]) {\r\n                                altIndexArr.splice(altIndexArr.indexOf(excludeSet[0]), 1);\r\n                            }\r\n                        }\r\n                        if (altIndexArr.length === 0) { //fully alternated => reset\r\n                            delete maskset.excludes[pos];\r\n                            altIndexArr = altIndexArrClone;\r\n                        }\r\n                    }\r\n                    if (opts.keepStatic === true || (isFinite(parseInt(opts.keepStatic)) && currentPos >= opts.keepStatic) ||\r\n                        (maskset.validPositions[currentPos - 1] === undefined && maskset.tests[currentPos - 1] && !maskset.tests[currentPos - 1][0].match.static)) altIndexArr = altIndexArr.slice(0, 1);\r\n                    for (var ndx = 0; ndx < altIndexArr.length; ndx++) {\r\n                        amndx = parseInt(altIndexArr[ndx]);\r\n                        matches = [];\r\n                        //set the correct ndxInitializer\r\n                        ndxInitializer = typeof altIndex === \"string\" ? resolveNdxInitializer(testPos, amndx, loopNdxCnt) || ndxInitializerClone.slice() : ndxInitializerClone.slice();\r\n                        var tokenMatch = alternateToken.matches[amndx];\r\n                        if (tokenMatch && handleMatch(tokenMatch, [amndx].concat(loopNdx), quantifierRecurse)) {\r\n                            match = true;\r\n                        } else {\r\n                            if (ndx === 0) {\r\n                                unMatchedAlternation = true;\r\n                            }\r\n                            if (tokenMatch && tokenMatch.matches && tokenMatch.matches.length > alternateToken.matches[0].matches.length) {\r\n                                break;\r\n                            }\r\n                        }\r\n\r\n                        maltMatches = matches.slice();\r\n                        testPos = currentPos;\r\n                        matches = [];\r\n\r\n                        //fuzzy merge matches\r\n                        for (var ndx1 = 0; ndx1 < maltMatches.length; ndx1++) {\r\n                            var altMatch = maltMatches[ndx1],\r\n                                dropMatch = false;\r\n                            altMatch.match.jit = altMatch.match.jit || unMatchedAlternation; //mark jit when there are unmatched alternations  ex: mask: \"(a|aa)\"\r\n                            altMatch.alternation = altMatch.alternation || loopNdxCnt;\r\n                            setMergeLocators(altMatch);\r\n                            for (var ndx2 = 0; ndx2 < malternateMatches.length; ndx2++) {\r\n                                var altMatch2 = malternateMatches[ndx2];\r\n                                if (typeof altIndex !== \"string\" || (altMatch.alternation !== undefined && altIndexArr.includes(altMatch.locator[altMatch.alternation].toString()))) {\r\n                                    if (altMatch.match.nativeDef === altMatch2.match.nativeDef) {\r\n                                        dropMatch = true;\r\n                                        setMergeLocators(altMatch2, altMatch);\r\n                                        break;\r\n                                    } else if (isSubsetOf(altMatch, altMatch2, opts)) {\r\n                                        if (setMergeLocators(altMatch, altMatch2)) {\r\n                                            dropMatch = true;\r\n                                            malternateMatches.splice(malternateMatches.indexOf(altMatch2), 0, altMatch);\r\n                                        }\r\n                                        break;\r\n                                    } else if (isSubsetOf(altMatch2, altMatch, opts)) {\r\n                                        setMergeLocators(altMatch2, altMatch);\r\n                                        break;\r\n                                    } else if (staticCanMatchDefinition(altMatch, altMatch2)) {\r\n                                        if (!isSameLevel(altMatch, altMatch2) && el.inputmask.userOptions.keepStatic === undefined) {\r\n                                            opts.keepStatic = true;\r\n                                        } else if (setMergeLocators(altMatch, altMatch2)) {\r\n                                            //insert match above general match\r\n                                            dropMatch = true;\r\n                                            malternateMatches.splice(malternateMatches.indexOf(altMatch2), 0, altMatch);\r\n                                        }\r\n                                        break;\r\n                                    }\r\n                                }\r\n                            }\r\n                            if (!dropMatch) {\r\n                                malternateMatches.push(altMatch);\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    matches = currentMatches.concat(malternateMatches);\r\n                    testPos = pos;\r\n                    insertStop = matches.length > 0; //insert a stopelemnt when there is an alternate - needed for non-greedy option\r\n                    match = malternateMatches.length > 0; //set correct match state\r\n\r\n                    //cloneback\r\n                    ndxInitializer = ndxInitializerClone.slice();\r\n                } else {\r\n                    match = handleMatch(alternateToken.matches[altIndex] || maskToken.matches[altIndex], [altIndex].concat(loopNdx), quantifierRecurse);\r\n                }\r\n                if (match) return true;\r\n            }\r\n\r\n            function handleQuantifier() {\r\n                var qt = match, breakloop = false;\r\n                for (var qndx = (ndxInitializer.length > 0) ? ndxInitializer.shift() : 0; (qndx < (isNaN(qt.quantifier.max) ? qndx + 1 : qt.quantifier.max)) && testPos <= pos; qndx++) {\r\n                    var tokenGroup = maskToken.matches[maskToken.matches.indexOf(qt) - 1];\r\n                    match = handleMatch(tokenGroup, [qndx].concat(loopNdx), tokenGroup); //set the tokenGroup as quantifierRecurse marker\r\n                    if (match) {\r\n                        matches.forEach(function (mtch, ndx) {\r\n                            if (IsMatchOf(tokenGroup, mtch.match))\r\n                                latestMatch = mtch.match;\r\n                            else latestMatch = matches[matches.length - 1].match;\r\n\r\n                            //mark optionality\r\n                            //TODO FIX RECURSIVE QUANTIFIERS\r\n                            latestMatch.optionalQuantifier = qndx >= qt.quantifier.min;\r\n                            // console.log(pos + \" \" + qt.quantifier.min + \" \" + latestMatch.optionalQuantifier);\r\n                            //qndx + 1 as the index starts from 0\r\n                            latestMatch.jit = (qndx + 1) * (tokenGroup.matches.indexOf(latestMatch) + 1) > qt.quantifier.jit;\r\n                            if (latestMatch.optionalQuantifier && isFirstMatch(latestMatch, tokenGroup)) {\r\n                                insertStop = true;\r\n                                testPos = pos; //match the position after the group\r\n                                if (opts.greedy && maskset.validPositions[pos - 1] == undefined && qndx > qt.quantifier.min && [\"*\", \"+\"].indexOf(qt.quantifier.max) != -1) {\r\n                                    matches.pop();\r\n                                    cacheDependency = undefined;\r\n                                }\r\n                                breakloop = true; //stop quantifierloop && search for next possible match\r\n                                match = false; //mark match to false to make sure the loop in optionals continues\r\n                            }\r\n                            if (!breakloop && latestMatch.jit /*&& !latestMatch.optionalQuantifier*/) {\r\n                                //always set jitOffset, isvalid checks when to apply\r\n                                maskset.jitOffset[pos] = tokenGroup.matches.length - tokenGroup.matches.indexOf(latestMatch);\r\n                            }\r\n                        });\r\n                        if (breakloop) break; // search for next possible match\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (testPos > (pos + opts._maxTestPos)) {\r\n                throw \"Inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. \" + maskset.mask;\r\n            }\r\n            if (testPos === pos && match.matches === undefined) {\r\n                matches.push({\r\n                    \"match\": match,\r\n                    \"locator\": loopNdx.reverse(),\r\n                    \"cd\": cacheDependency,\r\n                    \"mloc\": {}\r\n                });\r\n                if (match.optionality && quantifierRecurse === undefined &&\r\n                    ((opts.definitions && opts.definitions[match.nativeDef] && opts.definitions[match.nativeDef].optional) ||\r\n                        (Inputmask.prototype.definitions[match.nativeDef] && Inputmask.prototype.definitions[match.nativeDef].optional))) { //prevent loop see #698\r\n                    insertStop = true; //insert a stop\r\n                    testPos = pos; //match the position after the group\r\n                } else {\r\n                    return true;\r\n                }\r\n            } else if (match.matches !== undefined) {\r\n                if (match.isGroup && quantifierRecurse !== match) { //when a group pass along to the quantifier\r\n                    return handleGroup();\r\n                } else if (match.isOptional) {\r\n                    return handleOptional();\r\n                } else if (match.isAlternator) {\r\n                    return handleAlternator();\r\n                } else if (match.isQuantifier && quantifierRecurse !== maskToken.matches[maskToken.matches.indexOf(match) - 1]) {\r\n                    return handleQuantifier();\r\n                } else {\r\n                    match = resolveTestFromToken(match, ndxInitializer, loopNdx, quantifierRecurse);\r\n                    if (match) return true;\r\n                }\r\n            } else {\r\n                testPos++;\r\n            }\r\n        }\r\n\r\n        //the offset is set in the quantifierloop when git masking is used\r\n        for (var tndx = (ndxInitializer.length > 0 ? ndxInitializer.shift() : 0); tndx < maskToken.matches.length; tndx++) {\r\n            if (maskToken.matches[tndx].isQuantifier !== true) {\r\n                var match = handleMatch(maskToken.matches[tndx], [tndx].concat(loopNdx), quantifierRecurse);\r\n                if (match && testPos === pos) {\r\n                    return match;\r\n                } else if (testPos > pos) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function IsMatchOf(tokenGroup, match) {\r\n        let isMatch = tokenGroup.matches.indexOf(match) != -1;\r\n        if (!isMatch) {\r\n            tokenGroup.matches.forEach((mtch, ndx) => {\r\n                if (mtch.matches !== undefined && !isMatch) {\r\n                    isMatch = IsMatchOf(mtch, match);\r\n                }\r\n            });\r\n        }\r\n        return isMatch;\r\n    }\r\n\r\n    function mergeLocators(pos, tests) {\r\n        let locator = [], alternation;\r\n        if (!Array.isArray(tests)) tests = [tests];\r\n\r\n        if (tests.length > 0) {\r\n            if (tests[0].alternation === undefined || opts.keepStatic === true) {\r\n                locator = determineTestTemplate.call(inputmask, pos, tests.slice()).locator.slice();\r\n                if (locator.length === 0) locator = tests[0].locator.slice();\r\n            } else {\r\n                tests.forEach(function (tst) {\r\n                    if (tst.def !== \"\") {\r\n                        if (locator.length === 0) {\r\n                            alternation = tst.alternation;\r\n                            locator = tst.locator.slice();\r\n                        } else {\r\n                            if (tst.locator[alternation] && locator[alternation].toString().indexOf(tst.locator[alternation]) === -1) {\r\n                                locator[alternation] += \",\" + tst.locator[alternation];\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        return locator;\r\n    }\r\n\r\n    if (pos > -1) {\r\n        if (ndxIntlzr === undefined) { //determine index initializer\r\n            var previousPos = pos - 1,\r\n                test;\r\n            while ((test = maskset.validPositions[previousPos] || maskset.tests[previousPos]) === undefined && previousPos > -1) {\r\n                previousPos--;\r\n            }\r\n            if (test !== undefined && previousPos > -1) {\r\n                ndxInitializer = mergeLocators(previousPos, test);\r\n                cacheDependency = ndxInitializer.join(\"\");\r\n                testPos = previousPos;\r\n            }\r\n        }\r\n        if (maskset.tests[pos] && maskset.tests[pos][0].cd === cacheDependency) { //cacheDependency is set on all tests, just check on the first\r\n            return maskset.tests[pos];\r\n        }\r\n        for (var mtndx = ndxInitializer.shift(); mtndx < maskTokens.length; mtndx++) {\r\n            var match = resolveTestFromToken(maskTokens[mtndx], ndxInitializer, [mtndx]);\r\n            if ((match && testPos === pos) || testPos > pos) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    if (matches.length === 0 || insertStop) {\r\n        matches.push({\r\n            match: {\r\n                fn: null,\r\n                static: true,\r\n                optionality: false,\r\n                casing: null,\r\n                def: \"\",\r\n                placeholder: \"\"\r\n            },\r\n            locator: [],\r\n            mloc: {},\r\n            cd: cacheDependency\r\n        });\r\n    }\r\n    var result;\r\n    if (ndxIntlzr !== undefined && maskset.tests[pos]) { //prioritize full tests for caching\r\n        result = $.extend(true, [], matches);\r\n    } else {\r\n        maskset.tests[pos] = $.extend(true, [], matches); //set a clone to prevent overwriting some props\r\n        result = maskset.tests[pos];\r\n    }\r\n\r\n    // console.log(pos + \" - \" + JSON.stringify(matches));\r\n    //cleanup optionality marking\r\n    matches.forEach(t => {\r\n        t.match.optionality = t.match.defOptionality || false;\r\n    });\r\n\r\n    return result;\r\n}\r\n","import {\r\n\tdetermineTestTemplate,\r\n\tgetDecisionTaker,\r\n\tgetPlaceholder,\r\n\tgetTest,\r\n\tgetTests,\r\n\tgetTestTemplate\r\n} from \"./validation-tests\";\r\nimport {keyCode, keys} from \"./keycode.js\";\r\nimport {\r\n\tdetermineLastRequiredPosition, determineNewCaretPosition,\r\n\tgetBuffer,\r\n\tgetLastValidPosition,\r\n\tisMask,\r\n\tresetMaskSet,\r\n\tseekNext,\r\n\tseekPrevious\r\n} from \"./positioning\";\r\nimport {EventHandlers} from \"./eventhandlers\";\r\n\r\nexport {\r\n\talternate,\r\n\tcheckAlternationMatch,\r\n\tisComplete,\r\n\tisSelection,\r\n\tisValid,\r\n\trefreshFromBuffer,\r\n\trevalidateMask,\r\n\thandleRemove\r\n};\r\n\r\n//tobe put on prototype?\r\nfunction alternate(maskPos, c, strict, fromIsValid, rAltPos, selection) { //pos == true => generalize\r\n\tconst inputmask = this,\r\n\t\t$ = this.dependencyLib,\r\n\t\topts = this.opts,\r\n\t\tmaskset = inputmask.maskset;\r\n\r\n\tvar validPsClone = $.extend(true, [], maskset.validPositions),\r\n\t\ttstClone = $.extend(true, {}, maskset.tests),\r\n\t\tlastAlt,\r\n\t\talternation,\r\n\t\tisValidRslt = false, returnRslt = false,\r\n\t\taltPos, prevAltPos, i, validPos,\r\n\t\tdecisionPos,\r\n\t\tlAltPos = rAltPos !== undefined ? rAltPos : getLastValidPosition.call(inputmask), nextPos, input, begin, end;\r\n\r\n\tif (selection) {\r\n\t\tbegin = selection.begin;\r\n\t\tend = selection.end;\r\n\t\tif (selection.begin > selection.end) {\r\n\t\t\tbegin = selection.end;\r\n\t\t\tend = selection.begin;\r\n\t\t}\r\n\t}\r\n\tif (lAltPos === -1 && rAltPos === undefined) { //do not recurse when already paste the beginning\r\n\t\tlastAlt = 0;\r\n\t\tprevAltPos = getTest.call(inputmask, lastAlt);\r\n\t\talternation = prevAltPos.alternation;\r\n\t} else {\r\n\t\t//find last modified alternation\r\n\t\tfor (; lAltPos >= 0; lAltPos--) {\r\n\t\t\taltPos = maskset.validPositions[lAltPos];\r\n\t\t\tif (altPos && altPos.alternation !== undefined) {\r\n\t\t\t\tif (lAltPos <= (maskPos || 0) && prevAltPos && prevAltPos.locator[altPos.alternation] !== altPos.locator[altPos.alternation]) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tlastAlt = lAltPos;\r\n\t\t\t\talternation = maskset.validPositions[lastAlt].alternation;\r\n\t\t\t\tprevAltPos = altPos;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif (alternation !== undefined) {\r\n\t\tdecisionPos = parseInt(lastAlt);\r\n\t\tmaskset.excludes[decisionPos] = maskset.excludes[decisionPos] || [];\r\n\t\tif (maskPos !== true) { //generalize\r\n\t\t\tmaskset.excludes[decisionPos].push(getDecisionTaker(prevAltPos) + \":\" + prevAltPos.alternation);\r\n\t\t}\r\n\r\n\t\tvar validInputs = [], resultPos = -1;\r\n\t\tfor (i = decisionPos; i < getLastValidPosition.call(inputmask, undefined, true) + 1; i++) {\r\n\t\t\tif (resultPos === -1 && maskPos <= i && c !== undefined) {\r\n\t\t\t\tvalidInputs.push(c);\r\n\t\t\t\tresultPos = validInputs.length - 1;\r\n\t\t\t}\r\n\t\t\tvalidPos = maskset.validPositions[i];\r\n\t\t\tif (validPos && validPos.generatedInput !== true && (selection === undefined || (i < begin || i >= end))) {\r\n\t\t\t\tvalidInputs.push(validPos.input);\r\n\t\t\t}\r\n\t\t\tdelete maskset.validPositions[i];\r\n\t\t}\r\n\t\tif (resultPos === -1 && c !== undefined) {\r\n\t\t\tvalidInputs.push(c);\r\n\t\t\tresultPos = validInputs.length - 1;\r\n\t\t}\r\n\r\n\t\twhile (maskset.excludes[decisionPos] !== undefined && maskset.excludes[decisionPos].length < 10) {\r\n\t\t\t// maskset.tests[decisionPos] = undefined; //clear decisionPos\r\n\t\t\tmaskset.tests = {};  //clear all\r\n\t\t\tresetMaskSet.call(inputmask, true); //clear getbuffer\r\n\t\t\tisValidRslt = true;\r\n\t\t\tfor (i = 0; i < validInputs.length; i++) {\r\n\t\t\t\tnextPos = isValidRslt.caret || (getLastValidPosition.call(inputmask, undefined, true) + 1);\r\n\t\t\t\tinput = validInputs[i];\r\n\t\t\t\t// nextPos = translatePosition.call(inputmask, nextPos);\r\n\t\t\t\tif (!(isValidRslt = isValid.call(inputmask, nextPos, input, false, fromIsValid, true))) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (i === resultPos) {\r\n\t\t\t\t\treturnRslt = isValidRslt;\r\n\t\t\t\t}\r\n\t\t\t\tif (maskPos == true && isValidRslt) {  //return validposition on generalise\r\n\t\t\t\t\treturnRslt = {caretPos: i};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!isValidRslt) {\r\n\t\t\t\tresetMaskSet.call(inputmask);\r\n\t\t\t\tprevAltPos = getTest.call(inputmask, decisionPos);  //get the current decisionPos to exclude ~ needs to be before restoring the initial validation\r\n\t\t\t\t//reset & revert\r\n\t\t\t\tmaskset.validPositions = $.extend(true, [], validPsClone);\r\n\t\t\t\tmaskset.tests = $.extend(true, {}, tstClone); //refresh tests after possible alternating\r\n\t\t\t\tif (maskset.excludes[decisionPos]) {\r\n\t\t\t\t\tvar decisionTaker = getDecisionTaker(prevAltPos);\r\n\t\t\t\t\tif (maskset.excludes[decisionPos].indexOf(decisionTaker + \":\" + prevAltPos.alternation) !== -1) {\r\n\t\t\t\t\t\treturnRslt = alternate.call(inputmask, maskPos, c, strict, fromIsValid, decisionPos - 1, selection);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmaskset.excludes[decisionPos].push(decisionTaker + \":\" + prevAltPos.alternation);\r\n\t\t\t\t\tfor (i = decisionPos; i < getLastValidPosition.call(inputmask, undefined, true) + 1; i++) delete maskset.validPositions[i];\r\n\t\t\t\t} else { //latest alternation\r\n\t\t\t\t\treturnRslt = alternate.call(inputmask, maskPos, c, strict, fromIsValid, decisionPos - 1, selection);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t//reset alternation excludes\r\n\tif (!returnRslt || opts.keepStatic !== false) {\r\n\t\tdelete maskset.excludes[decisionPos];\r\n\t}\r\n\treturn returnRslt;\r\n}\r\n\r\nfunction casing(elem, test, pos) {\r\n\tconst opts = this.opts,\r\n\t\tmaskset = this.maskset;\r\n\r\n\tswitch (opts.casing || test.casing) {\r\n\t\tcase \"upper\":\r\n\t\t\telem = elem.toUpperCase();\r\n\t\t\tbreak;\r\n\t\tcase \"lower\":\r\n\t\t\telem = elem.toLowerCase();\r\n\t\t\tbreak;\r\n\t\tcase \"title\":\r\n\t\t\tvar posBefore = maskset.validPositions[pos - 1];\r\n\t\t\tif (pos === 0 || posBefore && posBefore.input === String.fromCharCode(keyCode.Space)) {\r\n\t\t\t\telem = elem.toUpperCase();\r\n\t\t\t} else {\r\n\t\t\t\telem = elem.toLowerCase();\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tif (typeof opts.casing === \"function\") {\r\n\t\t\t\tvar args = Array.prototype.slice.call(arguments);\r\n\t\t\t\targs.push(maskset.validPositions);\r\n\t\t\t\telem = opts.casing.apply(this, args);\r\n\t\t\t}\r\n\t}\r\n\r\n\treturn elem;\r\n}\r\n\r\n//tobe put on prototype?\r\nfunction checkAlternationMatch(altArr1, altArr2, na) {\r\n\tconst opts = this.opts;\r\n\r\n\tvar altArrC = opts.greedy ? altArr2 : altArr2.slice(0, 1),\r\n\t\tisMatch = false,\r\n\t\tnaArr = na !== undefined ? na.split(\",\") : [],\r\n\t\tnaNdx;\r\n\r\n\t//remove no alternate indexes from alternation array\r\n\tfor (var i = 0; i < naArr.length; i++) {\r\n\t\tif ((naNdx = altArr1.indexOf(naArr[i])) !== -1) {\r\n\t\t\taltArr1.splice(naNdx, 1);\r\n\t\t}\r\n\t}\r\n\r\n\tfor (var alndx = 0; alndx < altArr1.length; alndx++) {\r\n\t\tif (altArrC.includes(altArr1[alndx])) {\r\n\t\t\tisMatch = true;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\treturn isMatch;\r\n}\r\n\r\n//tobe put on prototype?\r\nfunction handleRemove(input, c, pos, strict, fromIsValid) {\r\n\tconst inputmask = this, maskset = this.maskset, opts = this.opts;\r\n\r\n\tif (opts.numericInput || inputmask.isRTL) {\r\n\t\tif (c === keys.Backspace) {\r\n\t\t\tc = keys.Delete;\r\n\t\t} else if (c === keys.Delete) {\r\n\t\t\tc = keys.Backspace;\r\n\t\t}\r\n\r\n\t\tif (inputmask.isRTL) {\r\n\t\t\tvar pend = pos.end;\r\n\t\t\tpos.end = pos.begin;\r\n\t\t\tpos.begin = pend;\r\n\t\t}\r\n\t}\r\n\r\n\tvar lvp = getLastValidPosition.call(inputmask, undefined, true);\r\n\tif (pos.end >= getBuffer.call(inputmask).length && lvp >= pos.end) { //handle numeric negate symbol offset, due to  dynamic jit masking\r\n\t\tpos.end = lvp + 1;\r\n\t}\r\n\r\n\tif (c === keys.Backspace) {\r\n\t\tif ((pos.end - pos.begin < 1)) {\r\n\t\t\tpos.begin = seekPrevious.call(inputmask, pos.begin);\r\n\t\t}\r\n\t} else if (c === keys.Delete) {\r\n\t\tif (pos.begin === pos.end) {\r\n\t\t\tpos.end = isMask.call(inputmask, pos.end, true, true) ? pos.end + 1 : seekNext.call(inputmask, pos.end) + 1;\r\n\t\t}\r\n\t}\r\n\tvar offset;\r\n\tif ((offset = revalidateMask.call(inputmask, pos)) !== false) {\r\n\t\tif (strict !== true && opts.keepStatic !== false || (opts.regex !== null && getTest.call(inputmask, pos.begin).match.def.indexOf(\"|\") !== -1)) { //TODO NEEDS BETTER CHECK WHEN TO ALTERNATE  ~ opts regex isn\"t good enough\r\n\t\t\tvar result = alternate.call(inputmask, true);\r\n\t\t\tif (result) {\r\n\t\t\t\tvar newPos = result.caret !== undefined ? result.caret : (result.pos ? seekNext.call(inputmask, result.pos.begin ? result.pos.begin : result.pos) : getLastValidPosition.call(inputmask, -1, true));\r\n\t\t\t\tif (c !== keys.Delete || pos.begin > newPos) {\r\n\t\t\t\t\tpos.begin == newPos;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (strict !== true) {\r\n\t\t\tmaskset.p = c === keys.Delete ? pos.begin + offset : pos.begin;\r\n\t\t\tmaskset.p = determineNewCaretPosition.call(inputmask, {\r\n\t\t\t\tbegin: maskset.p,\r\n\t\t\t\tend: maskset.p\r\n\t\t\t}, false, opts.insertMode === false && c === keys.Backspace ? \"none\" : undefined).begin;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n//tobe put on prototype?\r\nfunction isComplete(buffer) { //return true / false / undefined (repeat *)\r\n\tconst inputmask = this, opts = this.opts, maskset = this.maskset;\r\n\r\n\tif (typeof opts.isComplete === \"function\") return opts.isComplete(buffer, opts);\r\n\tif (opts.repeat === \"*\") return undefined;\r\n\tvar complete = false,\r\n\t\tlrp = determineLastRequiredPosition.call(inputmask, true),\r\n\t\taml = seekPrevious.call(inputmask, lrp.l);\r\n\r\n\tif (lrp.def === undefined || lrp.def.newBlockMarker || lrp.def.optionality || lrp.def.optionalQuantifier) {\r\n\t\tcomplete = true;\r\n\t\tfor (var i = 0; i <= aml; i++) {\r\n\t\t\tvar test = getTestTemplate.call(inputmask, i).match;\r\n\t\t\tif ((test.static !== true && maskset.validPositions[i] === undefined && test.optionality !== true && test.optionalQuantifier !== true) || (test.static === true && buffer[i] !== getPlaceholder.call(inputmask, i, test))) {\r\n\t\t\t\tcomplete = false;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn complete;\r\n}\r\n\r\nfunction isSelection(posObj) {\r\n\tconst inputmask = this,\r\n\t\topts = this.opts, insertModeOffset = opts.insertMode ? 0 : 1;\r\n\treturn inputmask.isRTL ? (posObj.begin - posObj.end) > insertModeOffset : (posObj.end - posObj.begin) > insertModeOffset;\r\n}\r\n\r\n//tobe put on prototype?\r\nfunction isValid(pos, c, strict, fromIsValid, fromAlternate, validateOnly, fromCheckval) { //strict true ~ no correction or autofill\r\n\tconst inputmask = this,\r\n\t\t$ = this.dependencyLib,\r\n\t\topts = this.opts,\r\n\t\tmaskset = inputmask.maskset;\r\n\r\n\tstrict = strict === true; //always set a value to strict to prevent possible strange behavior in the extensions\r\n\r\n\tvar maskPos = pos;\r\n\tif (pos.begin !== undefined) { //position was a position object - used to handle a delete by typing over a selection\r\n\t\tmaskPos = inputmask.isRTL ? pos.end : pos.begin;\r\n\t}\r\n\r\n\tfunction processCommandObject(commandObj) {\r\n\t\tif (commandObj !== undefined) {\r\n\t\t\tif (commandObj.remove !== undefined) { //remove position(s)\r\n\t\t\t\tif (!Array.isArray(commandObj.remove)) commandObj.remove = [commandObj.remove];\r\n\t\t\t\tcommandObj.remove.sort(function (a, b) {\r\n\t\t\t\t\treturn inputmask.isRTL ? a.pos - b.pos : b.pos - a.pos;\r\n\t\t\t\t}).forEach(function (lmnt) {\r\n\t\t\t\t\trevalidateMask.call(inputmask, {begin: lmnt, end: lmnt + 1});\r\n\t\t\t\t});\r\n\t\t\t\tcommandObj.remove = undefined;\r\n\t\t\t}\r\n\t\t\tif (commandObj.insert !== undefined) { //insert position(s)\r\n\t\t\t\tif (!Array.isArray(commandObj.insert)) commandObj.insert = [commandObj.insert];\r\n\t\t\t\tcommandObj.insert.sort(function (a, b) {\r\n\t\t\t\t\treturn inputmask.isRTL ? b.pos - a.pos : a.pos - b.pos;\r\n\t\t\t\t}).forEach(function (lmnt) {\r\n\t\t\t\t\tif (lmnt.c !== \"\") {\r\n\t\t\t\t\t\tisValid.call(inputmask, lmnt.pos, lmnt.c, lmnt.strict !== undefined ? lmnt.strict : true, lmnt.fromIsValid !== undefined ? lmnt.fromIsValid : fromIsValid);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tcommandObj.insert = undefined;\r\n\t\t\t}\r\n\r\n\t\t\tif (commandObj.refreshFromBuffer && commandObj.buffer) {\r\n\t\t\t\tvar refresh = commandObj.refreshFromBuffer;\r\n\t\t\t\trefreshFromBuffer.call(inputmask, refresh === true ? refresh : refresh.start, refresh.end, commandObj.buffer);\r\n\t\t\t\tcommandObj.refreshFromBuffer = undefined;\r\n\t\t\t}\r\n\r\n\t\t\tif (commandObj.rewritePosition !== undefined) {\r\n\t\t\t\tmaskPos = commandObj.rewritePosition;\r\n\t\t\t\t// commandObj.rewritePosition = undefined;\r\n\t\t\t\tcommandObj = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn commandObj;\r\n\t}\r\n\r\n\tfunction _isValid(position, c, strict) {\r\n\t\tvar rslt = false;\r\n\t\tgetTests.call(inputmask, position).every(function (tst, ndx) {\r\n\t\t\tvar test = tst.match;\r\n\t\t\t//make sure the buffer is set and correct\r\n\t\t\tgetBuffer.call(inputmask, true);\r\n\t\t\tif (test.jit && maskset.validPositions[seekPrevious.call(inputmask, position)] === undefined) //ignore if jit is not desirable\r\n\t\t\t{\r\n\t\t\t\trslt = false;\r\n\t\t\t} else {\r\n\t\t\t\t//return is false or a json object => { pos: ??, c: ??} or true\r\n\t\t\t\trslt = test.fn != null ?\r\n\t\t\t\t\ttest.fn.test(c, maskset, position, strict, opts, isSelection.call(inputmask, pos)) : (c === test.def || c === opts.skipOptionalPartCharacter) && test.def !== \"\" ? //non mask\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tc: getPlaceholder.call(inputmask, position, test, true) || test.def,\r\n\t\t\t\t\t\t\tpos: position\r\n\t\t\t\t\t\t} : false;\r\n\t\t\t}\r\n\t\t\tif (rslt !== false) {\r\n\t\t\t\tvar elem = rslt.c !== undefined ? rslt.c : c, validatedPos = position;\r\n\t\t\t\telem = (elem === opts.skipOptionalPartCharacter && test.static === true) ?\r\n\t\t\t\t\t(getPlaceholder.call(inputmask, position, test, true) || test.def) : elem;\r\n\r\n\t\t\t\trslt = processCommandObject(rslt);\r\n\r\n\t\t\t\tif (rslt !== true && rslt.pos !== undefined && rslt.pos !== position) { //their is a position offset\r\n\t\t\t\t\tvalidatedPos = rslt.pos;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (rslt !== true && rslt.pos === undefined && rslt.c === undefined) {\r\n\t\t\t\t\treturn false; //breakout if nothing to insert\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (revalidateMask.call(inputmask, pos, $.extend({}, tst, {\r\n\t\t\t\t\t\"input\": casing.call(inputmask, elem, test, validatedPos)\r\n\t\t\t\t}), fromIsValid, validatedPos) === false) {\r\n\t\t\t\t\trslt = false;\r\n\t\t\t\t}\r\n\t\t\t\treturn false; //break from loop\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\treturn rslt;\r\n\t}\r\n\r\n\tvar result = true,\r\n\t\tpositionsClone = $.extend(true, {}, maskset.validPositions); //clone the currentPositions\r\n\r\n\tif (opts.keepStatic === false && maskset.excludes[maskPos] !== undefined && fromAlternate !== true && fromIsValid !== true) {\r\n\t\tfor (var i = maskPos; i < (inputmask.isRTL ? pos.begin : pos.end); i++) {\r\n\t\t\tif (maskset.excludes[i] !== undefined) {\r\n\t\t\t\tmaskset.excludes[i] = undefined;\r\n\t\t\t\tdelete maskset.tests[i];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif (typeof opts.preValidation === \"function\" && fromIsValid !== true && validateOnly !== true) {\r\n\t\tresult = opts.preValidation.call(inputmask, getBuffer.call(inputmask), maskPos, c, isSelection.call(inputmask, pos), opts, maskset, pos, strict || fromAlternate);\r\n\t\tresult = processCommandObject(result);\r\n\t}\r\n\tif (result === true) { //preValidation result\r\n\t\tresult = _isValid(maskPos, c, strict);\r\n\t\tif ((!strict || fromIsValid === true) && result === false && validateOnly !== true) {\r\n\t\t\tvar currentPosValid = maskset.validPositions[maskPos];\r\n\t\t\tif (currentPosValid && currentPosValid.match.static === true && (currentPosValid.match.def === c || c === opts.skipOptionalPartCharacter)) {\r\n\t\t\t\tresult = {\r\n\t\t\t\t\t\"caret\": seekNext.call(inputmask, maskPos)\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tif (opts.insertMode || maskset.validPositions[seekNext.call(inputmask, maskPos)] === undefined || pos.end > maskPos) { //does the input match on a further position?\r\n\t\t\t\t\tvar skip = false;\r\n\t\t\t\t\tif (maskset.jitOffset[maskPos] && maskset.validPositions[seekNext.call(inputmask, maskPos)] === undefined) {\r\n\t\t\t\t\t\tresult = isValid.call(inputmask, maskPos + maskset.jitOffset[maskPos], c, true, true);\r\n\t\t\t\t\t\tif (result !== false) {\r\n\t\t\t\t\t\t\tif (fromAlternate !== true) result.caret = maskPos;\r\n\t\t\t\t\t\t\tskip = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (pos.end > maskPos) {\r\n\t\t\t\t\t\tmaskset.validPositions[maskPos] = undefined;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!skip && !isMask.call(inputmask, maskPos, opts.keepStatic && maskPos === 0)) {\r\n\t\t\t\t\t\tfor (var nPos = maskPos + 1, snPos = seekNext.call(inputmask, maskPos, false, maskPos !== 0); nPos <= snPos; nPos++) {\r\n\t\t\t\t\t\t\t// if (!isMask(nPos, true)) {\r\n\t\t\t\t\t\t\t// \tcontinue;\r\n\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t\tresult = _isValid(nPos, c, strict);\r\n\t\t\t\t\t\t\tif (result !== false) {\r\n\t\t\t\t\t\t\t\tresult = trackbackPositions.call(inputmask, maskPos, result.pos !== undefined ? result.pos : nPos) || result;\r\n\t\t\t\t\t\t\t\tmaskPos = nPos;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (inputmask.hasAlternator && fromAlternate !== true && !strict) {\r\n\t\t\tif (result === false && opts.keepStatic && (isComplete.call(inputmask, getBuffer.call(inputmask)) || maskPos === 0)) { //try fuzzy alternator logic\r\n\t\t\t\tresult = alternate.call(inputmask, maskPos, c, strict, fromIsValid, undefined, pos);\r\n\t\t\t} else if (isSelection.call(inputmask, pos) && maskset.tests[maskPos] && maskset.tests[maskPos].length > 1 && opts.keepStatic) { //selection clears an alternated keepstatic mask ~ #2189\r\n\t\t\t\tresult = alternate.call(inputmask, true);\r\n\t\t\t} else if (result == true && opts.numericInput !== true && maskset.tests[maskPos] && maskset.tests[maskPos].length > 1 && getLastValidPosition.call(inputmask, undefined, true) > maskPos) {\r\n\t\t\t\tresult = alternate.call(inputmask, true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (result === true) {\r\n\t\t\tresult = {\r\n\t\t\t\t\"pos\": maskPos\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\tif (typeof opts.postValidation === \"function\" && fromIsValid !== true && validateOnly !== true) {\r\n\t\tvar postResult = opts.postValidation.call(inputmask, getBuffer.call(inputmask, true), pos.begin !== undefined ? (inputmask.isRTL ? pos.end : pos.begin) : pos, c, result, opts, maskset, strict, fromCheckval);\r\n\t\tif (postResult !== undefined) {\r\n\t\t\tresult = postResult === true ? result : postResult;\r\n\t\t}\r\n\t}\r\n\r\n\tif (result && result.pos === undefined) {\r\n\t\tresult.pos = maskPos;\r\n\t}\r\n\r\n\tif (result === false || validateOnly === true) {\r\n\t\tresetMaskSet.call(inputmask, true);\r\n\t\tmaskset.validPositions = $.extend(true, [], positionsClone); //revert validation changes\r\n\t} else {\r\n\t\ttrackbackPositions.call(inputmask, undefined, maskPos, true);\r\n\t}\r\n\r\n\tvar endResult = processCommandObject(result);\r\n\t// console.log(\"returned result \" + JSON.stringify(endResult));\r\n\tif (inputmask.maxLength !== undefined) {\r\n\t\tvar buffer = getBuffer.call(inputmask);\r\n\t\tif (buffer.length > inputmask.maxLength && !fromIsValid) {\r\n\t\t\tresetMaskSet.call(inputmask, true);\r\n\t\t\tmaskset.validPositions = $.extend(true, [], positionsClone); //revert validation changes\r\n\t\t\tendResult = false;\r\n\t\t}\r\n\t}\r\n\treturn endResult;\r\n}\r\n\r\n//tobe put on prototype?\r\nfunction positionCanMatchDefinition(pos, testDefinition, opts) {\r\n\tconst inputmask = this,\r\n\t\tmaskset = this.maskset;\r\n\r\n\tvar valid = false,\r\n\t\ttests = getTests.call(inputmask, pos);\r\n\tfor (var tndx = 0; tndx < tests.length; tndx++) {\r\n\t\tif (tests[tndx].match &&\r\n\t\t\t((tests[tndx].match[\"nativeDef\"] === testDefinition.match[opts.shiftPositions ? \"def\" : \"nativeDef\"] && (!opts.shiftPositions || !testDefinition.match.static)) ||\r\n\t\t\t\ttests[tndx].match[\"nativeDef\"] === testDefinition.match[\"nativeDef\"] ||\r\n\t\t\t\t(opts.regex && !tests[tndx].match.static && tests[tndx].match.fn.test(testDefinition.input, maskset, pos, false, opts)))) {\r\n\t\t\tvalid = true;\r\n\t\t\tbreak;\r\n\t\t} else if (tests[tndx].match && tests[tndx].match[\"def\"] === testDefinition.match[\"nativeDef\"]) {\r\n\t\t\tvalid = undefined;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\tif (valid === false) {\r\n\t\tif (maskset.jitOffset[pos] !== undefined) {\r\n\t\t\tvalid = positionCanMatchDefinition.call(inputmask, pos + maskset.jitOffset[pos], testDefinition, opts);\r\n\t\t}\r\n\t}\r\n\treturn valid;\r\n}\r\n\r\n//tobe put on prototype?\r\nfunction refreshFromBuffer(start, end, buffer) {\r\n\tconst inputmask = this,\r\n\t\tmaskset = this.maskset,\r\n\t\topts = this.opts,\r\n\t\t$ = this.dependencyLib;\r\n\t// checkVal.call(inputmask, el, false, true, isRTL ? buffer.reverse() : buffer);\r\n\tvar i, p, skipOptionalPartCharacter = opts.skipOptionalPartCharacter,\r\n\t\tbffr = inputmask.isRTL ? buffer.slice().reverse() : buffer;\r\n\topts.skipOptionalPartCharacter = \"\";\r\n\tif (start === true) {\r\n\t\tresetMaskSet.call(inputmask);\r\n\t\tmaskset.tests = {}; //refresh tests after possible alternating\r\n\t\tstart = 0;\r\n\t\tend = buffer.length;\r\n\t\tp = determineNewCaretPosition.call(inputmask, {begin: 0, end: 0}, false).begin;\r\n\t} else {\r\n\t\tfor (i = start; i < end; i++) {\r\n\t\t\tdelete maskset.validPositions[i];\r\n\t\t}\r\n\t\tp = start;\r\n\t}\r\n\r\n\tvar keypress = new $.Event(\"keypress\");\r\n\tfor (i = start; i < end; i++) {\r\n\t\tkeypress.key = bffr[i].toString();\r\n\t\tinputmask.ignorable = false; //make sure ignorable is ignored ;-)\r\n\t\tvar valResult = EventHandlers.keypressEvent.call(inputmask, keypress, true, false, false, p);\r\n\t\tif (valResult !== false && valResult !== undefined) {\r\n\t\t\tp = valResult.forwardPosition;\r\n\t\t}\r\n\t}\r\n\r\n\topts.skipOptionalPartCharacter = skipOptionalPartCharacter;\r\n}\r\n\r\n//tobe put on prototype?\r\n//fill in best positions according the current input\r\nfunction trackbackPositions(originalPos, newPos, fillOnly) {\r\n\tconst inputmask = this,\r\n\t\tmaskset = this.maskset,\r\n\t\t$ = this.dependencyLib;\r\n\r\n\t// console.log(\"trackbackPositions \" + originalPos + \" \" + newPos);\r\n\tif (originalPos === undefined) {\r\n\t\t//find previous valid\r\n\t\tfor (originalPos = newPos - 1; originalPos > 0; originalPos--) {\r\n\t\t\tif (maskset.validPositions[originalPos]) break;\r\n\t\t}\r\n\t}\r\n\tfor (var ps = originalPos; ps < newPos; ps++) {\r\n\t\tif (maskset.validPositions[ps] === undefined && !isMask.call(inputmask, ps, false)) {\r\n\t\t\tvar vp = ps == 0 ? getTest.call(inputmask, ps) : maskset.validPositions[ps - 1];\r\n\t\t\tif (vp) {\r\n\t\t\t\tvar tests = getTests.call(inputmask, ps).slice();\r\n\t\t\t\tif (tests[tests.length - 1].match.def === \"\") tests.pop();\r\n\t\t\t\tvar bestMatch = determineTestTemplate.call(inputmask, ps, tests), np;\r\n\t\t\t\tif (bestMatch && (bestMatch.match.jit !== true || (bestMatch.match.newBlockMarker === \"master\" && (np = maskset.validPositions[ps + 1]) && np.match.optionalQuantifier === true))) {\r\n\t\t\t\t\tbestMatch = $.extend({}, bestMatch, {\r\n\t\t\t\t\t\t\"input\": getPlaceholder.call(inputmask, ps, bestMatch.match, true) || bestMatch.match.def\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbestMatch.generatedInput = true;\r\n\t\t\t\t\trevalidateMask.call(inputmask, ps, bestMatch, true);\r\n\r\n\t\t\t\t\tif (fillOnly !== true) {\r\n\t\t\t\t\t\t//revalidate the new position to update the locator value\r\n\t\t\t\t\t\tvar cvpInput = maskset.validPositions[newPos].input;\r\n\t\t\t\t\t\tmaskset.validPositions[newPos] = undefined;\r\n\t\t\t\t\t\treturn isValid.call(inputmask, newPos, cvpInput, true, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n//tobe put on prototype?\r\nfunction revalidateMask(pos, validTest, fromIsValid, validatedPos) {\r\n\tconst inputmask = this,\r\n\t\tmaskset = this.maskset,\r\n\t\topts = this.opts,\r\n\t\t$ = this.dependencyLib;\r\n\r\n\tfunction IsEnclosedStatic(pos, valids, selection) {\r\n\t\tvar posMatch = valids[pos];\r\n\t\tif (posMatch !== undefined && posMatch.match.static === true && posMatch.match.optionality !== true && (valids[0] === undefined || valids[0].alternation === undefined)) {\r\n\t\t\tvar prevMatch = selection.begin <= pos - 1 ? valids[pos - 1] && valids[pos - 1].match.static === true && valids[pos - 1] : valids[pos - 1],\r\n\t\t\t\tnextMatch = selection.end > pos + 1 ? valids[pos + 1] && valids[pos + 1].match.static === true && valids[pos + 1] : valids[pos + 1];\r\n\t\t\treturn prevMatch && nextMatch;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tvar offset = 0, begin = pos.begin !== undefined ? pos.begin : pos, end = pos.end !== undefined ? pos.end : pos,\r\n\t\tvalid = true;\r\n\tif (pos.begin > pos.end) {\r\n\t\tbegin = pos.end;\r\n\t\tend = pos.begin;\r\n\t}\r\n\r\n\tvalidatedPos = validatedPos !== undefined ? validatedPos : begin;\r\n\tif (fromIsValid === undefined && (begin !== end || (opts.insertMode && maskset.validPositions[validatedPos] !== undefined) || validTest === undefined || validTest.match.optionalQuantifier || validTest.match.optionality)) {\r\n\t\t//reposition & revalidate others\r\n\t\tvar positionsClone = $.extend(true, {}, maskset.validPositions),\r\n\t\t\tlvp = getLastValidPosition.call(inputmask, undefined, true),\r\n\t\t\ti;\r\n\t\tmaskset.p = begin; //needed for alternated position after overtype selection\r\n\r\n\t\tfor (i = lvp; i >= begin; i--) {\r\n\t\t\tdelete maskset.validPositions[i];\r\n\t\t\tif (validTest === undefined) delete maskset.tests[i + 1];\r\n\t\t}\r\n\r\n\t\tvar j = validatedPos,\r\n\t\t\tposMatch = j, t, canMatch, test;\r\n\r\n\t\tif (validTest) {\r\n\t\t\tmaskset.validPositions[validatedPos] = $.extend(true, {}, validTest);\r\n\t\t\tposMatch++;\r\n\t\t\tj++;\r\n\t\t}\r\n\r\n\t\tfor (i = validTest ? end : end - 1; i <= lvp; i++) {\r\n\t\t\tif ((t = positionsClone[i]) !== undefined && t.generatedInput !== true &&\r\n\t\t\t\t(i >= end || (i >= begin && IsEnclosedStatic(i, positionsClone, {\r\n\t\t\t\t\tbegin: begin,\r\n\t\t\t\t\tend: end\r\n\t\t\t\t})))) {\r\n\t\t\t\twhile (test = getTest.call(inputmask, posMatch), test.match.def !== \"\") { //loop needed to match further positions\r\n\t\t\t\t\tif ((canMatch = positionCanMatchDefinition.call(inputmask, posMatch, t, opts)) !== false || t.match.def === \"+\") { //validated match //we still need some hackery for the + validator (numeric alias)\r\n\t\t\t\t\t\tif (t.match.def === \"+\") getBuffer.call(inputmask, true);\r\n\t\t\t\t\t\tvar result = isValid.call(inputmask, posMatch, t.input, t.match.def !== \"+\", /*t.match.def !== \"+\"*/ true);\r\n\t\t\t\t\t\tvalid = result !== false;\r\n\t\t\t\t\t\tj = (result.pos || posMatch) + 1;\r\n\t\t\t\t\t\tif (!valid && canMatch) break;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvalid = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (valid) {\r\n\t\t\t\t\t\tif (validTest === undefined && t.match.static && i === pos.begin) offset++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!valid && getBuffer.call(inputmask), posMatch > maskset.maskLength) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tposMatch++;\r\n\t\t\t\t}\r\n\t\t\t\tif (getTest.call(inputmask, posMatch).match.def == \"\") {\r\n\t\t\t\t\tvalid = false;\r\n\t\t\t\t}\r\n\t\t\t\t//restore position\r\n\t\t\t\tposMatch = j;\r\n\t\t\t}\r\n\t\t\tif (!valid) break;\r\n\t\t}\r\n\t\tif (!valid) {\r\n\t\t\tmaskset.validPositions = $.extend(true, [], positionsClone);\r\n\t\t\tresetMaskSet.call(inputmask, true);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t} else if (validTest && getTest.call(inputmask, validatedPos).match.cd === validTest.match.cd) {\r\n\t\tmaskset.validPositions[validatedPos] = $.extend(true, {}, validTest);\r\n\t}\r\n\r\n\tresetMaskSet.call(inputmask, true);\r\n\treturn offset;\r\n}\r\n","import {\r\n    caret, determineNewCaretPosition,\r\n    getBuffer, getBufferTemplate,\r\n    getLastValidPosition, isMask,\r\n    resetMaskSet,\r\n    seekNext,\r\n    seekPrevious,\r\n    translatePosition\r\n} from \"./positioning\";\r\nimport {keys} from \"./keycode.js\";\r\nimport {iphone, mobile} from \"./environment\";\r\nimport {handleRemove, isComplete, isSelection, isValid} from \"./validation\";\r\nimport {applyInputValue, checkVal, clearOptionalTail, HandleNativePlaceholder, writeBuffer} from \"./inputHandling\";\r\nimport {getPlaceholder, getTest} from \"./validation-tests\";\r\n\r\nexport {EventHandlers};\r\n\r\nvar EventHandlers = {\r\n    keyEvent: function (e, checkval, writeOut, strict, ndx) {\r\n        const inputmask = this.inputmask, opts = inputmask.opts, $ = inputmask.dependencyLib,\r\n            maskset = inputmask.maskset;\r\n\r\n        var input = this,\r\n            $input = $(input),\r\n            c = e.key,\r\n            pos = caret.call(inputmask, input);\r\n\r\n        var kdResult = opts.onKeyDown.call(this, e, getBuffer.call(inputmask), pos, opts);\r\n        if (kdResult !== undefined) return kdResult;\r\n\r\n        //backspace, delete, and escape get special treatment\r\n        if (c === keys.Backspace || c === keys.Delete || (iphone && c === keys.BACKSPACE_SAFARI) || (e.ctrlKey && c === keys.x && !(\"oncut\" in input))) { //backspace/delete\r\n            e.preventDefault(); //stop default action but allow propagation\r\n            handleRemove.call(inputmask, input, c, pos);\r\n            writeBuffer(input, getBuffer.call(inputmask, true), maskset.p, e, input.inputmask._valueGet() !== getBuffer.call(inputmask).join(\"\"));\r\n        } else if (c === keys.End || c === keys.PageDown) { //when END or PAGE_DOWN pressed set position at lastmatch\r\n            e.preventDefault();\r\n            var caretPos = seekNext.call(inputmask, getLastValidPosition.call(inputmask));\r\n            caret.call(inputmask, input, e.shiftKey ? pos.begin : caretPos, caretPos, true);\r\n        } else if ((c === keys.Home && !e.shiftKey) || c === keys.PageUp) { //Home or page_up\r\n            e.preventDefault();\r\n            caret.call(inputmask, input, 0, e.shiftKey ? pos.begin : 0, true);\r\n        } else if (((opts.undoOnEscape && c === keys.Escape) || (false && c === keys.z && e.ctrlKey)) && e.altKey !== true) { //escape && undo && #762\r\n            checkVal(input, true, false, inputmask.undoValue.split(\"\"));\r\n            $input.trigger(\"click\");\r\n        } else if (c === keys.Insert && !(e.shiftKey || e.ctrlKey) && inputmask.userOptions.insertMode === undefined) { //insert\r\n            if (!isSelection.call(inputmask, pos)) {\r\n                opts.insertMode = !opts.insertMode;\r\n                caret.call(inputmask, input, pos.begin, pos.begin);\r\n            } else opts.insertMode = !opts.insertMode;\r\n        } else if (opts.tabThrough === true && c === keys.Tab) {\r\n            if (e.shiftKey === true) {\r\n                pos.end = seekPrevious.call(inputmask, pos.end, true);\r\n                if (getTest.call(inputmask, pos.end - 1).match.static === true) {\r\n                    pos.end--;\r\n                }\r\n                pos.begin = seekPrevious.call(inputmask, pos.end, true);\r\n                if (pos.begin >= 0 && pos.end > 0) {\r\n                    e.preventDefault();\r\n                    caret.call(inputmask, input, pos.begin, pos.end);\r\n                }\r\n            } else {\r\n                pos.begin = seekNext.call(inputmask, pos.begin, true);\r\n                pos.end = seekNext.call(inputmask, pos.begin, true);\r\n                if (pos.end < maskset.maskLength) pos.end--;\r\n                if (pos.begin <= maskset.maskLength) {\r\n                    e.preventDefault();\r\n                    caret.call(inputmask, input, pos.begin, pos.end);\r\n                }\r\n            }\r\n        } else if (!e.shiftKey) {\r\n            if (opts.insertModeVisual && opts.insertMode === false) {\r\n                if (c === keys.ArrowRight) {\r\n                    setTimeout(function () {\r\n                        var caretPos = caret.call(inputmask, input);\r\n                        caret.call(inputmask, input, caretPos.begin);\r\n                    }, 0);\r\n                } else if (c === keys.ArrowLeft) {\r\n                    setTimeout(function () {\r\n                        var caretPos = {\r\n                            begin: translatePosition.call(inputmask, input.inputmask.caretPos.begin),\r\n                            end: translatePosition.call(inputmask, input.inputmask.caretPos.end)\r\n                        };\r\n                        if (inputmask.isRTL) {\r\n                            caret.call(inputmask, input, caretPos.begin + (caretPos.begin === maskset.maskLength ? 0 : 1));\r\n                        } else {\r\n                            caret.call(inputmask, input, caretPos.begin - (caretPos.begin === 0 ? 0 : 1));\r\n                        }\r\n                    }, 0);\r\n                }\r\n            }\r\n        }\r\n\r\n        inputmask.isComposing = (c == keys.Process || c == keys.Unidentified);\r\n        inputmask.ignorable = opts.ignorables.includes(c);\r\n        return EventHandlers.keypressEvent.call(this, e, checkval, writeOut, strict, ndx);\r\n    },\r\n    keypressEvent: function (e, checkval, writeOut, strict, ndx) {\r\n        const inputmask = this.inputmask || this, opts = inputmask.opts, $ = inputmask.dependencyLib,\r\n            maskset = inputmask.maskset;\r\n\r\n        var input = inputmask.el,\r\n            $input = $(input),\r\n            c = e.key;\r\n\r\n        if (checkval !== true && (!(e.ctrlKey && e.altKey) && (e.ctrlKey || e.metaKey || inputmask.ignorable))) {\r\n            if (c === keys.Enter) {\r\n                if (inputmask.undoValue !== inputmask._valueGet(true)) {\r\n                    inputmask.undoValue = inputmask._valueGet(true);\r\n                    // e.preventDefault();\r\n\r\n                    setTimeout(function () {\r\n                        $input.trigger(\"change\");\r\n                    }, 0);\r\n                }\r\n            }\r\n            //inputmask.skipInputEvent = true; //skip the input as otherwise the skipped char could be picked up for validation by the inputfallback\r\n            return;\r\n        } else if (c) {\r\n            //special treat the decimal separator\r\n            // if ((k === 44 || k === 46) && e.location === 3 && opts.radixPoint !== \"\") k = opts.radixPoint.charCodeAt(0);\r\n            var pos = checkval ? {\r\n                    begin: ndx,\r\n                    end: ndx\r\n                } : caret.call(inputmask, input),\r\n                forwardPosition;\r\n\r\n            //allow for character substitution\r\n            c = opts.substitutes[c] || c;\r\n            maskset.writeOutBuffer = true;\r\n            var valResult = isValid.call(inputmask, pos, c, strict, undefined, undefined, undefined, checkval);\r\n            if (valResult !== false) {\r\n                resetMaskSet.call(inputmask, true);\r\n                forwardPosition = valResult.caret !== undefined ? valResult.caret : seekNext.call(inputmask, valResult.pos.begin ? valResult.pos.begin : valResult.pos);\r\n                maskset.p = forwardPosition; //needed for checkval\r\n            }\r\n\r\n            forwardPosition = ((opts.numericInput && valResult.caret === undefined) ? seekPrevious.call(inputmask, forwardPosition) : forwardPosition);\r\n            if (writeOut !== false) {\r\n\r\n                setTimeout(function () {\r\n                    opts.onKeyValidation.call(input, c, valResult);\r\n                }, 0);\r\n                if (maskset.writeOutBuffer && valResult !== false) {\r\n                    var buffer = getBuffer.call(inputmask);\r\n                    writeBuffer(input, buffer, forwardPosition, e, checkval !== true);\r\n                }\r\n            }\r\n\r\n            e.preventDefault();\r\n\r\n            if (checkval) {\r\n                if (valResult !== false) valResult.forwardPosition = forwardPosition;\r\n                return valResult;\r\n            }\r\n        }\r\n    },\r\n    pasteEvent: function (e) {\r\n        const inputmask = this.inputmask, opts = inputmask.opts;\r\n\r\n        var input = this,\r\n            inputValue = inputmask._valueGet(true),\r\n            caretPos = caret.call(inputmask, input),\r\n            tempValue;\r\n\r\n        if (inputmask.isRTL) {\r\n            tempValue = caretPos.end;\r\n            caretPos.end = translatePosition.call(inputmask, caretPos.begin);\r\n            caretPos.begin = translatePosition.call(inputmask, tempValue);\r\n        }\r\n\r\n        var valueBeforeCaret = inputValue.substr(0, caretPos.begin),\r\n            valueAfterCaret = inputValue.substr(caretPos.end, inputValue.length);\r\n\r\n        if (valueBeforeCaret == (inputmask.isRTL ? getBufferTemplate.call(inputmask).slice().reverse() : getBufferTemplate.call(inputmask)).slice(0, caretPos.begin).join(\"\")) valueBeforeCaret = \"\";\r\n        if (valueAfterCaret == (inputmask.isRTL ? getBufferTemplate.call(inputmask).slice().reverse() : getBufferTemplate.call(inputmask)).slice(caretPos.end).join(\"\")) valueAfterCaret = \"\";\r\n\r\n        if (window.clipboardData && window.clipboardData.getData) { // IE\r\n            inputValue = valueBeforeCaret + window.clipboardData.getData(\"Text\") + valueAfterCaret;\r\n        } else if (e.clipboardData && e.clipboardData.getData) {\r\n            inputValue = valueBeforeCaret + e.clipboardData.getData(\"text/plain\") + valueAfterCaret;\r\n        } else {\r\n            return true;\r\n        } //allow native paste event as fallback ~ masking will continue by inputfallback\r\n\r\n        var pasteValue = inputValue;\r\n        if (inputmask.isRTL) {\r\n            pasteValue = pasteValue.split(\"\");\r\n            for (let c of getBufferTemplate.call(inputmask)) {\r\n                if (pasteValue[0] === c)\r\n                    pasteValue.shift();\r\n            }\r\n            pasteValue = pasteValue.join(\"\");\r\n        }\r\n        if (typeof opts.onBeforePaste === \"function\") {\r\n            pasteValue = opts.onBeforePaste.call(inputmask, pasteValue, opts);\r\n            if (pasteValue === false) {\r\n                return false;\r\n            }\r\n            if (!pasteValue) {\r\n                pasteValue = inputValue;\r\n            }\r\n        }\r\n        checkVal(input, true, false, pasteValue.toString().split(\"\"), e);\r\n        e.preventDefault();\r\n    },\r\n    inputFallBackEvent: function (e) { //fallback when keypress is not triggered\r\n        const inputmask = this.inputmask, opts = inputmask.opts, $ = inputmask.dependencyLib;\r\n        // console.log(e.inputType);\r\n\r\n        function analyseChanges(inputValue, buffer, caretPos) {\r\n            var frontPart = inputValue.substr(0, caretPos.begin).split(\"\"),\r\n                backPart = inputValue.substr(caretPos.begin).split(\"\"),\r\n                frontBufferPart = buffer.substr(0, caretPos.begin).split(\"\"),\r\n                backBufferPart = buffer.substr(caretPos.begin).split(\"\");\r\n\r\n            var fpl = frontPart.length >= frontBufferPart.length ? frontPart.length : frontBufferPart.length,\r\n                bpl = backPart.length >= backBufferPart.length ? backPart.length : backBufferPart.length,\r\n                bl, i, action = \"\", data = [], marker = \"~\", placeholder;\r\n\r\n            //align buffers\r\n            while (frontPart.length < fpl) frontPart.push(marker);\r\n            while (frontBufferPart.length < fpl) frontBufferPart.push(marker);\r\n            while (backPart.length < bpl) backPart.unshift(marker);\r\n            while (backBufferPart.length < bpl) backBufferPart.unshift(marker);\r\n\r\n            var newBuffer = frontPart.concat(backPart);\r\n            var oldBuffer = frontBufferPart.concat(backBufferPart);\r\n\r\n            // console.log(\"N \" + newBuffer);\r\n            // console.log(\"O \" + oldBuffer);\r\n\r\n            for (i = 0, bl = newBuffer.length; i < bl; i++) {\r\n                placeholder = getPlaceholder.call(inputmask, translatePosition.call(inputmask, i));\r\n                switch (action) {\r\n                    case \"insertText\":\r\n                        if (oldBuffer[i - 1] === newBuffer[i] && caretPos.begin == newBuffer.length - 1) {\r\n                            data.push(newBuffer[i]);\r\n                        }\r\n                        i = bl;\r\n                        break;\r\n                    case \"insertReplacementText\":\r\n                        if (newBuffer[i] === marker) { //extend selection\r\n                            caretPos.end++;\r\n                        } else {\r\n                            // breakout loop\r\n                            i = bl;\r\n                        }\r\n                        break;\r\n                    case \"deleteContentBackward\":\r\n                        if (newBuffer[i] === marker) {\r\n                            caretPos.end++;\r\n                        } else {\r\n                            //breakout loop\r\n                            i = bl;\r\n                        }\r\n                        break;\r\n                    default:\r\n                        if (newBuffer[i] !== oldBuffer[i]) {\r\n                            if ((newBuffer[i + 1] === marker || newBuffer[i + 1] === placeholder || newBuffer[i + 1] === undefined) && ((oldBuffer[i] === placeholder && oldBuffer[i + 1] === marker) || oldBuffer[i] === marker)) {  //basic insert\r\n                                action = \"insertText\";\r\n                                data.push(newBuffer[i]);\r\n                                caretPos.begin--;\r\n                                caretPos.end--;\r\n                            } else if (oldBuffer[i + 1] === marker && oldBuffer[i] === newBuffer[i + 1]) { //insert between\r\n                                action = \"insertText\";\r\n                                data.push(newBuffer[i]);\r\n                                caretPos.begin--;\r\n                                caretPos.end--;\r\n                            } else if (newBuffer[i] !== placeholder && newBuffer[i] !== marker &&\r\n                                (newBuffer[i + 1] === marker || (oldBuffer[i] !== newBuffer[i] && oldBuffer[i + 1] === newBuffer[i + 1] /*single char replacement*/))) { //replace selection\r\n                                action = \"insertReplacementText\";\r\n                                data.push(newBuffer[i]);\r\n                                caretPos.begin--;\r\n                            } else if (newBuffer[i] === marker) {  //delete~backspace\r\n                                action = \"deleteContentBackward\";\r\n                                if (isMask.call(inputmask, translatePosition.call(inputmask, i), true) || oldBuffer[i] === opts.radixPoint) caretPos.end++;\r\n                            } else {\r\n                                i = bl;\r\n                            }\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n\r\n            return {\r\n                action: action,\r\n                data: data,\r\n                caret: caretPos\r\n            };\r\n        }\r\n\r\n        var input = this,\r\n            inputValue = input.inputmask._valueGet(true),\r\n            buffer = (inputmask.isRTL ? getBuffer.call(inputmask).slice().reverse() : getBuffer.call(inputmask)).join(\"\"),\r\n            caretPos = caret.call(inputmask, input, undefined, undefined, true),\r\n            changes;\r\n\r\n        if (buffer !== inputValue) {\r\n            changes = analyseChanges(inputValue, buffer, caretPos);\r\n            if ((input.inputmask.shadowRoot || input.ownerDocument).activeElement !== input) {\r\n                input.focus();\r\n            }\r\n            writeBuffer(input, getBuffer.call(inputmask));\r\n            caret.call(inputmask, input, caretPos.begin, caretPos.end, true);\r\n\r\n            // Japanese IME hack #2662\r\n            if (!mobile && inputmask.skipNextInsert && e.inputType === \"insertText\" && changes.action === \"insertText\" && inputmask.isComposing) {\r\n                return false;\r\n            }\r\n            if (e.inputType === \"insertCompositionText\" && changes.action === \"insertText\" && inputmask.isComposing) {\r\n                inputmask.skipNextInsert = true;\r\n            } else {\r\n                inputmask.skipNextInsert = false;\r\n            }\r\n\r\n            switch (changes.action) {\r\n                case \"insertText\":\r\n                case \"insertReplacementText\":\r\n                    changes.data.forEach(function (entry, ndx) {\r\n                        var keypress = new $.Event(\"keypress\");\r\n                        keypress.key = entry;\r\n                        inputmask.ignorable = false; //make sure ignorable is ignored ;-)\r\n                        EventHandlers.keypressEvent.call(input, keypress);\r\n                    });\r\n                    setTimeout(function () {  //#2195 trigger keyup to help some other plugins to track changes\r\n                        inputmask.$el.trigger(\"keyup\");\r\n                    }, 0);\r\n                    break;\r\n                case \"deleteContentBackward\":\r\n                    var keydown = new $.Event(\"keydown\");\r\n                    keydown.key = keys.Backspace;\r\n                    EventHandlers.keyEvent.call(input, keydown);\r\n                    break;\r\n                default:\r\n                    applyInputValue(input, inputValue);\r\n                    caret.call(inputmask, input, caretPos.begin, caretPos.end, true);\r\n                    break;\r\n            }\r\n\r\n            e.preventDefault();\r\n        }\r\n    },\r\n    setValueEvent: function (e) {\r\n        const inputmask = this.inputmask;\r\n        var input = this,\r\n            value = (e && e.detail) ? e.detail[0] : arguments[1];\r\n\r\n        if (value === undefined) {\r\n            value = input.inputmask._valueGet(true);\r\n        }\r\n\r\n        applyInputValue(input, value);\r\n\r\n        if ((e.detail && e.detail[1] !== undefined) || arguments[2] !== undefined) {\r\n            caret.call(inputmask, input, e.detail ? e.detail[1] : arguments[2]);\r\n        }\r\n    }\r\n    ,\r\n    focusEvent: function (e) {\r\n        const inputmask = this.inputmask, opts = inputmask.opts;\r\n        var input = this,\r\n            nptValue = input.inputmask._valueGet();\r\n\r\n        if (opts.showMaskOnFocus) {\r\n            if (nptValue !== getBuffer.call(inputmask).join(\"\")) {\r\n                writeBuffer(input, getBuffer.call(inputmask), seekNext.call(inputmask, getLastValidPosition.call(inputmask)));\r\n            } /*else if (mouseEnter === false) { //only executed on focus without mouseenter\r\n\t\t\t\t\tcaret(input, seekNext(getLastValidPosition()));\r\n\t\t\t\t}*/\r\n        }\r\n        if (opts.positionCaretOnTab === true && inputmask.mouseEnter === false && (!isComplete.call(inputmask, getBuffer.call(inputmask)) || getLastValidPosition.call(inputmask) === -1)) {\r\n            EventHandlers.clickEvent.apply(input, [e, true]);\r\n        }\r\n        inputmask.undoValue = inputmask._valueGet(true);\r\n    },\r\n    invalidEvent: function (e) {\r\n        this.inputmask.validationEvent = true;\r\n    },\r\n    mouseleaveEvent: function () {\r\n        const inputmask = this.inputmask, opts = inputmask.opts;\r\n\r\n        var input = this;\r\n        inputmask.mouseEnter = false;\r\n        if (opts.clearMaskOnLostFocus && (input.inputmask.shadowRoot || input.ownerDocument).activeElement !== input) {\r\n            HandleNativePlaceholder(input, inputmask.originalPlaceholder);\r\n        }\r\n    },\r\n    clickEvent: function (e, tabbed) {\r\n        const inputmask = this.inputmask;\r\n        inputmask.clicked++;\r\n\r\n        var input = this;\r\n        if ((input.inputmask.shadowRoot || input.ownerDocument).activeElement === input) {\r\n            var newCaretPosition = determineNewCaretPosition.call(inputmask, caret.call(inputmask, input), tabbed);\r\n            if (newCaretPosition !== undefined) {\r\n                caret.call(inputmask, input, newCaretPosition);\r\n            }\r\n        }\r\n    },\r\n    cutEvent: function (e) {\r\n        const inputmask = this.inputmask, maskset = inputmask.maskset;\r\n\r\n        var input = this,\r\n            pos = caret.call(inputmask, input);\r\n\r\n        //correct clipboardData\r\n        var clipData = inputmask.isRTL ? getBuffer.call(inputmask).slice(pos.end, pos.begin) : getBuffer.call(inputmask).slice(pos.begin, pos.end),\r\n            clipDataText = inputmask.isRTL ? clipData.reverse().join(\"\") : clipData.join(\"\");\r\n        if (window.navigator.clipboard) window.navigator.clipboard.writeText(clipDataText);\r\n        else if (window.clipboardData && window.clipboardData.getData) { // IE\r\n            window.clipboardData.setData(\"Text\", clipDataText);\r\n        }\r\n        handleRemove.call(inputmask, input, keys.Delete, pos);\r\n        writeBuffer(input, getBuffer.call(inputmask), maskset.p, e, inputmask.undoValue !== inputmask._valueGet(true));\r\n    },\r\n    blurEvent: function (e) {\r\n        const inputmask = this.inputmask, opts = inputmask.opts, $ = inputmask.dependencyLib;\r\n        inputmask.clicked = 0;\r\n\r\n        var $input = $(this),\r\n            input = this;\r\n        if (input.inputmask) {\r\n            HandleNativePlaceholder(input, inputmask.originalPlaceholder);\r\n            var nptValue = input.inputmask._valueGet(),\r\n                buffer = getBuffer.call(inputmask).slice();\r\n\r\n            if (nptValue !== \"\") {\r\n                if (opts.clearMaskOnLostFocus) {\r\n                    if (getLastValidPosition.call(inputmask) === -1 && nptValue === getBufferTemplate.call(inputmask).join(\"\")) {\r\n                        buffer = [];\r\n                    } else { //clearout optional tail of the mask\r\n                        clearOptionalTail.call(inputmask, buffer);\r\n                    }\r\n                }\r\n                if (isComplete.call(inputmask, buffer) === false) {\r\n                    setTimeout(function () {\r\n                        $input.trigger(\"incomplete\");\r\n                    }, 0);\r\n                    if (opts.clearIncomplete) {\r\n                        resetMaskSet.call(inputmask);\r\n                        if (opts.clearMaskOnLostFocus) {\r\n                            buffer = [];\r\n                        } else {\r\n                            buffer = getBufferTemplate.call(inputmask).slice();\r\n                        }\r\n\r\n                    }\r\n                }\r\n\r\n                writeBuffer(input, buffer, undefined, e);\r\n            }\r\n\r\n            if (inputmask.undoValue !== inputmask._valueGet(true)) {\r\n                inputmask.undoValue = inputmask._valueGet(true);\r\n                $input.trigger(\"change\");\r\n            }\r\n        }\r\n    }\r\n    ,\r\n    mouseenterEvent: function () {\r\n        const inputmask = this.inputmask, {showMaskOnHover} = inputmask.opts;\r\n\r\n        var input = this;\r\n        inputmask.mouseEnter = true;\r\n        if ((input.inputmask.shadowRoot || input.ownerDocument).activeElement !== input) {\r\n            var bufferTemplate = (inputmask.isRTL ? getBufferTemplate.call(inputmask).slice().reverse() : getBufferTemplate.call(inputmask)).join(\"\");\r\n            if (showMaskOnHover) {\r\n                HandleNativePlaceholder(input, bufferTemplate);\r\n            }\r\n        }\r\n    }\r\n    ,\r\n    submitEvent: function () { //trigger change on submit if any\r\n        const inputmask = this.inputmask, opts = inputmask.opts;\r\n\r\n        if (inputmask.undoValue !== inputmask._valueGet(true)) {\r\n            inputmask.$el.trigger(\"change\");\r\n        }\r\n        if (/*opts.clearMaskOnLostFocus && */getLastValidPosition.call(inputmask) === -1 && inputmask._valueGet && inputmask._valueGet() === getBufferTemplate.call(inputmask).join(\"\")) {\r\n            inputmask._valueSet(\"\"); //clear masktemplete on submit and still has focus\r\n        }\r\n        if (opts.clearIncomplete && isComplete.call(inputmask, getBuffer.call(inputmask)) === false) {\r\n            inputmask._valueSet(\"\");\r\n        }\r\n        if (opts.removeMaskOnSubmit) {\r\n            inputmask._valueSet(inputmask.unmaskedvalue(), true);\r\n            setTimeout(function () {\r\n                writeBuffer(inputmask.el, getBuffer.call(inputmask));\r\n            }, 0);\r\n        }\r\n    }\r\n    ,\r\n    resetEvent: function () {\r\n        const inputmask = this.inputmask;\r\n\r\n        inputmask.refreshValue = true; //indicate a forced refresh when there is a call to the value before leaving the triggering event fn\r\n        setTimeout(function () {\r\n            applyInputValue(inputmask.el, inputmask._valueGet(true));\r\n        }, 0);\r\n    }\r\n};\r\n","import window from \"./global/window\";\r\n\r\nconst ua = (window.navigator && window.navigator.userAgent) || \"\",\r\n    ie = (ua.indexOf(\"MSIE \") > 0) || (ua.indexOf(\"Trident/\") > 0),\r\n    mobile = (navigator.userAgentData && navigator.userAgentData.mobile) || (window.navigator && window.navigator.maxTouchPoints) || \"ontouchstart\" in window, //not entirely correct but will currently do\r\n    iphone = /iphone/i.test(ua);\r\n\r\nexport {ie, mobile, iphone};\r\n","import canUseDOM from \"../canUseDOM\";\r\n\r\nexport default canUseDOM ? window : {};\r\n","const canUseDOM = !!(\r\n  typeof window !== \"undefined\" &&\r\n  window.document &&\r\n  window.document.createElement\r\n);\r\n\r\nexport default canUseDOM;\r\n","import {keys} from \"./keycode.js\";\r\nimport {getMaskTemplate, getPlaceholder, getTest} from \"./validation-tests\";\r\nimport {\r\n\tcaret,\r\n\tdetermineNewCaretPosition,\r\n\tgetBuffer, getBufferTemplate,\r\n\tgetLastValidPosition,\r\n\tisMask,\r\n\tresetMaskSet,\r\n\tseekNext\r\n} from \"./positioning\";\r\nimport {isComplete, refreshFromBuffer} from \"./validation\";\r\nimport {ie} from \"./environment\";\r\nimport {EventHandlers} from \"./eventhandlers\";\r\n\r\n\r\nexport {applyInputValue, clearOptionalTail, checkVal, HandleNativePlaceholder, unmaskedvalue, writeBuffer};\r\n\r\nfunction applyInputValue(input, value) {\r\n\tconst inputmask = input ? input.inputmask : this, opts = inputmask.opts;\r\n\r\n\tinput.inputmask.refreshValue = false;\r\n\tif (typeof opts.onBeforeMask === \"function\") value = opts.onBeforeMask.call(inputmask, value, opts) || value;\r\n\tvalue = value.toString().split(\"\");\r\n\tcheckVal(input, true, false, value);\r\n\tinputmask.undoValue = inputmask._valueGet(true);\r\n\tif ((opts.clearMaskOnLostFocus || opts.clearIncomplete) && input.inputmask._valueGet() === getBufferTemplate.call(inputmask).join(\"\") && getLastValidPosition.call(inputmask) === -1) {\r\n\t\tinput.inputmask._valueSet(\"\");\r\n\t}\r\n}\r\n\r\n//todo put on prototype?\r\nfunction clearOptionalTail(buffer) {\r\n\tconst inputmask = this;\r\n\r\n\tbuffer.length = 0;\r\n\tvar template = getMaskTemplate.call(inputmask, true, 0, true, undefined, true), lmnt;\r\n\twhile ((lmnt = template.shift()) !== undefined) buffer.push(lmnt);\r\n\treturn buffer;\r\n}\r\n\r\nfunction checkVal(input, writeOut, strict, nptvl, initiatingEvent) {\r\n\tconst inputmask = input ? input.inputmask : this,\r\n\t\tmaskset = inputmask.maskset,\r\n\t\topts = inputmask.opts, $ = inputmask.dependencyLib;\r\n\r\n\tvar inputValue = nptvl.slice(),\r\n\t\tcharCodes = \"\",\r\n\t\tinitialNdx = -1,\r\n\t\tresult = undefined, skipOptionalPartCharacter = opts.skipOptionalPartCharacter;\r\n\topts.skipOptionalPartCharacter = \"\"; //see issue #2311\r\n\r\n\tfunction isTemplateMatch(ndx, charCodes) {\r\n\t\tvar targetTemplate = getMaskTemplate.call(inputmask, true, 0).slice(ndx, seekNext.call(inputmask, ndx, false, false)).join(\"\").replace(/'/g, \"\"),\r\n\t\t\tcharCodeNdx = targetTemplate.indexOf(charCodes);\r\n\t\t//strip spaces from targetTemplate\r\n\t\twhile (charCodeNdx > 0 && targetTemplate[charCodeNdx - 1] === \" \") charCodeNdx--;\r\n\r\n\t\tvar match = charCodeNdx === 0 && !isMask.call(inputmask, ndx)\r\n\t\t\t&& (getTest.call(inputmask, ndx).match.nativeDef === charCodes.charAt(0)\r\n\t\t\t\t|| (getTest.call(inputmask, ndx).match.static === true && getTest.call(inputmask, ndx).match.nativeDef === (\"'\" + charCodes.charAt(0)))\r\n\t\t\t\t|| (getTest.call(inputmask, ndx).match.nativeDef === \" \" && (getTest.call(inputmask, ndx + 1).match.nativeDef === charCodes.charAt(0)\r\n\t\t\t\t\t|| (getTest.call(inputmask, ndx + 1).match.static === true && getTest.call(inputmask, ndx + 1).match.nativeDef === (\"'\" + charCodes.charAt(0))))));\r\n\r\n\t\tif (!match && charCodeNdx > 0 && !isMask.call(inputmask, ndx, false, true)) {\r\n\t\t\tvar nextPos = seekNext.call(inputmask, ndx);\r\n\t\t\tif (inputmask.caretPos.begin < nextPos) {\r\n\t\t\t\tinputmask.caretPos = {begin: nextPos};\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn match;\r\n\t}\r\n\r\n\tresetMaskSet.call(inputmask);\r\n\tmaskset.tests = {}; //reset tests ~ possible after alternating\r\n\tinitialNdx = opts.radixPoint ? determineNewCaretPosition.call(inputmask, {\r\n\t\tbegin: 0,\r\n\t\tend: 0\r\n\t}, false, opts.__financeInput === false ? \"radixFocus\" : undefined).begin : 0;\r\n\tmaskset.p = initialNdx;\r\n\tinputmask.caretPos = {begin: initialNdx};\r\n\r\n\tvar staticMatches = [], prevCaretPos = inputmask.caretPos;\r\n\tinputValue.forEach(function (charCode, ndx) {\r\n\t\tif (charCode !== undefined) { //inputfallback strips some elements out of the inputarray.  $.each logically presents them as undefined\r\n\t\t\t/*if (maskset.validPositions[ndx] === undefined && inputValue[ndx] === getPlaceholder.call(inputmask, ndx) && isMask.call(inputmask, ndx, true) &&\r\n\t\t\t\tisValid.call(inputmask, ndx, inputValue[ndx], true, undefined, true, true) === false) {\r\n\t\t\t\tinputmask.caretPos.begin++;\r\n\t\t\t} else*/\r\n\t\t\t{\r\n\t\t\t\tvar keypress = new $.Event(\"_checkval\");\r\n\t\t\t\tkeypress.key = charCode;\r\n\t\t\t\tcharCodes += charCode;\r\n\t\t\t\tvar lvp = getLastValidPosition.call(inputmask, undefined, true);\r\n\t\t\t\tif (!isTemplateMatch(initialNdx, charCodes)) {\r\n\t\t\t\t\tresult = EventHandlers.keypressEvent.call(inputmask, keypress, true, false, strict, inputmask.caretPos.begin);\r\n\r\n\t\t\t\t\tif (result) {\r\n\t\t\t\t\t\tinitialNdx = inputmask.caretPos.begin + 1;\r\n\t\t\t\t\t\tcharCodes = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = EventHandlers.keypressEvent.call(inputmask, keypress, true, false, strict, lvp + 1);\r\n\t\t\t\t}\r\n\t\t\t\tif (result) {\r\n\t\t\t\t\tif (result.pos !== undefined && maskset.validPositions[result.pos] && maskset.validPositions[result.pos].match.static === true && maskset.validPositions[result.pos].alternation === undefined) {\r\n\t\t\t\t\t\tstaticMatches.push(result.pos);\r\n\t\t\t\t\t\tif (!inputmask.isRTL) {\r\n\t\t\t\t\t\t\tresult.forwardPosition = result.pos + 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\twriteBuffer.call(inputmask, undefined, getBuffer.call(inputmask), result.forwardPosition, keypress, false);\r\n\t\t\t\t\tinputmask.caretPos = {begin: result.forwardPosition, end: result.forwardPosition};\r\n\t\t\t\t\tprevCaretPos = inputmask.caretPos;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (maskset.validPositions[ndx] === undefined && inputValue[ndx] === getPlaceholder.call(inputmask, ndx) && isMask.call(inputmask, ndx, true)) {\r\n\t\t\t\t\t\tinputmask.caretPos.begin++;\r\n\t\t\t\t\t} else inputmask.caretPos = prevCaretPos; //restore the caret position from before the failed validation\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\tif (staticMatches.length > 0) {\r\n\t\tvar sndx, validPos, nextValid = seekNext.call(inputmask, -1, undefined, false);\r\n\t\tif ((!isComplete.call(inputmask, getBuffer.call(inputmask)) && staticMatches.length <= nextValid)\r\n\t\t\t|| (isComplete.call(inputmask, getBuffer.call(inputmask)) && staticMatches.length > 0 && (staticMatches.length !== nextValid && staticMatches[0] === 0))) { //should check if is sequence starting from 0\r\n\t\t\tvar nextSndx = nextValid;\r\n\t\t\twhile ((sndx = staticMatches.shift()) !== undefined) {\r\n\t\t\t\tvar keypress = new $.Event(\"_checkval\");\r\n\t\t\t\tvalidPos = maskset.validPositions[sndx];\r\n\t\t\t\tvalidPos.generatedInput = true;\r\n\t\t\t\tkeypress.key = validPos.input;\r\n\t\t\t\tresult = EventHandlers.keypressEvent.call(inputmask, keypress, true, false, strict, nextSndx);\r\n\t\t\t\tif (result && result.pos !== undefined && result.pos !== sndx && maskset.validPositions[result.pos] && maskset.validPositions[result.pos].match.static === true) {\r\n\t\t\t\t\tstaticMatches.push(result.pos);\r\n\t\t\t\t} else if (!result) break;\r\n\t\t\t\tnextSndx++;\r\n\t\t\t}\r\n\t\t} else { //mark al statics as generated\r\n\t\t\t// while ((sndx = staticMatches.pop())) {\r\n\t\t\t// \tvalidPos = maskset.validPositions[sndx];\r\n\t\t\t// \tif (validPos) {\r\n\t\t\t// \t\tvalidPos.generatedInput = true;\r\n\t\t\t// \t}\r\n\t\t\t// }\r\n\t\t}\r\n\t}\r\n\tif (writeOut) {\r\n\t\twriteBuffer.call(\r\n\t\t\tinputmask,\r\n\t\t\tinput,\r\n\t\t\tgetBuffer.call(inputmask), result ? result.forwardPosition : inputmask.caretPos.begin,\r\n\t\t\tinitiatingEvent || new $.Event(\"checkval\"),\r\n\t\t\tinitiatingEvent && ((initiatingEvent.type === \"input\" && inputmask.undoValue !== getBuffer.call(inputmask).join(\"\")) || initiatingEvent.type === \"paste\"));\r\n\t\t// for (var vndx in maskset.validPositions) {\r\n\t\t// \tif (maskset.validPositions[vndx].match.generated !== true) { //only remove non forced generated\r\n\t\t// \t\tdelete maskset.validPositions[vndx].generatedInput; //clear generated markings ~ consider initializing with a  value as fully typed\r\n\t\t// \t}\r\n\t\t// }\r\n\t}\r\n\topts.skipOptionalPartCharacter = skipOptionalPartCharacter;\r\n}\r\n\r\nfunction HandleNativePlaceholder(npt, value) {\r\n\tconst inputmask = npt ? npt.inputmask : this;\r\n\r\n\tif (ie) {\r\n\t\tif (npt.inputmask._valueGet() !== value && (npt.placeholder !== value || npt.placeholder === \"\")) {\r\n\t\t\tvar buffer = getBuffer.call(inputmask).slice(),\r\n\t\t\t\tnptValue = npt.inputmask._valueGet();\r\n\t\t\tif (nptValue !== value) {\r\n\t\t\t\tvar lvp = getLastValidPosition.call(inputmask);\r\n\t\t\t\tif (lvp === -1 && nptValue === getBufferTemplate.call(inputmask).join(\"\")) {\r\n\t\t\t\t\tbuffer = [];\r\n\t\t\t\t} else if (lvp !== -1) { //clearout optional tail of the mask\r\n\t\t\t\t\tclearOptionalTail.call(inputmask, buffer);\r\n\t\t\t\t}\r\n\t\t\t\twriteBuffer(npt, buffer);\r\n\t\t\t}\r\n\t\t}\r\n\t} else if (npt.placeholder !== value) {\r\n\t\tnpt.placeholder = value;\r\n\t\tif (npt.placeholder === \"\") npt.removeAttribute(\"placeholder\");\r\n\t}\r\n}\r\n\r\nfunction unmaskedvalue(input) {\r\n\tconst inputmask = input ? input.inputmask : this,\r\n\t\topts = inputmask.opts,\r\n\t\tmaskset = inputmask.maskset;\r\n\r\n\tif (input) {\r\n\t\tif (input.inputmask === undefined) {\r\n\t\t\treturn input.value;\r\n\t\t}\r\n\t\tif (input.inputmask && input.inputmask.refreshValue) { //forced refresh from the value form.reset\r\n\t\t\tapplyInputValue(input, input.inputmask._valueGet(true));\r\n\t\t}\r\n\t}\r\n\tvar umValue = [],\r\n\t\tvps = maskset.validPositions;\r\n\tfor (let pndx = 0, vpl = vps.length; pndx < vpl; pndx++) {\r\n\t\tif (vps[pndx] && vps[pndx].match && (vps[pndx].match.static != true || (Array.isArray(maskset.metadata) && vps[pndx].generatedInput !== true))) {\r\n\t\t\t//only include generated input with multiple masks (check on metadata)\r\n\t\t\tumValue.push(vps[pndx].input);\r\n\t\t}\r\n\t}\r\n\tvar unmaskedValue = umValue.length === 0 ? \"\" : (inputmask.isRTL ? umValue.reverse() : umValue).join(\"\");\r\n\tif (typeof opts.onUnMask === \"function\") {\r\n\t\tvar bufferValue = (inputmask.isRTL ? getBuffer.call(inputmask).slice().reverse() : getBuffer.call(inputmask)).join(\"\");\r\n\t\tunmaskedValue = opts.onUnMask.call(inputmask, bufferValue, unmaskedValue, opts);\r\n\t}\r\n\treturn unmaskedValue;\r\n}\r\n\r\nfunction writeBuffer(input, buffer, caretPos, event, triggerEvents) {\r\n\tconst inputmask = input ? input.inputmask : this,\r\n\t\topts = inputmask.opts,\r\n\t\t$ = inputmask.dependencyLib;\r\n\r\n\tif (event && typeof opts.onBeforeWrite === \"function\") {\r\n\t\t//    buffer = buffer.slice(); //prevent uncontrolled manipulation of the internal buffer\r\n\t\tvar result = opts.onBeforeWrite.call(inputmask, event, buffer, caretPos, opts);\r\n\t\tif (result) {\r\n\t\t\tif (result.refreshFromBuffer) {\r\n\t\t\t\tvar refresh = result.refreshFromBuffer;\r\n\t\t\t\trefreshFromBuffer.call(inputmask, refresh === true ? refresh : refresh.start, refresh.end, result.buffer || buffer);\r\n\t\t\t\tbuffer = getBuffer.call(inputmask, true);\r\n\t\t\t}\r\n\t\t\tif (caretPos !== undefined) caretPos = result.caret !== undefined ? result.caret : caretPos;\r\n\t\t}\r\n\t}\r\n\tif (input !== undefined) {\r\n\t\tinput.inputmask._valueSet(buffer.join(\"\"));\r\n\t\tif (caretPos !== undefined && (event === undefined || event.type !== \"blur\")) {\r\n\t\t\t// console.log(caretPos);\r\n\t\t\tcaret.call(inputmask, input, caretPos, undefined, undefined, (event !== undefined && event.type === \"keydown\" && (event.key === keys.Delete || event.key === keys.Backspace)));\r\n\t\t}\r\n\t\tif (triggerEvents === true) {\r\n\t\t\tvar $input = $(input), nptVal = input.inputmask._valueGet();\r\n\t\t\tinput.inputmask.skipInputEvent = true;\r\n\t\t\t$input.trigger(\"input\");\r\n\t\t\tsetTimeout(function () { //timeout needed for IE\r\n\t\t\t\tif (nptVal === getBufferTemplate.call(inputmask).join(\"\")) {\r\n\t\t\t\t\t$input.trigger(\"cleared\");\r\n\t\t\t\t} else if (isComplete.call(inputmask, buffer) === true) {\r\n\t\t\t\t\t$input.trigger(\"complete\");\r\n\t\t\t\t}\r\n\t\t\t}, 0);\r\n\t\t}\r\n\t}\r\n}\r\n","import Inputmask from \"./inputmask\";\r\nimport {keys} from \"./keycode.js\";\r\nimport {getBufferTemplate} from \"./positioning\";\r\nimport {HandleNativePlaceholder} from \"./inputHandling\";\r\n\r\nexport {EventRuler};\r\n\r\nvar EventRuler = {\r\n    on: function (input, eventName, eventHandler) {\r\n        const $ = input.inputmask.dependencyLib;\r\n\r\n        var ev = function (e) {\r\n            if (e.originalEvent) {\r\n                e = e.originalEvent || e; //get original event from jquery evenbt\r\n                arguments[0] = e;\r\n            }\r\n            // console.log(e.type);\r\n            var that = this, args, inputmask = that.inputmask, opts = inputmask ? inputmask.opts : undefined;\r\n            if (inputmask === undefined && this.nodeName !== \"FORM\") { //happens when cloning an object with jquery.clone\r\n                var imOpts = $.data(that, \"_inputmask_opts\");\r\n                $(that).off(); //unbind all events\r\n                if (imOpts) {\r\n                    (new Inputmask(imOpts)).mask(that);\r\n                }\r\n            } else if (![\"submit\", \"reset\", \"setvalue\"].includes(e.type) && this.nodeName !== \"FORM\" && (that.disabled || (that.readOnly && !(e.type === \"keydown\" && (e.ctrlKey && e.key === keys.c) || (opts.tabThrough === false && e.key === keys.Tab))))) {\r\n                e.preventDefault();\r\n            } else {\r\n                switch (e.type) {\r\n                    case \"input\":\r\n                        if (inputmask.skipInputEvent === true) {\r\n                            inputmask.skipInputEvent = false;\r\n                            return e.preventDefault();\r\n                        }\r\n\r\n                        // if (mobile) { //this causes problem see #2220\r\n                        // \targs = arguments;\r\n                        // \tsetTimeout(function () { //needed for caret selection when entering a char on Android 8 - #1818\r\n                        // \t\teventHandler.apply(that, args);\r\n                        // \t\tcaret(that, that.inputmask.caretPos, undefined, true);\r\n                        // \t}, 0);\r\n                        // \treturn false;\r\n                        // }\r\n                        break;\r\n                    case \"click\":\r\n                    case \"focus\":\r\n                        if (inputmask.validationEvent) { // #841\r\n                            inputmask.validationEvent = false;\r\n                            input.blur();\r\n                            HandleNativePlaceholder(input, (inputmask.isRTL ? getBufferTemplate.call(inputmask).slice().reverse() : getBufferTemplate.call(inputmask)).join(\"\"));\r\n                            setTimeout(function () {\r\n                                input.focus();\r\n                            }, opts.validationEventTimeOut);\r\n                            return false;\r\n                        }\r\n                        args = arguments;\r\n                        setTimeout(function () { //needed for Chrome ~ initial selection clears after the clickevent\r\n                            if (!input.inputmask) {\r\n                                // `inputmask.remove()` was called before this callback\r\n                                return;\r\n                            }\r\n                            eventHandler.apply(that, args);\r\n                        }, 0);\r\n                        return /*false*/; //#2423\r\n                }\r\n                var returnVal = eventHandler.apply(that, arguments);\r\n                if (returnVal === false) {\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                }\r\n                return returnVal;\r\n            }\r\n        };\r\n        if ([\"submit\", \"reset\"].includes(eventName)) {\r\n            ev = ev.bind(input); //bind creates a new eventhandler (wrap)\r\n            if (input.form !== null) $(input.form).on(eventName, ev);\r\n        } else {\r\n            $(input).on(eventName, ev);\r\n        }\r\n\r\n        //keep instance of the event\r\n        input.inputmask.events[eventName] = input.inputmask.events[eventName] || [];\r\n        input.inputmask.events[eventName].push(ev);\r\n\r\n    },\r\n    off: function (input, event) {\r\n        if (input.inputmask && input.inputmask.events) {\r\n            const $ = input.inputmask.dependencyLib;\r\n            let events = input.inputmask.events;\r\n            if (event) {\r\n                events = [];\r\n                events[event] = input.inputmask.events[event];\r\n            }\r\n            for (let eventName in events) {\r\n                let evArr = events[eventName];\r\n                while (evArr.length > 0) {\r\n                    let ev = evArr.pop();\r\n                    if ([\"submit\", \"reset\",].includes(eventName)) {\r\n                        if (input.form !== null) $(input.form).off(eventName, ev);\r\n                    } else {\r\n                        $(input).off(eventName, ev);\r\n                    }\r\n                }\r\n                delete input.inputmask.events[eventName];\r\n            }\r\n        }\r\n    }\r\n};\r\n","/*\r\n Input Mask plugin dependencyLib\r\n http://github.com/RobinHerbots/jquery.inputmask\r\n Copyright (c) Robin Herbots\r\n Licensed under the MIT license\r\n */\r\n\r\nimport extend from \"./extend\";\r\nimport window from \"../global/window\";\r\nimport data from \"./data\";\r\nimport { on, off, trigger, Event} from \"./events\";\r\n\r\nconst document = window.document;\r\n\r\nfunction DependencyLib(elem) {\r\n\tif (elem instanceof DependencyLib) {\r\n\t\treturn elem;\r\n\t}\r\n\tif (!(this instanceof DependencyLib)) {\r\n\t\treturn new DependencyLib(elem);\r\n\t}\r\n\tif (elem !== undefined && elem !== null && elem !== window) {\r\n\t\tthis[0] = elem.nodeName ? elem : (elem[0] !== undefined && elem[0].nodeName ? elem[0] : document.querySelector(elem));\r\n\t\tif (this[0] !== undefined && this[0] !== null) {\r\n\t\t\tthis[0].eventRegistry = this[0].eventRegistry || {};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nDependencyLib.prototype = {\r\n\ton: on,\r\n\toff: off,\r\n\ttrigger: trigger\r\n};\r\n\r\n//static\r\nDependencyLib.extend = extend;\r\nDependencyLib.data = data;\r\nDependencyLib.Event = Event;\r\n\r\nexport default DependencyLib;\r\n","export default function extend() {\r\n\tlet options, name, src, copy, copyIsArray, clone,\r\n\t\ttarget = arguments[0] || {},\r\n\t\ti = 1,\r\n\t\tlength = arguments.length,\r\n\t\tdeep = false;\r\n\r\n\t// Handle a deep copy situation\r\n\tif (typeof target === \"boolean\") {\r\n\t\tdeep = target;\r\n\r\n\t\t// Skip the boolean and the target\r\n\t\ttarget = arguments[i] || {};\r\n\t\ti++;\r\n\t}\r\n\r\n\t// Handle case when target is a string or something (possible in deep copy)\r\n\tif (typeof target !== \"object\" && typeof target !== \"function\") {\r\n\t\ttarget = {};\r\n\t}\r\n\r\n\tfor (; i < length; i++) {\r\n\t\t// Only deal with non-null/undefined values\r\n\t\tif ((options = arguments[i]) != null) {\r\n\t\t\t// Extend the base object\r\n\t\t\tfor (name in options) {\r\n\t\t\t\tsrc = target[name];\r\n\t\t\t\tcopy = options[name];\r\n\r\n\t\t\t\t// Prevent never-ending loop\r\n\t\t\t\tif (target === copy) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Recurse if we're merging plain objects or arrays\r\n\t\t\t\tif (deep && copy && (Object.prototype.toString.call(copy) === \"[object Object]\" || (copyIsArray = Array.isArray(copy)))) {\r\n\t\t\t\t\tif (copyIsArray) {\r\n\t\t\t\t\t\tcopyIsArray = false;\r\n\t\t\t\t\t\tclone = src && Array.isArray(src) ? src : [];\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tclone = src && Object.prototype.toString.call(src) === \"[object Object]\" ? src : {};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Never move original objects, clone them\r\n\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\r\n\r\n\t\t\t\t\t// Don't bring in undefined values\r\n\t\t\t\t} else if (copy !== undefined) {\r\n\t\t\t\t\ttarget[name] = copy;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Return the modified object\r\n\treturn target;\r\n}","export default function (owner, key, value) {\r\n\tif (value === undefined) {\r\n\t\treturn owner.__data ? owner.__data[key] : null;\r\n\t} else {\r\n\t\towner.__data = owner.__data || {};\r\n\t\towner.__data[key] = value;\r\n\t}\r\n}","import extend from \"./extend\";\r\nimport window from \"../global/window\";\r\nimport DependencyLib from \"./inputmask.dependencyLib\";\r\nimport canUseDOM from \"../canUseDOM\";\r\n\r\nexport {on, off, trigger, Event};\r\n\r\nfunction isValidElement(elem) {\r\n\treturn elem instanceof Element;\r\n}\r\n\r\nlet Event;\r\nif (typeof window.CustomEvent === \"function\") {\r\n\tEvent = window.CustomEvent;\r\n} else {\r\n\tif (canUseDOM) {\r\n\t\tEvent = function (event, params) {\r\n\t\t\tparams = params || {bubbles: false, cancelable: false, composed: true, detail: undefined};\r\n\t\t\tvar evt = document.createEvent(\"CustomEvent\");\r\n\t\t\tevt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\r\n\t\t\treturn evt;\r\n\t\t};\r\n\t\tEvent.prototype = window.Event.prototype;\r\n\t}\r\n}\r\n\r\n\r\nfunction on(events, handler) {\r\n\tfunction addEvent(ev, namespace) {\r\n\t\t//register domevent\r\n\t\tif (elem.addEventListener) { // all browsers except IE before version 9\r\n\t\t\telem.addEventListener(ev, handler, false);\r\n\t\t} else if (elem.attachEvent) { // IE before version 9\r\n\t\t\telem.attachEvent(`on${ev}`, handler);\r\n\t\t}\r\n\t\teventRegistry[ev] = eventRegistry[ev] || {};\r\n\t\teventRegistry[ev][namespace] = eventRegistry[ev][namespace] || [];\r\n\t\teventRegistry[ev][namespace].push(handler);\r\n\t}\r\n\r\n\tif (isValidElement(this[0])) {\r\n\t\tvar eventRegistry = this[0].eventRegistry,\r\n\t\t\telem = this[0];\r\n\r\n\t\tevents.split(\" \").forEach((event) => {\r\n\t\t\tconst [ev, namespace = \"global\"] = event.split(\".\");\r\n\t\t\taddEvent(ev, namespace);\r\n\t\t});\r\n\t}\r\n\treturn this;\r\n}\r\n\r\nfunction off(events, handler) {\r\n\tvar eventRegistry, elem;\r\n\r\n\tfunction removeEvent(ev, namespace, handler) {\r\n\t\tif (ev in eventRegistry === true) {\r\n\t\t\t//unbind to dom events\r\n\t\t\tif (elem.removeEventListener) { // all browsers except IE before version 9\r\n\t\t\t\telem.removeEventListener(ev, handler, false);\r\n\t\t\t} else if (elem.detachEvent) { // IE before version 9\r\n\t\t\t\telem.detachEvent(`on${ev}`, handler);\r\n\t\t\t}\r\n\t\t\tif (namespace === \"global\") {\r\n\t\t\t\tfor (var nmsp in eventRegistry[ev]) {\r\n\t\t\t\t\teventRegistry[ev][nmsp].splice(eventRegistry[ev][nmsp].indexOf(handler), 1);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\teventRegistry[ev][namespace].splice(eventRegistry[ev][namespace].indexOf(handler), 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction resolveNamespace(ev, namespace) {\r\n\t\tvar evts = [],\r\n\t\t\thndx, hndL;\r\n\t\tif (ev.length > 0) {\r\n\t\t\tif (handler === undefined) {\r\n\t\t\t\tfor (hndx = 0, hndL = eventRegistry[ev][namespace].length; hndx < hndL; hndx++) {\r\n\t\t\t\t\tevts.push({\r\n\t\t\t\t\t\tev: ev,\r\n\t\t\t\t\t\tnamespace: namespace && namespace.length > 0 ? namespace : \"global\",\r\n\t\t\t\t\t\thandler: eventRegistry[ev][namespace][hndx]\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tevts.push({\r\n\t\t\t\t\tev: ev,\r\n\t\t\t\t\tnamespace: namespace && namespace.length > 0 ? namespace : \"global\",\r\n\t\t\t\t\thandler: handler\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else if (namespace.length > 0) {\r\n\t\t\tfor (var evNdx in eventRegistry) {\r\n\t\t\t\tfor (var nmsp in eventRegistry[evNdx]) {\r\n\t\t\t\t\tif (nmsp === namespace) {\r\n\t\t\t\t\t\tif (handler === undefined) {\r\n\t\t\t\t\t\t\tfor (hndx = 0, hndL = eventRegistry[evNdx][nmsp].length; hndx < hndL; hndx++) {\r\n\t\t\t\t\t\t\t\tevts.push({\r\n\t\t\t\t\t\t\t\t\tev: evNdx,\r\n\t\t\t\t\t\t\t\t\tnamespace: nmsp,\r\n\t\t\t\t\t\t\t\t\thandler: eventRegistry[evNdx][nmsp][hndx]\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tevts.push({\r\n\t\t\t\t\t\t\t\tev: evNdx,\r\n\t\t\t\t\t\t\t\tnamespace: nmsp,\r\n\t\t\t\t\t\t\t\thandler: handler\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn evts;\r\n\t}\r\n\r\n\tif (isValidElement(this[0]) && events) {\r\n\t\teventRegistry = this[0].eventRegistry;\r\n\t\telem = this[0];\r\n\r\n\t\tevents.split(\" \").forEach((event) => {\r\n\t\t\tconst [ev, namespace] = event.split(\".\");\r\n\t\t\tresolveNamespace(ev, namespace).forEach(({ev: ev1, handler: handler1, namespace: namespace1}) => {\r\n\t\t\t\tremoveEvent(ev1, namespace1, handler1);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\treturn this;\r\n}\r\n\r\nfunction trigger(events /* , args... */) {\r\n\tif (isValidElement(this[0])) {\r\n\t\tvar eventRegistry = this[0].eventRegistry,\r\n\t\t\telem = this[0];\r\n\t\tvar _events = typeof events === \"string\" ? events.split(\" \") : [events.type];\r\n\t\tfor (var endx = 0; endx < _events.length; endx++) {\r\n\t\t\tvar nsEvent = _events[endx].split(\".\"),\r\n\t\t\t\tev = nsEvent[0],\r\n\t\t\t\tnamespace = nsEvent[1] || \"global\";\r\n\t\t\tif (document !== undefined && namespace === \"global\") {\r\n\t\t\t\t//trigger domevent\r\n\t\t\t\tvar evnt, i, params = {\r\n\t\t\t\t\tbubbles: true,\r\n\t\t\t\t\tcancelable: true,\r\n\t\t\t\t\tcomposed: true,\r\n\t\t\t\t\tdetail: arguments[1]\r\n\t\t\t\t};\r\n\t\t\t\t// The custom event that will be created\r\n\t\t\t\tif (document.createEvent) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tswitch (ev) {\r\n\t\t\t\t\t\t\tcase \"input\":\r\n\t\t\t\t\t\t\t\tparams.inputType = \"insertText\";\r\n\t\t\t\t\t\t\t\tevnt = new InputEvent(ev, params);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\tevnt = new CustomEvent(ev, params);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tevnt = document.createEvent(\"CustomEvent\");\r\n\t\t\t\t\t\tevnt.initCustomEvent(ev, params.bubbles, params.cancelable, params.detail);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (events.type) extend(evnt, events);\r\n\t\t\t\t\telem.dispatchEvent(evnt);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tevnt = document.createEventObject();\r\n\t\t\t\t\tevnt.eventType = ev;\r\n\t\t\t\t\tevnt.detail = arguments[1];\r\n\t\t\t\t\tif (events.type) extend(evnt, events);\r\n\t\t\t\t\telem.fireEvent(\"on\" + evnt.eventType, evnt);\r\n\t\t\t\t}\r\n\t\t\t} else if (eventRegistry[ev] !== undefined) {\r\n\t\t\t\targuments[0] = arguments[0].type ? arguments[0] : DependencyLib.Event(arguments[0]);\r\n\t\t\t\targuments[0].detail = arguments.slice(1);\r\n\r\n\t\t\t\tconst registry = eventRegistry[ev],\r\n\t\t\t\t\thandlers = namespace === \"global\" ? Object.values(registry).flat() : registry[namespace];\r\n\t\t\t\thandlers.forEach(handler => handler.apply(elem, arguments));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn this;\r\n}\r\n","import $ from \"./dependencyLibs/inputmask.dependencyLib\";\r\nimport MaskToken from \"./masktoken\";\r\nimport Inputmask from \"./inputmask\";\r\nimport escapeRegex from \"./escapeRegex\";\r\n\r\nexport {generateMaskSet, analyseMask};\r\n\r\nfunction generateMaskSet(opts, nocache) {\r\n    var ms;\r\n\r\n    function preProcessMask(mask, {repeat, groupmarker, quantifiermarker, keepStatic}) {\r\n        if (repeat > 0 || repeat === \"*\" || repeat === \"+\") {\r\n            var repeatStart = repeat === \"*\" ? 0 : (repeat === \"+\" ? 1 : repeat);\r\n            mask = groupmarker[0] + mask + groupmarker[1] + quantifiermarker[0] + repeatStart + \",\" + repeat + quantifiermarker[1];\r\n        }\r\n        if (keepStatic === true) {\r\n            let optionalRegex = \"(.)\\\\[([^\\\\]]*)\\\\]\", // \"(?<p1>.)\\\\[(?<p2>[^\\\\]]*)\\\\]\", remove named capture group @2428\r\n                maskMatches = mask.match(new RegExp(optionalRegex, \"g\"));\r\n            maskMatches && maskMatches.forEach((m, i) => {\r\n                let [p1, p2] = m.split(\"[\"); p2 = p2.replace(\"]\", \"\");\r\n                mask = mask.replace(new RegExp(`${escapeRegex(p1)}\\\\[${escapeRegex(p2)}\\\\]`),\r\n                    p1.charAt(0) === p2.charAt(0) ?\r\n                        `(${p1}|${p1}${p2})` :\r\n                        `${p1}[${p2}]`);\r\n                // console.log(mask);\r\n            });\r\n        }\r\n\r\n        return mask;\r\n    }\r\n\r\n    function generateMask(mask, metadata, opts) {\r\n        var regexMask = false;\r\n        if (mask === null || mask === \"\") {\r\n            regexMask = opts.regex !== null;\r\n            if (regexMask) {\r\n                mask = opts.regex;\r\n                mask = mask.replace(/^(\\^)(.*)(\\$)$/, \"$2\");\r\n            } else {\r\n                regexMask = true;\r\n                mask = \".*\";\r\n            }\r\n        }\r\n        if (mask.length === 1 && opts.greedy === false && opts.repeat !== 0) {\r\n            opts.placeholder = \"\";\r\n        } //hide placeholder with single non-greedy mask\r\n        mask = preProcessMask(mask, opts);\r\n\r\n        // console.log(mask);\r\n        var masksetDefinition, maskdefKey;\r\n        maskdefKey = regexMask ? \"regex_\" + opts.regex : opts.numericInput ? mask.split(\"\").reverse().join(\"\") : mask;\r\n        if (opts.keepStatic !== null) { //keepstatic modifies the output from the testdefinitions ~ so differentiate in the maskcache\r\n            maskdefKey = \"ks_\" + opts.keepStatic + maskdefKey;\r\n        }\r\n\r\n        if (Inputmask.prototype.masksCache[maskdefKey] === undefined || nocache === true) {\r\n            masksetDefinition = {\r\n                \"mask\": mask,\r\n                \"maskToken\": Inputmask.prototype.analyseMask(mask, regexMask, opts),\r\n                \"validPositions\": [],\r\n                \"_buffer\": undefined,\r\n                \"buffer\": undefined,\r\n                \"tests\": {},\r\n                \"excludes\": {}, //excluded alternations\r\n                \"metadata\": metadata,\r\n                \"maskLength\": undefined,\r\n                \"jitOffset\": {}\r\n            };\r\n            if (nocache !== true) {\r\n                Inputmask.prototype.masksCache[maskdefKey] = masksetDefinition;\r\n                masksetDefinition = $.extend(true, {}, Inputmask.prototype.masksCache[maskdefKey]);\r\n            }\r\n        } else {\r\n            masksetDefinition = $.extend(true, {}, Inputmask.prototype.masksCache[maskdefKey]);\r\n        }\r\n\r\n        return masksetDefinition;\r\n    }\r\n\r\n    if (typeof opts.mask === \"function\") { //allow mask to be a preprocessing fn - should return a valid mask\r\n        opts.mask = opts.mask(opts);\r\n    }\r\n    if (Array.isArray(opts.mask)) {\r\n        if (opts.mask.length > 1) {\r\n            if (opts.keepStatic === null) { //enable by default when passing multiple masks when the option is not explicitly specified\r\n                opts.keepStatic = true;\r\n            }\r\n            var altMask = opts.groupmarker[0];\r\n            (opts.isRTL ? opts.mask.reverse() : opts.mask).forEach(function (msk) {\r\n                if (altMask.length > 1) {\r\n                    altMask += opts.alternatormarker;\r\n                }\r\n                if (msk.mask !== undefined && typeof msk.mask !== \"function\") {\r\n                    altMask += msk.mask;\r\n                } else {\r\n                    altMask += msk;\r\n                }\r\n            });\r\n            altMask += opts.groupmarker[1];\r\n            // console.log(altMask);\r\n            return generateMask(altMask, opts.mask, opts);\r\n        } else {\r\n            opts.mask = opts.mask.pop();\r\n        }\r\n    }\r\n    if (opts.mask && opts.mask.mask !== undefined && typeof opts.mask.mask !== \"function\") {\r\n        ms = generateMask(opts.mask.mask, opts.mask, opts);\r\n    } else {\r\n        ms = generateMask(opts.mask, opts.mask, opts);\r\n    }\r\n    if (opts.keepStatic === null) opts.keepStatic = false;\r\n    return ms;\r\n}\r\n\r\nfunction analyseMask(mask, regexMask, opts) {\r\n    const tokenizer = /(?:[?*+]|\\{[0-9+*]+(?:,[0-9+*]*)?(?:\\|[0-9+*]*)?\\})|[^.?*+^${[]()|\\\\]+|./g,\r\n        //Thx to https://github.com/slevithan/regex-colorizer for the regexTokenizer regex\r\n        regexTokenizer = /\\[\\^?]?(?:[^\\\\\\]]+|\\\\[\\S\\s]?)*]?|\\\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\\S\\s]?)|\\((?:\\?[:=!]?)?|(?:[?*+]|\\{[0-9]+(?:,[0-9]*)?\\})\\??|[^.?*+^${[()|\\\\]+|./g;\r\n    var escaped = false,\r\n        currentToken = new MaskToken(),\r\n        match,\r\n        m,\r\n        openenings = [],\r\n        maskTokens = [],\r\n        openingToken,\r\n        currentOpeningToken,\r\n        alternator,\r\n        lastMatch,\r\n        closeRegexGroup = false;\r\n\r\n    //test definition => {fn: RegExp/function, static: true/false optionality: bool, newBlockMarker: bool, casing: null/upper/lower, def: definitionSymbol, placeholder: placeholder, mask: real maskDefinition}\r\n    function insertTestDefinition(mtoken, element, position) {\r\n        position = position !== undefined ? position : mtoken.matches.length;\r\n        var prevMatch = mtoken.matches[position - 1];\r\n        if (regexMask) {\r\n            if (element.indexOf(\"[\") === 0 || (escaped && /\\\\d|\\\\s|\\\\w|\\\\p/i.test(element)) || element === \".\") {\r\n                let flag = opts.casing ? \"i\" : \"\";\r\n                if (/^\\\\p\\{.*}$/i.test(element))\r\n                    flag += \"u\";\r\n                mtoken.matches.splice(position++, 0, {\r\n                    fn: new RegExp(element, flag),\r\n                    static: false,\r\n                    optionality: false,\r\n                    newBlockMarker: prevMatch === undefined ? \"master\" : prevMatch.def !== element,\r\n                    casing: null,\r\n                    def: element,\r\n                    placeholder: undefined,\r\n                    nativeDef: element\r\n                });\r\n            } else {\r\n                if (escaped) element = element[element.length - 1];\r\n                element.split(\"\").forEach(function (lmnt, ndx) {\r\n                    prevMatch = mtoken.matches[position - 1];\r\n                    mtoken.matches.splice(position++, 0, {\r\n                        fn: /[a-z]/i.test((opts.staticDefinitionSymbol || lmnt)) ? new RegExp(\"[\" + (opts.staticDefinitionSymbol || lmnt) + \"]\", opts.casing ? \"i\" : \"\") : null,\r\n                        static: true,\r\n                        optionality: false,\r\n                        newBlockMarker: prevMatch === undefined ? \"master\" : (prevMatch.def !== lmnt && prevMatch.static !== true),\r\n                        casing: null,\r\n                        def: opts.staticDefinitionSymbol || lmnt,\r\n                        placeholder: opts.staticDefinitionSymbol !== undefined ? lmnt : undefined,\r\n                        nativeDef: (escaped ? \"'\" : \"\") + lmnt\r\n                    });\r\n                });\r\n            }\r\n            escaped = false;\r\n        } else {\r\n            var maskdef = (opts.definitions && opts.definitions[element]) || (opts.usePrototypeDefinitions && Inputmask.prototype.definitions[element]);\r\n            if (maskdef && !escaped) {\r\n                mtoken.matches.splice(position++, 0, {\r\n                    fn: maskdef.validator ? typeof maskdef.validator == \"string\" ? new RegExp(maskdef.validator, opts.casing ? \"i\" : \"\") : new function () {\r\n                        this.test = maskdef.validator;\r\n                    } : new RegExp(\".\"),\r\n                    static: maskdef.static || false,\r\n                    optionality: maskdef.optional || false,\r\n                    defOptionality: maskdef.optional || false, //indicator for an optional from the definition\r\n                    newBlockMarker: (prevMatch === undefined || maskdef.optional) ? \"master\" : prevMatch.def !== (maskdef.definitionSymbol || element),\r\n                    casing: maskdef.casing,\r\n                    def: maskdef.definitionSymbol || element,\r\n                    placeholder: maskdef.placeholder,\r\n                    nativeDef: element,\r\n                    generated: maskdef.generated\r\n                });\r\n            } else {\r\n                mtoken.matches.splice(position++, 0, {\r\n                    fn: /[a-z]/i.test((opts.staticDefinitionSymbol || element)) ? new RegExp(\"[\" + (opts.staticDefinitionSymbol || element) + \"]\", opts.casing ? \"i\" : \"\") : null,\r\n                    static: true,\r\n                    optionality: false,\r\n                    newBlockMarker: prevMatch === undefined ? \"master\" : (prevMatch.def !== element && prevMatch.static !== true),\r\n                    casing: null,\r\n                    def: opts.staticDefinitionSymbol || element,\r\n                    placeholder: opts.staticDefinitionSymbol !== undefined ? element : undefined,\r\n                    nativeDef: (escaped ? \"'\" : \"\") + element\r\n                });\r\n                escaped = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    function verifyGroupMarker(maskToken) {\r\n        if (maskToken && maskToken.matches) {\r\n            maskToken.matches.forEach(function (token, ndx) {\r\n                var nextToken = maskToken.matches[ndx + 1];\r\n                if ((nextToken === undefined || (nextToken.matches === undefined || nextToken.isQuantifier === false)) && token && token.isGroup) { //this is not a group but a normal mask => convert\r\n                    token.isGroup = false;\r\n                    if (!regexMask) {\r\n                        insertTestDefinition(token, opts.groupmarker[0], 0);\r\n                        if (token.openGroup !== true) {\r\n                            insertTestDefinition(token, opts.groupmarker[1]);\r\n                        }\r\n                    }\r\n                }\r\n                verifyGroupMarker(token);\r\n            });\r\n        }\r\n    }\r\n\r\n    function defaultCase() {\r\n        if (openenings.length > 0) {\r\n            currentOpeningToken = openenings[openenings.length - 1];\r\n            insertTestDefinition(currentOpeningToken, m);\r\n            if (currentOpeningToken.isAlternator) { //handle alternator a | b case\r\n                alternator = openenings.pop();\r\n                for (var mndx = 0; mndx < alternator.matches.length; mndx++) {\r\n                    if (alternator.matches[mndx].isGroup) alternator.matches[mndx].isGroup = false; //don't mark alternate groups as group\r\n                }\r\n                if (openenings.length > 0) {\r\n                    currentOpeningToken = openenings[openenings.length - 1];\r\n                    currentOpeningToken.matches.push(alternator);\r\n                } else {\r\n                    currentToken.matches.push(alternator);\r\n                }\r\n            }\r\n        } else {\r\n            insertTestDefinition(currentToken, m);\r\n        }\r\n    }\r\n\r\n    function reverseTokens(maskToken) {\r\n        function reverseStatic(st) {\r\n            if (st === opts.optionalmarker[0]) {\r\n                st = opts.optionalmarker[1];\r\n            } else if (st === opts.optionalmarker[1]) {\r\n                st = opts.optionalmarker[0];\r\n            } else if (st === opts.groupmarker[0]) {\r\n                st = opts.groupmarker[1];\r\n            } else if (st === opts.groupmarker[1]) st = opts.groupmarker[0];\r\n\r\n            return st;\r\n        }\r\n\r\n        maskToken.matches = maskToken.matches.reverse();\r\n        for (var match in maskToken.matches) {\r\n            if (Object.prototype.hasOwnProperty.call(maskToken.matches, match)) {\r\n                var intMatch = parseInt(match);\r\n                if (maskToken.matches[match].isQuantifier && maskToken.matches[intMatch + 1] && maskToken.matches[intMatch + 1].isGroup) { //reposition quantifier\r\n                    var qt = maskToken.matches[match];\r\n                    maskToken.matches.splice(match, 1);\r\n                    maskToken.matches.splice(intMatch + 1, 0, qt);\r\n                }\r\n                if (maskToken.matches[match].matches !== undefined) {\r\n                    maskToken.matches[match] = reverseTokens(maskToken.matches[match]);\r\n                } else {\r\n                    maskToken.matches[match] = reverseStatic(maskToken.matches[match]);\r\n                }\r\n            }\r\n        }\r\n\r\n        return maskToken;\r\n    }\r\n\r\n    function groupify(matches) {\r\n        var groupToken = new MaskToken(true);\r\n        groupToken.openGroup = false;\r\n        groupToken.matches = matches;\r\n        return groupToken;\r\n    }\r\n\r\n    function closeGroup() {\r\n        // Group closing\r\n        openingToken = openenings.pop();\r\n        openingToken.openGroup = false; //mark group as complete\r\n        if (openingToken !== undefined) {\r\n            if (openenings.length > 0) {\r\n                currentOpeningToken = openenings[openenings.length - 1];\r\n                currentOpeningToken.matches.push(openingToken);\r\n                if (currentOpeningToken.isAlternator) { //handle alternator (a) | (b) case\r\n                    alternator = openenings.pop();\r\n                    let altMatchesLength = alternator.matches[0].matches ? alternator.matches[0].matches.length : 1;\r\n                    for (var mndx = 0; mndx < alternator.matches.length; mndx++) {\r\n                        alternator.matches[mndx].isGroup = false; //don't mark alternate groups as group\r\n                        alternator.matches[mndx].alternatorGroup = false;\r\n                        if (opts.keepStatic === null && altMatchesLength < (alternator.matches[mndx].matches ? alternator.matches[mndx].matches.length : 1)) { //enable by default when passing multiple masks when the option is not explicitly specified\r\n                            opts.keepStatic = true;\r\n                        }\r\n                        altMatchesLength = alternator.matches[mndx].matches ? alternator.matches[mndx].matches.length : 1;\r\n                    }\r\n                    if (openenings.length > 0) {\r\n                        currentOpeningToken = openenings[openenings.length - 1];\r\n                        currentOpeningToken.matches.push(alternator);\r\n                    } else {\r\n                        currentToken.matches.push(alternator);\r\n                    }\r\n                }\r\n            } else {\r\n                currentToken.matches.push(openingToken);\r\n            }\r\n        } else {\r\n            defaultCase();\r\n        }\r\n    }\r\n\r\n    function groupQuantifier(matches) {\r\n        var lastMatch = matches.pop();\r\n        if (lastMatch.isQuantifier) {\r\n            lastMatch = groupify([matches.pop(), lastMatch]);\r\n        }\r\n        return lastMatch;\r\n    }\r\n\r\n    if (regexMask) {\r\n        opts.optionalmarker[0] = undefined;\r\n        opts.optionalmarker[1] = undefined;\r\n    }\r\n    while ((match = regexMask ? regexTokenizer.exec(mask) : tokenizer.exec(mask))) {\r\n        m = match[0];\r\n\r\n        if (regexMask) {\r\n            switch (m.charAt(0)) {\r\n                //Quantifier\r\n                case \"?\":\r\n                    m = \"{0,1}\";\r\n                    break;\r\n                case \"+\":\r\n                case \"*\":\r\n                    m = \"{\" + m + \"}\";\r\n                    break;\r\n                case \"|\":\r\n                    //regex mask alternator  ex: [01][0-9]|2[0-3] => ([01][0-9]|2[0-3])\r\n                    if (openenings.length === 0) { //wrap the mask in a group to form a regex alternator  ([01][0-9]|2[0-3])\r\n                        var altRegexGroup = groupify(currentToken.matches);\r\n                        altRegexGroup.openGroup = true;\r\n                        openenings.push(altRegexGroup);\r\n                        currentToken.matches = [];\r\n                        closeRegexGroup = true;\r\n                    }\r\n                    break;\r\n            }\r\n            switch (m) {\r\n                case \"\\\\d\":\r\n                    m = \"[0-9]\";\r\n                    break;\r\n                case \"\\\\p\": //Unicode Categories\r\n                    m += regexTokenizer.exec(mask)[0]; // {\r\n                    m += regexTokenizer.exec(mask)[0]; // ?}\r\n                    break;\r\n                case \"(?:\": //non capturing group\r\n                case \"(?=\": //lookahead\r\n                case \"(?!\": //negative lookahead\r\n                case \"(?<=\": //lookbehind\r\n                case \"(?<!\": //negative lookbehind\r\n                    // treat as group\r\n                    break;\r\n            }\r\n        }\r\n\r\n        if (escaped) {\r\n            defaultCase();\r\n            continue;\r\n        }\r\n        switch (m.charAt(0)) {\r\n            case \"$\":\r\n            case \"^\":\r\n                //ignore beginswith and endswith as in masking this makes no point\r\n                if (!regexMask) {\r\n                    defaultCase();\r\n                }\r\n                break;\r\n            case opts.escapeChar:\r\n                escaped = true;\r\n                if (regexMask) defaultCase();\r\n                break;\r\n            // optional closing\r\n            case opts.optionalmarker[1]:\r\n            case opts.groupmarker[1]:\r\n                closeGroup();\r\n                break;\r\n            case opts.optionalmarker[0]:\r\n                // optional opening\r\n                openenings.push(new MaskToken(false, true));\r\n                break;\r\n            case opts.groupmarker[0]:\r\n                // Group opening\r\n                openenings.push(new MaskToken(true));\r\n                break;\r\n            case opts.quantifiermarker[0]:\r\n                //Quantifier\r\n                var quantifier = new MaskToken(false, false, true);\r\n\r\n                m = m.replace(/[{}?]/g, \"\"); //? matches lazy quantifiers\r\n                var mqj = m.split(\"|\"),\r\n                    mq = mqj[0].split(\",\"),\r\n                    mq0 = isNaN(mq[0]) ? mq[0] : parseInt(mq[0]),\r\n                    mq1 = mq.length === 1 ? mq0 : (isNaN(mq[1]) ? mq[1] : parseInt(mq[1])),\r\n                    mqJit = isNaN(mqj[1]) ? mqj[1] : parseInt(mqj[1]);\r\n                if (mq0 === \"*\" || mq0 === \"+\") {\r\n                    mq0 = mq1 === \"*\" ? 0 : 1;\r\n                }\r\n                quantifier.quantifier = {\r\n                    min: mq0,\r\n                    max: mq1,\r\n                    jit: mqJit\r\n                };\r\n                var matches = openenings.length > 0 ? openenings[openenings.length - 1].matches : currentToken.matches;\r\n                match = matches.pop();\r\n                // if (match.isAlternator) { //handle quantifier in an alternation [0-9]{2}|[0-9]{3}\r\n                //     matches.push(match); //push back alternator\r\n                //     matches = match.matches; //remap target matches\r\n                //     var groupToken = new MaskToken(true);\r\n                //     var tmpMatch = matches.pop();\r\n                //     matches.push(groupToken); //push the group\r\n                //     matches = groupToken.matches;\r\n                //     match = tmpMatch;\r\n                // }\r\n                if (!match.isGroup) {\r\n                    match = groupify([match]);\r\n                }\r\n                matches.push(match);\r\n                matches.push(quantifier);\r\n\r\n                break;\r\n            case opts.alternatormarker:\r\n                if (openenings.length > 0) {\r\n                    currentOpeningToken = openenings[openenings.length - 1];\r\n                    var subToken = currentOpeningToken.matches[currentOpeningToken.matches.length - 1];\r\n                    if (currentOpeningToken.openGroup && //regexp alt syntax\r\n                        (subToken.matches === undefined || (subToken.isGroup === false && subToken.isAlternator === false))) { //alternations within group\r\n                        lastMatch = openenings.pop();\r\n                    } else {\r\n                        lastMatch = groupQuantifier(currentOpeningToken.matches);\r\n                    }\r\n                } else {\r\n                    lastMatch = groupQuantifier(currentToken.matches);\r\n                }\r\n                if (lastMatch.isAlternator) {\r\n                    openenings.push(lastMatch);\r\n                } else {\r\n                    if (lastMatch.alternatorGroup) {\r\n                        alternator = openenings.pop();\r\n                        lastMatch.alternatorGroup = false;\r\n                    } else {\r\n                        alternator = new MaskToken(false, false, false, true);\r\n                    }\r\n                    alternator.matches.push(lastMatch);\r\n                    openenings.push(alternator);\r\n                    if (lastMatch.openGroup) { //regexp alt syntax\r\n                        lastMatch.openGroup = false;\r\n                        var alternatorGroup = new MaskToken(true);\r\n                        alternatorGroup.alternatorGroup = true;\r\n                        openenings.push(alternatorGroup);\r\n                    }\r\n                }\r\n                break;\r\n            default:\r\n                defaultCase();\r\n        }\r\n    }\r\n\r\n    if (closeRegexGroup) closeGroup();\r\n\r\n    while (openenings.length > 0) {\r\n        openingToken = openenings.pop();\r\n        currentToken.matches.push(openingToken);\r\n    }\r\n    if (currentToken.matches.length > 0) {\r\n        verifyGroupMarker(currentToken);\r\n        maskTokens.push(currentToken);\r\n    }\r\n\r\n    if (opts.numericInput || opts.isRTL) {\r\n        reverseTokens(maskTokens[0]);\r\n    }\r\n    // console.log(JSON.stringify(maskTokens));\r\n    return maskTokens;\r\n}\r\n","export default function (isGroup, isOptional, isQuantifier, isAlternator) {\r\n\tthis.matches = [];\r\n\tthis.openGroup = isGroup || false;\r\n\tthis.alternatorGroup = false;\r\n\tthis.isGroup = isGroup || false;\r\n\tthis.isOptional = isOptional || false;\r\n\tthis.isQuantifier = isQuantifier || false;\r\n\tthis.isAlternator = isAlternator || false;\r\n\tthis.quantifier = {\r\n\t\tmin: 1,\r\n\t\tmax: 1\r\n\t};\r\n}","const  escapeRegexRegex = new RegExp(\"(\\\\\" + [\"/\", \".\", \"*\", \"+\", \"?\", \"|\", \"(\", \")\", \"[\", \"]\", \"{\", \"}\", \"\\\\\", \"$\", \"^\"].join(\"|\\\\\") + \")\", \"gim\");\r\nexport default function (str) {\r\n\treturn str.replace(escapeRegexRegex, \"\\\\$1\");\r\n}","export default {\r\n\t\"9\": { //\\uFF11-\\uFF19 #1606\r\n\t\tvalidator: \"[0-9\\uFF10-\\uFF19]\",\r\n\t\tdefinitionSymbol: \"*\"\r\n\t},\r\n\t\"a\": { //\\u0410-\\u044F\\u0401\\u0451\\u00C0-\\u00FF\\u00B5 #76\r\n\t\tvalidator: \"[A-Za-z\\u0410-\\u044F\\u0401\\u0451\\u00C0-\\u00FF\\u00B5]\",\r\n\t\tdefinitionSymbol: \"*\"\r\n\t},\r\n\t\"*\": {\r\n\t\tvalidator: \"[0-9\\uFF10-\\uFF19A-Za-z\\u0410-\\u044F\\u0401\\u0451\\u00C0-\\u00FF\\u00B5]\"\r\n\t}\r\n};","import {keys} from \"./keycode.js\";\r\n\r\nexport default {\r\n\t_maxTestPos: 500,\r\n\tplaceholder: \"_\",\r\n\toptionalmarker: [\"[\", \"]\"],\r\n\tquantifiermarker: [\"{\", \"}\"],\r\n\tgroupmarker: [\"(\", \")\"],\r\n\talternatormarker: \"|\",\r\n\tescapeChar: \"\\\\\",\r\n\tmask: null, //needs tobe null instead of undefined as the extend method does not consider props with the undefined value\r\n\tregex: null, //regular expression as a mask\r\n\toncomplete: () => {\r\n\t}, //executes when the mask is complete\r\n\tonincomplete: () => {\r\n\t}, //executes when the mask is incomplete and focus is lost\r\n\toncleared: () => {\r\n\t}, //executes when the mask is cleared\r\n\trepeat: 0, //repetitions of the mask: * ~ forever, otherwise specify an integer\r\n\tgreedy: false, //true: allocated buffer for the mask and repetitions - false: allocate only if needed\r\n\tautoUnmask: false, //automatically unmask when retrieving the value with $.fn.val or value if the browser supports __lookupGetter__ or getOwnPropertyDescriptor\r\n\tremoveMaskOnSubmit: false, //remove the mask before submitting the form.\r\n\tclearMaskOnLostFocus: true,\r\n\tinsertMode: true, //insert the input or overwrite the input\r\n\tinsertModeVisual: true, //show selected caret when insertmode = false\r\n\tclearIncomplete: false, //clear the incomplete input on blur\r\n\talias: null,\r\n\tonKeyDown: () => {\r\n\t}, //callback to implement autocomplete on certain keys for example. args => event, buffer, caretPos, opts\r\n\tonBeforeMask: null, //executes before masking the initial value to allow preprocessing of the initial value.\targs => initialValue, opts => return processedValue\r\n\tonBeforePaste: function (pastedValue, opts) {\r\n\t\treturn typeof opts.onBeforeMask === \"function\" ? opts.onBeforeMask.call(this, pastedValue, opts) : pastedValue;\r\n\t}, //executes before masking the pasted value to allow preprocessing of the pasted value.\targs => pastedValue, opts => return processedValue\r\n\tonBeforeWrite: null, //executes before writing to the masked element. args => event, opts\r\n\tonUnMask: null, //executes after unmasking to allow postprocessing of the unmaskedvalue.\targs => maskedValue, unmaskedValue, opts\r\n\tshowMaskOnFocus: true, //show the mask-placeholder when the input has focus\r\n\tshowMaskOnHover: true, //show the mask-placeholder when hovering the empty input\r\n\tonKeyValidation: () => {\r\n\t}, //executes on every key-press with the result of isValid. Params: key, result, opts\r\n\tskipOptionalPartCharacter: \" \", //a character which can be used to skip an optional part of a mask\r\n\tnumericInput: false, //numericInput input direction style (input shifts to the left while holding the caret position)\r\n\trightAlign: false, //align to the right\r\n\tundoOnEscape: true, //pressing escape reverts the value to the value before focus\r\n\t//numeric basic properties\r\n\tradixPoint: \"\", //\".\", // | \",\"\r\n\t_radixDance: false, //dance around the radixPoint\r\n\tgroupSeparator: \"\", //\",\", // | \".\"\r\n\t//numeric basic properties\r\n\tkeepStatic: null, //try to keep the mask static while typing. Decisions to alter the mask will be posponed if possible\r\n\tpositionCaretOnTab: true, //when enabled the caret position is set after the latest valid position on TAB\r\n\ttabThrough: false, //allows for tabbing through the different parts of the masked field\r\n\tsupportsInputType: [\"text\", \"tel\", \"url\", \"password\", \"search\"], //list with the supported input types\r\n\t//specify keyCodes which should not be considered in the keypress event, otherwise the preventDefault will stop their default behavior especially in FF\r\n\tignorables: [\r\n\t\tkeys.Backspace,\r\n\t\tkeys.Tab,\r\n\t\tkeys.Pause,\r\n\t\tkeys.Escape,\r\n\t\tkeys.PageUp,\r\n\t\tkeys.PageDown,\r\n\t\tkeys.End,\r\n\t\tkeys.Home,\r\n\t\tkeys.ArrowLeft,\r\n\t\tkeys.ArrowUp,\r\n\t\tkeys.ArrowRight,\r\n\t\tkeys.ArrowDown,\r\n\t\tkeys.Insert,\r\n\t\tkeys.Delete,\r\n\t\tkeys.ContextMenu,\r\n\t\tkeys.F1,\r\n\t\tkeys.F2,\r\n\t\tkeys.F3,\r\n\t\tkeys.F4,\r\n\t\tkeys.F5,\r\n\t\tkeys.F6,\r\n\t\tkeys.F7,\r\n\t\tkeys.F8,\r\n\t\tkeys.F9,\r\n\t\tkeys.F10,\r\n\t\tkeys.F11,\r\n\t\tkeys.F12,\r\n\t\tkeys.Process,\r\n\t\tkeys.Unidentified,\r\n\t\tkeys.Shift,\r\n\t\tkeys.Control,\r\n\t\tkeys.Alt,\r\n\t\tkeys.Tab,\r\n\t\tkeys.AltGraph,\r\n\t\tkeys.CapsLock\r\n\t],\r\n\tisComplete: null, //override for isComplete - args => buffer, opts - return true || false\r\n\tpreValidation: null, //hook to preValidate the input.  Usefull for validating regardless the definition.\targs => buffer, pos, char, isSelection, opts, maskset, caretPos, strict => return true/false/command object\r\n\tpostValidation: null, //hook to postValidate the result from isValid.\tUsefull for validating the entry as a whole.\targs => buffer, pos, c, currentResult, opts, maskset, strict, fromCheckval => return true/false/json\r\n\tstaticDefinitionSymbol: undefined, //specify a definitionSymbol for static content, used to make matches for alternators\r\n\tjitMasking: false, //just in time masking ~ only mask while typing, can n (number), true or false\r\n\tnullable: true, //return nothing instead of the buffertemplate when the user hasn't entered anything.\r\n\tinputEventOnly: false, //dev option - testing inputfallback behavior\r\n\tnoValuePatching: false, //disable value property patching\r\n\tpositionCaretOnClick: \"lvp\", //none, lvp (based on the last valid position (default), radixFocus (position caret to radixpoint on initial click), select (select the whole input), ignore (ignore the click and continue the mask)\r\n\tcasing: null, //mask-level casing. Options: null, \"upper\", \"lower\" or \"title\" or callback args => elem, test, pos, validPositions return charValue\r\n\tinputmode: \"text\", //specify the inputmode\r\n\timportDataAttributes: true, //import data-inputmask attributes\r\n\tshiftPositions: true, //shift position of the mask entries on entry and deletion.\r\n\tusePrototypeDefinitions: true, //use the default defined definitions from the prototype\r\n\tvalidationEventTimeOut: 3000, //Time to show validation error on form submit\r\n\tsubstitutes: {} //define character substitutes\r\n};\r\n","/*\r\n Input Mask plugin extensions\r\n http://github.com/RobinHerbots/jquery.inputmask\r\n Copyright (c) Robin Herbots\r\n Licensed under the MIT license\r\n */\r\nimport Inputmask from \"../inputmask\";\r\nimport {keys} from \"../keycode.js\";\r\nimport escapeRegex from \"../escapeRegex\";\r\nimport {seekNext} from \"../positioning\";\r\nimport {getMaskTemplate} from \"../validation-tests\";\r\n\r\nconst $ = Inputmask.dependencyLib;\r\n\r\nclass DateObject {\r\n    constructor(mask, format, opts) {\r\n        this.mask = mask;\r\n        this.format = format;\r\n        this.opts = opts;\r\n        this._date = new Date(1, 0, 1);\r\n        this.initDateObject(mask, this.opts);\r\n    }\r\n\r\n    get date() {\r\n        if (this._date === undefined) {\r\n            this._date = new Date(1, 0, 1);\r\n            this.initDateObject(undefined, this.opts);\r\n        }\r\n        return this._date;\r\n    }\r\n\r\n    initDateObject(mask, opts) {\r\n        let match;\r\n        getTokenizer(opts).lastIndex = 0;\r\n        while ((match = getTokenizer(opts).exec(this.format))) {\r\n            let dynMatches = new RegExp(\"\\\\d+$\").exec(match[0]),\r\n                fcode = dynMatches ? (match[0][0] + \"x\") : match[0],\r\n                value;\r\n            if (mask !== undefined) {\r\n                if (dynMatches) {\r\n                    let lastIndex = getTokenizer(opts).lastIndex,\r\n                        tokenMatch = getTokenMatch(match.index, opts);\r\n                    getTokenizer(opts).lastIndex = lastIndex;\r\n                    value = mask.slice(0, mask.indexOf(tokenMatch.nextMatch[0]));\r\n                } else {\r\n                    value = mask.slice(0, (formatCode[fcode] && formatCode[fcode][4]) || fcode.length);\r\n                }\r\n                mask = mask.slice(value.length);\r\n            }\r\n\r\n            if (Object.prototype.hasOwnProperty.call(formatCode, fcode)) {\r\n                this.setValue(this, value, fcode, formatCode[fcode][2], formatCode[fcode][1]);\r\n            }\r\n        }\r\n    }\r\n\r\n    setValue(dateObj, value, fcode, targetProp, dateOperation) {\r\n        if (value !== undefined) {\r\n            dateObj[targetProp] = targetProp === \"ampm\" ? value : value.replace(/[^0-9]/g, \"0\");\r\n            dateObj[\"raw\" + targetProp] = value.replace(/\\s/g, \"_\");\r\n        }\r\n        if (dateOperation !== undefined) {\r\n            let datavalue = dateObj[targetProp];\r\n            if ((targetProp === \"day\" && parseInt(datavalue) === 29) || (targetProp === \"month\" && parseInt(datavalue) === 2)) {\r\n                if (parseInt(dateObj.day) === 29 && parseInt(dateObj.month) === 2 && (dateObj.year === \"\" || dateObj.year === undefined)) {\r\n                    //set temporary leap year in dateObj\r\n                    dateObj._date.setFullYear(2012, 1, 29);\r\n                }\r\n            }\r\n            if (targetProp === \"day\") {\r\n                useDateObject = true;\r\n                if (parseInt(datavalue) === 0)\r\n                    datavalue = 1;\r\n            }\r\n            if (targetProp === \"month\")\r\n                useDateObject = true;\r\n            if (targetProp === \"year\") {\r\n                useDateObject = true;\r\n                if (datavalue.length < 4)\r\n                    datavalue = pad(datavalue, 4, true);\r\n            }\r\n            if (datavalue !== \"\" && !isNaN(datavalue)) dateOperation.call(dateObj._date, datavalue);\r\n            if (targetProp === \"ampm\")\r\n                dateOperation.call(dateObj._date, datavalue);\r\n        }\r\n    }\r\n\r\n    reset() {\r\n        this._date = new Date(1, 0, 1);\r\n    }\r\n\r\n    reInit() {\r\n        this._date = undefined;\r\n        this.date;\r\n    }\r\n}\r\n\r\nlet currentYear = new Date().getFullYear(),\r\n    useDateObject = false,\r\n    //supported codes for formatting\r\n    //http://blog.stevenlevithan.com/archives/date-time-format\r\n    //https://docs.microsoft.com/en-us/dotnet/standard/base-types/custom-date-and-time-format-strings?view=netframework-4.7\r\n    formatCode = { //regex, valueSetter, type, displayformatter, #entries (optional)\r\n        d: [\"[1-9]|[12][0-9]|3[01]\", Date.prototype.setDate, \"day\", Date.prototype.getDate], //Day of the month as digits; no leading zero for single-digit days.\r\n        dd: [\"0[1-9]|[12][0-9]|3[01]\", Date.prototype.setDate, \"day\", function () {\r\n            return pad(Date.prototype.getDate.call(this), 2);\r\n        }], //Day of the month as digits; leading zero for single-digit days.\r\n        ddd: [\"\"], //Day of the week as a three-letter abbreviation.\r\n        dddd: [\"\"], //Day of the week as its full name.\r\n        m: [\"[1-9]|1[012]\", function (val) {\r\n            let mval = val ? parseInt(val) : 0;\r\n            if (mval > 0) mval--;\r\n            return Date.prototype.setMonth.call(this, mval);\r\n        }, \"month\", function () {\r\n            return Date.prototype.getMonth.call(this) + 1;\r\n        }], //Month as digits; no leading zero for single-digit months.\r\n        mm: [\"0[1-9]|1[012]\", function (val) {\r\n            let mval = val ? parseInt(val) : 0;\r\n            if (mval > 0) mval--;\r\n            return Date.prototype.setMonth.call(this, mval);\r\n        }, \"month\", function () {\r\n            return pad(Date.prototype.getMonth.call(this) + 1, 2);\r\n        }], //Month as digits; leading zero for single-digit months.\r\n        mmm: [\"\"], //Month as a three-letter abbreviation.\r\n        mmmm: [\"\"], //Month as its full name.\r\n        yy: [\"[0-9]{2}\", Date.prototype.setFullYear, \"year\", function () {\r\n            return pad(Date.prototype.getFullYear.call(this), 2);\r\n        }], //Year as last two digits; leading zero for years less than 10.\r\n        yyyy: [\"[0-9]{4}\", Date.prototype.setFullYear, \"year\", function () {\r\n            return pad(Date.prototype.getFullYear.call(this), 4);\r\n        }],\r\n        h: [\"[1-9]|1[0-2]\", Date.prototype.setHours, \"hours\", Date.prototype.getHours], //Hours; no leading zero for single-digit hours (12-hour clock).\r\n        hh: [\"0[1-9]|1[0-2]\", Date.prototype.setHours, \"hours\", function () {\r\n            return pad(Date.prototype.getHours.call(this), 2);\r\n        }], //Hours; leading zero for single-digit hours (12-hour clock).\r\n        hx: [function (x) {\r\n            return `[0-9]{${x}}`;\r\n        }, Date.prototype.setHours, \"hours\", function (x) {\r\n            return Date.prototype.getHours;\r\n        }], //Hours; no limit; set maximum digits\r\n        H: [\"1?[0-9]|2[0-3]\", Date.prototype.setHours, \"hours\", Date.prototype.getHours], //Hours; no leading zero for single-digit hours (24-hour clock).\r\n        HH: [\"0[0-9]|1[0-9]|2[0-3]\", Date.prototype.setHours, \"hours\", function () {\r\n            return pad(Date.prototype.getHours.call(this), 2);\r\n        }], //Hours; leading zero for single-digit hours (24-hour clock).\r\n        Hx: [function (x) {\r\n            return `[0-9]{${x}}`;\r\n        }, Date.prototype.setHours, \"hours\", function (x) {\r\n            return function () {\r\n                return pad(Date.prototype.getHours.call(this), x);\r\n            };\r\n        }], //Hours; no limit; set maximum digits\r\n        M: [\"[1-5]?[0-9]\", Date.prototype.setMinutes, \"minutes\", Date.prototype.getMinutes], //Minutes; no leading zero for single-digit minutes. Uppercase M unlike CF timeFormat's m to avoid conflict with months.\r\n        MM: [\"0[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9]\", Date.prototype.setMinutes, \"minutes\", function () {\r\n            return pad(Date.prototype.getMinutes.call(this), 2);\r\n        }], //Minutes; leading zero for single-digit minutes. Uppercase MM unlike CF timeFormat's mm to avoid conflict with months.\r\n        s: [\"[1-5]?[0-9]\", Date.prototype.setSeconds, \"seconds\", Date.prototype.getSeconds], //Seconds; no leading zero for single-digit seconds.\r\n        ss: [\"0[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9]\", Date.prototype.setSeconds, \"seconds\", function () {\r\n            return pad(Date.prototype.getSeconds.call(this), 2);\r\n        }], //Seconds; leading zero for single-digit seconds.\r\n        l: [\"[0-9]{3}\", Date.prototype.setMilliseconds, \"milliseconds\", function () {\r\n            return pad(Date.prototype.getMilliseconds.call(this), 3);\r\n        }, 3], //Milliseconds. 3 digits.\r\n        L: [\"[0-9]{2}\", Date.prototype.setMilliseconds, \"milliseconds\", function () {\r\n            return pad(Date.prototype.getMilliseconds.call(this), 2);\r\n        }, 2], //Milliseconds. 2 digits.\r\n        t: [\"[ap]\", setAMPM, \"ampm\", getAMPM, 1], //Lowercase, single-character time marker string: a or p.\r\n        tt: [\"[ap]m\", setAMPM, \"ampm\", getAMPM, 2], //two-character time marker string: am or pm.\r\n        T: [\"[AP]\", setAMPM, \"ampm\", getAMPM, 1], //single-character time marker string: A or P.\r\n        TT: [\"[AP]M\", setAMPM, \"ampm\", getAMPM, 2], //two-character time marker string: AM or PM.\r\n        Z: [\".*\", undefined, \"Z\", getTimeZoneAbbreviated], //US timezone abbreviation, e.g. EST or MDT. With non-US timezones or in the Opera browser, the GMT/UTC offset is returned, e.g. GMT-0500\r\n        o: [\"\"], //GMT/UTC timezone offset, e.g. -0500 or +0230.\r\n        S: [\"\"] //The date's ordinal suffix (st, nd, rd, or th).\r\n    },\r\n    formatAlias = {\r\n        isoDate: \"yyyy-mm-dd\", //2007-06-09\r\n        isoTime: \"HH:MM:ss\", //17:46:21\r\n        isoDateTime: \"yyyy-mm-dd'T'HH:MM:ss\", //2007-06-09T17:46:21\r\n        isoUtcDateTime: \"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'\" //2007-06-09T22:46:21Z\r\n    };\r\n\r\nfunction setAMPM(value) {\r\n    const hours = this.getHours();\r\n    if (value.toLowerCase().includes(\"p\")) {\r\n        this.setHours(hours + 12);\r\n        // console.log(\"setAMPM + 12\");\r\n    } else if (value.toLowerCase().includes(\"a\") && hours >= 12) {\r\n        this.setHours(hours - 12);\r\n    }\r\n}\r\n\r\nfunction getAMPM() {\r\n    let date = this,\r\n        hours = date.getHours();\r\n    hours = hours || 12;\r\n    return hours >= 12 ? \"PM\" : \"AM\";\r\n}\r\n\r\nfunction getTimeZoneAbbreviated() {\r\n    //not perfect, but ok for now\r\n    let date = this, {1: tz} = date.toString().match(/\\((.+)\\)/);\r\n    if (tz.includes(\" \")) {\r\n        tz = tz.replace(\"-\", \" \").toUpperCase();\r\n        tz = tz.split(\" \").map(([first]) => first).join(\"\");\r\n    }\r\n    return tz;\r\n}\r\n\r\nfunction formatcode(match) {\r\n    var dynMatches = new RegExp(\"\\\\d+$\").exec(match[0]);\r\n    if (dynMatches && dynMatches[0] !== undefined) {\r\n        var fcode = formatCode[match[0][0] + \"x\"].slice(\"\");\r\n        fcode[0] = fcode[0](dynMatches[0]);\r\n        fcode[3] = fcode[3](dynMatches[0]);\r\n\r\n        return fcode;\r\n    } else if (formatCode[match[0]]) {\r\n        return formatCode[match[0]];\r\n    }\r\n}\r\n\r\nfunction getTokenizer(opts) {\r\n    if (!opts.tokenizer) {\r\n        var tokens = [], dyntokens = [];\r\n        for (var ndx in formatCode) {\r\n            if (/\\.*x$/.test(ndx)) {\r\n                var dynToken = ndx[0] + \"\\\\d+\";\r\n                if (dyntokens.indexOf(dynToken) === -1) {\r\n                    dyntokens.push(dynToken);\r\n                }\r\n            } else if (tokens.indexOf(ndx[0]) === -1) {\r\n                tokens.push(ndx[0]);\r\n            }\r\n        }\r\n        opts.tokenizer = \"(\" + (dyntokens.length > 0 ? dyntokens.join(\"|\") + \"|\" : \"\") + tokens.join(\"+|\") + \")+?|.\";\r\n        opts.tokenizer = new RegExp(opts.tokenizer, \"g\");\r\n    }\r\n\r\n    return opts.tokenizer;\r\n}\r\n\r\nfunction prefillYear(dateParts, currentResult, opts) {\r\n    if (dateParts.year !== dateParts.rawyear) {\r\n        var crrntyear = currentYear.toString(),\r\n            enteredPart = dateParts.rawyear.replace(/[^0-9]/g, \"\"),\r\n            currentYearPart = crrntyear.slice(0, enteredPart.length),\r\n            currentYearNextPart = crrntyear.slice(enteredPart.length);\r\n        if (enteredPart.length === 2 && enteredPart === currentYearPart) {\r\n            const entryCurrentYear = new Date(currentYear, dateParts.month - 1, dateParts.day);\r\n            if (dateParts.day == entryCurrentYear.getDate() && (!opts.max || opts.max.date.getTime() >= entryCurrentYear.getTime())) {\r\n                //update dateParts\r\n                dateParts.date.setFullYear(currentYear);\r\n                dateParts.year = crrntyear;\r\n                //update result\r\n                currentResult.insert = [{\r\n                    pos: currentResult.pos + 1,\r\n                    c: currentYearNextPart[0]\r\n                }, {\r\n                    pos: currentResult.pos + 2,\r\n                    c: currentYearNextPart[1]\r\n                }];\r\n            }\r\n        }\r\n    }\r\n\r\n    return currentResult;\r\n}\r\n\r\nfunction isValidDate(dateParts, currentResult, opts) {\r\n    if (!useDateObject) return true;\r\n    if (dateParts.rawday === undefined\r\n        || (!isFinite(dateParts.rawday) && new Date(dateParts.date.getFullYear(), isFinite(dateParts.rawmonth) ? dateParts.month : dateParts.date.getMonth() + 1, 0).getDate() >= dateParts.day)\r\n        || (dateParts.day == \"29\" && (!isFinite(dateParts.rawyear) || dateParts.rawyear === undefined || dateParts.rawyear === \"\"))\r\n        || new Date(dateParts.date.getFullYear(), isFinite(dateParts.rawmonth) ? dateParts.month : dateParts.date.getMonth() + 1, 0).getDate() >= dateParts.day) {\r\n        return currentResult;\r\n    } else { //take corrective action if possible\r\n        if (dateParts.day == \"29\") {\r\n            var tokenMatch = getTokenMatch(currentResult.pos, opts);\r\n            if (tokenMatch.targetMatch[0] === \"yyyy\" && currentResult.pos - tokenMatch.targetMatchIndex === 2) {\r\n                currentResult.remove = currentResult.pos + 1;\r\n                return currentResult;\r\n            }\r\n        } else if (dateParts.month == \"02\" && dateParts.day == \"30\" && currentResult.c !== undefined) {\r\n            dateParts.day = \"03\";\r\n            dateParts.date.setDate(3);\r\n            dateParts.date.setMonth(1);\r\n            currentResult.insert = [{pos: currentResult.pos, c: \"0\"}, {pos: currentResult.pos + 1, c: currentResult.c}];\r\n            currentResult.caret = seekNext.call(this, currentResult.pos + 1);\r\n            return currentResult;\r\n        }\r\n        return false;\r\n    }\r\n}\r\n\r\nfunction isDateInRange(dateParts, result, opts, maskset, fromCheckval) {\r\n    if (!result) return result;\r\n    if (result && opts.min) {\r\n        if (/*useDateObject && (dateParts[\"year\"] === undefined || dateParts[\"yearSet\"]) && */!isNaN(opts.min.date.getTime())) {\r\n            let match;\r\n            dateParts.reset();\r\n            getTokenizer(opts).lastIndex = 0;\r\n            while ((match = getTokenizer(opts).exec(opts.inputFormat))) {\r\n                var fcode;\r\n                if ((fcode = formatcode(match))) {\r\n                    if (fcode[3]) {\r\n                        var setFn = fcode[1];\r\n                        var current = dateParts[fcode[2]],\r\n                            minVal = opts.min[fcode[2]],\r\n                            maxVal = opts.max ? opts.max[fcode[2]] : minVal,\r\n                            curVal = [];\r\n\r\n                        let forceCurrentValue = false;\r\n                        for (let i = 0; i < minVal.length; i++) {\r\n                            if (maskset.validPositions[i + match.index] === undefined && !forceCurrentValue) {\r\n                                curVal[i] = minVal[i];\r\n                                // ADD +1 to whoile\r\n                                if (fcode[2] === \"year\" && current.length - 1 == i && minVal != maxVal)\r\n                                    curVal = (parseInt(curVal.join(\"\")) + 1).toString().split(\"\");\r\n                                if (fcode[2] === \"ampm\" && minVal != maxVal && opts.min.date.getTime() > dateParts.date.getTime())\r\n                                    curVal[i] = maxVal[i];\r\n                            } else {\r\n                                curVal[i] = current[i];\r\n                                forceCurrentValue = forceCurrentValue || current[i] > minVal[i];\r\n                            }\r\n                        }\r\n\r\n                        setFn.call(dateParts._date, curVal.join(\"\"));\r\n                    }\r\n                }\r\n            }\r\n\r\n            result = opts.min.date.getTime() <= dateParts.date.getTime();\r\n            dateParts.reInit();\r\n        }\r\n    }\r\n\r\n    if (result && opts.max) {\r\n        if (!isNaN(opts.max.date.getTime())) {\r\n            result = opts.max.date.getTime() >= dateParts.date.getTime();\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\n//parse the given format and return a mask pattern\r\n//when a dateObjValue is passed a datestring in the requested format is returned\r\nfunction parse(format, dateObjValue, opts, raw) {\r\n    //parse format to regex string\r\n    var mask = \"\", match, fcode;\r\n    getTokenizer(opts).lastIndex = 0;\r\n    while ((match = getTokenizer(opts).exec(format))) {\r\n        if (dateObjValue === undefined) {\r\n            if ((fcode = formatcode(match))) {\r\n                mask += \"(\" + fcode[0] + \")\";\r\n            } else {\r\n                switch (match[0]) {\r\n                    case \"[\":\r\n                        mask += \"(\";\r\n                        break;\r\n                    case \"]\":\r\n                        mask += \")?\";\r\n                        break;\r\n                    default:\r\n                        mask += escapeRegex(match[0]);\r\n                }\r\n            }\r\n        } else {\r\n            if ((fcode = formatcode(match))) {\r\n                if (raw !== true && fcode[3]) {\r\n                    var getFn = fcode[3];\r\n                    mask += getFn.call(dateObjValue.date);\r\n                } else if (fcode[2]) {\r\n                    mask += dateObjValue[\"raw\" + fcode[2]];\r\n                } else {\r\n                    mask += match[0];\r\n                }\r\n            } else {\r\n                mask += match[0];\r\n            }\r\n        }\r\n    }\r\n    return mask;\r\n}\r\n\r\n//padding function\r\nfunction pad(val, len, right) {\r\n    val = String(val);\r\n    len = len || 2;\r\n    while (val.length < len) val = right ? val + \"0\" : \"0\" + val;\r\n    return val;\r\n}\r\n\r\nfunction analyseMask(mask, format, opts) {\r\n    if (typeof mask === \"string\") {\r\n        return new DateObject(mask, format, opts);\r\n    } else if (mask && typeof mask === \"object\" && Object.prototype.hasOwnProperty.call(mask, \"date\")) {\r\n        return mask;\r\n    }\r\n    return undefined;\r\n}\r\n\r\nfunction importDate(dateObj, opts) {\r\n    return parse(opts.inputFormat, {date: dateObj}, opts);\r\n}\r\n\r\nfunction getTokenMatch(pos, opts) {\r\n    var calcPos = 0, targetMatch, match, matchLength = 0;\r\n    getTokenizer(opts).lastIndex = 0;\r\n    while ((match = getTokenizer(opts).exec(opts.inputFormat))) {\r\n        var dynMatches = new RegExp(\"\\\\d+$\").exec(match[0]);\r\n        matchLength = dynMatches ? parseInt(dynMatches[0]) : match[0].length;\r\n        calcPos += matchLength;\r\n        if (calcPos >= pos + 1) {\r\n            targetMatch = match;\r\n            match = getTokenizer(opts).exec(opts.inputFormat);\r\n            break;\r\n        }\r\n    }\r\n    return {\r\n        targetMatchIndex: calcPos - matchLength,\r\n        nextMatch: match,\r\n        targetMatch: targetMatch\r\n    };\r\n}\r\n\r\n\r\nInputmask.extendAliases({\r\n    \"datetime\": {\r\n        mask: function (opts) {\r\n            //do not allow numeric input in datetime alias\r\n            opts.numericInput = false;\r\n\r\n            //localize\r\n            formatCode.S = opts.i18n.ordinalSuffix.join(\"|\");\r\n\r\n            opts.inputFormat = formatAlias[opts.inputFormat] || opts.inputFormat; //resolve possible formatAlias\r\n            opts.displayFormat = formatAlias[opts.displayFormat] || opts.displayFormat || opts.inputFormat; //resolve possible formatAlias\r\n            opts.outputFormat = formatAlias[opts.outputFormat] || opts.outputFormat || opts.inputFormat; //resolve possible formatAlias\r\n            opts.placeholder = opts.placeholder !== \"\" ? opts.placeholder : opts.inputFormat.replace(/[[\\]]/, \"\");\r\n            opts.regex = parse(opts.inputFormat, undefined, opts);\r\n            opts.min = analyseMask(opts.min, opts.inputFormat, opts);\r\n            opts.max = analyseMask(opts.max, opts.inputFormat, opts);\r\n            return null; //migrate to regex mask\r\n        },\r\n        placeholder: \"\", //set default as none (~ auto); when a custom placeholder is passed it will be used\r\n        inputFormat: \"isoDateTime\", //format used to input the date\r\n        displayFormat: null, //visual format when the input looses focus\r\n        outputFormat: null, //unmasking format\r\n        min: null, //needs to be in the same format as the inputfornat\r\n        max: null, //needs to be in the same format as the inputfornat,\r\n        skipOptionalPartCharacter: \"\",\r\n        // Internationalization strings\r\n        i18n: {\r\n            dayNames: [\r\n                \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\",\r\n                \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"\r\n            ],\r\n            monthNames: [\r\n                \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\",\r\n                \"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\r\n            ],\r\n            ordinalSuffix: [\"st\", \"nd\", \"rd\", \"th\"]\r\n        },\r\n        preValidation: function (buffer, pos, c, isSelection, opts, maskset, caretPos, strict) {\r\n            if (strict) return true;\r\n            if (isNaN(c) && buffer[pos] !== c) {\r\n                var tokenMatch = getTokenMatch(pos, opts);\r\n                if (tokenMatch.nextMatch && tokenMatch.nextMatch[0] === c && tokenMatch.targetMatch[0].length > 1) {\r\n                    var validator = formatCode[tokenMatch.targetMatch[0]][0];\r\n                    if (new RegExp(validator).test(\"0\" + buffer[pos - 1])) {\r\n                        buffer[pos] = buffer[pos - 1];\r\n                        buffer[pos - 1] = \"0\";\r\n                        return {\r\n                            fuzzy: true,\r\n                            buffer: buffer,\r\n                            refreshFromBuffer: {start: pos - 1, end: pos + 1},\r\n                            pos: pos + 1\r\n                        };\r\n                    }\r\n                }\r\n            }\r\n            return true;\r\n        },\r\n        postValidation: function (buffer, pos, c, currentResult, opts, maskset, strict, fromCheckval) {\r\n            const inputmask = this;\r\n\r\n            if (strict) return true;\r\n            var tokenMatch, validator;\r\n            if (currentResult === false) { //try some shifting\r\n                tokenMatch = getTokenMatch(pos + 1, opts);\r\n                if (tokenMatch.targetMatch && tokenMatch.targetMatchIndex === pos && tokenMatch.targetMatch[0].length > 1 && formatCode[tokenMatch.targetMatch[0]] !== undefined) {\r\n                    validator = formatCode[tokenMatch.targetMatch[0]][0];\r\n                } else {\r\n                    tokenMatch = getTokenMatch(pos + 2, opts);\r\n                    if (tokenMatch.targetMatch && tokenMatch.targetMatchIndex === pos + 1 && tokenMatch.targetMatch[0].length > 1 && formatCode[tokenMatch.targetMatch[0]] !== undefined) {\r\n                        validator = formatCode[tokenMatch.targetMatch[0]][0];\r\n                    }\r\n                }\r\n                if (validator !== undefined) {\r\n                    if (maskset.validPositions[pos + 1] !== undefined && new RegExp(validator).test(c + \"0\")) {\r\n                        buffer[pos] = c;\r\n                        buffer[pos + 1] = \"0\";\r\n                        currentResult = {\r\n                            //insert: [{pos: pos, c: \"0\"}, {pos: pos + 1, c: c}],\r\n                            pos: pos + 2, //this will triggeer a refreshfrombuffer\r\n                            caret: pos\r\n                        };\r\n                    } else if (new RegExp(validator).test(\"0\" + c)) {\r\n                        buffer[pos] = \"0\";\r\n                        buffer[pos + 1] = c;\r\n                        currentResult = {\r\n                            //insert: [{pos: pos, c: \"0\"}, {pos: pos + 1, c: c}],\r\n                            pos: pos + 2 //this will triggeer a refreshfrombuffer\r\n                        };\r\n                    }\r\n                }\r\n\r\n                if (currentResult === false) return currentResult;\r\n            }\r\n\r\n            if (currentResult.fuzzy) {\r\n                buffer = currentResult.buffer;\r\n                pos = currentResult.pos;\r\n            }\r\n\r\n            //full validate target\r\n            tokenMatch = getTokenMatch(pos, opts);\r\n            if (tokenMatch.targetMatch && tokenMatch.targetMatch[0] && formatCode[tokenMatch.targetMatch[0]] !== undefined) {\r\n                let fcode = formatCode[tokenMatch.targetMatch[0]];\r\n                validator = fcode[0];\r\n                var part = buffer.slice(tokenMatch.targetMatchIndex, tokenMatch.targetMatchIndex + tokenMatch.targetMatch[0].length);\r\n                if (new RegExp(validator).test(part.join(\"\")) === false && tokenMatch.targetMatch[0].length === 2 && maskset.validPositions[tokenMatch.targetMatchIndex] && maskset.validPositions[tokenMatch.targetMatchIndex + 1]) {\r\n                    maskset.validPositions[tokenMatch.targetMatchIndex + 1].input = \"0\";\r\n                }\r\n                if (fcode[2] == \"year\") {\r\n                    var _buffer = getMaskTemplate.call(inputmask, false, 1, undefined, true);\r\n                    for (let i = pos + 1; i < buffer.length; i++) {\r\n                        buffer[i] = _buffer[i];\r\n                        delete maskset.validPositions[i];\r\n                    }\r\n                }\r\n            }\r\n\r\n            var result = currentResult, dateParts = analyseMask(buffer.join(\"\"), opts.inputFormat, opts);\r\n            if (result && !isNaN(dateParts.date.getTime())) { //check for a valid date ~ an invalid date returns NaN which isn't equal\r\n                if (opts.prefillYear) result = prefillYear(dateParts, result, opts);\r\n                result = isValidDate.call(inputmask, dateParts, result, opts);\r\n                result = isDateInRange(dateParts, result, opts, maskset, fromCheckval);\r\n            }\r\n\r\n            if (pos !== undefined && result && currentResult.pos !== pos) {\r\n                return {\r\n                    buffer: parse(opts.inputFormat, dateParts, opts).split(\"\"),\r\n                    refreshFromBuffer: {start: pos, end: currentResult.pos},\r\n                    pos: currentResult.caret || currentResult.pos //correct caret position\r\n                };\r\n            }\r\n\r\n            return result;\r\n        },\r\n        onKeyDown: function (e, buffer, caretPos, opts) {\r\n            var input = this;\r\n            if (e.ctrlKey && e.key === keys.ArrowRight) {\r\n                input.inputmask._valueSet(importDate(new Date(), opts));\r\n                $(input).trigger(\"setvalue\");\r\n            }\r\n        },\r\n        onUnMask: function (maskedValue, unmaskedValue, opts) {\r\n            return unmaskedValue ? parse(opts.outputFormat, analyseMask(maskedValue, opts.inputFormat, opts), opts, true) : unmaskedValue;\r\n        },\r\n        casing: function (elem, test, pos, validPositions) {\r\n            if (test.nativeDef.indexOf(\"[ap]\") == 0) return elem.toLowerCase();\r\n            if (test.nativeDef.indexOf(\"[AP]\") == 0) return elem.toUpperCase();\r\n            return elem;\r\n        },\r\n        onBeforeMask: function (initialValue, opts) {\r\n            if (Object.prototype.toString.call(initialValue) === \"[object Date]\") {\r\n                initialValue = importDate(initialValue, opts);\r\n            }\r\n\r\n            return initialValue;\r\n        },\r\n        insertMode: false,\r\n        insertModeVisual: false,\r\n        shiftPositions: false,\r\n        keepStatic: false,\r\n        inputmode: \"numeric\",\r\n        prefillYear: true //Allows to disable prefill for datetime year.\r\n    }\r\n});\r\n","/*\r\n Input Mask plugin extensions\r\n http://github.com/RobinHerbots/jquery.inputmask\r\n Copyright (c) Robin Herbots\r\n Licensed under the MIT license\r\n */\r\nimport Inputmask from \"../inputmask\";\r\nimport escapeRegex from \"../escapeRegex\";\r\nimport {seekNext} from \"../positioning\";\r\nimport {keys} from \"../keycode\";\r\n\r\nconst $ = Inputmask.dependencyLib;\r\n\r\nfunction autoEscape(txt, opts) {\r\n\tvar escapedTxt = \"\";\r\n\tfor (var i = 0; i < txt.length; i++) {\r\n\t\tif (Inputmask.prototype.definitions[txt.charAt(i)] ||\r\n\t\t\topts.definitions[txt.charAt(i)] ||\r\n\t\t\topts.optionalmarker[0] === txt.charAt(i) ||\r\n\t\t\topts.optionalmarker[1] === txt.charAt(i) ||\r\n\t\t\topts.quantifiermarker[0] === txt.charAt(i) ||\r\n\t\t\topts.quantifiermarker[1] === txt.charAt(i) ||\r\n\t\t\topts.groupmarker[0] === txt.charAt(i) ||\r\n\t\t\topts.groupmarker[1] === txt.charAt(i) ||\r\n\t\t\topts.alternatormarker === txt.charAt(i)) {\r\n\t\t\tescapedTxt += \"\\\\\" + txt.charAt(i);\r\n\t\t} else {\r\n\t\t\tescapedTxt += txt.charAt(i);\r\n\t\t}\r\n\t}\r\n\treturn escapedTxt;\r\n}\r\n\r\nfunction alignDigits(buffer, digits, opts, force) {\r\n\tif (buffer.length > 0 && digits > 0 && (!opts.digitsOptional || force)) {\r\n\t\tvar radixPosition = buffer.indexOf(opts.radixPoint), negationBack = false;\r\n\t\tif (opts.negationSymbol.back === buffer[buffer.length - 1]) {\r\n\t\t\tnegationBack = true;\r\n\t\t\tbuffer.length--;\r\n\t\t}\r\n\r\n\t\tif (radixPosition === -1) {\r\n\t\t\tbuffer.push(opts.radixPoint);\r\n\t\t\tradixPosition = buffer.length - 1;\r\n\t\t}\r\n\t\tfor (var i = 1; i <= digits; i++) {\r\n\t\t\tif (!isFinite(buffer[radixPosition + i])) {\r\n\t\t\t\tbuffer[radixPosition + i] = \"0\";\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif (negationBack)\r\n\t\tbuffer.push(opts.negationSymbol.back);\r\n\treturn buffer;\r\n}\r\n\r\nfunction findValidator(symbol, maskset) {\r\n\tvar posNdx = 0;\r\n\tif (symbol === \"+\") {\r\n\t\tposNdx = seekNext.call(this, maskset.validPositions.length - 1);\r\n\t}\r\n\tfor (var tstNdx in maskset.tests) {\r\n\t\ttstNdx = parseInt(tstNdx);\r\n\t\tif (tstNdx >= posNdx) {\r\n\t\t\tfor (var ndx = 0, ndxl = maskset.tests[tstNdx].length; ndx < ndxl; ndx++) {\r\n\t\t\t\tif ((maskset.validPositions[tstNdx] === undefined || symbol === \"-\") && maskset.tests[tstNdx][ndx].match.def === symbol) {\r\n\t\t\t\t\treturn tstNdx + ((maskset.validPositions[tstNdx] !== undefined && symbol !== \"-\") ? 1 : 0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn posNdx;\r\n}\r\n\r\nfunction findValid(symbol, maskset) {\r\n\tvar ret = -1;\r\n\tfor (let ndx = 0, vpl = maskset.validPositions.length; ndx < vpl; ndx++) {\r\n\t\tlet tst = maskset.validPositions[ndx];\r\n\t\tif (tst && tst.match.def === symbol) {\r\n\t\t\tret = ndx;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\treturn ret;\r\n}\r\n\r\nfunction parseMinMaxOptions(opts) {\r\n\tif (opts.parseMinMaxOptions === undefined) {\r\n\t\t// convert min and max options\r\n\t\tif (opts.min !== null) {\r\n\t\t\topts.min = opts.min.toString().replace(new RegExp(escapeRegex(opts.groupSeparator), \"g\"), \"\");\r\n\t\t\tif (opts.radixPoint === \",\") opts.min = opts.min.replace(opts.radixPoint, \".\");\r\n\t\t\topts.min = isFinite(opts.min) ? parseFloat(opts.min) : NaN;\r\n\t\t\tif (isNaN(opts.min)) opts.min = Number.MIN_VALUE;\r\n\t\t}\r\n\t\tif (opts.max !== null) {\r\n\t\t\topts.max = opts.max.toString().replace(new RegExp(escapeRegex(opts.groupSeparator), \"g\"), \"\");\r\n\t\t\tif (opts.radixPoint === \",\") opts.max = opts.max.replace(opts.radixPoint, \".\");\r\n\t\t\topts.max = isFinite(opts.max) ? parseFloat(opts.max) : NaN;\r\n\t\t\tif (isNaN(opts.max)) opts.max = Number.MAX_VALUE;\r\n\t\t}\r\n\t\topts.parseMinMaxOptions = \"done\";\r\n\t}\r\n}\r\n\r\nfunction genMask(opts) {\r\n\topts.repeat = 0;\r\n\t//treat equal separator and radixpoint\r\n\tif (opts.groupSeparator === opts.radixPoint && opts.digits && opts.digits !== \"0\") {\r\n\t\tif (opts.radixPoint === \".\") {\r\n\t\t\topts.groupSeparator = \",\";\r\n\t\t} else if (opts.radixPoint === \",\") {\r\n\t\t\topts.groupSeparator = \".\";\r\n\t\t} else {\r\n\t\t\topts.groupSeparator = \"\";\r\n\t\t}\r\n\t}\r\n\t//prevent conflict with default skipOptionalPartCharacter\r\n\tif (opts.groupSeparator === \" \") {\r\n\t\topts.skipOptionalPartCharacter = undefined;\r\n\t}\r\n\r\n\t//enforce placeholder to single\r\n\tif (opts.placeholder.length > 1) {\r\n\t\topts.placeholder = opts.placeholder.charAt(0);\r\n\t}\r\n\t//only allow radixfocus when placeholder = 0\r\n\tif (opts.positionCaretOnClick === \"radixFocus\" && opts.placeholder === \"\") {\r\n\t\topts.positionCaretOnClick = \"lvp\";\r\n\t}\r\n\r\n\tvar decimalDef = \"0\", radixPointDef = opts.radixPoint;\r\n\tif (opts.numericInput === true && opts.__financeInput === undefined) { //finance people input style\r\n\t\tdecimalDef = \"1\";\r\n\t\topts.positionCaretOnClick = opts.positionCaretOnClick === \"radixFocus\" ? \"lvp\" : opts.positionCaretOnClick;\r\n\t\topts.digitsOptional = false;\r\n\t\tif (isNaN(opts.digits)) opts.digits = 2;\r\n\t\topts._radixDance = false;\r\n\t\tradixPointDef = (opts.radixPoint === \",\" ? \"?\" : \"!\");\r\n\t\tif (opts.radixPoint !== \"\" && opts.definitions[radixPointDef] === undefined) {\r\n\t\t\t//update separator definition\r\n\t\t\topts.definitions[radixPointDef] = {};\r\n\t\t\topts.definitions[radixPointDef].validator = \"[\" + opts.radixPoint + \"]\";\r\n\t\t\topts.definitions[radixPointDef].placeholder = opts.radixPoint;\r\n\t\t\topts.definitions[radixPointDef].static = true;\r\n\t\t\topts.definitions[radixPointDef].generated = true; //forced marker as generated input\r\n\t\t}\r\n\t} else {\r\n\t\topts.__financeInput = false; //needed to keep original selection when remasking\r\n\t\topts.numericInput = true;\r\n\t}\r\n\r\n\tvar mask = \"[+]\", altMask;\r\n\tmask += autoEscape(opts.prefix, opts);\r\n\tif (opts.groupSeparator !== \"\") {\r\n\t\tif (opts.definitions[opts.groupSeparator] === undefined) {\r\n\t\t\t//update separatot definition\r\n\t\t\topts.definitions[opts.groupSeparator] = {};\r\n\t\t\topts.definitions[opts.groupSeparator].validator = \"[\" + opts.groupSeparator + \"]\";\r\n\t\t\topts.definitions[opts.groupSeparator].placeholder = opts.groupSeparator;\r\n\t\t\topts.definitions[opts.groupSeparator].static = true;\r\n\t\t\topts.definitions[opts.groupSeparator].generated = true; //forced marker as generated input\r\n\t\t}\r\n\t\tmask += opts._mask(opts);\r\n\t} else {\r\n\t\tmask += \"9{+}\";\r\n\t}\r\n\tif (opts.digits !== undefined && opts.digits !== 0) {\r\n\t\tvar dq = opts.digits.toString().split(\",\");\r\n\t\tif (isFinite(dq[0]) && dq[1] && isFinite(dq[1])) {\r\n\t\t\tmask += radixPointDef + decimalDef + \"{\" + opts.digits + \"}\";\r\n\t\t} else if (isNaN(opts.digits) || parseInt(opts.digits) > 0) {\r\n\t\t\tif (opts.digitsOptional || opts.jitMasking) {\r\n\t\t\t\taltMask = mask + radixPointDef + decimalDef + \"{0,\" + opts.digits + \"}\";\r\n\t\t\t\t// mask += \"[\" + opts.radixPoint + \"]\";\r\n\t\t\t\topts.keepStatic = true;\r\n\t\t\t} else {\r\n\t\t\t\tmask += radixPointDef + decimalDef + \"{\" + opts.digits + \"}\";\r\n\t\t\t}\r\n\t\t}\r\n\t} else {\r\n\t\topts.inputmode = \"numeric\";\r\n\t}\r\n\tmask += autoEscape(opts.suffix, opts);\r\n\tmask += \"[-]\";\r\n\r\n\tif (altMask) {\r\n\t\tmask = [(altMask + autoEscape(opts.suffix, opts) + \"[-]\"), mask];\r\n\t}\r\n\r\n\r\n\topts.greedy = false; //enforce greedy false\r\n\r\n\tparseMinMaxOptions(opts);\r\n\tif (opts.radixPoint !== \"\" && opts.substituteRadixPoint)\r\n\t\topts.substitutes[opts.radixPoint == \".\" ? \",\" : \".\"] = opts.radixPoint;\r\n\t// console.log(mask);\r\n\treturn mask;\r\n}\r\n\r\nfunction hanndleRadixDance(pos, c, radixPos, maskset, opts) {\r\n\tif (opts._radixDance && opts.numericInput && c !== opts.negationSymbol.back) {\r\n\t\tif (pos <= radixPos && (radixPos > 0 || c == opts.radixPoint) && (maskset.validPositions[pos - 1] === undefined || maskset.validPositions[pos - 1].input !== opts.negationSymbol.back)) {\r\n\t\t\tpos -= 1;\r\n\t\t}\r\n\t}\r\n\treturn pos;\r\n}\r\n\r\nfunction decimalValidator(chrs, maskset, pos, strict, opts) {\r\n\tvar radixPos = maskset.buffer ? maskset.buffer.indexOf(opts.radixPoint) : -1,\r\n\t\tresult = (radixPos !== -1 || (strict && opts.jitMasking)) && new RegExp(opts.definitions[\"9\"].validator).test(chrs);\r\n\tif (opts._radixDance && radixPos !== -1 && result && maskset.validPositions[radixPos] == undefined) {\r\n\t\treturn {\r\n\t\t\tinsert: {\r\n\t\t\t\tpos: radixPos === pos ? radixPos + 1 : radixPos,\r\n\t\t\t\tc: opts.radixPoint\r\n\t\t\t},\r\n\t\t\tpos: pos\r\n\t\t};\r\n\t}\r\n\r\n\treturn result;\r\n}\r\n\r\nfunction checkForLeadingZeroes(buffer, opts) {\r\n\t//check leading zeros\r\n\tvar numberMatches = new RegExp(\"(^\" + (opts.negationSymbol.front !== \"\" ? escapeRegex(opts.negationSymbol.front) + \"?\" : \"\") + escapeRegex(opts.prefix) + \")(.*)(\" + escapeRegex(opts.suffix) + (opts.negationSymbol.back != \"\" ? escapeRegex(opts.negationSymbol.back) + \"?\" : \"\") + \"$)\").exec(buffer.slice().reverse().join(\"\")),\r\n\t\tnumber = numberMatches ? numberMatches[2] : \"\", leadingzeroes = false;\r\n\tif (number) {\r\n\t\tnumber = number.split(opts.radixPoint.charAt(0))[0];\r\n\t\tleadingzeroes = new RegExp(\"^[0\" + opts.groupSeparator + \"]*\").exec(number);\r\n\t}\r\n\treturn leadingzeroes && (leadingzeroes[0].length > 1 || leadingzeroes[0].length > 0 && leadingzeroes[0].length < number.length) ? leadingzeroes : false;\r\n}\r\n\r\n//number aliases\r\nInputmask.extendAliases({\r\n\t\"numeric\": {\r\n\t\tmask: genMask,\r\n\t\t_mask: function (opts) {\r\n\t\t\treturn \"(\" + opts.groupSeparator + \"999){+|1}\";\r\n\t\t},\r\n\t\tdigits: \"*\", //number of fractionalDigits\r\n\t\tdigitsOptional: true,\r\n\t\tenforceDigitsOnBlur: false,\r\n\t\tradixPoint: \".\",\r\n\t\tpositionCaretOnClick: \"radixFocus\",\r\n\t\t_radixDance: true,\r\n\t\tgroupSeparator: \"\",\r\n\t\tallowMinus: true,\r\n\t\tnegationSymbol: {\r\n\t\t\tfront: \"-\", //\"(\"\r\n\t\t\tback: \"\" //\")\"\r\n\t\t},\r\n\t\tprefix: \"\",\r\n\t\tsuffix: \"\",\r\n\t\tmin: null, //minimum value\r\n\t\tmax: null, //maximum value\r\n\t\tSetMaxOnOverflow: false,\r\n\t\tstep: 1,\r\n\t\tinputType: \"text\", //number ~ specify that values which are set are in textform (radix point  is same as in the options) or in numberform (radixpoint = .)\r\n\t\tunmaskAsNumber: false,\r\n\t\troundingFN: Math.round, //Math.floor ,  fn(x)\r\n\t\tinputmode: \"decimal\",\r\n\t\tshortcuts: {k: \"1000\", m: \"1000000\"},\r\n\t\t//global options\r\n\t\tplaceholder: \"0\",\r\n\t\tgreedy: false,\r\n\t\trightAlign: true,\r\n\t\tinsertMode: true,\r\n\t\tautoUnmask: false,\r\n\t\tskipOptionalPartCharacter: \"\",\r\n\t\tusePrototypeDefinitions: false,\r\n\t\tstripLeadingZeroes: true,\r\n\t\tsubstituteRadixPoint: true,\r\n\t\tdefinitions: {\r\n\t\t\t\"0\": {\r\n\t\t\t\tvalidator: decimalValidator\r\n\t\t\t},\r\n\t\t\t\"1\": {\r\n\t\t\t\tvalidator: decimalValidator,\r\n\t\t\t\tdefinitionSymbol: \"9\"\r\n\t\t\t},\r\n\t\t\t\"9\": { //\\uFF11-\\uFF19 #1606\r\n\t\t\t\tvalidator: \"[0-9\\uFF10-\\uFF19\\u0660-\\u0669\\u06F0-\\u06F9]\",\r\n\t\t\t\tdefinitionSymbol: \"*\"\r\n\t\t\t},\r\n\t\t\t\"+\": {\r\n\t\t\t\tvalidator: function (chrs, maskset, pos, strict, opts) {\r\n\t\t\t\t\treturn (opts.allowMinus && (chrs === \"-\" || chrs === opts.negationSymbol.front));\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\"-\": {\r\n\t\t\t\tvalidator: function (chrs, maskset, pos, strict, opts) {\r\n\t\t\t\t\treturn (opts.allowMinus && chrs === opts.negationSymbol.back);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tpreValidation: function (buffer, pos, c, isSelection, opts, maskset, caretPos, strict) {\r\n\t\t\tconst inputmask = this;\r\n\r\n\t\t\tif (opts.__financeInput !== false && c === opts.radixPoint) return false;\r\n\t\t\tvar radixPos = buffer.indexOf(opts.radixPoint), initPos = pos;\r\n\t\t\tpos = hanndleRadixDance(pos, c, radixPos, maskset, opts);\r\n\t\t\tif (c === \"-\" || c === opts.negationSymbol.front) {\r\n\t\t\t\tif (opts.allowMinus !== true) return false;\r\n\t\t\t\tvar isNegative = false,\r\n\t\t\t\t\tfront = findValid(\"+\", maskset), back = findValid(\"-\", maskset);\r\n\t\t\t\tif (front !== -1) {\r\n\t\t\t\t\tisNegative = [front, back];\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn isNegative !== false ? {\r\n\t\t\t\t\tremove: isNegative,\r\n\t\t\t\t\tcaret: initPos - opts.negationSymbol.back.length\r\n\t\t\t\t} : {\r\n\t\t\t\t\tinsert: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tpos: findValidator.call(inputmask, \"+\", maskset),\r\n\t\t\t\t\t\t\tc: opts.negationSymbol.front,\r\n\t\t\t\t\t\t\tfromIsValid: true\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tpos: findValidator.call(inputmask, \"-\", maskset),\r\n\t\t\t\t\t\t\tc: opts.negationSymbol.back,\r\n\t\t\t\t\t\t\tfromIsValid: undefined\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\tcaret: initPos + opts.negationSymbol.back.length\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif (c === opts.groupSeparator) {\r\n\t\t\t\treturn {caret: initPos};\r\n\t\t\t}\r\n\r\n\t\t\tif (strict) return true;\r\n\t\t\tif (radixPos !== -1 && (opts._radixDance === true && isSelection === false && c === opts.radixPoint && (opts.digits !== undefined && (isNaN(opts.digits) || parseInt(opts.digits) > 0)) && radixPos !== pos)) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t\"caret\": opts._radixDance && pos === radixPos - 1 ? radixPos + 1 : radixPos\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tif (opts.__financeInput === false) {\r\n\t\t\t\tif (isSelection) {\r\n\t\t\t\t\tif (opts.digitsOptional) {\r\n\t\t\t\t\t\treturn {rewritePosition: caretPos.end};\r\n\t\t\t\t\t} else if (!opts.digitsOptional) {\r\n\t\t\t\t\t\tif (caretPos.begin > radixPos && caretPos.end <= radixPos) {\r\n\t\t\t\t\t\t\tif (c === opts.radixPoint) {\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\tinsert: {pos: radixPos + 1, c: \"0\", fromIsValid: true},\r\n\t\t\t\t\t\t\t\t\trewritePosition: radixPos\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn {rewritePosition: radixPos + 1};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (caretPos.begin < radixPos) {\r\n\t\t\t\t\t\t\treturn {rewritePosition: caretPos.begin - 1};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (!opts.showMaskOnHover && !opts.showMaskOnFocus && !opts.digitsOptional && opts.digits > 0 && this.__valueGet.call(this.el) === \"\") {\r\n\t\t\t\t\treturn {rewritePosition: radixPos};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn {rewritePosition: pos};\r\n\t\t},\r\n\t\tpostValidation: function (buffer, pos, c, currentResult, opts, maskset, strict) {\r\n\t\t\tif (currentResult === false) return currentResult;\r\n\t\t\tif (strict) return true;\r\n\t\t\tif (opts.min !== null || opts.max !== null) {\r\n\t\t\t\tvar unmasked = opts.onUnMask(buffer.slice().reverse().join(\"\"), undefined, $.extend({}, opts, {\r\n\t\t\t\t\tunmaskAsNumber: true\r\n\t\t\t\t}));\r\n\t\t\t\tif (opts.min !== null && unmasked < opts.min && (unmasked.toString().length > opts.min.toString().length || unmasked < 0)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t\t// return {\r\n\t\t\t\t\t// \trefreshFromBuffer: true,\r\n\t\t\t\t\t// \tbuffer: alignDigits(opts.min.toString().replace(\".\", opts.radixPoint).split(\"\"), opts.digits, opts).reverse()\r\n\t\t\t\t\t// };\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (opts.max !== null && unmasked > opts.max) {\r\n\t\t\t\t\treturn opts.SetMaxOnOverflow ? {\r\n\t\t\t\t\t\trefreshFromBuffer: true,\r\n\t\t\t\t\t\tbuffer: alignDigits(opts.max.toString().replace(\".\", opts.radixPoint).split(\"\"), opts.digits, opts).reverse()\r\n\t\t\t\t\t} : false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn currentResult;\r\n\t\t},\r\n\t\tonUnMask: function (maskedValue, unmaskedValue, opts) {\r\n\t\t\tif (unmaskedValue === \"\" && opts.nullable === true) {\r\n\t\t\t\treturn unmaskedValue;\r\n\t\t\t}\r\n\t\t\tvar processValue = maskedValue.replace(opts.prefix, \"\");\r\n\t\t\tprocessValue = processValue.replace(opts.suffix, \"\");\r\n\t\t\tprocessValue = processValue.replace(new RegExp(escapeRegex(opts.groupSeparator), \"g\"), \"\");\r\n\t\t\tif (opts.placeholder.charAt(0) !== \"\") {\r\n\t\t\t\tprocessValue = processValue.replace(new RegExp(opts.placeholder.charAt(0), \"g\"), \"0\");\r\n\t\t\t}\r\n\t\t\tif (opts.unmaskAsNumber) {\r\n\t\t\t\tif (opts.radixPoint !== \"\" && processValue.indexOf(opts.radixPoint) !== -1) processValue = processValue.replace(escapeRegex.call(this, opts.radixPoint), \".\");\r\n\t\t\t\tprocessValue = processValue.replace(new RegExp(\"^\" + escapeRegex(opts.negationSymbol.front)), \"-\");\r\n\t\t\t\tprocessValue = processValue.replace(new RegExp(escapeRegex(opts.negationSymbol.back) + \"$\"), \"\");\r\n\t\t\t\treturn Number(processValue);\r\n\t\t\t}\r\n\t\t\treturn processValue;\r\n\t\t}\r\n\t\t,\r\n\t\tisComplete: function (buffer, opts) {\r\n\t\t\tvar maskedValue = (opts.numericInput ? buffer.slice().reverse() : buffer).join(\"\");\r\n\t\t\tmaskedValue = maskedValue.replace(new RegExp(\"^\" + escapeRegex(opts.negationSymbol.front)), \"-\");\r\n\t\t\tmaskedValue = maskedValue.replace(new RegExp(escapeRegex(opts.negationSymbol.back) + \"$\"), \"\");\r\n\t\t\tmaskedValue = maskedValue.replace(opts.prefix, \"\");\r\n\t\t\tmaskedValue = maskedValue.replace(opts.suffix, \"\");\r\n\t\t\tmaskedValue = maskedValue.replace(new RegExp(escapeRegex(opts.groupSeparator) + \"([0-9]{3})\", \"g\"), \"$1\");\r\n\t\t\tif (opts.radixPoint === \",\") maskedValue = maskedValue.replace(escapeRegex(opts.radixPoint), \".\");\r\n\t\t\treturn isFinite(maskedValue);\r\n\t\t},\r\n\t\tonBeforeMask: function (initialValue, opts) {\r\n\t\t\tvar radixPoint = opts.radixPoint || \",\";\r\n\t\t\tif (isFinite(opts.digits)) opts.digits = parseInt(opts.digits);\r\n\r\n\t\t\tif ((typeof initialValue == \"number\" || opts.inputType === \"number\") && radixPoint !== \"\") {\r\n\t\t\t\tinitialValue = initialValue.toString().replace(\".\", radixPoint);\r\n\t\t\t}\r\n\t\t\tvar isNagtive = initialValue.charAt(0) === \"-\" || initialValue.charAt(0) === opts.negationSymbol.front;\r\n\t\t\tvar valueParts = initialValue.split(radixPoint),\r\n\t\t\t\tintegerPart = valueParts[0].replace(/[^\\-0-9]/g, \"\"),\r\n\t\t\t\tdecimalPart = valueParts.length > 1 ? valueParts[1].replace(/[^0-9]/g, \"\") : \"\",\r\n\t\t\t\tforceDigits = valueParts.length > 1;\r\n\r\n\t\t\tinitialValue = integerPart + (decimalPart !== \"\" ? radixPoint + decimalPart : decimalPart);\r\n\r\n\t\t\tvar digits = 0;\r\n\t\t\tif (radixPoint !== \"\") {\r\n\t\t\t\tdigits = !opts.digitsOptional ? opts.digits : (opts.digits < decimalPart.length ? opts.digits : decimalPart.length);\r\n\t\t\t\tif (decimalPart !== \"\" || !opts.digitsOptional) {\r\n\t\t\t\t\tvar digitsFactor = Math.pow(10, digits || 1);\r\n\r\n\t\t\t\t\t//make the initialValue a valid javascript number for the parsefloat\r\n\t\t\t\t\tinitialValue = initialValue.replace(escapeRegex(radixPoint), \".\");\r\n\t\t\t\t\tif (!isNaN(parseFloat(initialValue))) {\r\n\t\t\t\t\t\tinitialValue = (opts.roundingFN(parseFloat(initialValue) * digitsFactor) / digitsFactor).toFixed(digits);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinitialValue = initialValue.toString().replace(\".\", radixPoint);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//this needs to be in a separate part and not directly in decimalPart to allow rounding\r\n\t\t\tif (opts.digits === 0 && initialValue.indexOf(radixPoint) !== -1) {\r\n\t\t\t\tinitialValue = initialValue.substring(0, initialValue.indexOf(radixPoint));\r\n\t\t\t}\r\n\r\n\t\t\tif (opts.min !== null || opts.max !== null) {\r\n\t\t\t\tvar numberValue = initialValue.toString().replace(radixPoint, \".\");\r\n\t\t\t\tif (opts.min !== null && numberValue < opts.min) {\r\n\t\t\t\t\tinitialValue = opts.min.toString().replace(\".\", radixPoint);\r\n\t\t\t\t} else if (opts.max !== null && numberValue > opts.max) {\r\n\t\t\t\t\tinitialValue = opts.max.toString().replace(\".\", radixPoint);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (isNagtive && initialValue.charAt(0) !== \"-\") {\r\n\t\t\t\tinitialValue = \"-\" + initialValue;\r\n\t\t\t}\r\n\t\t\treturn alignDigits(initialValue.toString().split(\"\"), digits, opts, forceDigits).join(\"\");\r\n\t\t}\r\n\t\t,\r\n\t\tonBeforeWrite: function (e, buffer, caretPos, opts) {\r\n\t\t\tfunction stripBuffer(buffer, stripRadix) {\r\n\t\t\t\tif (opts.__financeInput !== false || stripRadix) {\r\n\t\t\t\t\tvar position = buffer.indexOf(opts.radixPoint);\r\n\t\t\t\t\tif (position !== -1) {\r\n\t\t\t\t\t\tbuffer.splice(position, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (opts.groupSeparator !== \"\") {\r\n\t\t\t\t\twhile ((position = buffer.indexOf(opts.groupSeparator)) !== -1) {\r\n\t\t\t\t\t\tbuffer.splice(position, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn buffer;\r\n\t\t\t}\r\n\r\n\t\t\tlet result, leadingzeroes;\r\n\t\t\tif (opts.stripLeadingZeroes && (leadingzeroes = checkForLeadingZeroes(buffer, opts))) {\r\n\t\t\t\tconst caretNdx = buffer.join(\"\").lastIndexOf(leadingzeroes[0].split(\"\").reverse().join(\"\")) - (leadingzeroes[0] == leadingzeroes.input ? 0 : 1),\r\n\t\t\t\t\toffset = (leadingzeroes[0] == leadingzeroes.input ? 1 : 0);\r\n\t\t\t\tfor (let i = leadingzeroes[0].length - offset; i > 0; i--) {\r\n\t\t\t\t\tdelete this.maskset.validPositions[caretNdx + i];\r\n\t\t\t\t\tdelete buffer[caretNdx + i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (e) {\r\n\t\t\t\tswitch (e.type) {\r\n\t\t\t\t\tcase \"blur\":\r\n\t\t\t\t\tcase \"checkval\":\r\n\t\t\t\t\t\tif (opts.min !== null) {\r\n\t\t\t\t\t\t\tvar unmasked = opts.onUnMask(buffer.slice().reverse().join(\"\"), undefined, $.extend({}, opts, {\r\n\t\t\t\t\t\t\t\tunmaskAsNumber: true\r\n\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\tif (opts.min !== null && unmasked < opts.min) {\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\trefreshFromBuffer: true,\r\n\t\t\t\t\t\t\t\t\tbuffer: alignDigits(opts.min.toString().replace(\".\", opts.radixPoint).split(\"\"), opts.digits, opts).reverse()\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (buffer[buffer.length - 1] === opts.negationSymbol.front) {  //strip negation symbol on blur when value is 0\r\n\t\t\t\t\t\t\tvar nmbrMtchs = new RegExp(\"(^\" + (opts.negationSymbol.front != \"\" ? escapeRegex(opts.negationSymbol.front) + \"?\" : \"\") + escapeRegex(opts.prefix) + \")(.*)(\" + escapeRegex(opts.suffix) + (opts.negationSymbol.back != \"\" ? escapeRegex(opts.negationSymbol.back) + \"?\" : \"\") + \"$)\").exec(stripBuffer(buffer.slice(), true).reverse().join(\"\")),\r\n\t\t\t\t\t\t\t\tnumber = nmbrMtchs ? nmbrMtchs[2] : \"\";\r\n\t\t\t\t\t\t\tif (number == 0) {\r\n\t\t\t\t\t\t\t\tresult = {refreshFromBuffer: true, buffer: [0]};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (opts.radixPoint !== \"\") { //strip radixpoint on blur when it is the latest char\r\n\t\t\t\t\t\t\tvar radixNDX = buffer.indexOf(opts.radixPoint);\r\n\t\t\t\t\t\t\tif (radixNDX === opts.suffix.length) {\r\n\t\t\t\t\t\t\t\tif (result && result.buffer) {\r\n\t\t\t\t\t\t\t\t\tresult.buffer.splice(0, 1 + opts.suffix.length);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tbuffer.splice(0, 1 + opts.suffix.length);\r\n\t\t\t\t\t\t\t\t\tresult =\r\n\t\t\t\t\t\t\t\t\t\t{refreshFromBuffer: true, buffer: stripBuffer(buffer)};\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (opts.enforceDigitsOnBlur) {\r\n\t\t\t\t\t\t\tresult = result || {};\r\n\t\t\t\t\t\t\tvar bffr = (result && result.buffer) || buffer.slice().reverse();\r\n\t\t\t\t\t\t\tresult.refreshFromBuffer = true;\r\n\t\t\t\t\t\t\tresult.buffer = alignDigits(bffr, opts.digits, opts, true).reverse();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tonKeyDown: function (e, buffer, caretPos, opts) {\r\n\t\t\tvar $input = $(this), bffr;\r\n\t\t\tif (e.location != 3) {\r\n\t\t\t\tvar pattern, c = e.key;\r\n\t\t\t\tif ((pattern = (opts.shortcuts && opts.shortcuts[c]))) {\r\n\t\t\t\t\tif (pattern.length > 1) {\r\n\t\t\t\t\t\tthis.inputmask.__valueSet.call(this, parseFloat(this.inputmask.unmaskedvalue()) * parseInt(pattern));\r\n\t\t\t\t\t\t$input.trigger(\"setvalue\");\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (e.ctrlKey) {\r\n\t\t\t\tswitch (e.key) {\r\n\t\t\t\t\tcase keys.ArrowUp:\r\n\t\t\t\t\t\tthis.inputmask.__valueSet.call(this, parseFloat(this.inputmask.unmaskedvalue()) + parseInt(opts.step));\r\n\t\t\t\t\t\t$input.trigger(\"setvalue\");\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\tcase keys.ArrowDown:\r\n\t\t\t\t\t\tthis.inputmask.__valueSet.call(this, parseFloat(this.inputmask.unmaskedvalue()) - parseInt(opts.step));\r\n\t\t\t\t\t\t$input.trigger(\"setvalue\");\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!e.shiftKey && (e.key === keys.Delete || e.key === keys.Backspace || e.key === keys.BACKSPACE_SAFARI) && caretPos.begin !== buffer.length) {\r\n\t\t\t\tif (buffer[e.key === keys.Delete ? caretPos.begin - 1 : caretPos.end] === opts.negationSymbol.front) {\r\n\t\t\t\t\tbffr = buffer.slice().reverse();\r\n\t\t\t\t\tif (opts.negationSymbol.front !== \"\") bffr.shift();\r\n\t\t\t\t\tif (opts.negationSymbol.back !== \"\") bffr.pop();\r\n\t\t\t\t\t$input.trigger(\"setvalue\", [bffr.join(\"\"), caretPos.begin]);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else if (opts._radixDance === true) {\r\n\t\t\t\t\tvar radixPos = buffer.indexOf(opts.radixPoint);\r\n\t\t\t\t\tif (!opts.digitsOptional) {\r\n\t\t\t\t\t\tif (radixPos !== -1 && (caretPos.begin < radixPos || caretPos.end < radixPos || (e.key === keys.Delete && (caretPos.begin === radixPos || caretPos.begin - 1 === radixPos)))) {\r\n\t\t\t\t\t\t\tvar restoreCaretPos = undefined;\r\n\t\t\t\t\t\t\tif (caretPos.begin === caretPos.end) { //only adjust when not a selection\r\n\t\t\t\t\t\t\t\tif (e.key === keys.Backspace || e.key === keys.BACKSPACE_SAFARI)\r\n\t\t\t\t\t\t\t\t\tcaretPos.begin++;\r\n\t\t\t\t\t\t\t\telse if (e.key === keys.Delete && caretPos.begin - 1 === radixPos) {\r\n\t\t\t\t\t\t\t\t\trestoreCaretPos = $.extend({}, caretPos);\r\n\t\t\t\t\t\t\t\t\tcaretPos.begin--;\r\n\t\t\t\t\t\t\t\t\tcaretPos.end--;\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbffr = buffer.slice().reverse();\r\n\t\t\t\t\t\t\tbffr.splice(bffr.length - caretPos.begin, caretPos.begin - caretPos.end + 1);\r\n\t\t\t\t\t\t\t// console.log(caretPos);\r\n\t\t\t\t\t\t\tbffr = alignDigits(bffr, opts.digits, opts).join(\"\");\r\n\t\t\t\t\t\t\tif (restoreCaretPos) {\r\n\t\t\t\t\t\t\t\tcaretPos = restoreCaretPos;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t$input.trigger(\"setvalue\", [bffr, caretPos.begin >= bffr.length ? radixPos + 1 : caretPos.begin]);\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (radixPos === 0) {\r\n\t\t\t\t\t\tbffr = buffer.slice().reverse();\r\n\t\t\t\t\t\tbffr.pop();\r\n\t\t\t\t\t\t$input.trigger(\"setvalue\", [bffr.join(\"\"), caretPos.begin >= bffr.length ? bffr.length : caretPos.begin]);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\"currency\": {\r\n\t\tprefix: \"\", //\"$ \",\r\n\t\tgroupSeparator: \",\",\r\n\t\talias: \"numeric\",\r\n\t\tdigits: 2,\r\n\t\tdigitsOptional: false\r\n\t},\r\n\t\"decimal\": {\r\n\t\talias: \"numeric\"\r\n\t},\r\n\t\"integer\": {\r\n\t\talias: \"numeric\",\r\n\t\tinputmode: \"numeric\",\r\n\t\tdigits: 0\r\n\t},\r\n\t\"percentage\": {\r\n\t\talias: \"numeric\",\r\n\t\tmin: 0,\r\n\t\tmax: 100,\r\n\t\tsuffix: \" %\",\r\n\t\tdigits: 0,\r\n\t\tallowMinus: false\r\n\t},\r\n\t\"indianns\": { //indian numbering system\r\n\t\talias: \"numeric\",\r\n\t\t_mask: function (opts) {\r\n\t\t\treturn \"(\" + opts.groupSeparator + \"99){*|1}(\" + opts.groupSeparator + \"999){1|1}\";\r\n\t\t},\r\n\t\tgroupSeparator: \",\",\r\n\t\tradixPoint: \".\",\r\n\t\tplaceholder: \"0\",\r\n\t\tdigits: 2,\r\n\t\tdigitsOptional: false\r\n\t}\r\n});\r\n","import window from \"./global/window\";\r\nimport Inputmask from \"./inputmask\";\r\nimport canUseDOM from \"./canUseDOM\";\r\n\r\nconst document = window.document;\r\n\r\n// add check if it is supported by the browser\r\n// integrate shadowroot into maskcope\r\nif (canUseDOM && document && document.head && document.head.attachShadow && window.customElements && window.customElements.get(\"input-mask\") === undefined) {\r\n\tclass InputmaskElement extends HTMLElement {\r\n\t\tconstructor() {\r\n\t\t\tsuper();\r\n\t\t\tvar attributeNames = this.getAttributeNames(),\r\n\t\t\t\tshadow = this.attachShadow({mode: \"closed\"}),\r\n\t\t\t\tinput = document.createElement(\"input\");\r\n\t\t\tinput.type = \"text\";\r\n\t\t\tshadow.appendChild(input);\r\n\r\n\t\t\tfor (var attr in attributeNames) {\r\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(attributeNames, attr)) {\r\n\t\t\t\t\tinput.setAttribute(attributeNames[attr], this.getAttribute(attributeNames[attr]));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar im = new Inputmask();\r\n\t\t\tim.dataAttribute = \"\";\r\n\t\t\tim.mask(input);\r\n\t\t\tinput.inputmask.shadowRoot = shadow; //make the shadowRoot available\r\n\t\t}\r\n\t}\r\n\r\n\twindow.customElements.define(\"input-mask\", InputmaskElement);\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import \"./lib/polyfills/Object.getPrototypeOf\";\r\nimport \"./lib/polyfills/Array.includes\";\r\nimport \"./lib/polyfills/Object.entries\";\r\nimport \"./lib/polyfills/String.includes\";\r\n\r\nimport \"./lib/extensions/inputmask.extensions\";\r\nimport \"./lib/extensions/inputmask.date.extensions\";\r\nimport \"./lib/extensions/inputmask.numeric.extensions\";\r\nimport \"./lib/inputmaskElement\";\r\nimport Inputmask from \"./lib/inputmask\";\r\nexport default Inputmask;"],"names":["Object","getPrototypeOf","__proto__","object","constructor","prototype","Array","includes","defineProperty","value","searchElement","fromIndex","TypeError","o","len","length","n","k","Math","max","abs","reduce","Function","bind","call","isEnumerable","propertyIsEnumerable","concat","keys","entries","O","e","String","search","start","indexOf","Inputmask","extendDefinitions","validator","casing","ipValidatorRegex","RegExp","ipValidator","chrs","maskset","pos","strict","opts","buffer","test","extendAliases","regex","autoUnmask","keepStatic","tabThrough","mask","definitions","onUnMask","maskedValue","unmaskedValue","inputmode","substitutes","separator","quantifier","emailMask","i","greedy","skipOptionalPartCharacter","onBeforePaste","pastedValue","toLowerCase","replace","clearIncomplete","postValidation","c","currentResult","bffr","getMaskTemplate","getLastValidPosition","join","document","window","dataKey","alias","options","internal","canUseDOM","dependencyLib","$","el","undefined","events","toString","extend","defaults","noMasksCache","userOptions","resolveAlias","refreshValue","undoValue","$el","skipInputEvent","validationEvent","ignorable","maxLength","mouseEnter","clicked","originalPlaceholder","isComposing","hasAlternator","dataAttribute","aliases","masksCache","isRTL","numericInput","elems","that","getElementById","querySelectorAll","nodeName","isArray","slice","forEach","ndx","scopedOpts","importAttributeOptions","generateMaskSet","inputmask","remove","data","option","noremask","unmaskedvalue","valueBuffer","onBeforeMask","split","checkVal","onBeforeWrite","getBuffer","cv","_valueGet","getBufferTemplate","_valueSet","EventRuler","off","valueProperty","getOwnPropertyDescriptor","__valueGet","get","set","__valueSet","configurable","__lookupGetter__","__defineGetter__","__defineSetter__","getemptymask","reverse","hasMaskedValue","isComplete","getmetadata","metadata","maskTarget","mtdt","isValid","rl","determineLastRequiredPosition","lmib","isMask","splice","format","formattedValue","setValue","trigger","analyseMask","aliasStr","aliasDefinition","npt","importOption","optionData","attrOption","getAttribute","importDataAttributes","attrOptions","dataoptions","p","JSON","parse","dir","rightAlign","style","textAlign","removeAttribute","extendDefaults","definition","unmask","isElementTypeSupported","input","patchValueProperty","valueGet","valueSet","patchValhook","type","valHooks","inputmaskpatch","valhookGet","elem","valhookSet","result","validPositions","nullable","applyInputValue","getter","shadowRoot","ownerDocument","activeElement","clearMaskOnLostFocus","clearOptionalTail","setter","installNativeValueSetFallback","on","bufferValue","noValuePatching","tagName","textContent","__lookupSetter__","overruleRTL","ignorables","push","Enter","elementType","isSupported","supportsInputType","isContentEditable","createElement","setAttribute","placeholder","inputMode","showMaskOnFocus","autocomplete","iphone","insertModeVisual","EventHandlers","submitEvent","resetEvent","blurEvent","focusEvent","invalidEvent","clickEvent","mouseleaveEvent","mouseenterEvent","pasteEvent","cutEvent","oncomplete","onincomplete","oncleared","inputEventOnly","keyEvent","mobile","inputFallBackEvent","setValueEvent","resetMaskSet","writeBuffer","caret","seekNext","keyCode","keyCodeRev","acc","key","toKey","shiftKey","fromCharCode","toKeyCode","begin","end","notranslate","isDelete","range","translatePosition","scrollCalc","parseInt","defaultView","getComputedStyle","currentStyle","fontSize","scrollLeft","scrollWidth","caretPos","insertMode","setSelectionRange","getSelection","createRange","firstChild","textNode","createTextNode","appendChild","setStart","setEnd","collapse","sel","removeAllRanges","addRange","createTextRange","moveEnd","moveStart","select","selectionStart","selectionEnd","getRangeAt","commonAncestorContainer","parentNode","startOffset","endOffset","selection","duplicate","text","returnDefinition","bl","lvp","positions","lvTest","ndxIntlzr","locator","testPos","getTestTemplate","lvTestAlt","alternation","match","optionality","optionalQuantifier","newBlockMarker","checkAlternationMatch","getTests","def","getPlaceholder","determineNewCaretPosition","selectedCaret","tabbed","positionCaretOnClick","doRadixFocus","clickPos","radixPoint","digits","vps","radixPos","vp","vpl","clickPosition","lvclickPosition","lastPosition","tt","newPos","noCache","_buffer","closestTo","before","after","valids","psNdx","generatedInput","fuzzy","getTest","fn","tests","testTemplate","determineTestTemplate","testPlaceHolder","soft","newBlock","position","seekPrevious","getLocator","tst","align","mloc","getDecisionTaker","decisionTaker","returnPL","staticAlternations","prevTest","charAt","baseOnInput","minimalPos","includeMode","noJit","maskTemplate","jitRenderStatic","nativeDef","jitMasking","jit","groupSeparator","isFinite","pop","maskLength","tstPs","lenghtOffset","optionalityLevel","determineOptionalityLevel","altTest","targetLocator","tstLocator","closest","bestMatch","distance","differentOptionalLevels","isSubsetOf","source","target","expand","pattern","expanded","l","charCodeAt","maskTokens","maskToken","ndxInitializer","matches","insertStop","latestMatch","cacheDependency","resolveTestFromToken","loopNdx","quantifierRecurse","handleMatch","isFirstMatch","tokenGroup","firstMatch","every","isQuantifier","hasOwnProperty","resolveNdxInitializer","alternateNdx","targetAlternation","indexPos","lmnt","ndxPos","bestMatchAltIndex","staticCanMatchDefinition","setMergeLocators","targetMatch","altMatch","alternationNdx","shouldMerge","locNdx","isSameLevel","handleGroup","handleOptional","optionalToken","mtchsNdx","mtch","handleAlternator","alternateToken","malternateMatches","maltMatches","currentMatches","loopNdxCnt","unMatchedAlternation","altIndex","shift","currentPos","ndxInitializerClone","altIndexArr","amndx","excludes","altIndexArrClone","exl","excludeSet","tokenMatch","ndx1","dropMatch","ndx2","altMatch2","handleQuantifier","qt","breakloop","qndx","isNaN","IsMatchOf","min","jitOffset","_maxTestPos","optional","isGroup","isOptional","isAlternator","tndx","isMatch","mergeLocators","previousPos","cd","mtndx","t","defOptionality","alternate","maskPos","fromIsValid","rAltPos","validPsClone","tstClone","lastAlt","isValidRslt","returnRslt","altPos","prevAltPos","validPos","decisionPos","lAltPos","nextPos","validInputs","resultPos","toUpperCase","posBefore","Space","args","arguments","apply","altArr1","altArr2","na","altArrC","naArr","naNdx","alndx","handleRemove","Backspace","Delete","pend","offset","revalidateMask","repeat","complete","lrp","aml","isSelection","posObj","insertModeOffset","fromAlternate","validateOnly","fromCheckval","processCommandObject","commandObj","sort","a","b","insert","refreshFromBuffer","refresh","rewritePosition","_isValid","rslt","validatedPos","positionsClone","preValidation","currentPosValid","skip","nPos","snPos","trackbackPositions","postResult","endResult","positionCanMatchDefinition","testDefinition","valid","shiftPositions","keypress","Event","valResult","keypressEvent","forwardPosition","originalPos","fillOnly","ps","np","cvpInput","validTest","IsEnclosedStatic","posMatch","prevMatch","nextMatch","j","canMatch","checkval","writeOut","$input","kdResult","onKeyDown","BACKSPACE_SAFARI","ctrlKey","x","preventDefault","End","PageDown","Home","PageUp","undoOnEscape","Escape","z","altKey","Insert","Tab","ArrowRight","setTimeout","ArrowLeft","Process","Unidentified","metaKey","writeOutBuffer","onKeyValidation","inputValue","tempValue","valueBeforeCaret","substr","valueAfterCaret","clipboardData","getData","pasteValue","analyseChanges","frontPart","backPart","frontBufferPart","backBufferPart","fpl","bpl","action","marker","unshift","newBuffer","oldBuffer","changes","focus","skipNextInsert","inputType","entry","keydown","detail","nptValue","positionCaretOnTab","HandleNativePlaceholder","newCaretPosition","clipData","clipDataText","navigator","clipboard","writeText","setData","showMaskOnHover","bufferTemplate","removeMaskOnSubmit","ua","userAgent","ie","userAgentData","maxTouchPoints","template","nptvl","initiatingEvent","charCodes","initialNdx","isTemplateMatch","targetTemplate","charCodeNdx","__financeInput","staticMatches","prevCaretPos","charCode","sndx","nextValid","nextSndx","umValue","pndx","event","triggerEvents","nptVal","eventName","eventHandler","ev","originalEvent","imOpts","disabled","readOnly","blur","validationEventTimeOut","returnVal","stopPropagation","form","evArr","DependencyLib","querySelector","eventRegistry","name","src","copy","copyIsArray","clone","deep","owner","__data","isValidElement","Element","CustomEvent","params","bubbles","cancelable","composed","evt","createEvent","initCustomEvent","handler","addEvent","namespace","addEventListener","attachEvent","removeEvent","removeEventListener","detachEvent","nmsp","resolveNamespace","evts","hndx","hndL","evNdx","ev1","handler1","namespace1","_events","endx","nsEvent","evnt","InputEvent","dispatchEvent","createEventObject","eventType","fireEvent","registry","handlers","values","flat","nocache","ms","preProcessMask","groupmarker","quantifiermarker","repeatStart","optionalRegex","maskMatches","m","p1","p2","escapeRegex","generateMask","regexMask","masksetDefinition","maskdefKey","altMask","msk","alternatormarker","tokenizer","regexTokenizer","escaped","currentToken","MaskToken","openenings","openingToken","currentOpeningToken","alternator","lastMatch","closeRegexGroup","insertTestDefinition","mtoken","element","flag","staticDefinitionSymbol","maskdef","usePrototypeDefinitions","definitionSymbol","generated","verifyGroupMarker","token","nextToken","openGroup","defaultCase","mndx","reverseTokens","reverseStatic","st","optionalmarker","intMatch","groupify","groupToken","closeGroup","altMatchesLength","alternatorGroup","groupQuantifier","exec","altRegexGroup","escapeChar","mqj","mq","mq0","mq1","mqJit","subToken","escapeRegexRegex","str","_radixDance","Pause","ArrowUp","ArrowDown","ContextMenu","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","Shift","Control","Alt","AltGraph","CapsLock","DateObject","_date","Date","initDateObject","getTokenizer","lastIndex","dynMatches","fcode","getTokenMatch","index","formatCode","dateObj","targetProp","dateOperation","datavalue","day","month","year","setFullYear","useDateObject","pad","date","currentYear","getFullYear","d","setDate","getDate","dd","ddd","dddd","val","mval","setMonth","getMonth","mm","mmm","mmmm","yy","yyyy","h","setHours","getHours","hh","hx","H","HH","Hx","M","setMinutes","getMinutes","MM","s","setSeconds","getSeconds","ss","setMilliseconds","getMilliseconds","L","setAMPM","getAMPM","T","TT","Z","getTimeZoneAbbreviated","S","formatAlias","isoDate","isoTime","isoDateTime","isoUtcDateTime","hours","tz","map","first","formatcode","tokens","dyntokens","dynToken","prefillYear","dateParts","rawyear","crrntyear","enteredPart","currentYearPart","currentYearNextPart","entryCurrentYear","getTime","isValidDate","rawday","rawmonth","targetMatchIndex","isDateInRange","reset","inputFormat","setFn","current","minVal","maxVal","curVal","forceCurrentValue","reInit","dateObjValue","raw","getFn","right","importDate","calcPos","matchLength","i18n","ordinalSuffix","displayFormat","outputFormat","dayNames","monthNames","part","initialValue","autoEscape","txt","escapedTxt","alignDigits","force","digitsOptional","radixPosition","negationBack","negationSymbol","back","findValidator","symbol","posNdx","tstNdx","ndxl","findValid","ret","parseMinMaxOptions","parseFloat","NaN","Number","MIN_VALUE","MAX_VALUE","genMask","decimalDef","radixPointDef","prefix","_mask","dq","suffix","substituteRadixPoint","hanndleRadixDance","decimalValidator","checkForLeadingZeroes","numberMatches","front","number","leadingzeroes","enforceDigitsOnBlur","allowMinus","SetMaxOnOverflow","step","unmaskAsNumber","roundingFN","round","shortcuts","stripLeadingZeroes","initPos","isNegative","unmasked","processValue","isNagtive","valueParts","integerPart","decimalPart","forceDigits","digitsFactor","pow","toFixed","substring","numberValue","stripBuffer","stripRadix","caretNdx","lastIndexOf","nmbrMtchs","radixNDX","location","restoreCaretPos","head","attachShadow","customElements","InputmaskElement","attributeNames","getAttributeNames","shadow","mode","attr","im","HTMLElement","define"],"sourceRoot":""}